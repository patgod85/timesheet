(function(){"use strict";var e={"0.js":"app","1.js":"basis.ui","2.js":"basis.l10n","3.js":"basis.event","4.js":"basis.data","5.js":"basis.dom.wrapper","6.js":"basis.template","7.js":"basis.template.html","8.js":"basis.dom.event","9.js":"basis.template.htmlfgen","a.js":"basis.net.ajax","b.js":"basis.ua","c.js":"basis.net","d.js":"basis.router","e.js":"basis.ui.button","f.js":"basis.dom","g.js":"basis.ui.calendar","h.js":"basis.date","i.js":"basis.ui.field","j.js":"basis.data.value","k.js":"basis.ui.popup","l.js":"basis.cssom","m.js":"basis.layout","n.js":"basis.dom.computedStyle","o.js":"basis.entity","p.js":"basis.data.dataset","q.js":"basis.net.service","r.js":"basis.net.action","s.js":"basis.ui.tree","t.js":"basis.ui.form"},t={"0.css":"","k.tmpl":[[1,0,["element"],"a",[4,[["","nodePeriodName",0,["day","month","year","decade","quarter"]],["","selected",0],["","disabled",0],["","before",0],["","after",0]],0,"Basis-Calendar-Node"],[6,"click"],[3,1,["title"]]]],"d.tmpl":[[1,0,["element"],"div",[1,0,0,"h3",[3,0,0,"EmployeeEntity form"]],[1,1,["childNodesElement"],"div"],[1,0,0,"div",[8,1,["submitButton"]]]]],"c.tmpl":[[1,0,["element"],"div",[1,0,0,"h3",[3,0,0,"TeamEntity form"]],[1,1,["childNodesElement"],"div"],[1,0,0,"div",[8,1,["submitButton"]]]]],"1l.tmpl":[[1,0,["element"],"div",[4,[["","disabled",0]],0,"Basis-FormContent"]]],"1k.tmpl":[[1,1,["form","element"],"form",[4,[["","disabled",0]],0,"Basis-Form"],[2,[["method"],[0]],0,"method"],[2,[["action"],[0]],0,"action"],[2,[["target"],[0]],0,"target"],[2,[["enctype"],[0]],0,"enctype"],[6,"submit","validate"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-FormContent"]]]],"1j.tmpl":[[1,0,["element"],"li",[4,0,0,"Basis-TreeNode"],[1,1,["content"],"div",[4,[["","selected",0]],0,"Basis-TreeNode-Title Basis-TreeNode-CanHaveChildren"],[1,0,0,"div",[4,[["Basis-TreeNode_Expander__","collapsed",0]],0,"Basis-TreeNode_Expander"],[6,"click","toggle"]],[1,0,0,"span",[4,[["Basis-TreeNode-FolderCaption_","collapsed",0],["Basis-TreeNode-Caption__","disabled",0],["Basis-TreeNode-Caption__","selected",0]],0,"Basis-TreeNode-Caption Basis-TreeNode-FolderCaption"],[6,"click","select"],[3,1,["title"]]]],[1,1,["childNodesElement"],"ul",[4,[["Basis-TreeNode-Content__","collapsed",0]],0,"Basis-TreeNode-Content"]]]],"1i.tmpl":[[1,0,["element"],"li",[4,0,0,"Basis-TreeNode"],[1,1,["content"],"div",[4,[["","selected",0]],0,"Basis-TreeNode-Title"],[1,0,0,"span",[4,[["Basis-TreeNode-Caption__","disabled",0],["Basis-TreeNode-Caption__","selected",0]],0,"Basis-TreeNode-Caption"],[6,"click","select"],[3,1,["title"]]]]]],"1h.tmpl":[[1,0,["element"],"li",[4,0,0,"Basis-TreePartitionNode"],[1,0,0,"div",[4,0,0,"Basis-TreePartitionNode-Title"],[1,0,0,"span",[3,1,["title"]]]],[1,1,["childNodesElement"],"ul",[4,0,0,"Basis-TreePartitionNode-Content"]]]],"1g.tmpl":[[1,0,["element"],"ul",[4,[["","disabled",0]],0,"Basis-Tree"]]],"b.tmpl":[[1,0,["element"],"li",[4,0,0,"agenda_li"],[1,0,0,"span",[4,[["type_","id"]],0,"agenda_box"],[1,0,0,"span"]],[3,0,0," - "],[3,1,["name"]],[3,0,0," "],[1,0,0,"button",[6,"click","applyType"],[3,0,0,"apply for selected days"]]]],"a.tmpl":[[1,0,["element"],"div",[1,0,0,"h2",[3,0,0,"Agenda"]],[1,1,["childNodesElement"],"ul"]]],"9.tmpl":[[1,0,["element"],"div",[4,0,0,"team"],[1,0,0,"h1",[3,0,0,"TeamEntity "],[3,1,["code"]]],[8,1,["month"]],[1,1,["childNodesElement"],"div"]]],"8.tmpl":[[1,0,["element"],"div",[4,0,0,"employee"],[1,0,0,"div",[4,0,0,"name"],[3,1,["name"]]],[1,1,["childNodesElement"],"div"]]],"7.tmpl":[[1,0,["element"],"div",[4,[["","isActive"]],0],[1,0,0,"div",[4,0,0,"month_title"],[1,0,0,"p",[3,1,["name"]],[3,0,0," - "],[3,1,["year"]]],[1,0,0,"p",[3,0,0,"working scheme: 5/2"]],[1,0,0,"p",[3,0,0,"working days: "],[3,1,["workingDays"]]]],[1,0,0,"table",[4,0,0,"month"],[1,0,0,"tbody",[1,1,["childNodesElement"],"tr"]]]]],"e.tmpl":[[1,0,["element"],"button",[4,[["","selected",0],["","disabled",0]],0,"Basis-Button"],[2,[["disabled"],[0]],0,"disabled"],[6,"click"],[1,0,0,"span",[4,0,0,"Basis-Button-Back"]],[1,0,0,"span",[4,0,0,"Basis-Button-Caption"],[3,1,["caption"]]]]],"f.tmpl":[[1,0,["element"],"div",[4,[["","disabled",0]],0,"Basis-ButtonPanel"],[1,0,["childNodesElement","content"],"div",[4,0,0,"Basis-ButtonPanel-Content"]]]],"g.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-ButtonGroup"]]],"6.tmpl":[[1,0,["element"],"td",[4,[["","weekend"],["type_","type"],["","checked"]],0,"day"],[6,"click","dayClick"],[1,0,0,"span",[3,1,["title"]]]]],"5.tmpl":[[1,0,["element"],"div",[8,1,["loginStatus"]],[8,1,["loginForm"]]]],"4.tmpl":[[1,0,["element"],"p",[4,0,0,"auth_info"],[3,0,0,"You are currently logged in as "],[1,0,0,"span",[2,0,0,"id","username"],[3,1,["loggedInAs"]]],[3,0,0," "],[8,1,["logoutButton"]]]],"0.tmpl":[[1,0,["element"],"div",[2,0,0,"id","mylist"],[1,0,0,"h2",[3,0,0,"Teams"]],[1,1,["childNodesElement"],"ul"]]],"1.tmpl":[[1,0,["element"],"li",[3,1,["name"]],[3,0,0," "],[1,0,0,"button",[6,"click","selectTeam"],[3,0,0,"details"]]]],"3.tmpl":[[1,0,["element"],"div",[4,0,0,"login-form"],[1,0,0,"p",[4,0,0,"lead"],[3,0,0,"Say something worthwhile here."]],[8,1,["username"]],[8,1,["password"]],[8,1,["button"]]]],"1f.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","file"],[4,0,0,"native-type-file"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,"change"]]],"1e.tmpl":[[1,0,["field","focus","childNodesElement","element"],"select",[4,[["","disabled",0],["","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Select indeterminate"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[2,[["multiple"],[0]],0,"multiple"],[6,"change"],[6,"keyup"],[6,"keypress"],[6,"keydown"],[6,"focus"],[6,"blur"]]],"h.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],["","disabled",0]],0,"Basis-Calendar"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Header"],[1,1,["sectionTabs"],"div",[4,0,0,"Basis-Calendar-SectionTabs"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Body"],[1,0,0,"span",[6,"click","movePrev"],[4,0,0,"Basis-Calendar-ButtonPrevPeriod"],[1,0,0,"span",[3,0,0,"‹"]]],[1,0,0,"span",[6,"click","moveNext"],[4,0,0,"Basis-Calendar-ButtonNextPeriod"],[1,0,0,"span",[3,0,0,"›"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-Content"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer-Date"],[1,0,0,"span",[4,0,0,"Basis-Calendar-Footer-Label"],[3,"l10n:today@0.l10n",0],[3,0,0,":"]],[1,0,0,"span",[6,"click","selectToday"],[4,0,0,"Basis-Calendar-Footer-Value"],[3,1,["today"]]]]]]],"i.tmpl":[[1,0,["element"],"div",[4,[["Basis-Calendar-Section-","sectionName",0,["Month","Year","YearDecade","Century","YearQuarter","Quarter"]],["","selected",0],["","disabled",0]],0,"Basis-Calendar-Section"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],[3,1,["title"]]],[1,1,["childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"]]],[1,1,["tabElement"],"div",[4,[["","selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click","select"],[3,1,["tabTitle"]]]],"j.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],["","disabled",0]],0,"Basis-Calendar-Section Basis-Calendar-Section-Month"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],[3,1,["title"]],[3,0,0," "],[3,1,["year"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"],[1,0,0,"div",[4,0,0,"Basis-Calendar-MonthWeekDays"],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.mon@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.tue@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.wed@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.thr@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.fri@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.sat@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.sun@0.l10n",0]]]]],[1,1,["tabElement"],"div",[4,[["","selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click","select"],[3,1,["tabTitle"]]]],"10.tmpl":[[1,0,["element"],"label",[4,[["","selected",0],["","disabled",0]],0,"Basis-RadioGroup-Item"],[6,"click","select"],[1,0,["field","focus"],"input",[2,0,0,"type","radio"],[4,0,0,"native-type-radio"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,1,["content"],"span",[3,1,["title"]]]]],"2.tmpl":[[1,0,["element"],"div",[1,0,0,"div",[2,0,0,"id","sidebar"],[8,1,["calendar"]]],[1,0,0,"div",[4,0,0,"float_left"],[8,1,["buttonPublicHolidays"]]],[1,0,0,"div",[4,0,0,"float_left"],[8,1,["buttonAdmin"]]],[1,0,0,"div",[2,0,0,"id","content"],[8,1,["teamsList"]]]]],"1d.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","radio"],[4,0,0,"native-type-radio"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]]],"1c.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["checked"],[0]],0,"checked"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["indeterminate"],[0]],0,"indeterminate"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]]],"1b.tmpl":[[1,0,["field","focus","element"],"textarea",[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup","keyup updateSymbolsLeft"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change","change updateSymbolsLeft"],[6,"input","input updateSymbolsLeft"]]],"1a.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","password"],[4,0,0,"native-type-password"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],"19.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","text"],[4,0,0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],"18.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate Basis-MatchInput"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","text"],[4,0,0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"17.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",0,["v-left-top","v-right-top","v-center-top","v-left-center","v-right-center","v-center-center","v-left-bottom","v-right-bottom","v-center-bottom","h-left-top","h-right-top","h-center-top","h-left-center","h-right-center","h-center-center","h-left-bottom","h-right-bottom","h-center-bottom"]],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Popup hidden Basis-DropdownList-Popup"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]]],"l.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",0,["v-left-top","v-right-top","v-center-top","v-left-center","v-right-center","v-center-center","v-left-bottom","v-right-bottom","v-center-bottom","h-left-top","h-right-top","h-center-top","h-left-center","h-right-center","h-center-center","h-left-bottom","h-right-bottom","h-center-bottom"]],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Popup hidden"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]]],"m.tmpl":[[1,0,["element"],"div",[4,[["mode-","orientation",0,["v-left-top","v-right-top","v-center-top","v-left-center","v-right-center","v-center-center","v-left-bottom","v-right-bottom","v-center-bottom","h-left-top","h-right-top","h-center-top","h-left-center","h-right-center","h-center-center","h-left-bottom","h-right-bottom","h-center-bottom"]],["","anim:visible",2,["visible","hidden"]],["","selected",0],["","disabled",0]],0,"Basis-Balloon hidden"],[6,"click"],[1,0,0,"div",[4,0,0,"Basis-Balloon-Canvas"],[1,0,0,"div",[4,0,0,"corner-left-top"]],[1,0,0,"div",[4,0,0,"corner-right-top"]],[1,0,0,"div",[4,0,0,"side-top"]],[1,0,0,"div",[4,0,0,"side-left"]],[1,0,0,"div",[4,0,0,"side-right"]],[1,0,0,"div",[4,0,0,"content"]],[1,0,0,"div",[4,0,0,"corner-left-bottom"]],[1,0,0,"div",[4,0,0,"corner-right-bottom"]],[1,0,0,"div",[4,0,0,"side-bottom"]],[1,0,0,"div",[4,0,0,"tail"]]],[1,0,0,"div",[4,0,0,"Basis-Balloon-Layout"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Balloon-Content"]]]]],"n.tmpl":[[1,0,["element"],"div",[2,0,0,"id","Basis-PopupStack"],[4,[["","hasChildren",0]],0]]],"o.tmpl":[[1,0,["element"],"span",[4,0,0,"Basis-Field-Sample"],[3,1,["example"]]]],"p.tmpl":[[1,0,["element"],"span",[4,0,0,"Basis-Field-Description"],[3,1,["description"]]]],"q.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-Field-LengthCounter"],[3,"l10n:symbolsLeft@1.l10n",0],[3,0,0,": "],[3,1,["availChars"]]]],"r.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[8,1,["fieldPlace"]]],[8,1,["description"]],[8,1,["example"]]]],"s.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","file"],[4,0,0,"native-type-file"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,"change"]]],[8,1,["description"]],[8,1,["example"]]]],"t.tmpl":[[1,1,["field","element"],"input",[2,0,0,"type","hidden"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[6,"change"]]],"u.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","text"],[4,0,0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"v.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","password"],[4,0,0,"native-type-password"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"w.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"textarea",[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup","keyup updateSymbolsLeft"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change","change updateSymbolsLeft"],[6,"input","input updateSymbolsLeft"]],[8,1,["counter"]]],[8,1,["description"]],[8,1,["example"]]]],"x.tmpl":[[1,0,["element"],"div",[4,[["","disabled",0],["","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field-Checkbox indeterminate"],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,0,"label",[1,0,["field","focus"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["checked"],[0]],0,"checked"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["indeterminate"],[0]],0,"indeterminate"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,0,0,"span",[3,1,["titleText"]]]]]]],"y.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate Basis-Field-Label"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,1,["field"],"label",[3,1,["value"]]]],[8,1,["description"]],[8,1,["example"]]]],"z.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","childNodesElement"],"div",[4,0,0,"Basis-RadioGroup"]]],[8,1,["description"]],[8,1,["example"]]]],"16.tmpl":[[1,0,["element"],"div",[4,[["","selected",0],["","disabled",0]],0,"Basis-Combobox-Item"],[6,"click","select"],[3,1,["title"]]]],"11.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","childNodesElement"],"div",[4,0,0,"Basis-CheckGroup"]]],[8,1,["description"]],[8,1,["example"]]]],"12.tmpl":[[1,0,["element"],"label",[4,[["","selected",0],["","disabled",0]],0,"Basis-CheckGroup-Item"],[6,"click","select"],[1,0,["field","focus"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["checked"],[0]],0,"checked"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["indeterminate"],[0]],0,"indeterminate"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,1,["content"],"span",[3,1,["title"]]]]],"13.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus","childNodesElement"],"select",[4,[["","disabled",0],["","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Select indeterminate"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[2,[["multiple"],[0]],0,"multiple"],[6,"change"],[6,"keyup"],[6,"keypress"],[6,"keydown"],[6,"focus"],[6,"blur"]]],[8,1,["description"]],[8,1,["example"]]]],"14.tmpl":[[1,1,["field","element"],"option",[4,0,0,"Basis-Select-Item"],[2,[["value"],[0]],0,"value"],[2,[["selected"],[0]],0,"selected"],[2,[["disabled"],[0]],0,"disabled"],[3,1,["title"]]]],"15.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",0],["","focused",0],["Basis-Field__","validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field__indeterminate"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["title"],"span",[3,1,["titleText"]]]]],[1,"content",0,"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"span",[4,[["Basis-DropdownList-","opened",0],["","disabled",0]],0,"Basis-DropdownList"],[6,"click","togglePopup"],[6,"keyup"],[6,"keydown"],[6,"keypressed"],[6,"focus"],[6,"blur"],[2,0,0,"tabindex","0"],[1,0,0,"span",[4,0,0,"Basis-DropdownList-Caption"],[8,1,["captionItem"]]],[1,0,0,"span",[4,0,0,"Basis-DropdownList-Trigger"]],[8,1,["hiddenField"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-DropdownList-PopupContent"]]],[8,1,["description"]],[8,1,["example"]]]],"0.l10n":{"en-US":{quarter:"Quarter",today:"Today",selected:"Selected",month:{jan:"January",feb:"February",mar:"March",apr:"April",may:"May",jun:"June",jul:"July",aug:"August",sep:"September",oct:"October",nov:"November",dec:"December"},monthShort:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"},day:{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thr:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},day2:{mon:"Mo",tue:"Tu",wed:"We",thr:"Th",fri:"Fr",sat:"Sa",sun:"Su"},day3:{mon:"Mon",tue:"Tue",wed:"Wed",thr:"Thr",fri:"Fri",sat:"Sat",sun:"Sun"}},"ru-RU":{quarter:"Квартал",today:"Сегодня",selected:"Выбрано",month:{jan:"Январь",feb:"Февраль",mar:"Март",apr:"Апрель",may:"Май",jun:"Июнь",jul:"Июль",aug:"Август",sep:"Сентябрь",oct:"Октябрь",nov:"Ноябрь",dec:"Декабрь"},monthShort:{jan:"Янв",feb:"Фев",mar:"Мар",apr:"Апр",may:"Май",jun:"Июн",jul:"Июл",aug:"Авг",sep:"Сен",oct:"Окт",nov:"Ноя",dec:"Дек"},day:{mon:"Понедельник",tue:"Вторник",wed:"Среда",thr:"Четверг",fri:"Пятница",sat:"Суббота",sun:"Воскресенье"},day2:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Вс"},day3:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Вс"}},"uk-UA":{quarter:"Квартал",today:"Сьогодні",selected:"Вибрані",month:{jan:"Січня",feb:"Лютого",mar:"Березня",apr:"Квітня",may:"Травня",jun:"Червня",jul:"Липня",aug:"Серпня",sep:"Вересня",oct:"Жовтня",nov:"Листопада",dec:"Грудня"},monthShort:{jan:"Січ",feb:"Лют",mar:"Бер",apr:"Кві",may:"Тра",jun:"Чер",jul:"Лип",aug:"Сер",sep:"Вер",oct:"Жов",nov:"Лис",dec:"Гру"},day:{mon:"Понеділок",tue:"Вівторок",wed:"Середа",thr:"Четвер",fri:"П'ятниця",sat:"Субота",sun:"Неділя"},day2:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Нд"},day3:{mon:"Пн",tue:"Вт",wed:"Ср",thr:"Чт",fri:"Пт",sat:"Сб",sun:"Нд"}}},"1.l10n":{"en-US":{symbolsLeft:"Symbols left"},"ru-RU":{symbolsLeft:"Осталось символов"},"uk-UA":{symbolsLeft:"Залишилося символів"}},"2.l10n":{"en-US":{validator:{regExpWrongFormat:"The value has wrong format.",required:"The field is required and must have a value.",numberWrongFormat:"The value has wrong format of number.",currencyWrongFormat:"The value has wrong format of currency.",currencyMustBeGreaterZero:"The value must be greater than zero.",emailWrongFormat:"The value has a wrong format of e-mail.",urlWrongFormat:"The value has a wrong format of URL.",minLengthError:"The value must be longer than {0} symbols.",maxLengthError:"The value must be shorter than {0} symbols."}},"ru-RU":{validator:{regExpWrongFormat:"Значение имеет неверный формат.",required:"Поле не должно оставаться пустым.",numberWrongFormat:"Поле имеет неверный формат числа.",currencyWrongFormat:"Поле имеет неверный формат суммы.",currencyMustBeGreaterZero:"Сумма должна быть больше нуля.",emailWrongFormat:"Поле имеет неверный формат e-mail.",urlWrongFormat:"Поле имеет неверный формат URL.",minLengthError:"Значение не должно быть короче {0} символов.",maxLengthError:"Значение не должно быть длиннее {0} символов."}},"uk-UA":{validator:{regExpWrongFormat:"Значення має невірний формат.",required:"Поле не повинно бути пустим.",numberWrongFormat:"Поле має невірний формат числа.",currencyWrongFormat:"Поле має невірний формат суми.",currencyMustBeGreaterZero:"Сума повинна бути більше нуля.",emailWrongFormat:"Поле має невірний формат e-mail.",urlWrongFormat:"Поле має невірний формат URL.",minLengthError:"Значення не повинно бути коротше {0} символів.",maxLengthError:"Значення не має бути довшим {0} символів."}}},"17.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),t.exports=n.ui.Node.subclass({data:{day:null,title:"",weekend:!1,type:"",checked:!1},template:n.template.get("#7"),binding:{day:"data:day",title:"data:title",weekend:"data:weekend",type:"data:type",checked:function(e){return e.data.checked?"checked_day":""}},action:{dayClick:function(){this.data.checked=!this.data.checked,this.updateBind("checked")}}})},"1.js":function(e,t,n,r,i,s,o,u,a){function w(e,t){e.bindingId=b++;for(var r in t){var i=null,s=t[r];H&&s instanceof H||n.resource.isResource(s)?i={events:"satelliteChanged",getter:function(e,t){var n=typeof t=="function"?t:null,r=function(i){r=!1;if(n){t=n();if(t instanceof H==0)return;n=null}i.setSatellite(e,t)};return function(t){return r&&r(t),n||(t.satellite[e]?t.satellite[e].element:null)}}(r,s)}:s&&(typeof s=="string"?s=E.process(r,s):s.bindingBridge&&(s=n.fn.$const(s)),typeof s!="object"?i={getter:typeof s=="function"?s:n.getter(s)}:Array.isArray(s)?i={events:s[0],getter:n.getter(s[1])}:i={events:s.events,getter:n.getter(s.getter)}),e[r]=i}}function L(){return k.pop()||l.createDocumentFragment()}function A(e){var t=e.nodes;if(t)for(var n=t.length-1,r;r=t[n];n--)r.parentNode.insertBefore(r,r.nextSibling)}n.require("./2.js"),n.require("./4.js"),n.require("./5.js"),n.require("./6.js"),n.require("./7.js");var f=this.path,l=r.document,c=n.Class,h=n.event.create,p=n.template.html.Template,d=n.template.html.marker,v=n.template.TemplateSwitcher,m=n.dom.wrapper.Node,g=n.dom.wrapper.PartitionNode,y=n.dom.wrapper.GroupingNode,b=1,E=function(){var e={},t=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(t,n){e[t]||(e[t]=n)},process:function(n,r){var i,s=r.match(t);return s&&(i=e[s[1]],r=s[2]||n),i?i(r):r}}}();E.add("data",function(e){return{events:"update",getter:"data."+e}}),E.add("satellite",function(e){return{events:"satelliteChanged",getter:function(t){return t.satellite[e]?t.satellite[e].element:null}}});var S=c.customExtendProperty({state:{events:"stateChanged",getter:function(e){return String(e.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(e){return String(e.childNodesState)}},childCount:{events:"childNodesModified",getter:function(e){return e.childNodes?e.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(e){return!!e.firstChild}},empty:{events:"childNodesModified",getter:function(e){return!e.firstChild}}},w),x={attach:function(e,t,n){e.addHandler(t,n)},detach:function(e,t,n){e.removeHandler(t,n)}},T=c.extensibleProperty({select:function(e){if(this.isDisabled())return;this.contextSelection&&this.contextSelection.multiple?this.select(e.ctrlKey||e.metaKey):this.select()}}),N={"*":function(e){var t=this.templateSwitcher_;t&&t.ruleEvents&&t.ruleEvents[e.type]&&this.setTemplate(t.resolve(this))}},C=new p("<div/>"),k=[],O,M=function(e){return{template:C,emit_templateChanged:h("templateChanged"),templateSwitcher_:null,binding:S,action:T,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=L(),e.init.call(this)},postInit:function(){e.postInit.call(this);var t=this.template;if(t){var n=this.element;this.template=null,this.setTemplate(t),k.push(n),this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var e=this.element,t=this.tmpl,n=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,x),r;n.childNodesHere&&(n.childNodesElement=n.childNodesHere.parentNode,n.childNodesElement.insertPoint=n.childNodesHere),this.tmpl=n,this.element=n.element,this.childNodesElement=n.childNodesElement||n.element,r=this.childNodesElement.nodeType!=1,r&&(this.childNodesElement=l.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();var i=this;while(i.grouping)i=i.grouping;var s=i;for(var o=s.lastChild;o;o=o.previousSibling)o instanceof D?s.insertBefore(o,o.nextSibling):A(o);A(s.nullGroup)}else for(var u=this.lastChild;u;u=u.previousSibling)this.insertBefore(u,u.nextSibling);this instanceof D&&A(this);if(e&&e!==this.element&&e.nodeType!=11){var a=e&&e.parentNode;a&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(e,this.element),this.element.parentNode!==a&&a.replaceChild(this.element,e))}t&&this.emit_templateChanged()},setTemplate:function(e){var t=this.templateSwitcher_,n;e instanceof v&&(n=e,e=n.resolve(this)),e instanceof p==0&&(e=null);if(!e)return;n&&(this.templateSwitcher_=n,t||this.addHandler(N,this)),t&&t.resolve(this)!==e&&(this.templateSwitcher_=null,this.removeHandler(N,this));var r=this.tmpl,i=this.template;i!==e&&(this.template=e,this.templateSync(),i&&i.clearInstance(r))},updateBind:function(e){var t=this.binding[e],n=t&&t.getter;n&&this.tmpl&&this.tmpl.set(e,n(this))},templateAction:function(e,t){var n=this.action[e];n&&n.call(this,t)},focus:function(e){var t=this.tmpl?this.tmpl.focus||this.element:null;t&&(O&&(O=n.clearImmediate(O)),O=n.setImmediate(function(){try{t.focus(),e&&t.select()}catch(n){}}))},blur:function(){var e=this.tmpl?this.tmpl.focus||this.element:null;if(e)try{e.blur()}catch(t){}},destroy:function(){var t=this.template,n=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(N,this)),t.clearInstance(this.tmpl),e.destroy.call(this),this.tmpl=null,this.element=null,this.childNodesElement=null;var r=n&&n.parentNode;r&&r.nodeType==1&&r.removeChild(n)}}},_=function(e){return{insertBefore:function(t,n){t=e.insertBefore.call(this,t,n);var r=t.groupNode||this,i=r.childNodesElement||this.childNodesElement,s=t.nextSibling,o=s&&s.element.parentNode==i?s.element:null,u=t.element,a=o||i.insertPoint||null;return(u.parentNode!==i||u.nextSibling!==a)&&i.insertBefore(u,a),t},removeChild:function(t){e.removeChild.call(this,t);var n=t.element,r=n.parentNode;return r&&r.removeChild(n),t},clear:function(t){if(t){var n=this.firstChild;while(n){var r=n.element,i=r.parentNode;i&&i.removeChild(r),n=n.nextSibling}}e.clear.call(this,t)},setChildNodes:function(t,n){var r=l.createDocumentFragment(),i=this.grouping||this,s=i.childNodesElement;i.childNodesElement=r,e.setChildNodes.call(this,t,n),s.insertBefore(r,s.insertPoint||null),i.childNodesElement=s}}},D=c(g,M,{className:f+".PartitionNode",binding:{title:"data:"}}),P=c(y,_,{className:f+".GroupingNode",childClass:D,groupingClass:c.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(e){this.syncDomRefs(),y.prototype.emit_ownerChanged.call(this,e)},init:function(){this.element=this.childNodesElement=l.createDocumentFragment(),y.prototype.init.call(this)},syncDomRefs:function(){var e=this,t=this.owner,n=null;t&&(n=t.tmpl&&t.tmpl.groupsElement||t.childNodesElement);do e.element=e.childNodesElement=n;while(e=e.grouping)},destroy:function(){y.prototype.destroy.call(this),this.element=null,this.childNodesElement=null}}),H=c(m,M,_,{className:f+".Node",binding:{selected:{events:"select unselect",getter:function(e){return e.selected}},unselected:{events:"select unselect",getter:function(e){return!e.selected}},disabled:{events:"disable enable",getter:function(e){return e.isDisabled()}},enabled:{events:"disable enable",getter:function(e){return!e.isDisabled()}}},childClass:c.SELF,childFactory:function(e){return new this.childClass(e)},groupingClass:P}),B=H.subclass({className:f+".ShadowNodeList",emit_ownerChanged:function(e){H.prototype.emit_ownerChanged.call(this,e),this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(e){return e.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(e){this.appendChild(e.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:f+".ShadowNode",getElement:function(e){return e.element},templateSync:function(){H.prototype.templateSync.call(this);var e=this.getElement(this.delegate);e&&(e[d]=this.delegate.element[d],this.element=e)},listen:{delegate:{templateChanged:function(){var e=this.element,t=e.parentNode,n=this.getElement(this.delegate);n&&(n[d]=this.delegate.element[d]),this.element=n||this.tmpl.element,t&&t.replaceChild(this.element,e)}}}}});t.exports={BINDING_PRESET:E,Node:H,PartitionNode:D,GroupingNode:P,ShadowNodeList:B,ShadowNode:B.prototype.childClass}},"m.js":function(e,t,n,r,i,s,o,u,a){function p(e){var t=e.offsetParent||c;while(t&&t!==c&&h(t,"position")=="static")t=t.offsetParent;return t||c}function d(e){var t=0,n=0;if(e&&e.getBoundingClientRect){var i=e.getBoundingClientRect();n=-i.left,t=-i.top}else if(l.compatMode=="CSS1Compat")t=r.pageYOffset||c.scrollTop,n=r.pageXOffset||c.scrollLeft;else{var s=l.body;e!==s&&(t=s.scrollTop-s.clientTop,n=s.scrollLeft-s.clientLeft)}return{x:n,y:t}}function v(e,t){var n=0,r=0;if(e&&e.getBoundingClientRect){var i=e.getBoundingClientRect(),s=d(t);r=i.top+s.y,n=i.left+s.x}return{top:r,left:n}}function m(e,t){var n=0,r=0,i=0,s=0;if(e&&e.getBoundingClientRect){var o=e.getBoundingClientRect(),u=d(t);n=o.top+u.y,r=o.left+u.x,i=o.right+u.x,s=o.bottom+u.y}return{top:n,left:r,right:i,bottom:s,width:i-r,height:s-n}}function g(e,t){var n=v(e,t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=e.clientWidth,o=e.clientHeight;return{top:r,left:i,bottom:r+o,right:i+s,width:s,height:o}}n.require("./n.js");var f=this.path,l=r.document,c=l.documentElement,h=n.dom.computedStyle.get;t.exports={getOffsetParent:p,getTopLeftPoint:v,getBoundingRect:m,getViewportRect:g}},"l.js":function(e,t,n,r,i,s,o,u,a){function T(e,t){return O(t,!0).createRule(e)}function N(e,t){return e.getPropertyPriority?e.getPropertyPriority(t)==w:!1}function C(e){var t="genericRule-"+E++;e&&W(e).add(t);var n=T("."+t);return n.token=t,n}function k(e,t){var n=e.match(/^([^{]+)\{(.*)\}\s*$/);if(n){var r=n[1].trim().split(/\s*,\s*/);for(var i=0;i<r.length;i++)this.addRule(r[i],n[2]||null,t++);return t-1}}function L(e){try{e.cssRules||(e.cssRules=e.rules)}catch(t){}return e.insertRule||(e.insertRule=k),e.deleteRule||(e.deleteRule=e.removeRule),e}function A(e,t){var r=m.createElement(e?n.string.format('link[type="text/css"][rel="{alt}stylesheet"][href="{url}"]',{alt:t?"alternate ":"",url:e.replace(/\"/g,'\\"')}):'style[type="text/css"]');return n.doc.head.add(r),L(r.sheet||r.styleSheet)}function O(e,t){return e||(e="DefaultGenericStyleSheet"),S[e]||t&&(S[e]=new q(A())),S[e]}function P(e,t,n,r){r=r||{},t=t.split(" ");for(var i=0,s;s=t[i];i++)if(typeof M.style[s]!="undefined"){n&&(D["css-"+e]=s),_[e]={key:s,getter:r[s]};return}}function H(e,t){var n=_[e];return(e=n?n.key:d(e.replace(/^-ms-/,"ms-")))?{key:e,value:n&&n.getter?n.getter(t):t}:null}function B(e,t,n){var r=H(t,n);if(!r)return;var i=r.key,s=!!b.test(n),o=e.style;if(!s&&!N(o,t)){if(x)try{e.style[r.key]=r.value}catch(f){}else e.style[r.key]=r.value;return e.style[r.key]}r.value=r.value.replace(b,"");if(o.setProperty)s||o.removeProperty(i),o.setProperty(i,r.value,s?w:"");else{var u=i+": "+r.value+(s?" !"+w:"")+";",a=o[i]?i+"\\s*:\\s*"+o[i]+"(\\s*!"+w+")?\\s*;?":"^";try{o.cssText=o.cssText.replace(new RegExp(a,"i"),u)}catch(f){}}}function j(e,t){for(var n in t)B(e,n,t[n]);return e}function F(e,t){return B(e,"display",typeof t=="string"?t:t?"":"none")}function I(e,t){return B(e,"visibility",t?"":"hidden")}function U(e){return function(){for(var t=0,n;n=this.rules[t];t++)n[e].apply(n,arguments)}}function V(e){return X[e]||(X[e]=new RegExp("\\s*\\b"+e+"\\b"))}function K(e,t){var n=(t?"g":"s")+e;return J[n]||(J[n]=new RegExp((t?"":"\\s*")+"\\b"+e+"\\S*\\b"))}function Z(e){return function(t){return t==0||isNaN(t)?"0":t+e}}n.require("./f.js");var f=this.path,l=r.document,c=r.location,h=n.path,p=n.array.from,d=n.string.camelize,v=n.Class,m=n.dom,g=r.DOMTokenList,y=g&&l&&l.documentElement.classList instanceof g,b=/\s*!important/i,w="important",E=1,S={},x=function(){var e=m.createElement();try{e.style.width="badvalue"}catch(t){return!0}return!1}(),M=m.createElement(""),_={},D={};P("opacity","opacity filter",!0,{filter:function(e){return"alpha(opacity:"+parseInt(e*100,10)+")"}}),P("float","cssFloat styleFloat");var q=v(null,{className:f+".StyleSheet",styleSheet:null,rules:null,init:function(e){this.styleSheet=e,this.rules=[]},createRule:function(e){var t=this.styleSheet,n=this.rules.length;t.insertRule(e+"{}",n);var r=p(t.cssRules,n),i=r[1]?new z(r,this):new R(r[0],this);return this.rules.push.apply(this.rules,i.rules||[i]),i},deleteRule:function(e){if(e instanceof z)e.rules.forEach(this.deleteRule,this);else{var t=this.rules.indexOf(e);t!=-1&&(this.rules.splice(t,1),this.styleSheet.deleteRule(t))}e.owner=null,e.destroy()},destroy:function(){this.rules.forEach(function(e){e.destroy()}),this.styleSheet=null,this.rules=null}}),R=v(null,{className:f+".Rule",rule:null,selector:"",init:function(e,t){this.owner=t,this.rule=e,this.selector=e.selectorText},setProperty:function(e,t){B(this.rule,e,t)},setStyle:function(e){n.object.iterate(e,this.setProperty,this)},clear:function(){this.rule.style.cssText=""},destroy:function(){this.owner&&this.owner.deleteRule(this),this.owner=null,this.rule=null}}),z=v(null,{className:f+".RuleSet",rules:null,init:function(e,t){this.owner=t,this.rules=e.map(function(e){return new R(e,this)},this)},createRule:function(e){var t=this.owner.createRule(e);return this.rules.push(t),t.owner=this,t},deleteRule:function(e){var t=this.rules.indexOf(e);t!=-1&&(this.rules.splice(t,1),this.owner.deleteRule(e))},setProperty:U("setProperty"),setStyle:U("setStyle"),clear:U("clear"),destroy:function(){this.owner&&this.owner.deleteRule(this),this.owner=null,this.rules=null}}),W,X={},$=v(null,{className:f+".ClassList",init:function(e){if(!e)throw 42;this.element=e},set_:function(e){var t=this.element.className;return typeof t=="string"?this.element.className=e:t.baseVal=e},toString:function(){var e=this.element.className;return typeof e=="string"?e:e.baseVal},set:function(e){this.clear(),e.trim().split(" ").forEach(this.add,this)},replace:function(e,t,n){n=n||"",typeof e!="undefined"&&this.remove(n+e),typeof t!="undefined"&&this.add(n+t)},bool:function(e,t){t?this.add(e):this.remove(e)},clear:function(){this.set_("")},contains:function(e){return!!this.toString().match(V(e))},item:function(e){return this.toString().trim().split(" ")[e]},add:function(e){var t=this.toString();t.match(V(e))||this.set_(t+" "+e)},remove:function(e){var t=this.toString(),n=t.replace(V(e),"");n!=t&&this.set_(n)},toggle:function(e){var t=this.contains(e);return t?this.remove(e):this.add(e),!t}}),J={},Q=v(null,{className:f+".ClassListNS",delim:"-",init:function(e,t){this.classList=t,this.prefix=e+this.delim},add:function(e){this.classList.add(this.prefix+e)},remove:function(e){this.classList.remove(this.prefix+e)},items:function(){var e=this.classList.toString();return e?e.match(K(this.prefix,!0)):null},set:function(e){var t=this.items(),n=typeof e!="undefined"?this.prefix+e:"",r=this.classList;if(t)if(t.length==1){if(t[0]===n)return;r.remove(t[0])}else this.clear();n&&r.add(n)},clear:function(){this.items().forEach(this.classList.remove,this.classList)}});if(y){var G=$.prototype;n.object.extend(g.prototype,{set:G.set,replace:G.replace,bool:G.bool,clear:function(){for(var e=this.length;e>0;)this.remove(this[--e])},setPrefixToken:G.setPrefixToken}),W=function(e){return(typeof e=="string"?m.get(e):e).classList}}else W=function(e){return new $(typeof e=="string"?m.get(e):e)};var Y=function(e,t){return t?new Q(t,W(e)):W(e)};t.exports={features:D,setStyleProperty:B,setStyle:j,classList:Y,uniqueRule:C,createRule:T,getStyleSheet:O,addStyleSheet:A,StyleSheet:q,Rule:R,RuleSet:z,display:F,visibility:I,em:Z("em"),ex:Z("ex"),px:Z("px"),percent:Z("%")}},"k.js":function(e,t,n,r,i,s,o,u,a){function B(e,t){return H[typeof e=="string"&&e.toUpperCase()]||t}function j(e,t){return Array.isArray(e)?{left:e[0],right:e[0],width:0,top:e[1],bottom:e[1],height:0}:E(e,t)}n.require("./3.js"),n.require("./f.js"),n.require("./8.js"),n.require("./l.js"),n.require("./m.js"),n.require("./2.js"),n.require("./1.js");var f=this.path,l=r.document,c=l&&l.documentElement,h=n.Class,p=n.dom,d=n.dom.event,v=n.cssom,m=n.layout,g=n.getter,y=n.array.from,b=n.event.create,w=n.layout.getOffsetParent,E=n.layout.getBoundingRect,S=n.layout.getViewportRect,x=n.ui.Node,T=n.template.define(f,{Popup:n.resource("./l.tmpl"),Balloon:n.resource("./m.tmpl"),popupManager:n.resource("./n.tmpl")}),N="LEFT",C="RIGHT",k="TOP",L="BOTTOM",A="CENTER",O={VERTICAL:"V",HORIZONTAL:"H"},M=String("LTRTRBLBLCCTRCCBCCCCCCCC"),_={L:N,R:C,T:k,B:L,C:A},D={LEFT:C,RIGHT:N,TOP:L,BOTTOM:k,CENTER:A},P=[C,L,C,k].join(" "),H=function(){var e=[N,A,C],t=[k,A,L],n={},r={};for(var i=0;i<3;i++)for(var s=0;s<3;s++)r[e[i]+" "+t[s]]=e[i]+" "+t[s],r[t[s]+" "+e[i]]=e[i]+" "+t[s];for(var o in r)for(var u in r)n[o+" "+u]=r[o]+" "+r[u];return n}(),F=h(x,{className:f+".Popup",template:T.Popup,binding:{visible:{events:"show hide",getter:function(e){return e.visible?"visible":"hidden"}},orientation:{events:"layoutChanged",getter:function(e){return(e.orientation+"-"+e.dir.split(" ").slice(2,4).join("-")).toLowerCase()}}},action:{hide:function(){this.hide()}},emit_beforeShow:b("beforeShow"),emit_show:b("show"),emit_hide:b("hide"),emit_realign:b("realign"),emit_layoutChanged:b("layoutChanged","oldOrientation","oldDir"),visible:!1,autorotate:!1,autoRealign:!0,zIndex:0,dir:"",defaultDir:P,orientation:O.VERTICAL,hideOnAnyClick:!0,hideOnKey:!1,hideOnScroll:!0,ignoreClickFor:null,init:function(){x.prototype.init.call(this),this.ignoreClickFor=y(this.ignoreClickFor),this.dir?(this.dir=B(this.dir,P),this.defaultDir=this.dir):(this.defaultDir=B(this.defaultDir,P),this.dir=this.defaultDir),this.setLayout(this.defaultDir,this.orientation)},templateSync:function(){x.prototype.templateSync.call(this),this.realign()},setLayout:function(e,t,n){var r=this.dir,i=this.orientation;this.dir=B(e,this.dir),typeof t=="string"&&(this.orientation=t);if(r!=this.dir||i!=this.orientation)this.emit_layoutChanged(i,r),n||this.realign()},flip:function(e){var t=this.dir.split(" "),n=e==O.VERTICAL;t[0+n]=D[t[0+n]],t[2+n]=D[t[2+n]],this.setLayout(t.join(" "))},rotate:function(e){var t=this.dir.split(" "),n=[];e=(e%4+4)%4;if(!e)return t;var r=t[0].charAt(0),i=t[1].charAt(0),s=M.indexOf(r+i)>>1,o=(s&252)+((s&3)+e&3)<<1;n.push(_[M.charAt(o)],_[M.charAt(o+1)]);var r=t[2].charAt(0),i=t[3].charAt(0),s=M.indexOf(r+i)>>1;e=r!="C"&&i!="C"&&t[0]==t[2]!=(t[1]==t[3])?-e+4:e;var o=(s&252)+((s&3)+e&3)<<1;return n.push(_[M.charAt(o)],_[M.charAt(o+1)]),n},isFitToViewport:function(e){if(this.visible&&this.relElement){var t=w(this.element),n=j(this.relElement,t),r=S(t),i=this.element.offsetWidth,s=this.element.offsetHeight;e=B(e,this.dir).split(" ");var o=e[0]==A?n.left+(n.width>>1):n[e[0].toLowerCase()],u=e[1]==A?n.top+(n.height>>1):n[e[1].toLowerCase()];return e[2]!=N&&o<i>>(e[2]==A)||e[2]!=C&&r.width-o+r.left<i>>(e[2]==A)||e[3]!=k&&u<s>>(e[3]==A)||e[3]!=L&&r.height-u+r.top<s>>(e[3]==A)?!1:{x:o,y:u}}},setZIndex:function(e){this.zIndex=isNaN(e)?"auto":e,v.setStyle(this.element,{"z-index":e})},realign:function(){this.setZIndex(this.zIndex);if(this.visible&&this.relElement){var e=this.dir.split(" "),t,n=0,r=e,i=e[2],s=e[3],o=typeof this.autorotate=="number"||!this.autorotate.length?3:this.autorotate.length,u=w(this.element);while(this.autorotate&&n<=o){if(t=this.isFitToViewport(r.join(" "))){i=r[2],s=r[3],this.setLayout(r.join(" "),null,!0);break}if(n==o)break;if(Array.isArray(this.autorotate)){var a=this.autorotate[n++];typeof a=="string"?r=B(a,r.join(" ")).split(" "):r=this.rotate(a)}else r=this.rotate(++n*this.autorotate)}if(!t){var f=j(this.relElement,u);t={x:e[0]==A?f.left+(f.width>>1):f[e[0].toLowerCase()],y:e[1]==A?f.top+(f.height>>1):f[e[1].toLowerCase()]}}var l={left:"auto",right:"auto",top:"auto",bottom:"auto"};switch(i){case N:l.left=t.x+"px";break;case A:l.left=Math.round(t.x-this.element.offsetWidth/2)+"px";break;case C:l.right=u.clientWidth-t.x+"px"}switch(s){case k:l.top=t.y+"px";break;case A:l.top=Math.round(t.y-this.element.offsetHeight/2)+"px";break;case L:l.bottom=u.clientHeight-t.y+"px"}v.setStyle(this.element,l),this.emit_realign()}},show:function(e,t,n){this.relElement=Array.isArray(e)?e:p.get(e)||this.relElement,this.setLayout(B(t,this.defaultDir),n);if(!this.visible){if(!this.relElement)return;v.visibility(this.element,!1),q.appendChild(this),this.emit_beforeShow(),this.visible=!0,this.realign(),v.visibility(this.element,!0),this.emit_show()}else this.realign()},hide:function(){this.visible&&(this.visible=!1,this.parentNode&&q.removeChild(this),this.emit_hide())},hideAll:function(){q.clear()},destroy:function(){this.hide(),x.prototype.destroy.call(this)}}),I=h(F,{className:f+".Balloon",template:T.Balloon}),q=new x({template:T.popupManager,selection:!0,emit_childNodesModified:function(e){if(e.deleted)for(var t=e.deleted.length-1,n;n=e.deleted[t];t--)n.hide();e.inserted&&!e.deleted&&this.childNodes.length==e.inserted.length&&(d.addGlobalHandler("click",this.hideByClick,this),d.addGlobalHandler("keydown",this.hideByKey,this),d.addGlobalHandler("scroll",this.hideByScroll,this),d.addHandler(window,"resize",this.realignAll,this)),this.lastChild?this.lastChild.select():(d.removeGlobalHandler("click",this.hideByClick,this),d.removeGlobalHandler("keydown",this.hideByKey,this),d.removeGlobalHandler("scroll",this.hideByScroll,this),d.removeHandler(window,"resize",this.realignAll,this)),x.prototype.emit_childNodesModified.call(this,e)},insertBefore:function(e,t){x.prototype.insertBefore.call(this,e,t)&&e.setZIndex(n.ui.window?n.ui.window.getWindowTopZIndex():2001)},removeChild:function(e){e&&(e.hideOnAnyClick&&e.nextSibling&&this.removeChild(e.nextSibling),x.prototype.removeChild.call(this,e))},realignAll:function(){for(var e=this.firstChild;e;e=e.nextSibling)e.autoRealign&&e.realign()},clear:function(){this.firstChild&&this.removeChild(this.firstChild)},hideByClick:function(e){if(!this.firstChild)return;var t=p.axis(e.sender,p.AXIS_ANCESTOR_OR_SELF);for(var n=this.lastChild;n;n=n.previousSibling)if(t.indexOf(n.element)!=-1||t.some(function(e){return n.ignoreClickFor.indexOf(e)!=-1})){while(n=n.nextSibling)if(n.hideOnAnyClick){this.removeChild(n);break}return}this.removeChild(this.getChild(!0,"hideOnAnyClick"))},hideByKey:function(e){var t=this.lastChild;if(t&&t.hideOnKey){var n=!1;typeof t.hideOnKey=="function"?n=t.hideOnKey(e.key):Array.isArray(t.hideOnKey)&&(n=t.hideOnKey.indexOf(e.key)!=-1),n&&t.hide()}},hideByScroll:function(e){var t=e.sender;if(p.parentOf(t,this.element))return;var n=this.lastChild;while(n){var r=n.previousSibling;n.hideOnScroll&&n.relElement&&!Array.isArray(n.relElement)&&n.offsetParent!==t&&p.parentOf(t,n.relElement)&&n.hide(),n=r}}});n.doc.body.ready(function(e){p.insert(e,q.element,p.INSERT_BEGIN),q.realignAll()}),t.exports={ORIENTATION:O,DIR:{LEFT:N,RIGHT:C,TOP:k,BOTTOM:L,CENTER:A},Popup:F,Balloon:I}},"j.js":function(e,t,n,r,i,s,o,u,a){n.require("./3.js"),n.require("./4.js");var f=this.path,l=n.getter,c=n.cleaner,h=n.event.Emitter,p=n.data.AbstractData,d=n.data.Value,v=n.data.STATE,m=d.subclass({className:f+".Property",extendConstructor_:!1,init:function(e,t,n){this.value=e,this.handler=t,this.proxy=n,d.prototype.init.call(this)}}),g=v.priority,y={stateChanged:function(){this.fire(!1,!0)},update:function(){this.fire(!0)},change:function(){this.fire(!0)},destroy:function(e){this.remove(e)}},b=d.subclass({className:f+".ObjectSet",objects:null,value:0,valueChanged_:!1,calculateValue:function(){return this.value+1},calculateOnInit:!1,statePriority:g,stateChanged_:!0,timer_:!1,init:function(){d.prototype.init.call(this);var e=this.objects;this.objects=[],e&&Array.isArray(e)&&(this.lock(),this.add.apply(this,e),this.unlock()),this.valueChanged_=this.stateChanged_=!!this.calculateOnInit,this.update()},add:function(){for(var e=0,t=arguments.length;e<t;e++){var r=arguments[e];if(!(r instanceof p))throw 41;n.array.add(this.objects,r)&&r.addHandler(y,this)}this.fire(!0,!0)},remove:function(e){n.array.remove(this.objects,e)&&e.removeHandler(y,this),this.fire(!0,!0)},clear:function(){for(var e=0,t;t=this.objects[e];e++)t.removeHandler(y,this);this.objects.length=0,this.fire(!0,!0)},fire:function(e,t){this.locked||(this.valueChanged_=this.valueChanged_||!!e,this.stateChanged_=this.stateChanged_||!!t,!this.timer_&&(this.valueChanged_||this.stateChanged_)&&(this.timer_=n.setImmediate(this.update.bind(this))))},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},update:function(){var e=this.valueChanged_,t=this.stateChanged_;this.valueChanged_=!1,this.stateChanged_=!1,this.timer_=n.clearImmediate(this.timer_);if(!c.globalDestroy){e&&this.set(this.calculateValue());if(t){var r=this.objects.length;if(!r)this.setState(v.UNDEFINED);else{var i=-2,s;for(var o=0;o<r;o++){var u=this.objects[o],a=this.statePriority.indexOf(String(u.state));a>i&&(s=u,i=a)}s&&this.setState(s.state,s.state.data)}}}},destroy:function(){this.lock(),this.clear(),this.timer_&&n.clearImmediate(this.timer_),d.prototype.destroy.call(this)}}),w=m.subclass({className:f+".Expression",init:function(e,t){d.prototype.init.call(this);var e=n.array(arguments),t=e.pop();typeof t!="function"&&(t=n.fn.$undef),e.length==1&&e[0].link(this,function(e){this.set(t.call(this,e))});if(e.length>1){var r=new b({objects:e,calculateOnInit:!0,calculateValue:function(){return t.apply(this,e.map(function(e){return e.value}))}});r.link(this,this.set),this.addHandler({destroy:function(){c.globalDestroy||r.destroy()}})}}});t.exports={Property:m,ObjectSet:b,Expression:w}},"i.js":function(e,t,n,r,i,s,o,u,a){function L(e){return e.getValue()}function it(e){var t=e&&e.type||"text";if(rt.hasOwnProperty(t))return new rt[t](e);throw 39}n.require("./2.js"),n.require("./3.js"),n.require("./f.js"),n.require("./8.js"),n.require("./5.js"),n.require("./j.js"),n.require("./1.js"),n.require("./k.js");var f=this.path,l=n.Class,c=n.dom.event,h=n.dom,p=n.object.complete,d=n.getter,v=n.array.from,m=n.event.create,g=n.event.events,y=n.l10n.token,b=n.data.value.Property,w=n.dom.wrapper.Selection,E=n.ui.Node,S=n.ui.popup.Popup,x=n.l10n.dictionary("./2.l10n"),T=n.template.define(f,{Example:n.resource("./o.tmpl"),Description:n.resource("./p.tmpl"),Counter:n.resource("./q.tmpl"),Field:n.resource("./r.tmpl"),File:n.resource("./s.tmpl"),Hidden:n.resource("./t.tmpl"),Text:n.resource("./u.tmpl"),Password:n.resource("./v.tmpl"),Textarea:n.resource("./w.tmpl"),Checkbox:n.resource("./x.tmpl"),Label:n.resource("./y.tmpl"),RadioGroup:n.resource("./z.tmpl"),RadioGroupItem:n.resource("./10.tmpl"),CheckGroup:n.resource("./11.tmpl"),CheckGroupItem:n.resource("./12.tmpl"),Select:n.resource("./13.tmpl"),SelectItem:n.resource("./14.tmpl"),Combobox:n.resource("./15.tmpl"),ComboboxItem:n.resource("./16.tmpl"),ComboboxDropdownList:n.resource("./17.tmpl"),MatchInput:n.resource("./18.tmpl")});n.template.define(f+".native",{text:n.resource("./19.tmpl"),password:n.resource("./1a.tmpl"),textarea:n.resource("./1b.tmpl"),checkbox:n.resource("./1c.tmpl"),radio:n.resource("./1d.tmpl"),select:n.resource("./1e.tmpl"),file:n.resource("./1f.tmpl")});var N="indeterminate",C="valid",k="invalid",A=E.subclass({className:f+".Field",childClass:null,nextFieldOnEnter:!0,serializable:!0,name:"",title:"",validators:null,validity:N,error:"",example:null,focused:!1,defaultValue:undefined,value:undefined,focusable:!0,emit_commit:m("commit"),emit_change:m("change","oldValue"),emit_validityChanged:m("validityChanged","oldValidity"),emit_errorChanged:m("errorChanged"),emit_exampleChanged:m("exampleChanged"),emit_descriptionChanged:m("descriptionChanged"),emit_fieldInput:m("fieldInput","event"),emit_fieldChange:m("fieldChange","event"),emit_fieldKeydown:m("fieldKeydown","event"),emit_fieldKeypress:m("fieldKeypress","event"),emit_fieldKeyup:m("fieldKeyup","event")&&function(e){this.nextFieldOnEnter&&(e.key==e.KEY.ENTER||e.key==e.KEY.CTRL_ENTER?(e.preventDefault(),this.commit()):e.key!=e.KEY.TAB&&this.setValidity()),g.fieldKeyup.call(this,e)},emit_fieldFocus:m("fieldFocus","event")&&function(e){this.focused=!0,g.fieldFocus.call(this,e)},emit_fieldBlur:m("fieldBlur","event")&&function(e){this.validate(!0),this.focused=!1,g.fieldBlur.call(this,e)},template:T.Field,binding:{focused:{events:"fieldFocus fieldBlur",getter:function(e){return e.focused?"focused":""}},name:"name",titleText:"title",value:{events:"change",getter:function(e){return e.getValue()}},defaultValue:{getter:"defaultValue"},validity:{events:"validityChanged",getter:"validity"},error:{events:"errorChanged",getter:"error"},example:"satellite:",description:"satellite:"},action:"focus blur change keydown keypress keyup input".split(" ").reduce(function(e,t){var r="emit_field"+n.string.capitalize(t);return e[t]=function(e){this.syncFieldValue_(),this[r](e)},e},{}),satellite:{example:{events:"exampleChanged",existsIf:function(e){return e.example},instanceOf:E.subclass({className:f+".Example",template:T.Example,binding:{example:"owner.example"},listen:{owner:{exampleChanged:function(){this.updateBind("example")}}}})},description:{events:"descriptionChanged",existsIf:function(e){return e.description},instanceOf:E.subclass({className:f+".Description",template:T.Description,binding:{description:"owner.description"},listen:{owner:{descriptionChanged:function(){this.updateBind("description")}}}})}},init:function(){this.validators=v(this.validators),typeof this.defaultValue=="undefined"&&(this.defaultValue=this.value),E.prototype.init.call(this),this.value&&this.setValue(this.value)},setExample:function(e){e!=this.example&&(this.example=e,this.emit_exampleChanged())},setDescription:function(e){e!=this.description&&(this.description=e,this.emit_descriptionChanged())},syncFieldValue_:function(){this.setValue(this.getValue())},getValue:function(){return this.value},setValue:function(e){if(this.value!==e){var t=this.value;this.value=e,this.emit_change(t)}},reset:function(){this.setValue(this.defaultValue),this.setValidity()},attachValidator:function(e,t){n.array.add(this.validators,e)&&t&&this.validate()},detachValidator:function(e,t){n.array.remove(this.validators,e)&&t&&this.validate()},setValidity:function(e,t){e||(e=N),this.validity!==e&&(this.validity=e,this.emit_validityChanged());if(!t||e!=k)t="";this.error!=t&&(this.error=t,this.emit_errorChanged())},validate:function(e){var t;this.setValidity();for(var n=0;n<this.validators.length;n++)if(t=this.validators[n](this))return e||this.setValidity(k,t.message),t;this.getValue()!=""&&this.setValidity(C)},commit:function(){this.emit_commit()},destroy:function(){this.validators=null,this.error=null,this.example=null,E.prototype.destroy.call(this)}}),O=A.subclass({className:f+".File",template:T.File}),M=A.subclass({className:f+".TextField",emit_minLengthChanged:m("minLengthChanged"),emit_maxLengthChanged:m("maxLengthChanged"),defaultValue:"",readOnly:!1,minLength:0,maxLength:0,autocomplete:"",placeholder:"",binding:{minlength:{events:"minLengthChanged",getter:function(e){return e.minLength>0?e.minLength:""}},maxlength:{events:"maxLengthChanged",getter:function(e){return e.maxLength>0?e.maxLength:""}},readonly:function(e){return e.readOnly?"readonly":""},autocomplete:"autocomplete",placeholder:"placeholder"},init:function(){typeof this.value=="undefined"&&(this.value=""),A.prototype.init.call(this);var e=this.minLength;delete this.minLength,this.setMinLength(e);var t=this.maxLength;delete this.maxLength,this.setMaxLength(t)},setValue:function(e){return A.prototype.setValue.call(this,e==null?"":String(e))},setReadOnly:function(e){this.readOnly=!!e,this.updateBind("readonly")},setMinLength:function(e){e=Math.max(parseInt(e,10)||0,0),this.minLength!=e&&(!this.minLength^!e&&(e?this.attachValidator(nt.MinLength):this.detachValidator(nt.MinLength)),this.minLength=e,this.emit_minLengthChanged())},setMaxLength:function(e){e=Math.max(parseInt(e,10)||0,0),this.maxLength!=e&&(!this.maxLength^!e&&(e?this.attachValidator(nt.MaxLength):this.detachValidator(nt.MaxLength)),this.maxLength=e,this.emit_maxLengthChanged())},syncFieldValue_:function(){this.tmpl&&this.tmpl.field&&this.setValue(this.tmpl.field.value)}}),_=M.subclass({className:f+".Hidden",focusable:!1,template:T.Hidden}),D=M.subclass({className:f+".Text",template:T.Text}),P=M.subclass({className:f+".Password",template:T.Password}),H=M.subclass({className:f+".Textarea",nextFieldOnEnter:!1,symbolsLeft:0,emit_symbolsLeftChanged:m("symbolsLeftChanged"),emit_fieldFocus:window.opera?function(e){this.contentEditable=!0,this.contentEditable=!1,M.prototype.emit_fieldFocus.call(this,e)}:M.prototype.emit_fieldFocus,template:T.Textarea,binding:{availChars:{events:"symbolsLeftChanged",getter:"symbolsLeft"},counter:"satellite:"},action:{updateSymbolsLeft:function(){this.updateSymbolsLeft()}},satellite:{counter:{events:"maxLengthChanged",existsIf:function(e){return e.maxLength>0},instanceOf:E.subclass({className:f+".Counter",template:T.Counter,binding:{availChars:function(e){return e.owner.symbolsLeft}},listen:{owner:{symbolsLeftChanged:function(){this.updateBind("availChars")}}}})}},init:function(){M.prototype.init.call(this),this.updateSymbolsLeft()},updateSymbolsLeft:function(){var e=this.maxLength?this.maxLength-this.getValue().length:-1;e<=0&&(e=0),this.symbolsLeft!=e&&(this.symbolsLeft=e,this.emit_symbolsLeftChanged())}}),B=A.subclass({className:f+".Checkbox",value:!1,indeterminate:!1,template:T.Checkbox,binding:{indeterminate:"indeterminate",checked:{events:"change",getter:function(e){return e.value?"checked":""}}},emit_change:function(e){A.prototype.emit_change.call(this,e),this.syncIndeterminate()},toggle:function(){this.setValue(!this.getValue())},setValue:function(e){return A.prototype.setValue.call(this,!!e)},syncFieldValue_:function(){this.tmpl&&this.tmpl.field&&this.setValue(!!this.tmpl.field.checked)},syncIndeterminate:function(){this.indeterminate=!this.indeterminate,this.updateBind("indeterminate"),this.indeterminate=!this.indeterminate,this.updateBind("indeterminate")},setIndeterminate:function(e){this.indeterminate=!!e,this.syncIndeterminate()}}),j=A.subclass({className:f+".Label",focusable:!1,template:T.Label}),F=E.subclass({className:f+".ComplexFieldItem",childClass:null,name:"",binding:{name:"name",title:function(e){return e.getTitle()},value:function(e){return e.getValue()},checked:{events:"select unselect",getter:function(e){return e.selected?"checked":""}}},action:{select:function(e){this.isDisabled()||(this.select(this.contextSelection?this.contextSelection.multiple:!1),e.sender.tagName!="INPUT"&&e.die())}},titleGetter:n.getter(function(e){return e.title||e.getValue()}),valueGetter:d("value"),getTitle:function(){return this.titleGetter(this)},getValue:function(){return this.valueGetter(this)},setName:function(e){this.name!=e&&(this.name=e,this.updateBind("name"))}}),I={itemsChanged:function(){this.emit_change()}},q=l(A,{className:f+".ComplexField",childClass:F,selection:{multiple:!1},binding:{multiple:function(e){return e.selection.multiple}},listen:{selection:{itemsChanged:function(){this.emit_change()}}},getValue:function(){var e=this.selection.getItems().map(L);return this.selection.multiple?e:e[0]},setValue:function(e){var t;this.selection.multiple?t=this.childNodes.filter(function(e){return this.indexOf(e.getValue())!=-1},v(e)):t=[n.array.search(this.childNodes,e,L)],this.selection.set(t)}}),R=q.subclass({className:f+".RadioGroup",template:T.RadioGroup,childClass:{className:f+".RadioGroupItem",template:T.RadioGroupItem}}),U=q.subclass({className:f+".CheckGroup",template:T.CheckGroup,selection:{multiple:!0},childClass:{className:f+".CheckGroupItem",template:T.CheckGroupItem}}),z=q.subclass({className:f+".Select",template:T.Select,templateSync:function(){q.prototype.templateSync.call(this),this.syncFieldValue_()},syncFieldValue_:function(){if(this.tmpl&&this.tmpl.field){var e;this.selection.multiple&&this.tmpl.field.selectedIndex!=-1?e=this.childNodes.filter(function(e){return e.tmpl&&e.tmpl.field&&e.tmpl.field.selected}):e=[this.childNodes[this.tmpl.field.selectedIndex]],this.selection.set(e)}},childClass:{className:f+".SelectItem",template:T.SelectItem}}),W={show:function(){this.updateBind("opened")},hide:function(){this.updateBind("opened")}},X=F.subclass({className:f+".ComboboxItem",template:T.ComboboxItem,binding:{title:function(e){return e.getTitle()||" "}},action:{select:function(e){if(!this.isDisabled()){this.select();var t=this.parentNode||this.owner;t&&t.hide(),e.die()}}}}),V={itemsChanged:function(e){this.setDelegate(e.pick())}},$=q.subclass({className:f+".Combobox",childClass:X,emit_change:function(e){q.prototype.emit_change.call(this,e);var t=this.getValue();this.property&&this.property.set(t)},emit_childNodesModified:function(e){q.prototype.emit_childNodesModified.call(this,e),this.property&&this.setValue(this.property.value)},caption:null,popup:null,popupClass:S.subclass({className:f+".ComboboxDropdownList",template:T.ComboboxDropdownList,autorotate:1,templateSync:function(){S.prototype.templateSync.call(this),this.owner&&this.owner.childNodesElement&&h.insert(this.tmpl.content||this.element,this.owner.childNodesElement)}}),property:null,template:T.Combobox,binding:{captionItem:"satellite:",hiddenField:"satellite:",opened:function(e){return e.popup.visible?"opened":""}},satellite:{hiddenField:{existsIf:function(e){return e.name},instanceOf:_.subclass({className:f+".ComboboxHidden",getValue:function(){return this.owner.getValue()},listen:{owner:{change:function(){this.updateBind("value")}}}}),config:function(e){return{name:e.name,value:e.getValue()}}}},action:{togglePopup:function(){this.isDisabled()||this.popup.visible?this.hide():this.show()},keyup:function(e){var t=this.selection.pick(),r;switch(e.key){case e.KEY.DOWN:if(e.altKey){this.popup.visible?this.hide():this.isDisabled()||this.show();return}r=n.array.search(h.axis(t||this.firstChild,h.AXIS_FOLLOWING_SIBLING),!1,"disabled");break;case e.KEY.UP:if(e.altKey){this.popup.visible?this.hide():this.isDisabled()||this.show();return}r=n.array.search(h.axis(t||this.lastChild,h.AXIS_PRECEDING_SIBLING),!1,"disabled")}r&&(r.select(),this.focus()),this.emit_fieldKeyup(e)},keydown:function(e){switch(e.key){case e.KEY.DOWN:case e.KEY.UP:e.die();break;case e.KEY.ENTER:this.popup.visible&&this.hide(),e.die()}this.emit_fieldKeydown(e)}},init:function(){this.property&&(this.value=this.property.value),q.prototype.init.call(this),this.setSatellite("captionItem",new this.childClass({delegate:this.selection.pick(),owner:this,getTitle:function(){return this.owner.getTitle()},getValue:function(){return this.owner.getValue()},handler:{delegateChanged:function(){this.updateBind("title")}}})),this.selection.addHandler(V,this.satellite.captionItem),this.popup=new this.popupClass(p({handler:{context:this,callbacks:W}},this.popup)),this.property&&this.property.link(this,this.setValue)},templateSync:function(){E.prototype.templateSync.call(this),this.childNodesElement&&this.popup&&h.insert(this.popup.tmpl.content||this.popup.element,this.childNodesElement),this.popup.ignoreClickFor=[this.tmpl.field]},show:function(){this.tmpl&&(this.popup.show(this.tmpl.field),this.focus())},hide:function(){this.popup.hide()},getTitle:function(){var e=this.selection.pick();return e&&e.getTitle()},getValue:function(){var e=this.selection.pick();return e&&e.getValue()},setValue:function(e){if(this.getValue()!==e){var t=n.array.search(this.childNodes,e,L);t&&!t.isDisabled()?this.selection.set([t]):this.selection.clear()}},destroy:function(){this.property&&(this.property.unlink(this),this.property=null),this.popup.destroy(),this.popup=null,this.satellite.captionItem.setDelegate(),this.selection.removeHandler(V,this.satellite.captionItem),this.setSatellite("captionItem",null),q.prototype.destroy.call(this)}}),J=b.subclass({className:f+".MatchProperty",matchFunction:function(e,t){if(!t){var n=e._original||this.textNodeGetter(e);Array.isArray(n)||(n=[n]),e._original=n;var r=0;for(var i=n.length;i-->0;){var s=n[i];if(!s)continue;var o=s.nodeValue.split(this.rx);o.length>1?(e._replaced||(e._replaced={}),h.replace(e._replaced[i]||s,e._replaced[i]=h.createElement("SPAN.matched",h.wrap(o,this.map))),r++):e._replaced&&e._replaced[i]&&(h.replace(e._replaced[i],s),delete e._replaced[i])}return r>0}if(e._replaced){for(var u in e._replaced)h.replace(e._replaced[u],e._original[u]);delete e._replaced,delete e._original}return!1},emit_change:function(e){this.rx=this.regexpGetter(this.value),b.prototype.emit_change.call(this,e)},extendConstructor_:!0,init:function(){var e=this.startPoints||"";this.textNodeGetter=d(this.textNodeGetter||"tmpl.titleText"),typeof this.regexpGetter!="function"&&(this.regexpGetter=function(t){return new RegExp("("+e+")("+n.string.forRegExp(t)+")","i")}),this.map={},this.map[this.wrapElement||"SPAN.match"]=function(e,t){return t%3==2},b.prototype.init.call(this,"",this.handlers,String.trim)}}),K={childNodesModified:function(e,t){t.inserted&&t.inserted.forEach(function(e){this.matchFunction(e,this.value=="")},this)}},Q=J.subclass({className:f+".Matcher",emit_change:function(e){J.prototype.emit_change.call(this,e),this.applyMatch()},init:function(){J.prototype.init.call(this),this.node.addHandler(K,this)},applyMatch:function(){this.node.childNodes.forEach(function(e){this.matchFunction(e,this.value=="")},this)}}),G=J.subclass({className:f+".MatchFilter",emit_change:function(e){J.prototype.emit_change.call(this,e),this.node.setMatchFunction(this.value?this.matchFunction.bind(this):null)}}),Y=D.subclass({className:f+".MatchInput",template:T.MatchInput,matchFilterClass:G,emit_fieldKeyup:function(e){D.prototype.emit_fieldKeyup.call(this,e),this.matchFilter.set(this.getValue())},emit_change:function(e){D.prototype.emit_change.call(this,e),this.matchFilter.set(this.getValue())},init:function(){D.prototype.init.call(this),this.matchFilter=new this.matchFilterClass(this.matchFilter)}}),Z=/^([a-z0-9а-яА-ЯёЁ\.\-\_]+|[a-z0-9а-яА-ЯёЁ\.\-\_]+\+[a-z0-9а-яА-ЯёЁ\.\-\_]+)\@(([a-z0-9а-яА-ЯёЁ][a-z0-9а-яА-ЯёЁ\-]*\.)+[a-zа-яА-ЯёЁ]{2,6}|(\d{1,3}\.){3}\d{1,3})$/i,et=/^(https?\:\/\/)?((\d{1,3}\.){3}\d{1,3}|([a-zA-Zа-яА-ЯёЁ0-9][a-zA-Zа-яА-ЯёЁ\d\-\._]+\.)+[a-zA-Zа-яА-ЯёЁ]{2,7})(:\d+)?(\/[^\?]*(\?\S+(\=\S*))*(\#\S*)?)?$/i,tt=l(null,{className:f+".ValidatorError",init:function(e,t){this.field=e,this.message=String(t)}}),nt={RegExp:function(e){return e.constructor!=RegExp&&(e=new RegExp(e)),function(t){var n=String(t.getValue());if(n!=""&&!n.match(e))return new tt(t,x.token("validator.regExpWrongFormat"))}},Required:function(e){var t=e.getValue();if(n.fn.$isNull(t)||String(t).trim()=="")return new tt(e,x.token("validator.required"))},Number:function(e){var t=e.getValue();if(isNaN(t))return new tt(e,x.token("validator.numberWrongFormat"))},Currency:function(e){var t=e.getValue();if(isNaN(t))return new tt(e,x.token("validator.currencyWrongFormat"));if(t<=0)return new tt(e,x.token("validator.currencyMustBeGreaterZero"))},Email:function(e){var t=String(e.getValue()).trim();if(t!=""&&!t.match(Z))return new tt(e,x.token("validator.emailWrongFormat"))},Url:function(e){var t=String(e.getValue()).trim();if(t!=""&&!t.match(et))return new tt(e,x.token("validator.urlWrongFormat"))},MinLength:function(e){var t=e.getValue(),r=n.fn.$isNotNull(t.length)?t.length:String(t).length;if(t&&r<e.minLength)return new tt(e,n.string.format(String(x.token("validator.minLengthError")),e.minLength))},MaxLength:function(e){var t=e.getValue(),r=n.fn.$isNotNull(t.length)?t.length:String(t).length;if(r>e.maxLength)return new tt(e,n.string.format(String(x.token("validator.maxLengthError")),e.maxLength))}},rt={hidden:_,file:O,text:D,password:P,textarea:H,checkbox:B,label:j,select:z,combobox:$,radiogroup:R,checkgroup:U};t.exports={validator:nt,ValidatorError:tt,create:it,addFieldType:function(e,t){if(!t.isSubclassOf(A))throw 40;rt[e]=t},Field:A,Hidden:_,File:O,TextField:M,Text:D,Password:P,Textarea:H,Checkbox:B,Label:j,ComplexFieldItem:F,ComplexField:q,Select:z,RadioGroup:R,CheckGroup:U,Combobox:$,Matcher:Q,MatchProperty:J,MatchFilter:G,MatchInput:Y}},"y.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),n.require("./e.js"),n.require("./i.js");var f=n.require("./z.js"),l=n.ui.Node.subclass({data:{username:"victor",password:"victor1"},name:"LoginForm",template:n.template.get("#4"),satellite:{username:{instanceOf:n.ui.field.Text.subclass({title:"Login",action:{keyup:function(e){this.owner.update({username:e.sender.value})}}}),config:function(e){return{value:e.data.username}}},password:{instanceOf:n.ui.field.Password.subclass({title:"Password",action:{keyup:function(e){this.owner.update({password:e.sender.value})}}}),config:function(e){return{value:e.data.password}}}},binding:{button:new n.ui.button.Button({caption:"Sign in",click:function(){this.owner.action.signIn(this.owner,this.owner.data)}}),username:"satellite:username",password:"satellite:password"},action:{signIn:function(e,t){f.signIn(function(t){e.owner.authCallback(),e.owner.update({loggedInAs:t.user.name})}).request({postBody:JSON.stringify({username:t.username,password:t.password})})}}}),c=n.ui.Node.subclass({name:"LoginStatus",autoDelegate:!0,template:n.template.get("#5"),binding:{loggedInAs:function(e){return e.owner.data.loggedInAs},logoutButton:new n.ui.button.Button({caption:"Logout",click:function(){window.location="/logout"}})}});t.exports=n.ui.Node.subclass({container:n.dom.get("auth"),template:n.template.get("#6"),data:{loggedInAs:""},satellite:{loginForm:{instanceOf:l,existsIf:function(e){return e.data.loggedInAs==""}},loginStatus:{instanceOf:c,existsIf:function(e){return e.data.loggedInAs!=""}}},binding:{loginForm:"satellite:loginForm",loginStatus:"satellite:loginStatus"},init:function(){var e=this;n.ui.Node.prototype.init.call(this),f.whoami(function(t){e.update({loggedInAs:t.user.name}),e.authCallback()}).request()}})},"h.js":function(e,t,n,r,i,s,o,u,a){function S(e){return e<10?"0"+e:e}function x(e){return e<100?"0"+S(e):e}function T(e){return e instanceof Date&&(e=e.getFullYear()),!!(!(e%400)||e%100&&!(e%4))}function N(e,t){var n;return e instanceof Date?(t=e.getFullYear(),n=e.getMonth()):n=e-1,n==1?28+T(t):v[n]}function C(e,t,n){var r="";for(var i=0,s,o;i<t.length;i++){s=t.charAt(i);if(s=="%")switch(s=t.charAt(++i)){case"y":r+=String(n?e.getUTCFullYear():e.getFullYear()).substr(2);break;case"Y":r+=n?e.getUTCFullYear():e.getFullYear();break;case"d":r+=n?e.getUTCDate():e.getDate();break;case"D":r+=S(n?e.getUTCDate():e.getDate());break;case"m":r+=n?e.getUTCMonth()+1:e.getMonth()+1;break;case"M":r+=S(n?e.getUTCMonth()+1:e.getMonth()+1);break;case"h":r+=n?e.getUTCHours():e.getHours();break;case"H":r+=S(n?e.getUTCHours():e.getHours());break;case"i":r+=S((n?e.getUTCHours():e.getHours())%12||12);break;case"p":r+=(n?e.getUTCHours():e.getHours())>12?"pm":"am";break;case"P":r+=(n?e.getUTCHours():e.getHours())>12?"PM":"AM";break;case"I":r+=S(n?e.getUTCMinutes():e.getMinutes());break;case"s":r+=n?e.getUTCSeconds():e.getSeconds();break;case"S":r+=S(n?e.getUTCSeconds():e.getSeconds());break;case"z":r+=n?e.getUTCMilliseconds():e.getMilliseconds();break;case"Z":r+=x(n?e.getUTCMilliseconds():e.getMilliseconds());break;case"%":r+="%",i--;break;default:r+="%"+s}else r+=s}return r}function L(e){return C(e,l,!0)}function A(e){return C(e,"%Y-%M-%D",!0)}function O(e){return C(e,"%H:%I:%S.%Z",!0)}function M(e,t,n){var r=w[t];if(!r)return e;var i;if(t=="year"||t=="month")i=e.getDate(),i>28&&e.setDate(1);E[t](e,r(e)+n);if(i>28){var s=N(e);e.setDate(Math.min(i,s))}return e}function _(e,t,n){if(t=="year"||t=="month"){var r=Number(e)-Number(n)>0?-1:1,i=r>0?e:n,s=r>0?n:e,o=i.getFullYear(),u=s.getFullYear(),a=u-o;if(t=="year")return r*a;var f=i.getMonth(),l=s.getMonth(),c=a?(a>1?(a-1)*12:0)+(11-f)+(l+1):l-f;return r*c}var h=Math.floor((n-e)/y[t]);return h+Number(w[t](new Date(n-h*y[t]))-w[t](e)!=0)}function D(e,t,n){var r=E[t];if(!r)return e;var i;if(t=="year"||t=="month")i=e.getDate(),i>28&&e.setDate(1);r(e,n);if(i>28){var s=N(e);e.setDate(Math.min(i,s))}return e}function P(e,t){if(w[t])return w[t](e)}function H(e,t){return t instanceof Date&&(e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setTime(t.getTime())),e}var f=this.path,l="%Y-%M-%DT%H:%I:%S.%ZZ",c=/^(\d{1,4})-(\d\d?)-(\d\d?)(?:[T ](\d\d?):(\d\d?):(\d\d?)(?:\.(\d+))?)?$/,h=/%([yYdDmMhHipPIsSzZ])/g,p=/\D/,d=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,v=[31,28,31,30,31,30,31,31,30,31,30,31],m=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],g=["mon","tue","wed","thr","fri","sat","sun"],y={day:864e5,hour:36e5,minute:6e4,second:1e3},b="year month day hour minute second millisecond".split(" "),w={},E={};n.object.iterate({year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"},function(e,t){w[e]=function(e){return e["get"+t]()},E[e]=function(e,n){return e["set"+t](n)}});var k=function(){function e(e,n,r,i,s,o,u){var a=new Date(e,n-1,r,i||0,0,o||0,u?u.substr(0,3):0);return a.setMinutes((s||0)-t-a.getTimezoneOffset()),a}var t;return function(n){return t=0,e.apply(null,String(n||"").replace(d,function(e,n,r,i){return t=i?r*60+i*1:r*1,n}).split(p))}}();n.object.complete(Date.prototype,{toISOString:function(){return L(this)},toJSON:function(){return this.toISOString()}}),t.exports={monthNumToAbbr:m,dayNumToAbbr:g,fromISOString:k,format:C,toISOString:L,toISODateString:A,toISOTimeString:O,isLeapYear:T,getMonthDayCount:N,add:M,set:D,get:P,diff:_,fromDate:H}},"g.js":function(e,t,n,r,i,s,o,u,a){function T(e){return{hour:e.getHours(),day:e.getDate()-1,month:e.getMonth(),year:e.getFullYear()}}function N(e,t){if(!e.length)return-1;var n,r,i=0,s=e.length-1,o,u;do{r=e[n=i+s>>1];if(t<(o=r.periodStart))s=n-1;else{if(!(t>(u=r.periodEnd)))return t>=o&&t<=u?n:-1;i=n+1}}while(i<=s);return-1}function O(e,t){var n={},r=A[e];if(r){var i=t.getFullYear(),s=t.getMonth(),o=t.getDate();i-=i%r[1],s=r[2]?s-s%r[2]:0,o=r[3]?o:1,n.periodStart=new Date(i,s,o),n.periodEnd=new Date(new Date(i+r[4],s+r[5],o+r[6])-1)}else n.periodStart=new Date(t),n.periodEnd=new Date(t);return n}function _(e){var t=[],r=O(e.nodePeriodName,n.date.add(new Date(e.periodStart),e.nodePeriodUnit,-e.nodePeriodUnitCount*e.getInitOffset(e.periodStart)));for(var i=0;i<e.nodeCount;i++)t.push(r),r=O(e.nodePeriodName,n.date.add(new Date(r.periodStart),e.nodePeriodUnit,e.nodePeriodUnitCount));return t}n.require("./3.js"),n.require("./h.js"),n.require("./1.js"),n.require("./2.js");var f=this.path,l=n.Class,c=n.array.from,h=n.getter,p=n.event.create,d=n.ui.Node,v="year",m="month",g="day",y="hour",b=!0,w=!1,E=n.date.monthNumToAbbr,S=n.l10n.dictionary("./0.l10n"),x=n.template.define(f,{Calendar:n.resource("./h.tmpl"),Section:n.resource("./i.tmpl"),SectionMonth:n.resource("./j.tmpl"),Node:n.resource("./k.tmpl")}),C={},k=2147483647;(function(){var e=32,t=k;while(--e)C[e]=t,t>>=1})();var L={century:function(e){return e.periodStart.getFullYear()+" - "+e.periodEnd.getFullYear()},decade:function(e){return e.periodStart.getFullYear()+" - "+e.periodEnd.getFullYear()},year:function(e){return e.periodStart.getFullYear()},quarter:function(e){return S.token("quarter")},month:function(e){return S.token("monthShort").token(E[e.periodStart.getMonth()])},day:function(e){return e.periodStart.getDate()}},A={century:[v,100,0,0,100,0,0],decade:[v,10,0,0,10,0,0],year:[v,1,0,0,1,0,0],quarter:[m,1,3,0,0,3,0],month:[m,1,1,0,0,1,0],day:[g,1,1,1,0,0,1]},M=l(d,{className:f+".Calendar.Node",childClass:null,periodStart:null,periodEnd:null,emit_periodChanged:p("periodChanged"),emit_select:function(){d.prototype.emit_select.call(this),this.focus()},template:x.Node,binding:{nodePeriodName:"nodePeriodName",title:{events:"periodChanged",getter:function(e){return e.parentNode&&L[e.nodePeriodName](e)}},before:{events:"periodChanged",getter:function(e){return e.parentNode&&e.periodStart<e.parentNode.periodStart}},after:{events:"periodChanged",getter:function(e){return e.parentNode&&e.periodEnd>e.parentNode.periodEnd}}},action:{click:function(e){var t=this.parentNode&&this.parentNode.parentNode;t&&!this.isDisabled()&&t.templateAction("click",e,this)}},isPeriodEnabled:function(){return!0},setPeriod:function(e,t,n){if(n||this.periodStart-e.periodStart||this.periodEnd-e.periodEnd)this.periodStart=e.periodStart,this.periodEnd=e.periodEnd,this.setDisabled(!this.isPeriodEnabled(this.periodStart,this.periodEnd)),t&&(t>=this.periodStart&&t<=this.periodEnd?this.select():this.unselect()),this.emit_periodChanged()}}),D=l(d,{className:f+".CalendarSection",emit_periodChanged:p("periodChanged"),emit_selectedDateChanged:p("selectedDateChanged"),template:x.Section,binding:{sectionName:"sectionName",title:{events:"periodChanged",getter:function(e){return e.getTitle(e.periodStart)}},tabTitle:{events:"selectedDateChanged",getter:function(e){return e.getTabTitle(e.selectedDate)}}},childClass:M,minDate:null,maxDate:null,periodStart:null,periodEnd:null,selectedDate:null,isPrevPeriodEnabled:!0,isNextPeriodEnabled:!0,periodName:"period",nodeCount:12,nodePeriodName:"-",nodePeriodUnit:"-",nodePeriodUnitCount:1,selection:!0,init:function(){this.childNodes=_(this).map(function(e){return{nodePeriodName:this.nodePeriodName}},this),d.prototype.init.call(this);var e=this.selectedDate||new Date;this.selectedDate=null,this.setViewDate(e),this.setSelectedDate(e)},getNodeByDate:function(e){if(e&&this.periodStart<=e&&e<=this.periodEnd){var t=N(this.childNodes,e);if(t!=-1)return this.childNodes[t]}return null},isPeriodEnabled:function(){return!0},setPeriod:function(e,t){if(t||this.periodStart-e.periodStart||this.periodEnd-e.periodEnd){var n=this.periodStart,r=this.periodEnd;this.periodStart=e.periodStart,this.periodEnd=e.periodEnd;var i=_(this);this.minDate=i[0].periodStart,this.maxDate=i[i.length-1].periodEnd;if(this.firstChild)for(var s=0,o;o=this.childNodes[s];s++)o.setPeriod(i[s],this.selectedDate,t);this.emit_periodChanged(n,r)}},setSelectedDate:function(e){if(this.selectedDate-e){var t=this.selectedDate;this.selectedDate=e;var n=this.getNodeByDate(this.selectedDate);n?n.select():this.selectedDate?this.setViewDate(this.selectedDate):this.selection.clear(),this.emit_selectedDateChanged(t)}},prevPeriod:function(){this.isPrevPeriodEnabled&&this.setPeriod(O(this.periodName,new Date(Number(this.periodStart)-1)))},nextPeriod:function(){this.isNextPeriodEnabled&&this.setPeriod(O(this.periodName,new Date(Number(this.periodEnd)+1)))},setViewDate:function(e){this.setPeriod(O(this.periodName,e))},rebuild:function(){this.setPeriod(O(this.periodName,this.selectedDate),!0)},getInitOffset:function(){return 0},getTitle:function(){return"-"},getTabTitle:function(){return"-"}});D.Month=l(D,{className:f+".CalendarSection.Month",sectionName:"Month",periodName:m,nodeCount:42,nodePeriodName:g,nodePeriodUnit:g,getTabTitle:function(e){return e.getDate()},getInitOffset:function(e){return 1+(n.date.set(new Date(e),g,1).getDay()+5)%7},template:x.SectionMonth,binding:{year:{events:"periodChanged",getter:function(e){return e.periodStart.getFullYear()}},title:S.token("month").compute("periodChanged",function(e){return E[e.periodStart.getMonth()]})}}),D.Year=l(D,{className:f+".CalendarSection.Year",sectionName:"Year",periodName:v,nodePeriodName:m,nodePeriodUnit:m,getTitle:function(e){return e.getFullYear()},binding:{tabTitle:S.token("month").compute("selectedDateChanged",function(e){return E[e.selectedDate.getMonth()]})}}),D.YearDecade=l(D,{className:f+".CalendarSection.YearDecade",sectionName:"YearDecade",periodName:"decade",nodePeriodName:v,nodePeriodUnit:v,getInitOffset:function(){return 1},getTabTitle:function(e){return e.getFullYear()},getTitle:function(e){return e.getFullYear()+" - "+this.periodEnd.getFullYear()}}),D.Century=l(D,{className:f+".CalendarSection.Century",sectionName:"Century",periodName:"century",nodePeriodName:"decade",nodePeriodUnit:v,nodePeriodUnitCount:10,getTabTitle:function(e){var t=e.getFullYear(),r=t-t%10;return r+"-"+n.number.lead(Number(r.toString().substr(-2))+9,2)},getInitOffset:function(){return 1}}),D.YearQuarters=l(D,{className:f+".CalendarSection.YearQuarter",sectionName:"YearQuarter",periodName:v,nodeCount:4,nodePeriodName:"quarter",nodePeriodUnit:m,nodePeriodUnitCount:3}),D.Quarter=l(D,{className:f+".CalendarSection.Quarter",sectionName:"Quarter",periodName:"quarter",nodeCount:3,nodePeriodName:m,nodePeriodUnit:m,binding:{title:S.token("quarter").compute("periodChanged",function(e){return 1})}});var P=l(d,{className:f+".Calendar",emit_change:p("change"),emit_childNodesModified:function(e){if(e.inserted)for(var t=0,n;n=e.inserted[t++];)n.isPeriodEnabled=this.isPeriodEnabled,n.childNodes.forEach(function(e){e.isPeriodEnabled=this.isPeriodEnabled},this),n.setViewDate(this.date.value),this.selectedDate.link(n,n.setSelectedDate),n.rebuild();if(e.deleted)for(var t=0,n;n=e.deleted[t++];)this.selectedDate.unlink(n,n.setSelectedDate);d.prototype.emit_childNodesModified.call(this,e),this.selection&&!this.selection.itemCount&&this.firstChild&&this.firstChild.select()},template:x.Calendar,binding:{today:function(){return n.date.format(new Date,"%D.%M.%Y")}},action:{moveNext:function(){this.selection.pick().nextPeriod()},movePrev:function(){this.selection.pick().prevPeriod()},selectToday:function(){this.selectedDate.set(new Date)}},templateAction:function(e,t,r){d.prototype.templateAction.call(this,e,t);if(r instanceof M){var i=r.periodStart,s=this.selection.pick();this.selectedDate.set(n.date.add(new Date(this.selectedDate.value),s.nodePeriodUnit,n.date.diff(this.selectedDate.value,s.nodePeriodUnit,i))),this.nextSection(w)}},satellite:{shadowTabs:n.ui.ShadowNodeList.subclass({className:f+".ShadowTabs",getChildNodesElement:function(e){return e.tmpl.sectionTabs},childClass:{className:f+".ShadowTab",getElement:function(e){return e.tmpl.tabElement}}})},selection:!0,childClass:D,childFactory:function(e){var t=e;typeof e=="string"&&(t=D[e]);if(!n.Class.isClass(t)||!t.isSubclassOf(D))return;return new t},date:null,childNodes:["Month","Year","YearDecade"],minDate:null,maxDate:null,map:null,periodEnableByDefault:!0,init:function(){var e=new Date;this.selectedDate=new n.data.Value({value:new Date(this.date||e)}),this.date=new n.data.Value({value:new Date(this.date||e)}),this.isPeriodEnabled=this.isPeriodEnabled.bind(this),d.prototype.init.call(this),this.sections&&this.setChildNodes(this.sections)},setMinDate:function(e){if(this.minDate!=e){this.minDate=e;for(var t=0,n;n=this.childNodes[t];t++)n.rebuild()}},setMaxDate:function(e){if(this.maxDate!=e){this.maxDate=e;for(var t=0,n;n=this.childNodes[t];t++)n.rebuild()}},setSection:function(e){var t=n.array.search(this.childNodes,"sectionName",e);t&&t.select()},nextSection:function(e){var t=this.selection.pick(),n=e?t.nextSibling:t.previousSibling;n?(n.select(),n.setViewDate(this.selectedDate.value)):e||this.emit_change()},selectDate:function(e){e-this.date.value!=0&&this.date.set(new Date(e))},getNextPeriod:function(e,t){if(!this.isNextPeriodEnabled(e,t))return!1;if(this.map){var r=t?1:-1,i=t?"start":"till",s=t?"till":"start",o=n.date.add(new Date(e),"millisecond",r),u=this.map[this.periodEnableByDefault?"disabled":"enabled"];if(u){var a=O(v,o);a.periodEnd.getFullYear()==o.getFullYear()&&(a[i]=o);while(!this.isPeriodEnabled(a.periodStart,a.periodEnd))a=O(v,n.date.add(o,v,r));a[s]=O(m,a[i])[s];while(!this.isPeriodEnabled(a.periodStart,a.periodEnd))a=O(m,n.date.add(o,m,r));var f=T(a[i]),l=T(a[s]),c=u[l.year]&&u[l.year][l.month];if(!c)return O(g,a[i]);if(this.periodEnableByDefault){var h=C[a.periodEnd.getMonthDayCount()];c=c&h^h}for(var p=f.day;p!=l.day+r;p+=r)if(c>>p&1){o=new Date(f.year,f.month,p+1);break}}}return O(g,o)},isNextPeriodEnabled:function(e,t){if(!t&&this.minDate&&this.minDate>e)return!1;if(t&&this.maxDate&&this.maxDate<e)return!1;if(this.map){if(!this.periodEnableByDefault){var r=t?1:-1,i=e.getFullYear(),s=n.date.add(new Date(e),"millisecond",r),o=s.getFullYear(),u=n.object.keys(this.map.enable).filter(function(e){return r*e>=r*o}),a=u.length;if(a){u=u.sort(function(e,t){return r*(e>t)||-r*(e<t)});for(var f=0;f<a;f++){var l=O(v,new Date(u[f],0));if(this.isPeriodEnabled(t&&u[f]==i?s:l.periodStart,!t&&u[f]==i?s:l.periodEnd))return!0}}return!1}if(!t&&this.minDate)return this.isPeriodEnabled(this.minDate,e);if(t&&this.maxDate)return this.isPeriodEnabled(e,this.maxDate)}return!0},isPeriodEnabled:function(e,t){function n(e,t,n,r){var i;return e?e==1?t&C[r+1]:t:t>>n}if(this.minDate&&this.minDate>t)return!1;if(this.maxDate&&this.maxDate<e)return!1;var r=this.map&&this.map[this.periodEnableByDefault?"disabled":"enabled"];if(r){var i=T(e),s=T(t),o=i.month,u,a,f,l=new Date(i.year,i.month),c=11-i.month,h=c+1+(s.year-i.year-1)*12+(s.month+1)-1;if(this.periodEnableByDefault){if(h==0)return!(u=r[i.year])||!(a=u[i.month])||(a^k)>>i.day&C[s.day-i.day+1];for(var p=0;p<=h;p++){if(!p||c==p%12){u=r[l.getFullYear()];if(!u)return!0}a=u[o=l.getMonth()];if(!a)return!0;f=C[l.getMonthDayCount()];if(n(p/h,a&f^f,i.day,s.day))return!0;l.setMonth(o+1)}return!1}if(h==0)return(u=r[i.year])&&(a=u[i.month])&&a>>i.day&C[s.day-i.day+1];for(var p=0;p<=h;p++){if(!p||c==p%12||!u){u=r[l.getFullYear()];if(!u){p+=12,l.setMonth(o+12);continue}}a=u[o=l.getMonth()];if(a&&n(p/h,a,i.day,s.day))return!0;l.setMonth(o+1)}return!1}return!0},destroy:function(){d.prototype.destroy.call(this),this.date.destroy(),this.date=null,this.selectedDate.destroy(),this.selectedDate=null,delete this.isPeriodEnabled,this.tabElementMap_=null}});t.exports={Calendar:P,CalendarSection:D}},"z.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./a.js");t.exports={whoami:function(e){return new f.Transport({url:"http://localhost:8888/whoami",method:"GET",handler:{success:function(t,n,r){r.success&&e(r)}}})},signIn:function(e){return new f.Transport({url:"http://localhost:8888/login",method:"POST",contentType:"application/json",handler:{success:function(t,n,r){r.success?e(r):alert("Authentication failed")},failure:function(){alert("Authentication failed")}}})}}},"x.js":function(e,t,n,r,i,s,o,u,a){n.require("./g.js");var f=n.require("./v.js");t.exports=n.ui.calendar.Calendar.subclass({childNodes:["Year","YearDecade"],action:{click:function(){}},handler:{change:function(){this.owner.emit_monthChange(this.selectedDate.value)},update:function(){var e=f().year(parseInt(this.data.year)).month(this.data.month);this.selectedDate.set(e.toDate())}}})},"f.js":function(e,t,n,r,i,s,o,u,a){function tt(e,t,n){return t!=null?e.insertBefore(et(t)?t:lt(t),n||null):null}function rt(e,t){return e.outerHTML||vt("",t?e:e.cloneNode(!0)).innerHTML}function st(e){for(var t=0,n;n=it[t++];)if(e[n]!=null)return e[n];return at(e,A,function(e){return e.nodeType==g}).map(p("nodeValue")).join("")}function ot(e){return e&&(et(e)||e.nodeType)?e:typeof e=="string"?l.getElementById(e):null}function ut(e,t){var n=ot(e)||l;return t=="*"&&n.all?h(n.all):h(n.getElementsByTagName(t||"*"))}function at(e,t,r){var i=[],s,o;r=typeof r=="string"?p(r):r||n.fn.$true,t&(M|L|O)&&r(e)&&i.push(e);switch(t){case k:case L:o=e;while((o=o[W])&&o!==e.document)r(o)&&i.push(o);break;case D:o=e[X];while(o)r(o)&&i.push(o),o=o[$];break;case A:case O:e[X]&&(s=new nt(e),s.nodes(r,i));break;case P:s=new nt(e,r),s.cursor_=e[$]||e[W];while(o=s.next())i.push(o);break;case H:o=e;while(o=o[$])r(o)&&i.push(o);break;case _:r(e[W])&&i.push(e[W]);break;case B:s=new nt(e,r,nt.BACKWARD),s.cursor_=e[J]||e[W];while(o=s.next())i.push(o);break;case j:o=e;while(o=o[J])r(o)&&i.push(o)}return i}function ft(e,t,n){while(e&&e!==n){if(t(e))break;e=e.parentNode}return e||null}function lt(e){return l.createTextNode(e!=null?e:"")}function ct(){var e=l.createDocumentFragment(),t=arguments.length,n=ct.array=[];for(var r=0;r<t;r++)n.push(tt(e,arguments[r]));return e}function vt(e){var t=e!=undefined&&typeof e!="string",r=(t?e.description:e)||"",i="div",s,o=r.match(/^([a-z0-9_\-]+)(.*)$/i);o&&(i=o[1],r=o[2]);if(r!=""){var u=[],a={},f;while(o=dt.exec(r)){if(o[8])throw 38;f=o[1]||o[2]||o[3],o[1]?a.id=f:o[2]?u.push(f):f!="class"&&(a[f]=o[4]?o[5]||o[6]||o[7]||"":f)}ht&&a.name&&/^(input|textarea|select)$/i.test(i)&&(i="<"+i+" name="+a.name+">")}s=l.createElement(i);if(a){a.style&&pt&&(s.style.cssText=a.style);for(var c in a)s.setAttribute(c,a[c],0)}u&&u.length&&(s.className=u.join(" ")),arguments.length>1&&tt(s,ct.apply(0,n.array.flatten(h(arguments,1))));if(t){e.css&&n.cssom&&n.cssom.setStyle(s,e.css);if(n.dom.event)for(var p in e)typeof e[p]=="function"&&n.dom.event.addHandler(s,p,e[p],s)}return s}function mt(e,t,n,r){e=ot(e)||e;switch(n){case undefined:case Q:r=null;break;case K:r=e[X];break;case G:break;case Y:r=r[$];break;default:n=Number(n),r=n>=0&&n<e.childNodes.length?e.childNodes[n]:null}var i=!et(e),s;if(!t||!Array.isArray(t))s=i?t&&e.insertBefore(t,r):tt(e,t,r);else if(i){s=[];for(var o=0,u=t.length;o<u;o++)s[o]=e.insertBefore(t[o],r)}else e.insertBefore(ct.apply(0,t),r),s=ct.array;return s}function gt(e){return e[W]?e[W].removeChild(e):e}function yt(e,t){return e[W]?e[W].replaceChild(t,e):e}function bt(e,t){return e===t||Z(e,t)&(U|R|F)?!1:(yt(e,d),yt(t,e),yt(d,t),!0)}function wt(e,t){var r=e.cloneNode(!t);return r.attachEvent&&at(r,O).forEach(n.dom.event.clearHandlers),r}function Et(e){e=ot(e);while(e[V])e.removeChild(e[V]);return e}function St(e,t,r){var i=[];r=n.getter(r||n.fn.$self);for(var s in t)for(var o=0;o<e.length;o++){var u=r(e[o]);i[o]=t[s](e[o],o,u)?vt(s,u):e[o]}return i}function xt(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Tt(e,t){return(new RegExp("(^|\\W)"+e.tagName+"(\\W|$)")).test(t)}function Nt(e,t){return e.contains(t)}function Ct(e,t){return e==t||t.contains(e)}function kt(e,t){try{e=ot(e),e.focus(),t&&e.select&&e.select()}catch(n){}}function Lt(e,t,n){arguments.length<3&&(n=t);if(e.setSelectionRange)e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}function At(e){if(l.selection){var t=l.selection.createRange();return t.compareEndPoints("StartToEnd",t)!=0&&t.collapse(e),t.getBookmark().charCodeAt(2)-2}return 0}function Ot(e){return typeof e.selectionStart!="undefined"?e.selectionStart:At(!0)}function Mt(e){return typeof e.selectionEnd!="undefined"?e.selectionEnd:At(!1)}n.require("./8.js");var f=this.path,l=r.document,c=n.Class,h=n.array.from,p=n.getter,d=l.createElement("div"),v=1,m=2,g=3,y=4,b=5,w=6,E=7,S=8,x=9,T=10,N=11,C=12,k=1,L=2,A=4,O=8,M=16,_=32,D=64,P=128,H=256,B=512,j=1024,F=1,I=2,q=4,R=8,U=16,z=32,W="parentNode",X="firstChild",V="lastChild",$="nextSibling",J="previousSibling",K="begin",Q="end",G="before",Y="after",Z;typeof d.compareDocumentPosition=="function"?Z=function(e,t){return e.compareDocumentPosition(t)}:Z=function(e,t){return e==t?0:e.document!=t.document?F|z:e.sourceIndex>t.sourceIndex?I|R*t.contains(e):q|U*e.contains(t)};var et;typeof Node!="undefined"?(et=function(e){return e instanceof Node},Node.prototype.contains||(Node.prototype.contains=function(e){return!!(this.compareDocumentPosition(e)&U)})):et=function(e){return e&&e.ownerDocument===l};var nt=c(null,{className:f+".TreeWalker",root_:null,cursor_:null,filter:n.fn.$true,init:function(e,t,n){this.setRoot(e),this.setDirection(n),typeof t=="function"&&(this.filter=t)},setDirection:function(e){n.object.extend(this,e?{a:V,b:J,c:$,d:X}:{a:X,b:$,c:J,d:V})},setRoot:function(e){this.root_=e||l,this.reset()},reset:function(){this.cursor_=null},first:function(e){return this.reset(),this.next(e)},last:function(e){return this.reset(),this.prev(e)},nodes:function(e,t){var n;t||(t=[]),this.reset();while(n=this.next(e))t.push(n);return t},next:function(e){e=e||this.filter;var t=this.cursor_||this.root_;do{var n=t[this.a];while(!n){if(t===this.root_)return this.cursor_=null;n=t[this.b],n||(t=t[W])}}while(!e(t=n));return this.cursor_=t},prev:function(e){e=e||this.filter;var t=this.cursor_,n=this.c,r=this.d;do{var i=t?t[n]:this.root_[r];if(i){while(i[r])i=i[r];t=i}else t&&(t=t[W]);if(!t||t===this.root_){t=null;break}}while(!e(t));return this.cursor_=t},destroy:function(){this.root_=null,this.cursor_=null}});nt.BACKWARD=!0;var it=["textContent","innerText","nodeValue"],ht=function(){var e=l.createElement("input");return e.name="a",!/name/.test(rt(e))}(),pt=function(){return d.setAttribute("style","color: red"),d.style.color!=="red"}(),dt=/#([a-z0-9_:\-]+)|\.([a-z0-9_:\-]+)|\[([a-z0-9_:\-]+)(="((?:\\.|[^"])*)"|='((?:\\.|[^'])*)'|=((?:\\.|[^\]])*))?\s*\]|\s*(\S)/gi;t.exports={ELEMENT_NODE:v,ATTRIBUTE_NODE:m,TEXT_NODE:g,CDATA_SECTION_NODE:y,ENTITY_REFERENCE_NODE:b,ENTITY_NODE:w,PROCESSING_INSTRUCTION_NODE:E,COMMENT_NODE:S,DOCUMENT_TYPE_NODE:T,DOCUMENT_NODE:x,DOCUMENT_FRAGMENT_NODE:N,NOTATION_NODE:C,AXIS_ANCESTOR:k,AXIS_ANCESTOR_OR_SELF:L,AXIS_DESCENDANT:A,AXIS_DESCENDANT_OR_SELF:O,AXIS_SELF:M,AXIS_PARENT:_,AXIS_CHILD:D,AXIS_FOLLOWING:P,AXIS_FOLLOWING_SIBLING:H,AXIS_PRECEDING:B,AXIS_PRECEDING_SIBLING:j,INSERT_BEGIN:K,INSERT_END:Q,INSERT_BEFORE:G,INSERT_AFTER:Y,TreeWalker:nt,outerHTML:rt,textContent:st,get:ot,tag:ut,axis:at,findAncestor:ft,createElement:vt,createText:lt,createFragment:ct,insert:mt,remove:gt,replace:yt,swap:bt,clone:wt,clear:Et,wrap:St,setAttribute:xt,parentOf:Nt,isInside:Ct,focus:kt,setSelectionRange:Lt,getSelectionStart:Ot,getSelectionEnd:Mt}},"w.js":function(e,t,n,r,i,s,o,u,a){n.require("./f.js"),n.require("./1.js"),t.exports=n.ui.Node.subclass({template:n.template.get("#1"),childClass:n.ui.Node.subclass({template:n.template.get("#2"),data:{name:"default",id:0},binding:{name:"data:name",id:"data:id"},action:{selectTeam:function(){this.parentNode.owner.emit_teamChange(this.data.code)}}}),handler:{update:function(){var e=this.data.teams,t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({data:{id:e[n].id,name:e[n].name,code:e[n].code}});this.setChildNodes(t)}}})},"10.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),t.exports=n.ui.Node.subclass({container:document.getElementById("page"),template:"<div>Page</div>",selection:!0,childFactory:function(e){return new e({delegate:this.delegate,router:this.router})}})},"11.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./12.js"),l=n.require("./13.js");t.exports=f.subclass({name:"publicHolidaysPage",childNodes:[new l],init:function(){n.ui.Node.prototype.init.call(this);var e=this;this.router.add("public-holidays/:month/:year",{match:function(t,n){e.update({month:t,year:n}),e.select(),e.getChildByName("PublicHolidaysYear").update({year:e.data.year,publicHolidays:e.data.publicHolidays})}})}})},"12.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),t.exports=n.ui.Node.subclass({template:'<div class="page page-{unselected}" id="{name}"><h2>{name}</h2><div{childNodesElement}/><!--{teamForm}--><!--{employeeForm}--></div>',binding:{name:"name"}})},"13.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),n.require("./o.js"),n.require("./q.js");var f=n.require("./v.js"),l=f(),c=[],h=[],p=365;for(var d=0;d<12;d++)c.push({monthId:parseInt(l.month(d).format("M"),10),title:l.month(d).format("MMMM")});for(d=0;d<p;d++)h.push({id:d,monthId:parseInt(l.dayOfYear(d).format("M"),10),title:l.dayOfYear(d).format("DD"),isHoliday:!1});var v=n.entity.createType({name:"Month",fields:{monthId:n.entity.IntId,title:String},all:{syncAction:function(){this.sync(c&&c.map(this.wrapper.reader))}}}),m=n.entity.createType({name:"Day",autoDelegate:!0,fields:{id:n.entity.IntId,group:"Month",title:String,isHoliday:Boolean,isWeekend:Boolean},aliases:{monthId:"group"},all:{syncAction:function(){this.sync(h&&h.map(this.wrapper.reader))}}});t.exports=n.ui.Node.subclass({name:"PublicHolidaysYear",template:'<div class="days-list"><div{childNodesElement}/><div class="clearfix"></div></div>',dataSource:m.all,active:!0,selection:{multiple:!0},childClass:{template:'<div class="day {selected} {isHoliday} {isWeekend}" event-click="select">{title}</div>',action:{select:function(e){this.select(e.ctrlKey||e.metaKey)}},binding:{title:"data:",isHoliday:"data:",isWeekend:"data:"}},sorting:"data.id",grouping:{dataSource:v.all,active:!0,rule:"data.group",childClass:{template:'<div class="month"><div class="month-Title" event-click="selectAll" title="Click to select all users in group">{title}</div></div>',action:{selectAll:function(){this.parentNode.owner.selection.set(this.nodes)}},binding:{title:"data:"}}},handler:{update:function(){var e=parseInt(this.data.year,10),t=f().date(1).month(0).year(e);h=[];while(t.format("YYYY")==e)h.push({id:t.format("DDD"),monthId:parseInt(t.format("M"),10),title:t.format("DD"),isHoliday:this.data.publicHolidays.hasOwnProperty(t.format("YYYY-MM-DD")),isWeekend:[6,7].indexOf(parseInt(t.format("E"),10))>=0}),t.add(1,"d");m.all.sync(h&&h.map(m.all.wrapper.reader))}}})},"o.js":function(e,t,n,r,i,s,o,u,a){function D(e){return _[e]=_[e]||0,e+_[e]++}function F(e,t){var n=B[e];if(n){for(var r=0,i;i=n[r];r++){var s=i[0],o=i[1];s[o]=t}delete B[e]}P[e]=t}function I(e,t,n){if(P[e])return P[e];var r=B[e];return r||(r=B[e]=[]),r.push([t,n]),function(t,n){var r=P[e];if(r)return r(t,n)}}function q(){for(var e in B)n.dev.warn(f+": type `"+e+"` is not defined, but used by "+B[e].length+" type(s)")}function U(){var e=g(arguments),t=e.pop(),n=e[0],r=e[1],i=e[2],s;if(typeof t!="function")throw 44;switch(e.length){case 0:s=function(){return t()};break;case 1:s=function(e,r,i){return n in e?t(r[n]):i};break;case 2:s=function(e,i,s){return n in e||r in e?t(i[n],i[r]):s};break;case 3:s=function(e,s,o){return n in e||r in e||i in e?t(s[n],s[r],s[i]):o};break;default:s=function(n,r,i){var s=!1,o=[];for(var u=0,a;a=e[u];u++)s=s||a in n,o.push(r[a]);return s?t.apply(null,o):i}}return s.args=e,s.calc=s,s}function z(e){return arguments.length==1?function(t,n,r){return e in t?n[e]!=null?String(n[e]):null:r}:U.apply(null,g(arguments).concat(function(){for(var e=arguments.length-1;e>=0;e--)if(arguments[e]==null)return null;return Array.prototype.join.call(arguments,"-")}))}function rt(e,t){var n=["has"],r=[c],i=[];for(var s in e)if(c.call(e,s)){var o="v"+i.length,u="f"+i.length,a=e[s];n.push(o,u),r.push(a,t[s]),i.push('"'+s+'":'+'has.call(data,"'+s+'")'+"?"+u+'(data["'+s+'"],'+o+")"+":"+o+(typeof a=="function"?"(data)":""))}var f=i.sort().join(","),l=tt[f];return l||(l=tt[f]=new Function(n,"return function(data){return {"+f+"};"+"};")),l.apply(null,r)}function it(e,t){if(!Array.isArray(e))return null;if(!Array.isArray(t)||e.length!=t.length)return e||null;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return e;return t}function at(e,t){return typeof e=="string"&&e?ut(e):typeof e=="number"&&isNaN(e)==0?new Date(e):e==null?null:e&&e.constructor===Date?e:t}function ft(e,t,r){e.aliases[t]=t,typeof r=="string"||Array.isArray(r)||typeof r=="function"&&r.calc!==r?r={type:r}:r=r?n.object.slice(r):{};if("type"in r){typeof r.type=="string"&&(r.type=I(r.type,e.fields,t));if(Array.isArray(r.type)){var i=r.type.slice();i.length==1?(r.type=n.fn.$const(i[0]),r.defValue=i[0]):(r.type=function(e,t){var n=i.indexOf(e)!=-1;return n?e:t},r.defValue=i.indexOf(r.defValue)!=-1?r.defValue:i[0])}r.type===Array&&(r.type=it),r.type===Date&&(r.type=at),typeof r.type!="function"&&(r.type=null)}var s=r.type||v;if(r.id||r.index||[L,A,O,M].indexOf(s)!=-1)e.idFields[t]=r;r.calc?(ct(e,t,r.calc),e.fields[t]=nt):e.fields[t]=s,e.defaults[t]="defValue"in r?r.defValue:s(),et[t]||(et[t]={destroy:function(){this.set(t,null)}})}function lt(e,t,n){if(n in e.fields==0)return;if(t in e.aliases)return;e.aliases[t]=n}function ct(e,t,r){e.calcs||(e.calcs=[]);var i=e.calcs,s=e.deps,o=r.args||[],u={args:o,wrapper:r},a=e.calcs.length,f=0;if(o)for(var l=0,c;c=i[l];l++)o.indexOf(c.key)!=-1&&(f=l+1);if(t){u.key=t;for(var l=0,c;c=i[l];l++)if(c.args.indexOf(t)!=-1){a=l;break}if(f>a)return;s[t]=o.reduce(function(e,t){var r=s[t]||[t];for(var i=0;i<r.length;i++)n.array.add(e,r[i]);return e},[]);for(var h in s){var p=s[h].indexOf(t);p!=-1&&Array.prototype.splice.apply(s[h],[p,1].concat(s[t]))}}else a=f;i.splice(Math.min(a,f),0,u)}function ht(e){return function(t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]}}function pt(e){return function(t,n){return this.set(e,t,n)}}function vt(e,t){n.dev.warn("[basis.entity "+e.entityType.name+"#"+e.basisObjectId+"] "+t,e)}function yt(e){return e&&e instanceof mt}function bt(e,t){var r=e||{};return typeof e=="string"?r={name:r,fields:t||{}}:t&&(r=n.object.merge(r,{fields:t})),new Z(r)}function wt(e,t){return arguments.length>1?new G(t,e):new G(e)}n.require("./3.js"),n.require("./4.js"),n.require("./p.js");var f=this.path,l=n.Class,c=Object.prototype.hasOwnProperty,h=n.object.keys,p=n.object.extend,d=n.object.complete,v=n.fn.$self,m=n.getter,g=n.array.from,y=n.event.Emitter,b=n.event.create,w=n.data.Object,E=n.data.Slot,S=n.data.Dataset,x=n.data.dataset.Filter,T=n.data.dataset.Split,N={},C=[],k={string:!0,number:!0},L=function(e){return isNaN(e)?null:Number(e)},A=function(e){return isNaN(e)?null:Number(e)},O=function(e){return isNaN(e)?null:parseInt(e,10)},M=function(e){return e==null?null:String(e)},_={},P={},H={},B={},j=function(){},R=l(null,{className:f+".Index",items:null,init:function(e){this.items={}},get:function(e,t){var n=c.call(this.items,e)&&this.items[e];if(n&&(!t||n.entityType===t))return n},add:function(e,t){if(t){var n=this.get(e);if(!n)return this.items[e]=t,!0;if(n!==t)throw 43}},remove:function(e,t){if(this.items[e]===t)return delete this.items[e],!0},destroy:function(){this.items=null}}),W=function(e,t){return function(n){return e.prototype[t].call(this,n&&n.map(this.wrapper))}},X=function(e,t){return function(){this.name||(this.name=D(t)),e.prototype.init.call(this)}},V=function(e){return function(e){var t=n.object.slice(this.items_),r=[],i=[];if(e){S.setAccumulateState(!0);for(var s=0;s<e.length;s++){var o=this.wrapper(e[s]);o&&(t[o.basisObjectId]=!1)}S.setAccumulateState(!1)}for(var u in this.items_)u in t==0&&r.push(this.items_[u]);for(var u in t)t[u]&&i.push(t[u]);i.length&&this.wrapper.all&&this.wrapper.all.emit_itemsChanged({deleted:i}),S.setAccumulateState(!0);for(var s=0;s<i.length;s++)i[s].destroy();return S.setAccumulateState(!1),r.length?r:null}},$=l(S,{className:f+".EntitySet",name:null,wrapper:v,init:X(S,"EntitySet"),sync:V(S),set:W(S,"set"),add:W(S,"add"),remove:W(S,"remove"),destroy:function(){S.prototype.destroy.call(this),this.wrapper=null}}),J=l($,{className:f+".ReadOnlyEntitySet",set:n.fn.$false,add:n.fn.$false,remove:n.fn.$false,clear:n.fn.$false}),K=l(x,{className:f+".EntityCollection",name:null,init:X(x,"EntityCollection"),sync:V(x)}),Q=l(T,{className:f+".EntityGrouping",name:null,subsetClass:J,init:X(T,"EntityGrouping"),sync:V(T),getSubset:function(e,t){var n=T.prototype.getSubset.call(this,e,t);return n&&n.dataset&&(n.dataset.wrapper=this.wrapper),n}}),G=function(e,t){if(this instanceof G){e||(e=v);if(!t||P[t])t=D("UntitledEntitySetType");var n=new Y({entitySetClass:{wrapper:e}}),r=n.entitySetClass,i=function(e,t){return e!=null?(t instanceof $==0&&(t=n.createEntitySet()),t.set(e instanceof S?e.getItems():g(e)),t):null};return typeof e=="string"&&(r.prototype.wrapper=I(e,r.prototype,"wrapper")),F(t,i),p(i,{type:n,typeName:t,toString:function(){return t+"()"},reader:function(e){if(Array.isArray(e)){var t=r.prototype.wrapper;return e.map(t.reader||t)}return e},extendClass:function(e){return r.extend.call(r,e),i},extendReader:function(e){var t=i.reader;return i.reader=function(n){return Array.isArray(n)&&e(n),t(n)},i},entitySetType:n,extend:function(){return r.extend.apply(r,arguments)}}),i}},Y=l(null,{className:f+".EntitySetConstructor",entitySetClass:$,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),Z=function(e){if(this instanceof Z){var t;e.singleton?t=function(e){var t=n.get();return t?e&&t.update(e):t=new r(e||{}),t}:t=function(e,t){if(e!=null){if(!t||t.entityType!==n)t=null;if(e===t||e.entityType===n)return e;var i,s=n.idField;if(k[typeof e]){if(!s)return;if(t=n.index.get(e,n))return t;i=e,e={},e[s]=i}else n.compositeKey&&(i=n.compositeKey(e,e)),i!=null&&(t=n.index.get(i,n));return t&&t.entityType===n?t.update(e):t=new r(e),t}};var n=new dt(e||{},t),r=n.entityClass,i=n.name;return F(i,t),p(t,{all:n.all,type:n,typeName:i,toString:function(){return i+"()"},get:function(e){return n.get(e)},getSlot:function(e,t){return n.getSlot(e,t)},reader:function(e){return n.reader(e)},extendClass:function(e){return r.extend.call(r,e),t},extendReader:function(e){var n=t.reader;return t.reader=function(t){return t&&typeof t=="object"&&e(t),n(t)},t},entityType:n,extend:function(){return r.extend.apply(r,arguments)}}),t}},et={},tt={},nt=function(e,t){return t},st=/\D/,ot=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,ut=function(){function e(e,n,r,i,s,o,u){var a=new Date(e,n-1,r,i||0,0,o||0,u?u.substr(0,3):0);return a.setMinutes((s||0)-t-a.getTimezoneOffset()),a}var t;return function(n){return t=0,e.apply(null,String(n||"").replace(ot,function(e,n,r,i){return t=i?r*60+i*1:r*1,n}).split(st))}}(),dt=l(null,{className:f+".EntityType",wrapper:null,all:null,fields:null,idField:null,idFields:null,defaults:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(e,t){this.name=e.name;if(!this.name||P[this.name])this.name=D("UntitledEntityType");this.fields={},this.deps={},this.idFields={},this.defaults={},this.aliases={},this.slots={};var r=e.index;r&&r instanceof R&&(this.index=r),this.wrapper=t;if("all"in e==0||e.all||e.singleton)this.all=new J(n.object.complete({wrapper:t},e.all));this.singleton=!!e.singleton;if(this.singleton){var i;this.get=function(){return i},this.all.addHandler({itemsChanged:function(e,t){i=t.inserted?t.inserted[0]:null}},this)}for(var s in e.fields)ft(this,s,e.fields[s]);for(var s in e.aliases)lt(this,s,e.aliases[s]);e.constrains&&e.constrains.forEach(function(e){ct(this,null,e)},this);var o=h(this.idFields),u={};if(o.length){for(var a in this.idFields){var f=this.idFields[a],r=f.index,l;if(!r||r instanceof R==0)typeof r=="string"?(r in H==0&&(H[r]=new R),r=H[r]):(this.index||(this.index=new R),r=this.index);l=u[r.basisObjectId],l||(l=u[r.basisObjectId]={index:r,fields:[]}),l.fields.push(a),this.idFields[a]=l}this.index&&this.index.basisObjectId in u==0&&(this.index=null);for(var c in u){var l=u[c];l.property="__id__"+c,l.compositeKey=z.apply(null,l.fields),l.fields.length==1&&(l.idField=l.fields[0])}var p=h(u),d=u[this.index?this.index.basisObjectId:p[0]];this.index=d.index,this.idField=d.idField,this.compositeKey=d.compositeKey,this.idProperty=d.property,this.indexes=u}else this.index&&(this.index=null);var v={};for(var s in this.defaults)v[s]=undefined;this.entityClass=gt(this,this.all,this.fields,this.slots),this.entityClass.extend({entityType:this,type:t,typeName:this.name,state:e.state||this.entityClass.prototype.state,generateData:rt(this.defaults,this.fields),initDelta:v});for(var m in this.fields)this.entityClass.prototype["get_"+m]=ht(m),this.fields[m]!==nt&&(this.entityClass.prototype["set_"+m]=pt(m));C.push(this)},reader:function(e){var t={};if(k[typeof e])return this.idField?e:null;if(!e||e==null)return null;for(var n in e){var r=this.aliases[n];if(r){var i=this.fields[r].reader;t[r]=i?i(e[n]):e[n]}}return t},get:function(e){var t=this.getId(e);if(this.index&&t!=null)return this.index.get(t,this)},getId:function(e){if(this.compositeKey&&e!=null){if(k[typeof e])return e;if(e&&e.entityType===this)return e[this.idProperty];e instanceof w&&(e=e.data);if(this.compositeKey)return this.compositeKey(e,e)}},getSlot:function(e){var t=this.getId(e);if(t!=null){var n=c.call(this.slots,t)&&this.slots[t];if(!n){if(k[typeof e]){var r={};this.idField&&(r[this.idField]=e),e=r}n=this.slots[t]=new E({delegate:this.get(t)||null,data:e})}return n}}}),mt=l(w,{className:f+".BaseEntity",target:!0,setDelegate:function(){},extendConstructor_:!1,fieldHandlers_:null,modified:null,emit_rollbackUpdate:b("rollbackUpdate")}),gt=function(e,t,r,i){function s(t,n,r){var i=e.calcs,s=t.data,u=!1;try{if(i)for(var a=0,f;f=i[a];a++){var l=f.key,c=s[l],h=f.wrapper(n,s,c);l&&h!==c&&(n[l]=c,s[l]=h,u=!0)}for(var p in e.indexes){var d=e.indexes[p],v=t[d.property],m=v;d.compositeKey&&(m=d.compositeKey(n,s,v)),m!==v&&(o(d.index,t,v,m),t[d.property]=m)}return u}catch(g){for(var l in n)t.data[l]=n[l];r&&!t.modified&&(t.modified=r)}}function o(e,t,n,r){r!=null&&(e.add(r,t),c.call(i,r)&&i[r].setDelegate(t)),n!=null&&(e.remove(n,t),c.call(i,n)&&i[n].setDelegate())}return l(mt,{className:e.name,init:function(e){this.delegate=null,this.data=this.generateData(e),mt.prototype.init.call(this);var n;for(var r in this.data)n=this.data[r],n&&n!==this&&n instanceof y&&(n.addHandler(et[r],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[r]=!0);s(this,this.initDelta),t&&t.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[e.idProperty]},get:function(e,t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]},set:function(t,n,i,o){var u=r[t];if(!u)return!1;var a,f=this.modified;u===it&&f&&t in f&&(n=it(n,f[t]));var l=u(n,this.data[t]),c=this.data[t],p=l!==c&&(!l||!c||l.constructor!==Date||c.constructor!==Date||+l!==+c);if(p)e:{a={};if(!e.idFields[t])if(i)f||(this.modified=f={}),t in f==0?(a.rollback={key:t,value:undefined},f[t]=c):f[t]===l&&(a.rollback={key:t,value:l},delete f[t],h(f).length||(this.modified=null));else if(f&&t in f){if(f[t]!==l){a.rollback={key:t,value:f[t]},f[t]=l;break e}return!1}this.data[t]=l,this.fieldHandlers_&&this.fieldHandlers_[t]&&(c.removeHandler(et[t],this),this.fieldHandlers_[t]=!1),l&&l!==this&&l instanceof y&&(l.addHandler(et[t],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[t]=!0),a.key=t,a.value=c,a.delta={},a.delta[t]=c}else!i&&f&&t in f&&(a={rollback:{key:t,value:f[t]}},delete f[t],h(f).length||(this.modified=null));if(!o&&a){var d=a.key,v=a.delta||{},m;a.rollback&&(m={},m[a.rollback.key]=a.rollback.value),s(this,v,m)&&(d=!0),d&&(this.emit_update(v),a.delta=v),m&&this.emit_rollbackUpdate(m)}return a||!1},update:function(e,t){var n=!1,r={};if(e){var i,o;for(var u in e)if(o=this.set(u,e[u],t,!0))o.key&&(n=!0,r[o.key]=o.value),o.rollback&&(i||(i={}),i[o.rollback.key]=o.rollback.value);s(this,r,i)&&(n=!0),n&&this.emit_update(r),i&&this.emit_rollbackUpdate(i)}return n?r:!1},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var e={};for(var t in this.data)e[t]=undefined;return this.update(e)},commit:function(e){var t=this.modified;this.modified=null,e&&this.update(e),t&&this.emit_rollbackUpdate(t)},rollback:function(t){var r=this.modified;r&&t&&(Array.isArray(t)||(t=[t]),r=n.object.slice(r,t.reduce(function(t,n){return t.concat(e.deps[n]||n)},[]))),this.update(r,!0)},destroy:function(){if(this.fieldHandlers_){for(var n in this.fieldHandlers_)this.fieldHandlers_[n]&&this.data[n].removeHandler(et[n],this);this.fieldHandlers_=null}for(var n in e.indexes){var r=e.indexes[n],i=this[r.property];i!=null&&o(r.index,this,i,null)}t&&t.has(this)&&t.emit_itemsChanged({deleted:[this]}),w.prototype.destroy.call(this),this.data=N,this.modified=null}})};t.exports={isEntity:yt,createType:bt,createSetType:wt,validate:q,getTypeByName:function(e){return P[e]},getIndexByName:function(e){return H[e]},get:function(e,t){var n=P[e];if(n)return n.get(t)},resolve:function(e,t){var n=P[e];if(n)return n(t)},getByIndex:function(e,t){if(e in H)return H[e].get(t)},NumericId:L,NumberId:A,IntId:O,StringId:M,Index:R,CalculateField:U,ConcatStringField:z,calc:U,EntityType:Z,Entity:gt,BaseEntity:mt,EntitySetType:G,EntitySet:$,ReadOnlyEntitySet:J,Collection:K,Grouping:Q}},"p.js":function(e,t,n,r,i,s,o,u,a){function L(e,t){var n={},r;e&&e.length&&(r=n.inserted=e),t&&t.length&&(r=n.deleted=t);if(r)return n}function A(e,t){return function r(t){return t?t.__extend__?t:(typeof t!="string"&&!Array.isArray(t)&&(t=null),h(n.event.createHandler(t,e),{__extend__:r})):null}(t)}function O(e,t,n,r){return new x(h({keyGetter:t,itemClass:n,create:function(e,t){var n=x.prototype.create.call(this,e,t);return n.ruleValue=e,n.setDataset(new r({ruleValue:e})),n}},e))}function z(e,t){if(!e.length)return 0;var n=t.value,r=t.object.basisObjectId,i,s,o,u,a=0,f=e.length-1;do{o=a+f>>1,u=e[o],i=u.value;if(n<i)f=o-1;else if(n>i)a=o+1;else{s=u.object.basisObjectId;if(r<s)f=o-1;else{if(!(r>s))return o;a=o+1}}}while(a<=f);return o+(i==n?s<r:i<n)}function X(e,t){return+(e.value>t.value)||-(e.value<t.value)||e.object.basisObjectId-t.object.basisObjectId}function et(e,t,n){var r=e.sourceMap_[t.basisObjectId];if(r&&r.visited!==n){for(var i=r;i=i.ref;)if(i.object===e.source)return!0;r.visited=n;for(var i=r;i=i.ref;)if(et(e,i.object,n||{}))return!0}}function tt(e,t,n){var r=e.sourceMap_,i=e.members_,s=b(t),o=[];for(var u=0;u<s.length;u++){var a=s[u],f=a.basisObjectId;f||(n=a.ref,a=a.object,f=a.basisObjectId);var l=r[f];if(l)l.ref={object:n,ref:l.ref};else{l=r[f]={source:a,ref:{object:n,ref:null},visited:null,value:null};if(a instanceof S){var c=e.rule(a)||null;if(c instanceof S||c instanceof T)l.value=c,s.push({object:c,ref:a});i[f]=l,o.push(a),e.ruleEvents&&a.addHandler(e.ruleEvents,e)}else{a.addHandler(Z,e);for(var h=0,p=a.getItems();h<p.length;h++)s.push({object:p[h],ref:a})}}}return o}function nt(e,t,n){var r=e.sourceMap_,i=e.members_,s=b(t),o=[];for(var u=0;u<s.length;u++){var a=s[u],f=a.basisObjectId;f||(n=a.ref,a=a.object,f=a.basisObjectId);var l=r[f],c=l.value;for(var h=l,p=l;h=h.ref;){if(h.object===n){p.ref=h.ref;break}p=h}if(!l.ref){if(a instanceof S)delete i[f],o.push(a),e.ruleEvents&&a.removeHandler(e.ruleEvents,e),c&&s.push({object:c,ref:a});else{a.removeHandler(Z,e);for(var d=0,v=a.getItems();d<v.length;d++)s.push({object:v[d],ref:a})}delete r[f]}else c&&!et(e,a)&&(l.value=null,s.push({object:c,ref:a}))}return o}n.require("./3.js"),n.require("./4.js");var f=this.path,l=n.Class,c=l.oneFunctionProperty,h=n.object.extend,p=n.object.values,d=n.getter,v=n.fn.$self,m=n.fn.$true,g=n.fn.$false,y=n.fn.$undef,b=n.array.from,w=n.event.create,E=n.data.SUBSCRIPTION,S=n.data.Object,x=n.data.KeyObjectMap,T=n.data.ReadOnlyDataset,N=n.data.Dataset,C=n.data.DatasetWrapper,k=N.setAccumulateState;E.add("SOURCE",{sourceChanged:function(e,t){t&&E.unlink("source",e,t),e.source&&E.link("source",e,e.source)},sourcesChanged:function(e,t){var n;if(n=t.inserted)for(var r=0,i;i=n[r];r++)E.link("source",e,n[r]);if(n=t.deleted)for(var r=0,i;i=n[r];r++)E.unlink("source",e,n[r])}},function(e,t){var n=t.sources||(t.source?[t.source]:[]);for(var r=0,i;i=n[r++];)e("source",t,i)}),E.addProperty("minuend"),E.addProperty("subtrahend");var M={itemsChanged:function(e,t){var n=this.members_,r={},i,s;if(t.inserted)for(var o=0;i=t.inserted[o];o++)s=i.basisObjectId,n[s]?n[s].count++:n[s]={count:1,object:i},r[s]=n[s];if(t.deleted)for(var o=0;i=t.deleted[o];o++)s=i.basisObjectId,r[s]=n[s],n[s].count--;this.applyRule(r)}},_=l(T,{className:f+".Merge",subscribeTo:E.SOURCE,emit_sourcesChanged:w("sourcesChanged","delta"),sources:null,sourceValues_:null,sourcesMap_:null,sourceDelta_:null,rule:function(e,t){return e>0},emit_ruleChanged:w("ruleChanged","oldRule"),listen:{source:M,sourceValue:{destroy:function(e){this.removeSource(e)}}},init:function(){T.prototype.init.call(this);var e=this.sources;this.sources=[],this.sourcesMap_={},this.sourceValues_=[],e&&this.setSources(e)},setRule:function(e){e=d(e||_.UNION);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(e){var t=this.members_,n=this.rule,r=this.sources.length,i=[],s=[],o,u,a;e||(e=t);for(var f in e)o=t[f],u=r&&o.count&&n(o.count,r),u!=f in this.items_&&(u?i.push(o.object):s.push(o.object)),o.count==0&&delete t[f];return(a=L(i,s))&&this.emit_itemsChanged(a),a},addDataset_:function(e){this.sources.push(e),this.listen.source&&e.addHandler(this.listen.source,this);var t=this.members_;for(var n in e.items_)t[n]?t[n].count++:t[n]={count:1,object:e.items_[n]};return!0},removeDataset_:function(e){n.array.remove(this.sources,e),this.listen.source&&e.removeHandler(this.listen.source,this);var t=this.members_;for(var r in e.items_)t[r].count--},updateDataset_:function(e){var t=this.owner,r=t.sourcesMap_,i=n.data.resolveDataset(this,t.updateDataset_,e,"adapter"),s,o,u;if(this.dataset===i)return;if(i){var a=(r[i.basisObjectId]||0)+1;r[i.basisObjectId]=a,a==1&&(t.addDataset_(i),s=[i])}if(this.dataset){var a=(r[this.dataset.basisObjectId]||0)-1;r[this.dataset.basisObjectId]=a,a==0&&(t.removeDataset_(this.dataset),o=[this.dataset])}this.dataset=i,t.applyRule();if(u=L(s,o)){var f=t.sourceDelta_;f?(u.inserted&&u.inserted.forEach(function(e){n.array.remove(this.deleted,e)||n.array.add(this.inserted,e)},f),u.deleted&&u.deleted.forEach(function(e){n.array.remove(this.inserted,e)||n.array.add(this.deleted,e)},f)):t.emit_sourcesChanged(u)}return u},getSourceValues:function(){return this.sourceValues_.map(function(e){return e.source})},addSource:function(e){if(!e||typeof e!="object"&&typeof e!="function")return;if(this.hasSource(e))return;var t={owner:this,source:e,adapter:null,dataset:null};this.sourceValues_.push(t),this.updateDataset_.call(t,e),this.listen.sourceValue&&e instanceof n.event.Emitter&&e.addHandler(this.listen.sourceValue,this)},removeSource:function(e){for(var t=0,r;r=this.sourceValues_[t];t++)if(r.source===e){this.listen.sourceValue&&e instanceof n.event.Emitter&&e.removeHandler(this.listen.sourceValue,this),this.updateDataset_.call(r,null),this.sourceValues_.splice(t,1);return}},hasSource:function(e){for(var t=0,n;n=this.sourceValues_[t];t++)if(n.source===e)return!0;return!1},setSources:function(e){var t=this.sourceValues_.map(function(e){return e.source}),r=[],i=[],s;e||(e=[]),this.sourceDelta_={inserted:r,deleted:i};for(var o=0;o<e.length;o++){var u=e[o];n.array.remove(t,u)||this.addSource(u)}return t.forEach(this.removeSource,this),this.sourceDelta_=null,(s=L(r,i))&&this.emit_sourcesChanged(s),s},destroy:function(){this.setSources(),T.prototype.destroy.call(this),this.sourceValues_=null,this.sourcesMap_=null,this.sourceDelta_=null,this.sources=null}});_.UNION=_.prototype.rule,_.INTERSECTION=function(e,t){return e==t},_.DIFFERENCE=function(e,t){return e==1},_.MORE_THAN_ONE_INCLUDE=function(e,t){return t==1||e>1},_.AT_LEAST_ONE_EXCLUDE=function(e,t){return t==1||e<t};var D=function(e){return!this.has(e)},P={itemsChanged:function(e,t){if(!this.subtrahend)return;var n=L(t.inserted&&t.inserted.filter(D,this.subtrahend),t.deleted&&t.deleted.filter(this.has,this));n&&this.emit_itemsChanged(n)},destroy:function(){this.minuendAdapter_||this.setMinuend(null)}},H={itemsChanged:function(e,t){if(!this.minuend)return;var n=L(t.deleted&&t.deleted.filter(this.minuend.has,this.minuend),t.inserted&&t.inserted.filter(this.has,this));n&&this.emit_itemsChanged(n)},destroy:function(){this.subtrahendAdapter_||this.setSubtrahend(null)}},B=l(T,{className:f+".Subtract",subscribeTo:E.MINUEND+E.SUBTRAHEND,minuend:null,minuendAdapter_:null,emit_minuendChanged:w("minuendChanged","oldMinuend"),subtrahend:null,subtrahendAdapter_:null,emit_subtrahendChanged:w("subtrahendChanged","oldSubtrahend"),listen:{minuend:P,subtrahend:H},init:function(){T.prototype.init.call(this);var e=this.minuend,t=this.subtrahend;this.minuend=null,this.subtrahend=null,(e||t)&&this.setOperands(e,t)},setOperands:function(e,t){var r,i=!1;e=n.data.resolveDataset(this,this.setMinuend,e,"minuendAdapter_"),t=n.data.resolveDataset(this,this.setSubtrahend,t,"subtrahendAdapter_");var s=this.minuend,o=this.subtrahend;if(s!==e){i=!0,this.minuend=e;var u=this.listen.minuend;u&&(s&&s.removeHandler(u,this),e&&e.addHandler(u,this)),this.emit_minuendChanged(s)}if(o!==t){i=!0,this.subtrahend=t;var u=this.listen.subtrahend;u&&(o&&o.removeHandler(u,this),t&&t.addHandler(u,this)),this.emit_subtrahendChanged(o)}if(!i)return!1;if(!e||!t)this.itemCount&&this.emit_itemsChanged(r={deleted:this.getItems()});else{var a=[],f=[];for(var l in this.items_)(!e.items_[l]||t.items_[l])&&a.push(this.items_[l]);for(var l in e.items_)!this.items_[l]&&!t.items_[l]&&f.push(e.items_[l]);(r=L(f,a))&&this.emit_itemsChanged(r)}return r},setMinuend:function(e){return this.setOperands(e,this.subtrahendAdapter_?this.subtrahendAdapter_.source:this.subtrahend)},setSubtrahend:function(e){return this.setOperands(this.minuendAdapter_?this.minuendAdapter_.source:this.minuend,e)},destroy:function(){this.setOperands(),T.prototype.destroy.call(this)}}),j=l(T,{className:f+".SourceDataset",subscribeTo:E.SOURCE,source:null,emit_sourceChanged:w("sourceChanged","oldSource"),sourceAdapter_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceAdapter_||this.setSource()}}},init:function(){this.sourceMap_={},T.prototype.init.call(this);var e=this.source;e&&(this.source=null,this.setSource(e))},setSource:function(e){e=n.data.resolveDataset(this,this.setSource,e,"sourceAdapter_");if(this.source!==e){var t=this.source,r=this.listen.source;this.source=e;if(r){var i=r.itemsChanged;k(!0),t&&(t.removeHandler(r,this),i&&i.call(this,t,{deleted:t.getItems()})),e&&(e.addHandler(r,this),i&&i.call(this,e,{inserted:e.getItems()})),k(!1)}this.emit_sourceChanged(t)}},destroy:function(){this.setSource(),T.prototype.destroy.call(this),this.sourceMap_=null}}),F=function(e){var t=this.map?this.map(e):object;if(t instanceof S==0||this.filter(t))t=null;var n=this.sourceMap_[e.basisObjectId],r=n.member;if(r!==t){var i=this.members_,s,o,u;n.member=t;if(r){var a=r.basisObjectId;this.removeMemberRef&&this.removeMemberRef(r,e),--i[a]==0&&(delete i[a],u=[r])}if(t){var f=t.basisObjectId;this.addMemberRef&&this.addMemberRef(t,e),i[f]?i[f]++:(i[f]=1,o=[t])}(s=L(o,u))&&this.emit_itemsChanged(s)}},I={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.members_,i=[],s=[],o,u,a,f=this.ruleEvents;k(!0);if(t.inserted)for(var l=0;o=t.inserted[l];l++){a=this.map?this.map(o):o;if(a instanceof S==0||this.filter(a))a=null;f&&o.addHandler(f,this),n[o.basisObjectId]={sourceObject:o,member:a};if(a){var c=a.basisObjectId;r[c]?r[c]++:(r[c]=1,i.push(a)),this.addMemberRef&&this.addMemberRef(a,o)}}if(t.deleted)for(var l=0;o=t.deleted[l];l++){u=o.basisObjectId,a=n[u].member,f&&o.removeHandler(f,this),delete n[u];if(a){var c=a.basisObjectId;--r[c]==0&&(delete r[c],s.push(a)),this.removeMemberRef&&this.removeMemberRef(a,o)}}k(!1),(t=L(i,s))&&this.emit_itemsChanged(t)}},q=l(j,{className:f+".MapFilter",map:v,filter:g,rule:d(m),emit_ruleChanged:w("ruleChanged","oldRule"),ruleEvents:A(F,"update"),addMemberRef:null,removeMemberRef:null,listen:{source:I},setMap:function(e){typeof e!="function"&&(e=v);if(this.map!==e)return this.map=e,this.applyRule()},setFilter:function(e){typeof e!="function"&&(e=g);if(this.filter!==e)return this.filter=e,this.applyRule()},setRule:function(e){e=d(e||m);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e=this.sourceMap_,t=this.members_,n,r,i,s,o,u,a=[],f=[],l;for(var c in e){u=e[c],o=u.sourceObject,n=u.member,r=this.map?this.map(o):o;if(r instanceof S==0||this.filter(r))r=null;n!=r&&(u.member=r,n&&(i=n.basisObjectId,this.removeMemberRef&&this.removeMemberRef(n,o),t[i]--),r&&(s=r.basisObjectId,this.addMemberRef&&this.addMemberRef(r,o),s in t?t[s]++:(t[s]=1,a.push(r))))}for(i in this.items_)t[i]==0&&(delete t[i],f.push(this.items_[i]));return(l=L(a,f))&&this.emit_itemsChanged(l),l}}),R=l(q,{className:f+".Filter",filter:function(e){return!this.rule(e)}}),U=l(q,{className:f+".Split",subsetClass:T,subsetWrapperClass:C,keyMap:null,map:function(e){return this.keyMap.resolve(e)},rule:d(y),setRule:function(e){e=d(e||y);if(this.rule!==e){var t=this.rule;return this.rule=e,this.keyMap.keyGetter=e,this.emit_ruleChanged(t),this.applyRule()}},addMemberRef:function(e,t){e.dataset.emit_itemsChanged({inserted:[t]})},removeMemberRef:function(e,t){e.dataset.emit_itemsChanged({deleted:[t]})},init:function(){if(!this.keyMap||this.keyMap instanceof x==0)this.keyMap=O(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass);q.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){q.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}}),W=function(e){var t=this.sourceMap_[e.basisObjectId],n=this.rule(e),r=this.index_;if(n!==t.value){var i=z(r,t),s=r[i-1],o=r[i+1];t.value=n;if(s&&(s.value>n||s.value==n&&s.object.basisObjectId>t.object.basisObjectId)||o&&(o.value<n||o.value==n&&o.object.basisObjectId<t.object.basisObjectId))r.splice(i,1),r.splice(z(r,t),0,t),this.applyRule()}},V={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.index_,i=this.ruleEvents,s=!1,o=!1,u,a=t.inserted,f=t.deleted;if(f){f.length>r.length-f.length&&(s=!0,o=f.length!=r.length,r.length=0);for(var l=0,c;c=f[l];l++)s||(u=n[c.basisObjectId],r.splice(z(r,u),1)),delete n[c.basisObjectId],i&&c.removeHandler(i,this);if(o)for(var h in n)u=n[h],r.splice(z(r,u),0,u)}if(a){o=!r.length;for(var l=0,c;c=a[l];l++)u={object:c,value:this.rule(c)},n[c.basisObjectId]=u,o?r.push(u):r.splice(z(r,u),0,u),i&&c.addHandler(i,this);o&&r.sort(X)}this.applyRule()}},$=l(j,{className:f+".Slice",rule:d(m),emit_ruleChanged:w("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:A(W,"update"),index_:null,orderDesc:!1,offset:0,limit:10,listen:{source:V},emit_rangeChanged:w("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[],j.prototype.init.call(this)},setRange:function(e,t){var n=this.offset,r=this.limit,i=!1;if(n!=e||r!=t)this.offset=e,this.limit=t,i=this.applyRule(),this.emit_rangeChanged(n,r);return i},setOffset:function(e){return this.setRange(e,this.limit)},setLimit:function(e){return this.setRange(this.offset,e)},setRule:function(e,t){e=d(e||m),t=!!t;if(this.rule!=e||this.orderDesc!=t){var n=this.rule,r=this.orderDesc;if(this.rule!=e){var i=this.index_;for(var s=0;s<i.length;s++)i[s].value=e(i[s].object);i.sort(X),this.rule=e}return this.orderDesc=t,this.rule=e,this.emit_ruleChanged(n,r),this.applyRule()}},applyRule:function(){var e=this.offset,t=e+this.limit;this.orderDesc&&(e=this.index_.length-t,t=e+this.limit);var r=n.object.slice(this.members_),i=this.index_.slice(Math.max(0,e),Math.max(0,t)),s=[],o;for(var u=0,a;a=i[u];u++){var f=a.object.basisObjectId;r[f]?delete r[f]:(s.push(a.object),this.members_[f]=a.object)}for(var f in r)delete this.members_[f];return(o=L(s,p(r)))&&this.emit_itemsChanged(o),o},destroy:function(){j.prototype.destroy.call(this),this.index_=null}}),J=function(e){var t=this.sourceMap_,n=this.members_,r=e.basisObjectId,i=t[r].list,s=t[r].list={},o=this.rule(e),u,a=[],f=[],l;if(Array.isArray(o))for(var c=0;c<o.length;c++)l=this.keyMap.get(o[c],!0),l&&!l.has(e)&&(h=l.basisObjectId,s[h]=l,i[h]||(l.dataset.emit_itemsChanged({inserted:[e]}),n[h]?n[h]++:(a.push(l),n[h]=1)));for(var h in i)if(!s[h]){var l=i[h];l.dataset.emit_itemsChanged({deleted:[e]}),--n[h]||(delete n[h],f.push(l))}(u=L(a,f))&&this.emit_itemsChanged(u)},K={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.members_,i=this.ruleEvents,s,o,u,a=[],f=[];k(!0);if(s=t.inserted)for(var l=0,c;c=s[l];l++){var h=this.rule(c),p={object:c,list:{}};n[c.basisObjectId]=p;if(Array.isArray(h))for(var d=0,v={};d<h.length;d++)o=this.keyMap.get(h[d],!0),o&&!v[o.basisObjectId]&&(u=o.basisObjectId,v[u]=!0,p.list[u]=o,o.dataset.emit_itemsChanged({inserted:[c]}),r[u]?r[u]++:(a.push(o),r[u]=1));i&&c.addHandler(i,this)}if(s=t.deleted)for(var l=0,c;c=s[l];l++){var m=c.basisObjectId,h=n[m].list;delete n[m];for(var u in h)o=h[u],o.dataset.emit_itemsChanged({deleted:[c]}),--r[u]||(delete r[u],f.push(o));i&&c.removeHandler(i,this)}k(!1),(t=L(a,f))&&this.emit_itemsChanged(t)}},Q=l(j,{className:f+".Cloud",subsetClass:T,subsetWrapperClass:C,rule:d(y),ruleEvents:A(J,"update"),keyMap:null,map:v,listen:{source:K},init:function(){if(!this.keyMap||this.keyMap instanceof x==0)this.keyMap=O(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass);j.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){j.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}}),G=function(e){var t=this.sourceMap_[e.basisObjectId],n=this.rule(e)||null,r=t.value,i,s,o;if(n===r)return;if(n instanceof S||n instanceof T)i=tt(this,n,e);r&&(s=nt(this,r,e)),t.value=n,(o=L(i,s))&&this.emit_itemsChanged(o)},Y=function(e,t){var n=t.inserted,r=t.deleted,t;n&&(n=tt(this,n,e)),r&&(r=nt(this,r,e)),(t=L(n,r))&&this.emit_itemsChanged(t)},Z={itemsChanged:Y,destroy:function(e){var t=this.sourceMap_;for(var n=t[e.basisObjectId];n=n.ref;)t[n.object.basisObjectId].value=null;delete t[e.basisObjectId]}},rt=j.subclass({className:f+".Extract",rule:d(y),emit_ruleChanged:w("ruleChanged","oldRule"),ruleEvents:A(G,"update"),listen:{source:{itemsChanged:Y}},setRule:function(e){e=d(e||y);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e={},t={},n,r;for(var i in this.sourceMap_){var s=this.sourceMap_[i],o=s.source;if(o instanceof S){var u=this.rule(o)||null,a=s.value;if(u===a)continue;if(u instanceof S||u instanceof T){var f=tt(this,u,o);for(var l=0;l<f.length;l++){var c=f[l],h=c.basisObjectId;t[h]?delete t[h]:e[h]=c}}if(a){var d=nt(this,a,o);for(var l=0;l<d.length;l++){var c=d[l],h=c.basisObjectId;e[h]?delete e[h]:t[h]=c}}s.value=u}}return(r=L(p(e),p(t)))&&this.emit_itemsChanged(r),r}});t.exports={getDelta:L,createRuleEvents:A,Merge:_,Subtract:B,SourceDataset:j,MapFilter:q,Filter:R,Split:U,Extract:rt,Slice:$,Cloud:Q}},"q.js":function(e,t,n,r,i,s,o,u,a){n.require("./3.js"),n.require("./a.js"),n.require("./r.js");var f=this.path,l=n.event.create,c=n.net.action.create,h=n.event.Emitter,p=n.net.ajax.Transport,d={start:function(e,t){n.array.add(this.inprogressTransports,t.transport)},complete:function(e,t){n.array.remove(this.inprogressTransports,t.transport)}},v=h.subclass({className:f+".Service",inprogressTransports:null,transportClass:p,emit_sessionOpen:l("sessionOpen"),emit_sessionClose:l("sessionClose"),emit_sessionFreeze:l("sessionFreeze"),emit_sessionUnfreeze:l("sessionUnfreeze"),isSecure:!1,prepare:n.fn.$true,signature:n.fn.$undef,isSessionExpiredError:n.fn.$false,init:function(){h.prototype.init.call(this),this.inprogressTransports=[];var e=this.transportClass;this.transportClass=e.subclass({service:this,needSignature:this.isSecure,emit_failure:function(t,n){e.prototype.emit_failure.call(this,t,n),this.needSignature&&this.service.isSessionExpiredError(t)&&(this.service.freeze(),this.service.stoppedTransports.push(this),this.stop())},request:function(t){if(!this.service.prepare(this,t))return;if(this.needSignature&&!this.service.sign(this))return;return e.prototype.request.call(this,t)}}),this.addHandler(d)},sign:function(e){if(this.sessionKey)return this.signature(e,this.sessionData),!0},openSession:function(e,t){this.sessionKey=e,this.sessionData=t,this.unfreeze(),this.emit_sessionOpen()},closeSession:function(){this.freeze(),this.emit_sessionClose()},freeze:function(){if(!this.sessionKey)return;this.sessionKey=null,this.sessionData=null,this.stoppedTransports=this.inprogressTransports.filter(function(e){return e.needSignature});for(var e=0,t;t=this.inprogressTransports[e];e++)t.stop();this.emit_sessionFreeze()},unfreeze:function(){if(this.stoppedTransports)for(var e=0,t;t=this.stoppedTransports[e];e++)t.resume();this.emit_sessionUnfreeze()},createTransport:function(e){return new this.transportClass(e)},createAction:function(e){return c(n.object.complete({service:this},e))},destroy:function(){this.inprogressTransports=null,this.stoppedTransports=null,this.sessionKey=null,this.sessionData=null,h.prototype.destroy.call(this)}});t.exports={Service:v}},"r.js":function(e,t,n,r,i,s,o,u,a){function m(e){return e.transport?e.transport:e.service?e.service.createTransport(e):e.createTransport?e.createTransport(e):new n.net.ajax.Transport(e)}function g(e){e=n.object.extend({prepare:p,request:p},e);var t=n.object.splice(e,["prepare","request"]),r=n.object.merge(v,n.object.splice(e,["start","success","failure","abort","complete"])),i=n.fn.lazyInit(function(){var t=m(e);return t.addHandler(d,r),t});return function(){this.state!=c&&(t.prepare.apply(this,arguments),this.request=i().request(n.object.complete({origin:this},t.request.apply(this,arguments))))}}n.require("./4.js"),n.require("./a.js");var f=n.data.STATE.UNDEFINED,l=n.data.STATE.READY,c=n.data.STATE.PROCESSING,h=n.data.STATE.ERROR,p=function(){},d={start:function(e,t){var n=t.requestData.origin;this.start.call(t.requestData.origin),n.state!=c&&n.setState(c)},success:function(e,t,n){var r=t.requestData.origin;this.success.call(r,n),r.state==c&&r.setState(l)},failure:function(e,t,n){var r=t.requestData.origin;this.failure.call(r,n),r.state==c&&r.setState(h,n)},abort:function(e,t){var n=t.requestData.origin;this.abort.call(n),n.state==c&&n.setState(f)},complete:function(e,t){this.complete.call(t.requestData.origin)}},v={start:p,success:p,failure:p,abort:p,complete:p};t.exports={create:g}},"14.js":function(e,t,n,r,i,s,o,u,a){function d(e,t,n){var r=[],i=e.childNodes,s=[];for(var o=0;o<i.length;o++){var u=i[o];if(u.constructor.className=="EmployeeEntity")for(var a=0;a<u.childNodes.length;a++){var c=u.childNodes[a];if(c.constructor.className=="Month"){var h=c.childNodes;for(var p=0;p<h.length;p++)h[p].data.checked&&(s.push(h[p]),r.push({id:u.data.id,date:l().month(c.data.name).year(c.data.year).date(h[p].data.day).format("DD.MM.YYYY"),type:t}))}}}r.length&&f.request({url:"http://localhost:8888/set-type",method:"POST",contentType:"application/json",postBody:JSON.stringify(r),handler:{success:function(){for(var e=0;e<s.length;e++)s[e].data.checked=!1,s[e].updateBind("checked");n.sync()},failure:function(){alert("Setting of day type failed")}}})}var f=n.require("./a.js"),l=n.require("./v.js"),c=n.require("./12.js"),h=n.require("./15.js"),p=n.require("./19.js");t.exports=c.subclass({name:"teamPage",emit_applyDayType:n.event.create("applyDayType","typeId"),handler:{applyDayType:function(e,t){d(this.getChildByName("TeamEntity"),t,this.delegate)}},init:function(){n.ui.Node.prototype.init.call(this),this.setChildNodes([new h({delegate:this.delegate}),new p({dayTypes:this.data.dayTypes})]);var e=this;this.router.add("team/:team/:month/:year",{match:function(t,n,r){var i={team:t,month:n,year:r+" "};e.update(i),e.select(),e.getChildByName("TeamEntity").setDataSource(e.data.employeesByTeams.getSubset("/"+t+"/"))}})}})},"15.js":function(e,t,n,r,i,s,o,u,a){n.require("./f.js"),n.require("./1.js");var f=n.require("./16.js"),l=n.require("./18.js");t.exports=n.ui.Node.subclass({name:"TeamEntity",template:n.template.get("#a"),satellite:{month:{instanceOf:f,delegate:function(e){return e.delegate},existsIf:function(e){return e.data.month}}},binding:{name:"name",code:"data:team",month:"satellite:"},handler:{update:function(){if(this.dataSource){var e=this.dataSource;this.setDataSource([]),this.setDataSource(e)}}},childFactory:function(e){return new l(n.object.extend({month:this.data.month,year:this.data.year},e))}})},"16.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js");var f=n.require("./v.js"),l=n.require("./17.js");t.exports=n.ui.Node.subclass({template:n.template.get("#8"),className:"Month",binding:{name:"data:name",year:"data:year",isActive:"data:isActive",workingDays:"data:workingDays"},init:function(){n.ui.Node.prototype.init.call(this),this.handler.callbacks.update.call(this)},handler:{update:function(){var e=[],t=f(this.data.year+":"+this.data.month,"YYYY:MMMM");this.data.workingDays=0,this.data.name=t.format("MMMM");for(var n=0;n<t.daysInMonth();n++){var r=t.date(n+1),i=[6,7].indexOf(r.isoWeekday())!=-1;i||this.data.workingDays++;var s=n+1,o=typeof this.data.entity!="undefined"&&this.data.entity.days.hasOwnProperty(r.format("DD.MM.YYYY"));typeof this.data.entity!="undefined"&&typeof this.data.entity.work_start!="undefined"&&f(this.data.entity.work_start,"DD.MM.YYYY")<r&&(typeof this.data.entity.work_end!="undefined"||typeof this.data.entity.work_end!="undefined"&&f(this.data.entity.work_end)>r)&&(i||o?s="":s="1"),e.push(new l({data:{day:n+1,title:s,weekend:i,type:o?this.data.entity.days[r.format("DD.MM.YYYY")].day_type_id:""}}))}this.setChildNodes(e),this.updateBind("name")}}})},"n.js":function(e,t,n,r,i,s,o,u,a){var f=r.document,l;if("getComputedStyle"in r){var c={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0},h=n.fn.runOnce(function(){var e=f.createElement("div");e.setAttribute("style","position:absolute;top:auto!important"),n.doc.body.add(e),r.getComputedStyle(e).top=="auto"&&(c={}),n.doc.remove(e)});l=function(e,t){var n=r.getComputedStyle(e),i;if(n){t in c&&h();if(c[t]&&n.position!="static"){var s=e.style.display;e.style.display="none",i=n.getPropertyValue(t),e.style.display=s}else i=n.getPropertyValue(t);return i}}}else{var p=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,d=/\dpx$/i,v=function(e,t){if(d.test(t))return parseInt(t,10)+"px";var n=e.style,r=e.runtimeStyle,i=n.left,s=r.left;return r.left=e.currentStyle.left,n.left=t||0,t=n.pixelLeft,n.left=i,r.left=s,t+"px"};l=function(e,t){var r=e.currentStyle;if(r){var i=r[t=="float"?"styleFloat":n.string.camelize(t)],s=(i||"").match(p);return s&&s[2]&&s[2]!="px"&&(i=v(e,i)),i}}}t.exports={get:l}},"v.js":function(e,t,n,r,i,s,o,u,a){(function(e){function it(e,t,n){switch(arguments.length){case 2:return e!=null?e:t;case 3:return e!=null?e:t!=null?t:n;default:throw 36}}function st(e,t){return f.call(e,t)}function ot(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function ut(e){i.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function at(e,t){var n=!0;return vt(function(){return n&&(ut(e),n=!1),t.apply(this,arguments)},t)}function ft(e,t){nt[e]||(ut(t),nt[e]=!0)}function lt(e,t){return function(n){return yt(e.call(this,n),t)}}function ct(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function ht(){}function pt(e,t){t!==!1&&Pt(e),mt(this,e),this._d=new Date(+e._d)}function dt(e){var t=kt(e),n=t.year||0,r=t.quarter||0,s=t.month||0,o=t.week||0,u=t.day||0,a=t.hour||0,f=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+l*1e3+f*6e4+a*36e5,this._days=+u+o*7,this._months=+s+r*3+n*12,this._data={},this._locale=i.localeData(),this._bubble()}function vt(e,t){for(var n in t)st(t,n)&&(e[n]=t[n]);return st(t,"toString")&&(e.toString=t.toString),st(t,"valueOf")&&(e.valueOf=t.valueOf),e}function mt(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=t._pf),typeof t._locale!="undefined"&&(e._locale=t._locale);if(b.length>0)for(n in b)r=b[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function gt(e){return e<0?Math.ceil(e):Math.floor(e)}function yt(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function bt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function wt(e,t){var n;return t=It(t,e),e.isBefore(t)?n=bt(e,t):(n=bt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Et(e,t){return function(n,r){var s,o;return r!==null&&!isNaN(+r)&&(ft(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=r,r=o),n=typeof n=="string"?+n:n,s=i.duration(n,r),St(this,s,e),this}}function St(e,t,n,r){var s=t._milliseconds,o=t._days,u=t._months;r=r==null?!0:r,s&&e._d.setTime(+e._d+s*n),o&&gn(e,"Date",mn(e,"Date")+o*n),u&&vn(e,mn(e,"Month")+u*n),r&&i.updateOffset(e,o||u)}function xt(e){return Object.prototype.toString.call(e)==="[object Array]"}function Tt(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function Nt(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&At(e[o])!==At(t[o]))&&s++;return s+i}function Ct(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=K[e]||Q[t]||t}return e}function kt(e){var t={},n,r;for(r in e)st(e,r)&&(n=Ct(r),n&&(t[n]=e[r]));return t}function Lt(t){var n,r;if(t.indexOf("week")===0)n=7,r="day";else{if(t.indexOf("month")!==0)return;n=12,r="month"}i[t]=function(s,o){var u,a,f=i._locale[t],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var t=i().utc().set(r,e);return f.call(i._locale,t,s||"")};if(o!=null)return a(o);for(u=0;u<n;u++)l.push(a(u));return l}}function At(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function Ot(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Mt(e,t,n){return cn(i([e,11,31+t-n]),t,n).week}function _t(e){return Dt(e)?366:365}function Dt(e){return e%4===0&&e%100!==0||e%400===0}function Pt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[h]<0||e._a[h]>11?h:e._a[p]<1||e._a[p]>Ot(e._a[c],e._a[h])?p:e._a[d]<0||e._a[d]>24||e._a[d]===24&&(e._a[v]!==0||e._a[m]!==0||e._a[g]!==0)?d:e._a[v]<0||e._a[v]>59?v:e._a[m]<0||e._a[m]>59?m:e._a[g]<0||e._a[g]>999?g:-1,e._pf._overflowDayOfYear&&(t<c||t>p)&&(t=p),e._pf.overflow=t)}function Ht(t){return t._isValid==null&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&t._pf.charsLeftOver===0&&t._pf.unusedTokens.length===0&&t._pf.bigHour===e)),t._isValid}function Bt(e){return e?e.toLowerCase().replace("_","-"):e}function jt(e){var t=0,n,r,i,s;while(t<e.length){s=Bt(e[t]).split("-"),n=s.length,r=Bt(e[t+1]),r=r?r.split("-"):null;while(n>0){i=Ft(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&Nt(s,r,!0)>=n-1)break;n--}t++}return null}function Ft(e){var t=null;if(!y[e]&&w)try{t=i.locale(),n.require("./locale/"+e,"C:/repos/git/timesheet/public/components/moment"),i.locale(t)}catch(r){}return y[e]}function It(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(i.isMoment(e)||Tt(e)?+e:+i(e))- +n,n._d.setTime(+n._d+r),i.updateOffset(n,!1),n):i(e).local()}function qt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Rt(e){var t=e.match(T),n,r;for(n=0,r=t.length;n<r;n++)tt[t[n]]?t[n]=tt[t[n]]:t[n]=qt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function Ut(e,t){return e.isValid()?(t=zt(t,e.localeData()),G[t]||(G[t]=Rt(t)),G[t](e)):e.localeData().invalidDate()}function zt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;N.lastIndex=0;while(n>=0&&N.test(e))e=e.replace(N,r),N.lastIndex=0,n-=1;return e}function Wt(e,t){var n,r=t._strict;switch(e){case"Q":return B;case"DDDD":return F;case"YYYY":case"GGGG":case"gggg":return r?I:L;case"Y":case"G":case"g":return R;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?q:A;case"S":if(r)return B;case"SS":if(r)return j;case"SSS":if(r)return F;case"DDD":return k;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return M;case"a":case"A":return t._locale._meridiemParse;case"x":return P;case"X":return H;case"Z":case"ZZ":return _;case"T":return D;case"SSSS":return O;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?j:C;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return C;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Zt(Yt(e.replace("\\","")),"i")),n}}function Xt(e){e=e||"";var t=e.match(_)||[],n=t[t.length-1]||[],r=(n+"").match(V)||["-",0,0],i=+(r[1]*60)+At(r[2]);return r[0]==="+"?-i:i}function Vt(e,t,n){var r,s=n._a;switch(e){case"Q":t!=null&&(s[h]=(At(t)-1)*3);break;case"M":case"MM":t!=null&&(s[h]=At(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t,e,n._strict),r!=null?s[h]=r:n._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(s[p]=At(t));break;case"Do":t!=null&&(s[p]=At(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":t!=null&&(n._dayOfYear=At(t));break;case"YY":s[c]=i.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":s[c]=At(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":s[d]=At(t);break;case"m":case"mm":s[v]=At(t);break;case"s":case"ss":s[m]=At(t);break;case"S":case"SS":case"SSS":case"SSSS":s[g]=At(("0."+t)*1e3);break;case"x":n._d=new Date(At(t));break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=Xt(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),r!=null?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=At(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=i.parseTwoDigitYear(t)}}function $t(e){var t,n,r,s,o,u,a;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(o=1,u=4,n=it(t.GG,e._a[c],cn(i(),1,4).year),r=it(t.W,1),s=it(t.E,1)):(o=e._locale._week.dow,u=e._locale._week.doy,n=it(t.gg,e._a[c],cn(i(),o,u).year),r=it(t.w,1),t.d!=null?(s=t.d,s<o&&++r):t.e!=null?s=t.e+o:s=o),a=hn(n,r,s,u,o),e._a[c]=a.year,e._dayOfYear=a.dayOfYear}function Jt(e){var t,n,r=[],i,s;if(e._d)return;i=Qt(e),e._w&&e._a[p]==null&&e._a[h]==null&&$t(e),e._dayOfYear&&(s=it(e._a[c],i[c]),e._dayOfYear>_t(s)&&(e._pf._overflowDayOfYear=!0),n=un(s,0,e._dayOfYear),e._a[h]=n.getUTCMonth(),e._a[p]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[d]===24&&e._a[v]===0&&e._a[m]===0&&e._a[g]===0&&(e._nextDay=!0,e._a[d]=0),e._d=(e._useUTC?un:on).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[d]=24)}function Kt(e){var t;if(e._d)return;t=kt(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Jt(e)}function Qt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Gt(t){if(t._f===i.ISO_8601){tn(t);return}t._a=[],t._pf.empty=!0;var n=""+t._i,r,s,o,u,a,f=n.length,l=0;o=zt(t._f,t._locale).match(T)||[];for(r=0;r<o.length;r++)u=o[r],s=(n.match(Wt(u,t))||[])[0],s&&(a=n.substr(0,n.indexOf(s)),a.length>0&&t._pf.unusedInput.push(a),n=n.slice(n.indexOf(s)+s.length),l+=s.length),tt[u]?(s?t._pf.empty=!1:t._pf.unusedTokens.push(u),Vt(u,s,t)):t._strict&&!s&&t._pf.unusedTokens.push(u);t._pf.charsLeftOver=f-l,n.length>0&&t._pf.unusedInput.push(n),t._pf.bigHour===!0&&t._a[d]<=12&&(t._pf.bigHour=e),t._isPm&&t._a[d]<12&&(t._a[d]+=12),t._isPm===!1&&t._a[d]===12&&(t._a[d]=0),Jt(t),Pt(t)}function Yt(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Zt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function en(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=mt({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._pf=ot(),t._f=e._f[i],Gt(t);if(!Ht(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}vt(e,n||t)}function tn(e){var t,n,r=e._i,i=U.exec(r);if(i){e._pf.iso=!0;for(t=0,n=W.length;t<n;t++)if(W[t][1].exec(r)){e._f=W[t][0]+(i[6]||" ");break}for(t=0,n=X.length;t<n;t++)if(X[t][1].exec(r)){e._f+=X[t][0];break}r.match(_)&&(e._f+="Z"),Gt(e)}else e._isValid=!1}function nn(e){tn(e),e._isValid===!1&&(delete e._isValid,i.createFromInputFallback(e))}function rn(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function sn(t){var n=t._i,r;n===e?t._d=new Date:Tt(n)?t._d=new Date(+n):(r=E.exec(n))!==null?t._d=new Date(+r[1]):typeof n=="string"?nn(t):xt(n)?(t._a=rn(n.slice(0),function(e){return parseInt(e,10)}),Jt(t)):typeof n=="object"?Kt(t):typeof n=="number"?t._d=new Date(n):i.createFromInputFallback(t)}function on(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function un(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function an(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function fn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ln(e,t,n){var r=i.duration(e).abs(),s=a(r.as("s")),o=a(r.as("m")),u=a(r.as("h")),f=a(r.as("d")),l=a(r.as("M")),c=a(r.as("y")),h=s<Y.s&&["s",s]||o===1&&["m"]||o<Y.m&&["mm",o]||u===1&&["h"]||u<Y.h&&["hh",u]||f===1&&["d"]||f<Y.d&&["dd",f]||l===1&&["M"]||l<Y.M&&["MM",l]||c===1&&["y"]||["yy",c];return h[2]=t,h[3]=+e>0,h[4]=n,fn.apply({},h)}function cn(e,t,n){var r=n-t,s=n-e.day(),o;return s>r&&(s-=7),s<r-7&&(s+=7),o=i(e).add(s,"d"),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function hn(e,t,n,r,i){var s=un(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:_t(e-1)+u}}function pn(t){var n=t._i,r=t._f,s;return t._locale=t._locale||i.localeData(t._l),n===null||r===e&&n===""?i.invalid({nullInput:!0}):(typeof n=="string"&&(t._i=n=t._locale.preparse(n)),i.isMoment(n)?new pt(n,!0):(r?xt(r)?en(t):Gt(t):sn(t),s=new pt(t),s._nextDay&&(s.add(1,"d"),s._nextDay=e),s))}function dn(e,t){var n,r;t.length===1&&xt(t[0])&&(t=t[0]);if(!t.length)return i();n=t[0];for(r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function vn(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Ot(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function mn(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function gn(e,t,n){return t==="Month"?vn(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function yn(e,t){return function(n){return n!=null?(gn(this,e,n),i.updateOffset(this,t),this):mn(this,e)}}function bn(e){return e*400/146097}function wn(e){return e*146097/400}function En(e){i.duration.fn[e]=function(){return this._data[e]}}function Sn(e){if(typeof ender!="undefined")return;u=o.moment,e?o.moment=at("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",i):o.moment=i}var i,s="2.8.4",o=typeof r!="undefined"?r:this,u,a=Math.round,f=Object.prototype.hasOwnProperty,l,c=0,h=1,p=2,d=3,v=4,m=5,g=6,y={},b=[],w=typeof t!="undefined"&&t&&t.exports,E=/^\/?Date\((\-?\d+)/i,S=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,x=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,T=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,C=/\d\d?/,k=/\d{1,3}/,L=/\d{1,4}/,A=/[+\-]?\d{1,6}/,O=/\d+/,M=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_=/Z|[\+\-]\d\d:?\d\d/gi,D=/T/i,P=/[\+\-]?\d+/,H=/[\+\-]?\d+(\.\d{1,3})?/,B=/\d/,j=/\d\d/,F=/\d{3}/,I=/\d{4}/,q=/[+-]?\d{6}/,R=/[+-]?\d+/,U=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,z="YYYY-MM-DDTHH:mm:ssZ",W=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],X=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],V=/([\+\-]|\d\d)/gi,$="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),J={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},K={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Q={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},G={},Y={s:45,m:45,h:22,d:26,M:11},Z="DDD w W M D d".split(" "),et="M D H h m s w W".split(" "),tt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return yt(this.year()%100,2)},YYYY:function(){return yt(this.year(),4)},YYYYY:function(){return yt(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+yt(Math.abs(e),6)},gg:function(){return yt(this.weekYear()%100,2)},gggg:function(){return yt(this.weekYear(),4)},ggggg:function(){return yt(this.weekYear(),5)},GG:function(){return yt(this.isoWeekYear()%100,2)},GGGG:function(){return yt(this.isoWeekYear(),4)},GGGGG:function(){return yt(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return At(this.milliseconds()/100)},SS:function(){return yt(At(this.milliseconds()/10),2)},SSS:function(){return yt(this.milliseconds(),3)},SSSS:function(){return yt(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+yt(At(e/60),2)+":"+yt(At(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+yt(At(e/60),2)+yt(At(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nt={},rt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(Z.length)l=Z.pop(),tt[l+"o"]=ct(tt[l],l);while(et.length)l=et.pop(),tt[l+l]=lt(tt[l],2);tt.DDDD=lt(tt.DDD,3),vt(ht.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,s,o;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){s=i.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;this._weekdaysParse||(this._weekdaysParse=[]);for(t=0;t<7;t++){this._weekdaysParse[t]||(n=i([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return cn(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),i=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=ot(),pn(s)},i.suppressDeprecationWarnings=!1,i.createFromInputFallback=at("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),i.min=function(){var e=[].slice.call(arguments,0);return dn("isBefore",e)},i.max=function(){var e=[].slice.call(arguments,0);return dn("isAfter",e)},i.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=ot(),pn(s).utc()},i.unix=function(e){return i(e*1e3)},i.duration=function(e,t){var n=e,r=null,s,o,u,a;return i.isDuration(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=S.exec(e))?(s=r[1]==="-"?-1:1,n={y:0,d:At(r[p])*s,h:At(r[d])*s,m:At(r[v])*s,s:At(r[m])*s,ms:At(r[g])*s}):(r=x.exec(e))?(s=r[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},n={y:u(r[2]),M:u(r[3]),d:u(r[4]),h:u(r[5]),m:u(r[6]),s:u(r[7]),w:u(r[8])}):typeof n=="object"&&("from"in n||"to"in n)&&(a=wt(i(n.from),i(n.to)),n={},n.ms=a.milliseconds,n.M=a.months),o=new dt(n),i.isDuration(e)&&st(e,"_locale")&&(o._locale=e._locale),o},i.version=s,i.defaultFormat=z,i.ISO_8601=function(){},i.momentProperties=b,i.updateOffset=function(){},i.relativeTimeThreshold=function(t,n){return Y[t]===e?!1:n===e?Y[t]:(Y[t]=n,!0)},i.lang=at("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return i.locale(e,t)}),i.locale=function(e,t){var n;return e&&(typeof t!="undefined"?n=i.defineLocale(e,t):n=i.localeData(e),n&&(i.duration._locale=i._locale=n)),i._locale._abbr},i.defineLocale=function(e,t){return t!==null?(t.abbr=e,y[e]||(y[e]=new ht),y[e].set(t),i.locale(e),y[e]):(delete y[e],null)},i.langData=at("moment.langData is deprecated. Use moment.localeData instead.",function(e){return i.localeData(e)}),i.localeData=function(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return i._locale;if(!xt(e)){t=Ft(e);if(t)return t;e=[e]}return jt(e)},i.isMoment=function(e){return e instanceof pt||e!=null&&st(e,"_isAMomentObject")},i.isDuration=function(e){return e instanceof dt};for(l=rt.length-1;l>=0;--l)Lt(rt[l]);i.normalizeUnits=function(e){return Ct(e)},i.invalid=function(e){var t=i.utc(NaN);return e!=null?vt(t._pf,e):t._pf.userInvalidated=!0,t},i.parseZone=function(){return i.apply(null,arguments).parseZone()},i.parseTwoDigitYear=function(e){return At(e)+(At(e)>68?1900:2e3)},vt(i.fn=pt.prototype,{clone:function(){return i(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=i(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():Ut(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Ut(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return Ht(this)},isDSTShifted:function(){return this._a?this.isValid()&&Nt(this._a,(this._isUTC?i.utc(this._a):i(this._a)).toArray())>0:!1},parsingFlags:function(){return vt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=Ut(this,e||i.defaultFormat);return this.localeData().postformat(t)},add:Et(1,"add"),subtract:Et(-1,"subtract"),diff:function(e,t,n){var r=It(e,this),s=(this.zone()-r.zone())*6e4,o,u,a;return t=Ct(t),t==="year"||t==="month"?(o=(this.daysInMonth()+r.daysInMonth())*432e5,u=(this.year()-r.year())*12+(this.month()-r.month()),a=this-i(this).startOf("month")-(r-i(r).startOf("month")),a-=(this.zone()-i(this).startOf("month").zone()-(r.zone()-i(r).startOf("month").zone()))*6e4,u+=a/o,t==="year"&&(u/=12)):(o=this-r,u=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-s)/864e5:t==="week"?(o-s)/6048e5:o),n?u:gt(u)},from:function(e,t){return i.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(i(),e)},calendar:function(e){var t=e||i(),n=It(t,this).startOf("day"),r=this.diff(n,"days",!0),s=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this,i(t)))},isLeapYear:function(){return Dt(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=an(e,this.localeData()),this.add(e-t,"d")):t},month:yn("Month",!0),startOf:function(e){e=Ct(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(t){return t=Ct(t),t===e||t==="millisecond"?this:this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=Ct(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=i.isMoment(e)?e:i(e),+this>+e):(n=i.isMoment(e)?+e:+i(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=Ct(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=i.isMoment(e)?e:i(e),+this<+e):(n=i.isMoment(e)?+e:+i(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=Ct(t||"millisecond"),t==="millisecond"?(e=i.isMoment(e)?e:i(e),+this===+e):(n=+i(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:at("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=i.apply(null,arguments),e<this?this:e}),max:at("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=i.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n=this._offset||0,r;return e==null?this._isUTC?n:this._dateTzOffset():(typeof e=="string"&&(e=Xt(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(r=this._dateTzOffset()),this._offset=e,this._isUTC=!0,r!=null&&this.subtract(r,"m"),n!==e&&(!t||this._changeInProgress?St(this,i.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=i(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return Ot(this.year(),this.month())},dayOfYear:function(e){var t=a((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")},quarter:function(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)},weekYear:function(e){var t=cn(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=cn(this,1,4).year;return e==null?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")},isoWeek:function(e){var t=cn(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return Mt(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return Mt(this.year(),e.dow,e.doy)},get:function(e){return e=Ct(e),this[e]()},set:function(e,t){return e=Ct(e),typeof this[e]=="function"&&this[e](t),this},locale:function(t){var n;return t===e?this._locale._abbr:(n=i.localeData(t),n!=null&&(this._locale=n),this)},lang:at("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}}),i.fn.millisecond=i.fn.milliseconds=yn("Milliseconds",!1),i.fn.second=i.fn.seconds=yn("Seconds",!1),i.fn.minute=i.fn.minutes=yn("Minutes",!1),i.fn.hour=i.fn.hours=yn("Hours",!0),i.fn.date=yn("Date",!0),i.fn.dates=at("dates accessor is deprecated. Use date instead.",yn("Date",!0)),i.fn.year=yn("FullYear",!0),i.fn.years=at("years accessor is deprecated. Use year instead.",yn("FullYear",!0)),i.fn.days=i.fn.day,i.fn.months=i.fn.month,i.fn.weeks=i.fn.week,i.fn.isoWeeks=i.fn.isoWeek,i.fn.quarters=i.fn.quarter,i.fn.toJSON=i.fn.toISOString,vt(i.duration.fn=dt.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;r.milliseconds=e%1e3,i=gt(e/1e3),r.seconds=i%60,s=gt(i/60),r.minutes=s%60,o=gt(s/60),r.hours=o%24,t+=gt(o/24),u=gt(bn(t)),t-=gt(wn(u)),n+=gt(t/30),t%=30,u+=gt(n/12),n%=12,r.days=t,r.months=n,r.years=u},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return gt(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+At(this._months/12)*31536e6},humanize:function(e){var t=ln(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=i.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=i.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=Ct(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;e=Ct(e);if(e==="month"||e==="year")return t=this._days+this._milliseconds/864e5,n=this._months+bn(t)*12,e==="month"?n:n/12;t=this._days+Math.round(wn(this._months/12));switch(e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*24*60+this._milliseconds/6e4;case"second":return t*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(t*24*60*60*1e3)+this._milliseconds;default:throw 37}},lang:i.fn.lang,locale:i.fn.locale,toIsoString:at("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),i.duration.fn.toString=i.duration.fn.toISOString;for(l in J)st(J,l)&&En(l.toLowerCase());i.duration.fn.asMilliseconds=function(){return this.as("ms")},i.duration.fn.asSeconds=function(){return this.as("s")},i.duration.fn.asMinutes=function(){return this.as("m")},i.duration.fn.asHours=function(){return this.as("h")},i.duration.fn.asDays=function(){return this.as("d")},i.duration.fn.asWeeks=function(){return this.as("weeks")},i.duration.fn.asMonths=function(){return this.as("M")},i.duration.fn.asYears=function(){return this.as("y")},i.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=At(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),w?t.exports=i:typeof define=="function"&&define.amd?(define("moment",function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(o.moment=u),i}),Sn(!0)):Sn()}).call(this)},"e.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js");var f=this.path,l=n.ui.Node,c=n.template.define(f,{Button:n.resource("./e.tmpl"),ButtonPanel:n.resource("./f.tmpl"),ButtonGroup:n.resource("./g.tmpl")}),h=l.subclass({className:f+".Button",template:c.Button,binding:{caption:"caption"},action:{click:function(){this.isDisabled()||this.click()}},caption:"[no caption]",setCaption:function(e){this.caption=e,this.updateBind("caption")},click:function(){}}),p=l.subclass({className:f+".ButtonPanel",template:c.ButtonPanel,childClass:h,groupingClass:{className:f+".ButtonGroupingNode",rule:function(e){return e.groupId||e.basisObjectId},childClass:{className:f+".ButtonGroup",template:c.ButtonGroup}},grouping:{}});t.exports={Button:h,ButtonPanel:p}},"18.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js");var f=n.require("./16.js"),l=n.require("./17.js");t.exports=n.ui.Node.subclass({className:"EmployeeEntity",template:n.template.get("#9"),binding:{name:"data.name"},init:function(){n.ui.Node.prototype.init.call(this),this.setChildNodes([new f({data:{month:this.month,year:this.year,entity:this.data}})])}})},"u.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),n.require("./e.js");var f=n.require("./d.js"),l=n.require("./v.js"),c=n.require("./w.js"),h=n.require("./x.js");t.exports=n.ui.Node.subclass({container:n.dom.get("toolbox"),template:n.template.get("#3"),satellite:{calendar:{delegate:function(e){return e.delegate},instanceOf:h},teamsList:{instanceOf:c,delegate:function(e){return e.delegate}}},binding:{calendar:"satellite:calendar",buttonPublicHolidays:new n.ui.button.Button({caption:"Public holidays",click:function(){this.owner.action.navigateToPublicHolidays(this.owner.data)}}),buttonAdmin:new n.ui.button.Button({caption:"Admin area",click:function(){this.owner.action.navigateToAdmin(this.owner.data)}}),teamsList:"satellite:teamsList"},action:{navigateToAdmin:function(){f.navigate("admin")},navigateToTeam:function(e){f.navigate("team/"+e.team+"/"+e.month+"/"+e.year)},navigateToPublicHolidays:function(e){f.navigate("public-holidays/"+e.month+"/"+e.year)}},emit_teamChange:n.event.create("teamChange","team"),emit_monthChange:n.event.create("monthChange","date"),handler:{teamChange:function(e,t){this.data.team=t,this.action.navigateToTeam(this.data)},monthChange:function(e,t){var n=l(t);this.data.month=n.format("MMMM"),this.data.year=n.format("YYYY"),location.hash.match(/public-holidays/)?this.action.navigateToPublicHolidays(this.data):this.action.navigateToTeam(this.data)}}})},"d.js":function(e,t,n,r,i,s,o,u,a){function S(e){function r(e){return t.substr(e).match(/^\w+/)}function i(e,s){var o="",u;for(var a=e;a<t.length;a++){var f=t.charAt(a);switch(f){case s:return{result:o,offset:a};case"\\":o+="\\"+t.charAt(++a);break;case"|":o+=s!=")"?"\\|":"|";break;case"(":(u=i(a+1,")"))?(a=u.offset,o+="(?:"+u.result+")?"):o+="\\(";break;case":":(u=r(a+1))?(a+=u[0].length,o+="([^/]+)"):o+=":";break;case"*":(u=r(a+1))?(a+=u[0].length,o+="(.*?)"):o+="\\*";break;default:o+=n.string.forRegExp(f)}}return s?null:o}var t=String(e||"");return new RegExp("^"+i(0)+"$","i")}function x(){d?n.dom.event.addHandler(r,"hashchange",k):E=setInterval(k,v)}function T(){d?n.dom.event.removeHandler(r,"hashchange",k):clearInterval(E)}function N(){b||(x(),b=!0,k())}function C(){b&&(T(),b=!1)}function k(){var e=c.hash.substr(1)||"";if(e!=w){var t=[],n=[];w=e;for(var r in g){var i=g[r],s=e.match(i.regexp);s?(y[r]||t.push(i),y[r]=s):y[r]&&(n.push(i),delete y[r])}for(var o=0,i;i=n[o];o++){var u=m(i.callbacks);for(var a=0,f;f=u[a];a++)f.callback.leave&&f.callback.leave.call(f.context)}for(var o=0,i;i=t[o];o++){var u=m(i.callbacks);for(var a=0,f;f=u[a];a++)f.callback.enter&&f.callback.enter.call(f.context)}for(var r in y){var i=g[r],l=m(y[r],1),u=m(i.callbacks);for(var o=0,f;f=u[o];o++)f.callback.match&&f.callback.match.apply(f.context,l)}}}function L(e,t,n){var r=g[e],i;if(!r){r=g[e]={source:e,callbacks:[],regexp:Object.prototype.toString.call(e)!="[object RegExp]"?S(e):e};if(typeof w=="string"){var s=w.match(r.regexp);s&&(y[e]=s)}}i={cb_:t,context:n,callback:typeof t!="function"?t||{}:{match:t}},r.callbacks.push(i),e in y&&(i.callback.enter&&i.callback.enter.call(n),i.callback.match&&i.callback.match.apply(n,m(y[e],1)))}function A(e,t,n){var r=g[e];if(r){var i=-1;for(var s=0,o;o=r.callbacks[s];s++)if(o.cb_===t&&o.context===n){r.callbacks.splice(s,1),r.callbacks.length||(delete g[e],delete y[e]);break}}}function O(e,t){t?c.replace(c.pathname+"#"+e):c.hash=e,b&&k()}n.require("./8.js");var f=this.path,l=n.namespace(String(f)),c=r.location,h=r.document,p=h.documentMode,d="onhashchange"in r&&(p===undefined||p>7),v=50,m=n.array.from,g={},y={},b=!1,w,E;t.exports={debug:!1,add:L,remove:A,stop:C,start:N,checkUrl:k,navigate:O}},"19.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),t.exports=n.ui.Node.subclass({name:"Agenda",template:n.template.get("#b"),childClass:{template:n.template.get("#c"),binding:{id:"data:",name:"data:"},action:{applyType:function(){this.parentNode.parentNode.emit_applyDayType(this.data.id)}}},init:function(){var e=this;n.ui.Node.prototype.init.call(this);var t=Object.keys(e.dayTypes).map(function(t){return{data:e.dayTypes[t]}});e.setChildNodes(t)}})},"c.js":function(e,t,n,r,i,s,o,u,a){function y(e){var t=d(e);return function(){t.apply(E,arguments),this.service&&t.apply(this.service,arguments),t.apply(this,arguments)}}function b(e){var t=d(e);return function(){var r=[this].concat(c(arguments));t.apply(E,r),this.transport&&this.transport["emit_"+e].apply(this.transport,r),t.apply(this,arguments)}}n.require("./3.js"),n.require("./4.js");var f=this.path,l=n.object.extend,c=n.array.from,h=n.object.slice,p=n.object.merge,d=n.event.create,v=n.data.STATE,m=n.data.Object,g=n.event.Emitter,w=[],E=new g({abort:function(){var e=c(w);for(var t=0;t<e.length;t++)e[t].abort();return e},handler:{start:function(e){n.array.add(w,e.transport)},complete:function(e){n.array.remove(w,e.transport)}}}),S=m.subclass({className:f+".AbstractRequest",influence:null,initData:null,requestData:null,transport:null,stateOnAbort:v.UNDEFINED,emit_start:b("start"),emit_timeout:b("timeout"),emit_abort:b("abort"),emit_success:b("success"),emit_failure:b("failure"),emit_complete:b("complete"),emit_stateChanged:function(e){m.prototype.emit_stateChanged.call(this,e);if(this.influence)for(var t=0;t<this.influence.length;t++)this.influence[t].setState(this.state,this.state.data)},init:function(){m.prototype.init.call(this),this.influence=[]},setInfluence:function(e){this.influence=c(e)},clearInfluence:function(){this.influence=null},doRequest:n.fn.$undef,getResponseData:n.fn.$undef,destroy:function(){m.prototype.destroy.call(this),this.initData=null,this.requestData=null,this.clearInfluence()}}),x={start:function(e,t){n.array.add(this.inprogressRequests,t)},complete:function(e,t){n.array.remove(this.inprogressRequests,t)}},T={complete:function(){var e=this.requestQueue.shift();e&&n.nextTick(function(){e.doRequest()})}},N=g.subclass({className:f+".AbstractTransport",requestClass:S,requests:null,poolLimit:null,poolHashGetter:n.fn.$true,emit_start:y("start"),emit_timeout:y("timeout"),emit_abort:y("abort"),emit_success:y("success"),emit_failure:y("failure"),emit_complete:y("complete"),init:function(){this.requests={},this.requestQueue=[],this.inprogressRequests=[],g.prototype.init.call(this),this.addHandler(x,this),this.poolLimit&&this.addHandler(T,this)},getRequestByHash:function(e){var t=this.requests[e];if(!t){for(var n in this.requests)if(this.requests[n].isIdle()&&this.requestQueue.indexOf(this.requests[n])==-1){t=this.requests[n],delete this.requests[n];break}t||(t=new this.requestClass({transport:this})),this.requests[e]=t}return t},prepare:n.fn.$true,prepareRequestData:n.fn.$self,request:function(e){if(!this.prepare())return;var t=h(e),n=this.poolHashGetter(this.prepareRequestData(t)),r=this.getRequestByHash(n,!0);return r.initData&&r.abort(),r.initData=t,r.requestData=t,r.setInfluence(t.influence||this.influence),this.poolLimit&&this.inprogressRequests.length>=this.poolLimit?(this.requestQueue.push(r),r.setState(v.PROCESSING)):r.doRequest(),r},abort:function(){for(var e=0,t;t=this.inprogressRequests[e];e++)t.abort();for(var e=0,t;t=this.requestQueue[e];e++)t.setState(v.ERROR);this.inprogressRequests=[],this.requestQueue=[]},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stoppedRequests){for(var e=0,t;t=this.stoppedRequests[e];e++)t.transport.request(t.initData);this.stoppedRequests=null}this.stopped=!1},destroy:function(){for(var e in this.requests)this.requests[e].destroy();this.requests={},this.inprogressRequests=null,this.requestQueue=null,this.stoppedRequests=null,g.prototype.destroy.call(this)}});t.exports={createTransportEvent:y,createRequestEvent:b,transportDispatcher:E,AbstractRequest:S,AbstractTransport:N}},"b.js":function(e,t,n,r,i,s,o,u,a){function x(e){var t=1e6,n=String(e).split(".");for(var r=0,i=0;r<4&&r<n.length;r++,t/=100)i+=n[r]*t;return i}function T(e){var t=e.toLowerCase();if(t in d)return d[t];var n=t.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(n){d[t]=!1;var r=n[1].toLowerCase(),i=x(n[3]),s=n[4]||"=",o=p[r];if(o)return d[t]=!i||s=="="&&o==i||s=="+"&&o>=i||s=="-"&&o<i}return!1}var f=this.path,l=r.document,c=r.navigator&&r.navigator.userAgent||"",h=r.opera,p={},d={},v="unknown",m="unknown",g={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var y in g){if(y=="MSIE"&&h)continue;if(y=="Safari"&&/chrome/i.test(c))continue;if(y=="AppleWebKit"&&/iphone/i.test(c))continue;if(c.match(new RegExp(y+"."+"(\\d+(\\.\\d+)*)","i"))){var b=g[y],w=h&&typeof h.version=="function"?h.version():RegExp.$1,E=x(w);v=b[0]+E,m=b[0]+" "+w;for(var S=0;S<b.length;S++)p[b[S].toLowerCase()]=E}}var N={set:function(e,t,n,r,i){l.cookie=e+"="+(t==null?"":escape(t))+";path="+(r||(location.pathname.indexOf("/")==0?"":"/")+location.pathname)+(n?";expires="+(new Date(Date.now()+n*1e3)).toGMTString():"")+(i?";domain="+i:"")},get:function(e){var t=l.cookie.match(new RegExp("(^|;)\\s*"+e+"\\s*=\\s*(.*?)\\s*(;|$)"));return t&&unescape(t[2])},remove:function(e,t,n){l.cookie=e+"=;expires="+(new Date(0)).toGMTString()+";path="+(t||(location.pathname.indexOf("/")==0?"":"/")+location.pathname)+(n?";domain="+n:"")}};t.exports={prettyName:m,is:T,test:function(){return n.array(arguments).some(T)},cookies:N}},"1a.js":function(e,t,n,r,i,s,o,u,a){function d(e,t,n){var r=e.childNodes;for(var i=0;i<r.length;i++)if(t=="team"){if(r[i].delegate.data.id==n){r[i].select();return}}else for(var s=0;s<r[i].childNodes.length;s++)if(r[i].childNodes[s].delegate.data.id==n){r[i].childNodes[s].select();return}}n.require("./1.js");var f=n.require("./a.js"),l=n.require("./12.js"),c=n.require("./1b.js"),h=n.require("./1c.js"),p=n.require("./1e.js");t.exports=l.subclass({name:"adminPage",satellite:{teamForm:{instanceOf:h,existsIf:function(e){return e.data.adminEdit&&!e.data.adminEdit.delegate.data.hasOwnProperty("surname")},delegate:function(e){return e.delegate.data.adminEdit.delegate}},employeeForm:{instanceOf:p,existsIf:function(e){return e.data.adminEdit&&e.data.adminEdit.delegate.data.hasOwnProperty("surname")},delegate:function(e){return e.delegate.data.adminEdit.delegate}}},binding:{teamForm:"satellite:",employeeForm:"satellite:"},init:function(){n.ui.Node.prototype.init.call(this),this.setChildNodes([c(this.delegate.data.employeesByTeams)]);var e=this;this.router.add("admin",{match:function(){e.select()}}),this.router.add("admin/employee/:id",{match:function(t){e.select(),d(e.getChildByName("TeamsTree"),"employee",t)}}),this.router.add("admin/team/:id",{match:function(t){e.select(),d(e.getChildByName("TeamsTree"),"team",t)}})},handler:{select:function(e,t,n){typeof t!="undefined"&&typeof n!="undefined"&&this.router.navigate("admin/"+t+"/"+n)}}})},"1b.js":function(e,t,n,r,i,s,o,u,a){n.require("./f.js"),n.require("./p.js"),n.require("./s.js"),n.require("./e.js"),t.exports=function(e){var t={childClass:n.ui.PartitionNode,rule:function(e){return e instanceof n.ui.tree.Folder==0},sorting:n.getter("data.id")},r=n.ui.tree.Node.subclass({binding:{title:"data:name"},handler:{select:function(){this.parentNode.parentNode.emit_select("employee",this.delegate)}}}),i=n.ui.tree.Folder.subclass({binding:{title:"data:name"},sorting:n.getter("data.name"),grouping:t,init:function(){n.ui.tree.Node.prototype.init.call(this),this.setDataSource(e.getSubset(this.data.path+""+this.data.team_code+"/"))},handler:{select:function(){this.parentNode.emit_select("team",this.delegate)}}}),s=n.ui.tree.Tree.subclass({name:"TeamsTree",selection:{multiple:!1},grouping:{childClass:n.ui.PartitionNode,rule:function(e){return e instanceof n.ui.tree.Folder==0},sorting:n.getter("data.id")},dataSource:e.getSubset("/"),childFactory:function(e){return e.delegate.data.hasOwnProperty("surname")?new r(e):new i(n.object.extend({childFactory:this.childFactory},e))},init:function(){n.ui.tree.Node.prototype.init.call(this)},handler:{select:function(e,t,n){n&&(this.parentNode.delegate.update({adminEdit:{delegate:n}}),this.parentNode.emit_select(t,n.data.id))}}});return new s}},"s.js":function(e,t,n,r,i,s,o,u,a){function g(e){typeof e.expand=="function"&&e.expand()}function y(e){typeof e.collapse=="function"&&e.collapse()}n.require("./3.js"),n.require("./f.js"),n.require("./1.js"),n.require("./6.js");var f=this.path,l=n.Class,c=n.dom,h=n.event.create,p=n.ui.Node,d=n.ui.PartitionNode,v=n.ui.GroupingNode,m=n.template.define(f,{Tree:n.resource("./1g.tmpl"),PartitionNode:n.resource("./1h.tmpl"),Node:n.resource("./1i.tmpl"),Folder:n.resource("./1j.tmpl")}),b={expandAll:function(){c.axis(this,c.AXIS_DESCENDANT_OR_SELF,g)},collapseAll:function(){c.axis(this,c.AXIS_DESCENDANT_OR_SELF,y)},expand:function(){},collapse:function(){},toggle:function(){}},w=l(d,{className:f+".PartitionNode",template:m.PartitionNode}),E=l(v,{className:f+".GroupingNode",childClass:w}),S=l(p,b,{className:f+".Node",childClass:null,childFactory:null,emit_collapse:h("collapse"),emit_expand:h("expand"),template:m.Node,binding:{title:{events:"update",getter:function(e){return e.data.title||"[no title]"}},collapsed:{events:"expand collapse",getter:function(e){return e.collapsed?"collapsed":""}}},action:{select:function(e){this.isDisabled()||this.select(e.ctrlKey||e.metaKey)},toggle:function(){this.toggle()}}}),x=l(S,{className:f+".Folder",childClass:S,groupingClass:E,template:m.Folder,collapsible:!0,collapsed:!1,init:function(){S.prototype.init.call(this),this.collapsed&&this.collapsible&&this.emit_collapse()},expand:function(){return this.collapsed?(this.collapsed=!1,this.emit_expand(),!0):!1},collapse:function(){return!this.collapsed&&this.collapsible?(this.collapsed=!0,this.emit_collapse(),!0):!1},toggle:function(){this.collapsed?this.expand():this.collapse()}}),T=l(p,b,{className:f+".Tree",selection:!0,template:m.Tree,childClass:S,groupingClass:E});t.exports={Tree:T,Node:S,Folder:x,GroupingNode:E,PartitionNode:w}},"a.js":function(e,t,n,r,i,s,o,u,a){function M(e,t){var r={};if(L.test(t.method)){if(!h||t.postBody instanceof h==0)r["Content-Type"]=t.contentType+(t.encoding?";charset="+t.encoding:"")}else l.test("ie")&&(r["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");n.object.iterate(p(r,t.headers),function(e,t){t!=null&&typeof t!="function"&&this.setRequestHeader(e,t)},e)}function _(e,t){if(t.responseType&&t.asynchronous&&"responseType"in e)try{e.responseType=t.responseType}catch(n){}}function D(e,t){try{return n.json.parse(e)}catch(r){}}function P(e){var t=this.xhr,r,i,s;this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_);if(!t)return;typeof e!="number"&&(e=t.readyState);if(e==this.prevReadyState_)return;this.prevReadyState_=e,this.emit_readyStateChanged(e),e==T?(this.clearTimeout(),t.onreadystatechange=n.fn.$undef,s=t.status==0,!s&&!t.responseType&&(s=typeof t.responseText=="unknown"||!t.responseText&&!t.getAllResponseHeaders()),s?(this.emit_abort(),r=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(r=N.READY,this.emit_success(this.getResponseData())):(r=N.ERROR,i=this.getResponseError(),!i&&this.data.error&&(i=this.data.error),this.emit_failure(i))),this.emit_complete(this)):r=N.PROCESSING,this.setState(r,i)}n.require("./b.js"),n.require("./c.js"),n.require("./4.js");var f=this.path,l=n.ua,c=r.encodeURIComponent,h=r.FormData,p=n.object.extend,d=n.object.slice,v=n.object.merge,m=n.net.createTransportEvent,g=n.net.createRequestEvent,y=n.net.AbstractRequest,b=n.net.AbstractTransport,w=0,E=1,S=2,x=3,T=4,N=n.data.STATE,C="HEAD GET POST PUT PATCH DELETE TRACE LINK UNLINK CONNECT".split(" "),k=/POST/i,L=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,A="native",O=function(){if("XMLHttpRequest"in r)return function(){return new XMLHttpRequest};var e=r.ActiveXObject;if(e){var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var n=0;A=t[n];n++)try{if(new e(A))return function(){return new e(A)}}catch(i){}}throw 34}(),H=y.subclass({className:f+".Request",requestStartTime:0,timeout:3e4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,debug:!1,emit_readyStateChanged:g("readyStateChanged"),init:function(){y.prototype.init.call(this),this.xhr=O()},isIdle:function(){return this.xhr.readyState==T||this.xhr.readyState==w},isSuccessful:function(){var e=this.xhr.status;return e>=200&&e<300||e==304},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},getResponseData:function(){var e=this.xhr;if(!e.responseType)if(this.responseType=="json"||/^application\/json/i.test(this.data.contentType))return D(e.responseText,this.lastRequestUrl_);return"response"in e?e.response:e.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){return{code:"SERVER_ERROR",msg:this.responseType?this.xhr.response||this.xhr.statusText||"Error":this.xhr.responseText}},prepare:n.fn.$true,prepareRequestData:function(e){var t=[],n=e.url;e=d(e);for(var r in e.params){var i=e.params[r];if(i==null||i.toString()==null)continue;t.push(c(r)+"="+c(i.toString()))}return t=t.join("&"),!e.postBody&&L.test(e.method)&&(e.postBody=t||"",t=""),e.routerParams&&(n=n.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(t,n){return n in e.routerParams?e.routerParams[n]:t})),t&&(n+=(n.indexOf("?")==-1?"?":"&")+t),e.requestUrl=n,e},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(e){this.update({contentType:"",status:""}),l.test("gecko1.8.1-")&&e.asynchronous&&(this.xhr=O()),this.emit_start();var t=this.xhr;this.prevReadyState_=-1,t.onreadystatechange=P.bind(this),e.asynchronous||P.call(this,w),t.open(e.method,e.requestUrl,e.asynchronous),this.lastRequestUrl_=e.requestUrl,_(t,e),this.responseType=e.responseType||"",M(t,e),this.setTimeout(this.timeout);var n=e.postBody;if(L.test(e.method)&&l.test("ie9-"))if(typeof n=="object"&&typeof n.documentElement!="undefined"&&typeof n.xml=="string")n=n.xml;else if(typeof n=="string")n=n.replace(/\r/g,"");else if(n==null||n=="")n="[No data]";return this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null,this.xhr===t&&t.readyState==E&&t.send(n)}.bind(this),this.sendDelay)):t.send(n),!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),this.xhr.readyState!=T&&this.xhr.readyState!=w&&P.call(this,T))},setTimeout:function(e){if(!this.xhr.asynchronous)return;"ontimeout"in this.xhr?(this.xhr.timeout=e,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),e)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}}),this.emit_timeout(this),this.abort()},destroy:function(){this.abort(),this.xhr=null,y.prototype.destroy.call(this)}}),B=b.subclass({className:f+".Transport",requestClass:H,emit_readyStateChanged:m("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:n.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",postBody:null,init:function(){b.prototype.init.call(this),this.params=d(this.params),this.routerParams=d(this.routerParams)},setParam:function(e,t){this.params[e]=t},setParams:function(e){this.clearParams();for(var t in e)this.setParam(t,e[t])},removeParam:function(e){delete this.params[e]},clearParams:function(){for(var e in this.params)delete this.params[e]},prepareRequestData:function(e){if(!e.url&&!this.url)throw 35;return p(e,{headers:v(this.requestHeaders,e.headers),params:v(this.params,e.params),routerParams:v(this.routerParams,e.routerParams)}),n.object.complete(e,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,encoding:this.encoding,postBody:this.postBody,responseType:this.responseType}),e}});t.exports={Request:H,Transport:B,request:function(e,t,r){typeof e=="string"&&(e={url:e,asynchronous:!!t||!!r});var i=new B(e);i.addHandler({success:t&&function(e,n,r){t(r)},failure:r&&function(e,t,n){r(n)},complete:function(){n.nextTick(function(){i.destroy()})}});var s=i.request();if(!s.requestData.asynchronous)return s.getResponseData()}}},"9.js":function(e,t,n,r,i,s,o,u,a){function k(e,t){return new Function(e,t)}n.require("./6.js");var f=n.template.TYPE_ELEMENT,l=n.template.TYPE_ATTRIBUTE,c=n.template.TYPE_TEXT,h=n.template.TYPE_COMMENT,p=n.template.TOKEN_TYPE,d=n.template.TOKEN_BINDINGS,v=n.template.TOKEN_REFS,m=n.template.ATTR_NAME,g=n.template.ATTR_NAME_BY_TYPE,y=n.template.ELEMENT_NAME,b=n.template.ELEMENT_ATTRS,w=n.template.ELEMENT_CHILDS,E=n.template.TEXT_VALUE,S=n.template.COMMENT_VALUE,x={},T=1,N=function(){function u(e,t){for(var r=0,i;i=e[r];r++)i.indexOf(":")==-1&&n.push(i+":"+t)}function a(n){var r=t.length,i=e[r]||"r"+r;return t.push(i+"="+n),i}function l(e){r.push(e)}function w(e,n,r,E){var S,x,T,N,C;for(var k=0,L=0,A=0,O;O=e[k];k++,L++,N=!1){k?e[k+1]?(O[p]==e[k-1][p]&&O[p]==c&&A++,S=n+".childNodes["+(r?L:L+(A?" + "+A+" * TEXT_BUG":""))+"]"):S=n+".lastChild":S=n+".firstChild";if(x=O[v])N=!0,S=a(S),u(x,S);O[d]&&(O[d]&&typeof O[d]=="number"&&(O[d]=O[v][O[d]-1]),N||(N=!0,S=a(S)),l([O[p],S,O[d]]));if(O[p]==f){T=-1,n==s&&i.push(S+"."+E),N||(S=a(S),T=t.length);var M=[],_=[];for(var D=b,P;P=O[D];D++)P[p]==f||P[p]==c||P[p]==h?_.push(P):M.push(P);for(var D=0,H;H=M[D];D++){if(H[p]==6)continue;var B=g[H[p]]||H[m];if(x=H[v])N=!0,u(x,a(S+'.getAttributeNode("'+B+'")'));if(C=H[d]){N=!0;switch(B){case"class":for(var j=0,F;F=C[j];j++)l([2,S,F[1],B,F[0]].concat(F.slice(2)));break;case"style":for(var j=0,I;I=C[j];j++){o++;for(var q=0,R;R=I[0][q];q++)l([2,S,R,B,I[0],I[1],I[2],I[3],o])}break;default:o++;for(var j=0,R;R=C[0][j];j++)l([2,S,R,B,C[0],C[1],O[y],o])}}}_.length&&w(_,S,r),!N&&T==t.length&&t.pop()}}}var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),t,n,r,i,s,o;return function(e,u,a,f){return t=[],n=[],r=[],i=[],s=u||"_",o=0,w(e,s,a,f),{path:t,ref:n,binding:r,markedElementList:i}}}(),C=function(){function s(t,n,r){var i=[],s=t[5],o=t[4],u,a;for(var f=0;f<s.length;f++)if(typeof s[f]=="string")i.push('"'+s[f].replace(/"/g,'\\"')+'"');else{u=o[s[f]],a=u.indexOf(":");if(a==-1)i.push(n=="l10n"?'"{'+u+'}"':n=="bool"?"(__"+u+'||"")':"__"+u);else{var l=null,c=u.substr(a+1).replace(e,function(e,t){return l=t,""});l?i.push(r[u.substr(a+1)]):i.push('__l10n["'+c+'"]')}}return i.length==1&&i.push('""'),i.join("+")}var e=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,t={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},r={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},i={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(o){function u(e){N[e]=!0,h.push(p+"="+e+"("+n.array(arguments,1)+");")}var a={},h,p,d=[],v=[],g,y,b=[],w={},E=1,S,x,T={},N={resolve:!0};for(var C=0,k;k=o[C];C++){var L=k[0],A=k[1],O=k[2];if(["get","set","templateId_"].indexOf(O)!=-1)continue;var M=O.split(":"),_=M[0]=="anim";_&&(O=M[1]),h=a[O],p="_"+C,g="__"+O;if(M[0]=="l10n"&&M[1]){var D=M[1],P=null,H=D.replace(e,function(e,t){return P=t,""});if(P){D in w==0&&(g="$l10n_"+E++,w[D]=g,b.push('set("'+g+'",'+g+")"),d.push(g+'=tools.l10nToken("'+H+'").computeToken()'),h=a[P],h||(h=a[P]=[],d.push("__"+P)),h.push(g+".set(__"+P+");")),O=w[D],p="_"+C,g="__"+O,h=a[O],h||(h=a[O]=[],d.push(g)),L==c?(d.push(p+"="+A),u(i[L],A,p,"value")):(B='"'+k[m]+'"',d.push(p),u("bind_attr",A,B,p,s(k,!1,w)));continue}y||(y={}),a[H]||(a[H]=[],y[H]=[]),h=a[H],h.l10n=!0;if(L==c){y[H].push(A+".nodeValue=value;"),h.push(A+'.nodeValue=__l10n["'+H+'"]'+(P?"[__"+P+"]":"")+";");continue}y[H].push("bind_attr("+[A,'"'+k[m]+'"',"NaN",s(k,"l10n",w)]+");")}h||(h=a[O]=[],d.push(g));if(L!=l)if(!h.nodeBind)d.push(p+"="+A),u(i[L],A,p,"value"),h.nodeBind=p;else switch(L){case f:u(i[L],A,A,"value!==null?String(value):null");break;case c:h.push(A+".nodeValue=value;")}else{var B=k[m];switch(B){case"class":var j="",F="value",I=k[4],q=k.length;if(q>=6)if(q==6||typeof k[6]=="string")q==6?(F='value?"'+O+'":""',k[5]&&(j=I+O)):(I="",F='value?"'+k[6]+'":""',k[5]&&(j=k[6]));else{if(!k[6].length)continue;q==7?(F=k[6].map(function(e){return'value=="'+e+'"'}).join("||")+'?value:""',k[5]&&(j=I+k[6][k[5]-1])):(I="",F=k[6].map(function(e,t){return'value=="'+e+'"?"'+this[t]+'"'},k[7]).join(":")+':""',k[5]&&(j=k[7][k[5]-1]))}else F='typeof value=="string"||typeof value=="number"?value:(value?"'+O+'":"")';d.push(p+'="'+j+'"'),u("bind_attrClass",A,p,F,'"'+I+'"',_);break;case"style":var R=s(k,!1,w);x=k[8],T[x]||(T[x]=p,d.push(p+"="+(k[7]=="hide"?'""':'"none"'))),k[7]&&(R=R.replace(/\+""$/,"")+(k[7]=="hide"?'?"none":""':'?"":"none"')),p=T[x],u("bind_attrStyle",A,'"'+k[6]+'"',p,R);break;default:S=t[B],x=k[7],T[x]||(d.push(p+"="+s(k,"l10n",w)),T[x]=p),p=T[x],u("bind_attr",A,'"'+B+'"',p,S&&r[B]?s(k,"bool",w)+'?"'+B+'":""':s(k,!1,w)),S&&(S=="*"||S.indexOf(k[6].toLowerCase())!=-1)&&h.push("if("+A+"."+B+"!="+p+")"+A+"."+B+"="+(r[B]?"!!"+p:p)+";")}}}v.push(';function set(bindName,value){if(typeof bindName!="string")');for(var O in a)a[O].nodeBind&&v.push("if(bindName==="+a[O].nodeBind+")"+'bindName="'+O+'";'+"else ");v.push("return;"),v.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");for(var O in a)v.push('case"'+O+'":'+(a[O].l10n?a[O].join(""):"if(__"+O+"!==value)"+"{"+"__"+O+"=value;"+a[O].join("")+"}")+"break;");v.push("}}");var U=[];for(var z in N)U.push(z+"=tools."+z);return{keys:n.object.keys(a).filter(function(e){return e.indexOf("@")==-1}),tools:U,vars:d,set:v.join(""),l10n:y,l10nCompute:b}}}(),L=function(e,t,r,i,s,o){var u=x[r&&n.path.relative(r)];if(u)return u;var a=N(e,"_",s,o),f=C(a.binding),l=a.markedElementList.join("="),c,h,p={keys:f.keys,l10nKeys:n.object.keys(f.l10n)};e.length==1&&(a.path[0]="a=_");if(f.l10n){var d=[];for(var v in f.l10n)d.push('case"'+v+'":'+'if(value==null)value="{'+v+'}";'+"__l10n[token]=value;"+f.l10n[v].join("")+"break;");p.createL10nSync=k(["_","__l10n","bind_attr","TEXT_BUG"],"var "+a.path+";"+"return function(token, value){"+"switch(token){"+d.join("")+"}"+"}")}return p.createInstance=k(["tid","map","proto","tools","__l10n","TEXT_BUG"],"var getBindings=tools.createBindingFunction(["+f.keys.map(function(e){return'"'+e+'"'})+"]),"+(f.tools.length?f.tools+",":"")+"Attaches=function(){};"+"Attaches.prototype={"+f.keys.map(function(e){return e+":null"})+"};"+"return function createInstance_(id,obj,onAction,onRebuild,bindings,bindingInterface){"+"var _=proto.cloneNode(true),"+a.path.concat(f.vars)+","+"instance={"+"context:obj,"+"action:onAction,"+"rebuild:onRebuild,"+"handler:null,"+"bindings:bindings,"+"bindingInterface:bindingInterface,"+"attaches:null,"+"tmpl:{"+[a.ref,"templateId_:id","set:set"]+"}"+"}"+(l?";if(obj||onAction)"+l+"=(id<<12)|tid":"")+f.set+";if(bindings)instance.handler=getBindings(bindings,obj,set,bindingInterface)"+";"+f.l10nCompute+";return instance"+"}"),p};t.exports={getFunctions:L}},"8.js":function(e,t,n,r,i,s,o,u,a){function w(e){return b[e]||[e]}function S(e){return e instanceof E?e.event_:e||r.event}function x(e){return typeof e=="string"?l.getElementById(e):e}function T(e){var t=e.target||e.srcElement||l;return t.nodeType==3?t.parentNode:t}function N(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function C(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function k(e,t){t=x(t),t?U(t,e,k):(C(e),N(e))}function L(e){return e.keyCode||e.which||0}function A(e){return e.charCode||e.keyCode||0}function O(e,t){return typeof e.which=="number"?e.which==t.VALUE:!!(e.button&t.BIT)}function M(e){return e.changedTouches?e.changedTouches[0].pageX:"pageX"in e?e.pageX:"clientX"in e?e.clientX+(l.compatMode=="CSS1Compat"?l.documentElement.scrollLeft:l.body.scrollLeft):0}function _(e){return e.changedTouches?e.changedTouches[0].pageY:"pageY"in e?e.pageY:"clientY"in e?e.clientY+(l.compatMode=="CSS1Compat"?l.documentElement.scrollTop:l.body.scrollTop):0}function D(e){var t=0;return"wheelDelta"in e?t=e.wheelDelta:e.type=="DOMMouseScroll"&&(t=-e.detail),t&&t/Math.abs(t)}function j(e){var t=h(P[e.type]),n=H[e.type],r=new E(e);if(n){n.handler.call(n.thisObject,r),k(e);return}if(t)for(var i=t.length;i-->0;){var s=t[i];s.handler.call(s.thisObject,r)}}function F(e,t,n){H[e]&&I(e),q(e,t,n),H[e]={handler:t,thisObject:n}}function I(e){var t=H[e];t&&(R(e,t.handler,t.thisObject),delete H[e])}function q(e,t,n){var r=P[e];if(r){for(var i=0,s;s=r[i];i++)if(s.handler===t&&s.thisObject===n)return}else B?U(l,e,c):l.addEventListener(e,j,!0),r=P[e]=[];r.push({handler:t,thisObject:n})}function R(e,t,n){var r=P[e];if(r)for(var i=0,s;s=r[i];i++)if(s.handler===t&&s.thisObject===n){r.splice(i,1),r.length||(delete P[e],B?W(l,e,c):l.removeEventListener(e,j,!0));return}}function U(e,t,n,r){e=x(e);if(!e)throw 32;if(typeof n!="function")throw 33;e[d]||(e[d]={});var i={handler:n,thisObject:r},s=e[d],o=s[t];if(!o)o=s[t]=[i],o.fireEvent=function(e){e=S(e);if(B&&e&&P[t]&&typeof e.returnValue=="undefined"){j(e);if(e.cancelBubble===!0)return;typeof e.returnValue=="undefined"&&(e.returnValue=!0)}for(var n=0,r=new E(e),i;i=o[n++];)i.handler.call(i.thisObject,r)},p?e.addEventListener(t,o.fireEvent,!1):e.attachEvent("on"+t,o.fireEvent);else{for(var u=0,a;a=o[u];u++)if(a.handler===n&&a.thisObject===r)return;o.push(i)}}function z(e,t,n){e=x(e);for(var r in t)U(e,r,t[r],n)}function W(e,t,n,r){e=x(e);var i=e[d];if(i){var s=i[t];if(s)for(var o=0,u;u=s[o];o++)if(u.handler===n&&u.thisObject===r){s.splice(o,1),s.length||X(e,t);return}}}function X(e,t){e=x(e);var n=e[d];if(n)if(typeof t!="string")for(t in n)X(e,t);else{var r=n[t];r&&(e.removeEventListener?e.removeEventListener(t,r.fireEvent,!1):e.detachEvent("on"+t,r.fireEvent),delete n[t])}}function V(e,t,n){e=x(e);var r=e[d];r&&r[t]&&r[t].fireEvent(n)}function $(e,t){U(r,"unload",e,t)}function K(e,t){t||(t="div");var n=t+"-"+e;if(J[n])return J[n];var r=!1,i=!1;if(!p){var s="on"+e,o=l.createElement("div"),u=o.appendChild(l.createElement(t));o[s]=function(){i=!0};try{u.fireEvent(s),r=!0}catch(a){}}return J[n]={supported:r,bubble:i}}function Q(e){return function(t,n){return e(S(t),n)}}var f=this.path,l=r.document,c=n.fn.$null,h=n.array.from,p=!!l.addEventListener,d="__basisEvents",v={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},m={VALUE:1,BIT:1},g={VALUE:2,BIT:4},y={VALUE:3,BIT:2},b={mousewheel:["mousewheel","DOMMouseScroll"]},E=n.Class(null,{className:f+".Event",KEY:v,init:function(e){e=S(e);for(var t in e)typeof e[t]!="function"&&t in this==0&&(this[t]=e[t]);var r=T(e);n.object.extend(this,{event_:e,sender:r,target:r,key:L(e),charCode:A(e),mouseLeft:O(e,m),mouseMiddle:O(e,g),mouseRight:O(e,y),mouseX:M(e),mouseY:_(e),wheelDelta:D(e)})},stopBubble:function(){N(this.event_)},stopPropagation:function(){N(this.event_)},preventDefault:function(){C(this.event_)},die:function(){this.stopBubble(),this.preventDefault()}}),P={},H={},B=!p,J={};t.exports={W3CSUPPORT:p,browserEvents:w,getEventInfo:K,KEY:v,MOUSE_LEFT:m,MOUSE_RIGHT:y,MOUSE_MIDDLE:g,Event:E,sender:Q(T),cancelBubble:Q(N),cancelDefault:Q(C),kill:Q(k),key:Q(L),charCode:Q(A),mouseButton:Q(O),mouseX:Q(M),mouseY:Q(_),wheelDelta:Q(D),addGlobalHandler:q,removeGlobalHandler:R,captureEvent:F,releaseEvent:I,addHandler:U,addHandlers:z,removeHandler:W,clearHandlers:X,fireEvent:V,onUnload:$,wrap:S}},"7.js":function(e,t,n,r,i,s,o,u,a){function V(e){var t=n.template.getL10nTemplate(e),r=t.templateId,i=X[r];return i||(i=X[r]=new tt(t.source)),i}function $(e){return function(t){if(t.type=="click"&&t.which==3)return;var n=F[t.type]||t.type!="mouseenter"&&t.type!="mouseleave",r=t.sender,i;while(r){i=r.getAttribute&&r.getAttribute(e);if(!n||typeof i=="string")break;r=r.parentNode}if(typeof i=="string"){var s=r,o=s,u,a;if(F[t.type]){var f=t.relatedTarget;f&&(s===f||s.contains(f))&&(s=null)}while(s){u=s[D];if(typeof u=="number")if(a=Q(u))break;s=s.parentNode}if(a&&a.action){var l=i.trim().split(/\s+/);t.actionTarget=o;for(var c=0,h;h=l[c++];)switch(h){case"prevent-default":t.preventDefault();break;case"stop-propagation":t.stopPropagation();break;default:a.action.call(a.context,h,t)}}}t.type in j&&j[t.type](t,r)}}function K(e){var t=e&4095,n=H[t];return n&&n.template}function Q(e){var t=e&4095,n=e>>12,r=H[t];return r&&r.instances[n]}function G(e){var t=Q(e);return t&&t.context}function Y(e){var t=Q(e);return t&&t.tmpl}function Z(e){var t=Q(e);return t&&t.debug&&t.debug()}n.require("./8.js"),n.require("./2.js"),n.require("./6.js"),n.require("./9.js");var f=this.path,l=r.document,c=n.dom.event,h=n.array.from,p=n.string.camelize,d=n.l10n.token,v=n.template.htmlfgen.getFunctions,m=n.template.TemplateSwitchConfig,g=n.template.TemplateSwitcher,y=n.template.Template,b=n.template.TYPE_ELEMENT,w=n.template.TYPE_ATTRIBUTE,E=n.template.TYPE_TEXT,S=n.template.TYPE_COMMENT,x=n.template.TOKEN_TYPE,T=n.template.TOKEN_BINDINGS,N=n.template.TOKEN_REFS,C=n.template.ATTR_NAME,k=n.template.ATTR_VALUE,L=n.template.ATTR_NAME_BY_TYPE,A=n.template.ELEMENT_NAME,O=n.template.TEXT_VALUE,M=n.template.COMMENT_VALUE,_=/^event-(.+)+/,D="basisTemplateId_"+n.genUID(),P={},H={},B={svg:"http://www.w3.org/2000/svg"},j={},F={},I="onmouseenter"in l.documentElement,q=!l.addEventListener&&"__basisTemplate"+parseInt(1e9*Math.random());q&&(r[q]=function(e,t){c.fireEvent(l,e),t.returnValue=!0;var n=P[e];n&&n(new c.Event(t))});var R=function(){var e=l.createElement("div");return e.appendChild(l.createTextNode("a")),e.appendChild(l.createTextNode("a")),e.cloneNode(true).childNodes.length==1}(),U=function(){var e=l.createElement("div");return e.setAttribute("class","a"),!e.className}(),z=function(){var e=l.createElement("div");return e.setAttribute("style","position:absolute"),e.style.position!="absolute"}(),W=!!function(){try{return l.documentElement.style.color="x"}catch(e){}}();typeof Node!="undefined"&&!Node.prototype.contains&&(Node.prototype.contains=function(e){return!!(this.compareDocumentPosition(e)&16)});var X={},J=function(e,t){function n(e,t){r(t),F[e]=!0,j[t]=function(t){t=new c.Event(t),t.type=e,P[e](t)},j[e]=function(t,n){n=n&&n.parentNode,n&&(t=new c.Event(t),t.type=e,t.sender=n,P[e](t))}}function r(e){if(!P[e]){P[e]=$("event-"+e);if(!q){if(!I&&e=="mouseenter")return n(e,"mouseover");if(!I&&e=="mouseleave")return n(e,"mouseout");for(var t=0,r=c.browserEvents(e),i;i=r[t];t++)c.addGlobalHandler(i,P[e])}}}function i(e,t){r(e),q&&o.setAttribute("on"+e,q+'("'+e+'",event)'),o.setAttribute("event-"+e,t)}function s(e,t){U&&e=="class"&&(e="className");if(z&&e=="style")return o.style.cssText=t;o.setAttribute(e,t)}var o=t||l.createDocumentFragment();for(var u=t?4:0,a;a=e[u];u++)switch(a[x]){case b:var f=a[A],h=f.split(/:/),p=h.length>1?l.createElementNS(B[h[0]],f):l.createElement(f);J(a,p),o.appendChild(p);break;case w:var d=a[C],v=a[k],m=d.replace(/^event-/,"");m!=d?i(m,v):(d!="class"&&d!="style"?!a[T]:v)&&s(d,v||"");break;case 4:case 5:var v=a[k-1];v&&s(L[a[x]],v);break;case 6:i(a[1],a[2]||a[1]);break;case S:o.appendChild(l.createComment(a[M]||(a[N]?"{"+a[N].join("|")+"}":"")));break;case E:R&&u&&e[u-1][x]==E&&o.appendChild(l.createComment("")),o.appendChild(l.createTextNode(a[O]||(a[N]?"{"+a[N].join("|")+"}":"")||(a[T]?"{"+a[T]+"}":"")))}return!t&&e.length==1&&(o=o.firstChild),o},et=function(){function m(){this.set(this.name,this.value)}function g(e,t,r){var i=t&&t.bindingBridge,s=this.attaches&&this.attaches[e],o=null;if(i||s)if(i){if(!s||t!==s.value){s&&(s.tmpl&&(s.tmpl.element.toString=null,V(s.value).clearInstance(s.tmpl)),s.value.bindingBridge.detach(s.value,m,s));if(t.type=="markup"&&t instanceof n.l10n.Token){var u=V(t),a=this.context,f=this.bindings,l=this.bindingInterface;o=u.createInstance(a,null,function h(){o=c.tmpl=u.createInstance(a,null,h,f,l),o.element.toString=function(){return t.value},m.call(c)},f,l),o.element.toString=function(){return t.value}}this.attaches||(this.attaches=new r);var c=this.attaches[e]={name:e,value:t,tmpl:o,set:this.tmpl.set};i.attach(t,m,c)}else o=t&&t.type=="markup"?s.tmpl:null;if(o)return o.element;t=i.get(t)}else s&&(s.tmpl&&(s.tmpl.element.toString=null,V(s.value).clearInstance(s.tmpl)),s.value.bindingBridge.detach(s.value,m,s),this.attaches[e]=null);return t}function y(e,t){var n=e[0],r=e[1],i=t[n],s=t[r];switch(e.length){case 1:return function(t){this(n,i(t))};case 2:return function(t){this(n,i(t)),this(r,s(t))};default:var o=e.map(function(e){return t[e]});return function(n){for(var r=0;r<e.length;r++)this(e[r],o[r](n))}}}function b(e,t){for(var n in e)e[n]=y(e[n],t);return n?e:null}function w(e){var t={};return function(r,i,s,o){if(!r)return{};var u="bindingId"in r?r.bindingId:null,a=t[u];if(!a){var f=[],l={},c={};for(var h=0,p;p=e[h];h++){var d=r[p],v=d&&d.getter;if(v){l[p]=v,f.push(p);if(d.events){var m=String(d.events).trim().split(/\s+|\s*,\s*/);for(var g=0,w;w=m[g];g++)c[w]?c[w].push(p):c[w]=[p]}}}a={names:f,sync:y(f,l),handler:b(c,l)},u&&(t[u]=a)}i&&s&&a.sync.call(s,i);if(!o)return;return a.handler&&o.attach(i,a.handler,s),a.handler}}var e=/\s+/,t=typeof Node=="function"&&l instanceof Node,i=r.DOMTokenList&&l&&l.documentElement.classList instanceof r.DOMTokenList,s=t?function(e,t,n){var r=n&&n instanceof Node?n:e;return r!==t&&t.parentNode.replaceChild(r,t),r}:function(e,t,n){var r=n&&typeof n=="object"?n:e;if(r!==t)try{t.parentNode.replaceChild(r,t)}catch(i){r=e,t!==r&&t.parentNode.replaceChild(r,t)}return r},o=function(e,t,n){var r=s(e,t,n);return r===e&&typeof n=="string"&&(e.innerHTML=n),r},u=s,a=function(e,t,n){var r=s(e,t,n);return r===e&&(e.nodeValue=n),r},f=i?function(e,t,r,i,s){var o=r?i+r:"";return o!=t&&(t&&e.classList.remove(t),o&&(e.classList.add(o),s&&(e.classList.add(o+"-anim"),n.nextTick(function(){e.classList.remove(o+"-anim")})))),o}:function(t,r,i,s,o){var u=i?s+i:"";if(u!=r){var a=t.className,f=typeof a!="string",l;f&&(a=a.baseVal),l=a.split(e),r&&n.array.remove(l,r),u&&(l.push(u),o&&(n.array.add(l,u+"-anim"),n.nextTick(function(){var r=(f?t.className.baseVal:t.className).split(e);n.array.remove(r,u+"-anim"),f?t.className.baseVal=r.join(" "):t.className=r.join(" ")}))),f?t.className.baseVal=l.join(" "):t.className=l.join(" ")}return u},c=W?function(e,t,n,r){return n!==r&&(e.style[p(t)]=r),r}:function(e,t,n,r){if(n!==r)try{e.style[p(t)]=r}catch(i){}return r},h=function(e,t,n,r){return n!==r&&(r?e.setAttribute(t,r):e.removeAttribute(t)),r},E={bind_textNode:a,bind_node:s,bind_element:o,bind_comment:u,bind_attr:h,bind_attrClass:f,bind_attrStyle:c,resolve:g,l10nToken:d,createBindingFunction:w};return function(e){var t=v(e,!0,this.source.url,e.source_,!R,D),n,r={},i={},s=[],o=0,u=J(e),a=this.templateId;H[a]={template:this,instances:r};if(t.createL10nSync){var f=t.createL10nSync(u,i,h,R);for(var l=0,c;c=t.l10nKeys[l];l++)f(c,d(c).value);if(t.l10nKeys)for(var l=0,c;c=t.l10nKeys[l];l++){var p={path:c,token:d(c),handler:function(e){f(this.path,e);for(var t in r)r[t].tmpl.set(this.path,e)}};p.token.attach(p.handler,p),s.push(p),p=null}}return n=t.createInstance(a,r,u,E,i,R),{createInstance:function(e,t,i,s,u){var a=o++,f=n(a,e,t,i,s,u);return r[a]=f,f.tmpl},destroyInstance:function(e){var t=e.templateId_,n=r[t];if(n){n.handler&&n.bindingInterface.detach(n.context,n.handler,n.tmpl.set);for(var i in n.attaches)g.call(n,i,null);delete r[t]}},keys:t.keys,destroy:function(e){for(var n=0,o;o=s[n];n++)o.token.detach(o.handler,o);for(var l in r){var c=r[l];e&&c.rebuild&&c.rebuild.call(c.context);if(!e||l in r){c.handler&&c.bindingInterface.detach(c.context,c.handler,c.tmpl.set);for(var l in c.attaches)g.call(l,null)}}H[a]&&H[a].instances===r&&delete H[a],t=null,u=null,i=null,s=null,f=null,r=null}}}}(),tt=y.subclass({className:f+".Template",__extend__:function(e){return e instanceof tt?e:e instanceof m?new nt(e):new tt(e)},builder:et}),nt=g.subclass({className:f+".TemplateSwitcher",templateClass:tt});t.exports={marker:D,Template:tt,TemplateSwitcher:nt},n.template.extend({buildHtml:J,resolveTemplateById:K,resolveObjectById:G,resolveTmplById:Y})},"1c.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),n.require("./e.js"),n.require("./f.js"),n.require("./t.js");var f=n.require("./a.js"),l=n.require("./1d.js");t.exports=n.ui.form.Form.subclass({name:"TeamForm",template:n.template.get("#d"),satellite:{submitButton:{instanceOf:n.ui.button.Button.subclass({caption:"Save",click:function(){this.owner.submit()}})}},binding:{submitButton:"satellite:"},childFactory:function(e){return new l(e)},childNodes:[{type:"text",title:"Name",name:"name"},{type:"text",title:"Code",name:"code"}],onSubmit:function(){var e=this;f.request({url:"http://localhost:8888/team/update",method:"POST",contentType:"application/json",postBody:JSON.stringify(e.data),handler:{success:function(){e.owner.delegate.sync(),alert("TeamEntity successfully updated")},failure:function(){alert("Update of team is failed")}}})}})},"t.js":function(e,t,n,r,i,s,o,u,a){n.require("./3.js"),n.require("./f.js"),n.require("./8.js"),n.require("./1.js"),n.require("./i.js");var f=this.path,l=n.dom,c=n.dom.event,h=n.ui.field,p=n.event.create,d=n.event.events,v=n.ui.Node,m=n.template.define(f,{Form:n.resource("./1k.tmpl"),FormContent:n.resource("./1l.tmpl")}),g=v.subclass({className:f+".FormContent",template:m.FormContent,childClass:h.Field,childFactory:h.create,listen:{childNode:{commit:function(e){while(e=e.nextSibling)if(e.focusable&&!e.isDisabled())return e.focus(!0);this.submit()}}},emit_reset:p("reset"),onSubmit:n.fn.$false,focusFirstNonEmpty:!0,focus:function(e){for(var t=0,n;n=this.childNodes[t];t++)if(n.focusable&&(!this.focusFirstNonEmpty||!n.getValue()||!n.getValue().length)){n.focus(e);return}},loadData:function(e,t){for(var n=0,r;r=this.childNodes[n];n++)r.name in e?(r.setValue(e[r.name]),r.setValidity()):r.reset();t||this.validate()},reset:function(){for(var e=0,t;t=this.childNodes[e];e++)t.reset();this.emit_reset()},validate:function(){var e=[],t;for(var n=0,r;r=this.childNodes[n];n++)(t=r.validate())&&e.push(t);return e.length?(e[0].field.focus(),e):!0},serialize:function(){return this.childNodes.reduce(function(e,t){return t.serializable&&t.name&&(e[t.name]=t.getValue()),e},{})},submit:function(){this.validate()===!0&&this.onSubmit&&this.onSubmit(this.serialize())}}),y=g.subclass({className:f+".Form",formTarget:"",formAction:"",formEnctype:"",formMethod:"POST",template:m.Form,binding:{target:"formTarget",action:"formAction",enctype:"formEnctype",method:"formMethod"},action:{submit:function(){this.submit()},validate:function(e){this.validate()!==!0&&c.cancelDefault(e)}},submit:function(){this.onSubmit&&this.onSubmit(this.serialize()),this.tmpl&&this.tmpl.form&&this.tmpl.form.submit()}});t.exports={FormContent:g,Form:y}},"6.js":function(e,t,n,r,i,s,o,u,a){function ut(e,t){return'<span class="basisjs-markup" data-basisjs-l10n="'+t+'">'+String(e)+"</span>"}function at(e){typeof e=="string"&&(e=n.l10n.token(e));if(!e)return null;var t=e.basisObjectId,r=st[t];return r||(r=st[t]=new Et(new ot(e))),r}function ft(){return"i"+n.genUID()+"__"}function lt(e,t){function n(t,n){var r=e.indexOf(t,n);m=r!==-1?r+t.length:p.length}function r(e){var t=p[m];if(t!=='"'&&t!=="'")return;for(m++;m<d&&p[m]!==t;m++)p[m]==="\\"&&m++;return!0}function i(e){var t=p[m];if(t==="(")return n(")",m+1),!0;if(t==="["){for(m++;m<d&&p[m]!=="]";m++)r();return!0}}function s(){if(p[m]!=="/"||p[m+1]!=="*")return;return n("*/",m+2),!0}function o(){for(;m<d&&p[m]!=")";m++)if(s()||i()||u()||l())continue}function u(){if(p[m]!==":")return;var t=e.substr(m+1,nt).match(tt);return t&&(m+=t[0].length+1,o()),!0}function a(){if(p[m]!=="@")return;var t=e.substr(m+1,et).match(Z);return t&&(m+=t[0].length,g=!0),!0}function f(){if(p[m]!=="{")return;if(g){m++,c(!0);return}for(m++;m<d&&p[m]!=="}";m++)r()||i();return!0}function l(){if(p[m]!==".")return;var n=e.substr(m+1,Y).match(G);return n&&(m++,h.push(e.substring(v,m),t),v=m),!0}function c(e){for(g=!1;m<d;m++){if(s()||a()||u()||i()||l())continue;if(e&&p[m]=="}")return;f()}}var h=[],p=e.split(""),d=p.length,v=0,m=0,g;return t||(t=ft()),c(!1),h.join("")+e.substring(v)}function ht(e){var t=n.resource(e).fetch();typeof t.startUse=="function"&&t.startUse()}function pt(e){var t=n.resource(e).fetch();typeof t.stopUse=="function"&&t.stopUse()}function dt(){this.destroyBuilder&&gt.call(this);for(var e=0,t;t=this.attaches_[e];e++)t.handler.call(t.context)}function vt(e){var t=[];for(var n=0;n<e.length;n++)t.push(Array.isArray(e[n])?vt(e[n]):e[n]);return t}function mt(e,t,r,i){var s=e,o;typeof s=="function"&&(t="baseURI"in e?e.baseURI:t,o="url"in e?e.url:o,s=s()),s instanceof n.Token&&(t="baseURI"in e?e.baseURI:t,o="url"in e?e.url:o,s=s.get());if(Array.isArray(s))r&&(s=vt(s)),s={tokens:s};else if(typeof s!="object"||!Array.isArray(s.tokens))s=String(s);return typeof s=="string"&&(s=ct(s,t,i,o,e)),s}function gt(){var e=mt(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),t=this.destroyBuilder,n=this.builder(e.tokens,this),r=this.deps_;if(r){this.deps_=null;for(var i=0,s;s=r[i];i++)s.bindingBridge.detach(s,gt,this)}if(e.deps&&e.deps.length){r=e.deps,this.deps_=r;for(var i=0,s;s=r[i];i++)s.bindingBridge.attach(s,gt,this)}this.createInstance=n.createInstance,this.clearInstance=n.destroyInstance,this.getBinding=function(){return{names:n.keys}},this.destroyBuilder=n.destroy;var o=e.resources&&e.resources.length>0?e.resources:null;if(o)for(var i=0,u;u=o[i];i++)ht(u);if(this.resources)for(var i=0,u;u=this.resources[i];i++)pt(u);this.resources=o,t&&t(!0)}function bt(e){var t=wt(e);if(t.template)return t.template;var n=document.getElementById(e),r="";return n&&n.tagName=="SCRIPT"&&n.type=="text/basis-template"&&(r=n.textContent||n.text),t.template=new Et(r)}function wt(e){var t=yt[e];return t||(t=yt[e]=function(){return bt(e).source}),t}function Tt(e,t){var r=n.array(arguments),t=r.pop();return new St({rule:t,events:r.join(" ").trim().split(/\s+/)})}function kt(){var e=n.array(arguments).join("."),t=Bt[e];return t||(t=new Ct("",e),Bt[e]=t),t}function Lt(e){var t={},n=[];for(var r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}function At(e,t){var n=[];n.source=Lt(t).join("/");var r={base:!0};for(var i=0;i<t.length;i++){var s=t[i]||"base";if(s==e||r[s])continue;var o=Pt(s);r[s]=!0,n.push(s),t.splice.apply(t,[i+1,0].concat(Ht[s].fallback))}return n.unshift(e),e!="base"&&n.push("base"),n.value=n.join("/"),n}function Ot(e,t){var n=Ht[e].sourcesList;for(var r=0,i;i=n[r];r++)if(i.hasOwnProperty(t))return i[t];return""}function Mt(e){return Ht[Ft].fallback.indexOf(e)!=-1}function _t(e){kt(e).set()}function Dt(e){for(var t in Bt)_t(t)}function Pt(e){e||(e="base");if(Ht[e])return Ht[e].theme;if(!/^([a-z0-9\_\-]+)$/.test(e))throw 31;var t={},r=[t],i=new Nt;Ht[e]={theme:i,sources:t,sourcesList:r,fallback:[]};var s=function(n,r){return n in t==0&&(t[n]=r,Mt(e)&&_t(n)),kt(n)};return n.object.extend(i,{name:e,fallback:function(t){if(i!==jt&&arguments.length>0){var n=typeof t=="string"?t.split("/"):[],r={};n=At(e,n);if(Ht[e].fallback.source!=n.source){Ht[e].fallback.source=n.source;for(var s in Ht){var o=Ht[s].fallback,n=At(s,(o.source||"").split("/"));if(n.value!=o.value){r[s]=!0,Ht[s].fallback=n;var u=Ht[s].sourcesList;u.length=n.length;for(var a=0;a<u.length;a++)u[a]=Ht[n[a]].sources}}}var f=Ht[Ft].fallback;for(var s in r)if(Mt(s)){Dt();break}}var l=Ht[e].fallback.slice(1);return l.source=Ht[e].fallback.source,l},define:function(e,t){typeof e=="function"&&(e=e());if(typeof e=="string"){if(typeof t=="object"){var n=e,r=t,o={};for(var u in r)r.hasOwnProperty(u)&&(o[u]=s(n+"."+u,r[u]));return o}return arguments.length==1?kt(e):s(e,t)}if(typeof e=="object"){var r=e;for(var a in r)r.hasOwnProperty(a)&&s(a,r[a]);return i}},apply:function(){if(e!=Ft){Ft=e,Dt();for(var t=0,n;n=It[t];t++)n.fn.call(n.context,e)}return i},getSource:function(n,r){return r?Ot(e,n):t[n]},drop:function(n){t.hasOwnProperty(n)&&(delete t[n],Mt(e)&&_t(n))}}),Ht[e].fallback=At(e,[]),r.push(Ht.base.sources),i}function qt(e,t,n){It.push({fn:e,context:t}),n&&e.call(t,Ft)}n.require("./2.js");var f=this.path,l=n.Class,c=n.cleaner,h=n.path,p=n.array.search,d=n.array.add,v=n.array.remove,m=[],g={},y=2,b=1,w=2,E=4,S=5,x=6,T=3,N=8,C=0,k=1,L=2,A=3,O=4,M=/^event-(.+)$/,_={4:"class",5:"style"},D={"class":E,style:S},P={2:O,4:O-1,5:O-1,6:2},H=3,B=4,j=5,F=3,I=3,q="Invalid or unsupported syntax",R=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,U=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,z=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,W=/(.|[\r\n])*?-->/g,X=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,V=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,$=/"((?:(\\")|[^"])*?)"\s*/g,J=/^/g,K=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,Q={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},G=/^\-?([_a-z]|[^\x00-\xb1]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f])/i,Y=8,Z=/^(media|supports|document)\b/i,et=8,tt=/^(not|has|matches|nth-child|nth-last-child)\(/i,nt=15,rt=/\\"/g,it=function(e){var t=[],n=[],r={childs:t},i,s,o,u,a=!1,f=0,l,c=R,h=0,p;e=e.trim();while(h<e.length||c!=R){c.lastIndex=h,u=h,p=c.exec(e);if(!p||p.index!==h){if(c==V&&s&&s.type==N){c=W;continue}a&&(r=n.pop()),s&&r.childs.pop();if(s=r.childs.pop())s.type==T&&!s.refs?f-="len"in s?s.len:s.value.length:r.childs.push(s);a=!1,c=R;continue}h=c.lastIndex;switch(c){case R:l=u+p[1].length,f!=l&&(i=f==u?p[1]:e.substring(f,l),s=i.replace(/\s*(\r\n?|\n\r?)\s*/g,""),s&&r.childs.push({type:T,len:i.length,value:s})),f=l,p[3]?r.childs.push({type:T,refs:["l10n:"+p[3]],value:"{l10n:"+p[3]+"}"}):p[2]=="{"?(o=h-1,r.childs.push(s={type:T}),c=V):p[4]?p[4]=="/"?(s=null,c=X):(r.childs.push(s={type:N}),p[5]?(o=h-p[5].length,c=V):(o=h,c=W)):p[2]&&(a=!0,n.push(r),r.childs.push(s={type:b,attrs:[],childs:[]}),r=s,c=U);break;case X:p[1]!==(r.prefix?r.prefix+":":"")+r.name?r.childs.push({type:T,value:"</"+p[0]}):r=n.pop(),c=R;break;case U:case z:if(p[2]==":"){s.prefix?c=J:s.prefix=p[1];break}p[1]&&(s.name=p[1],s.type==w&&r.attrs.push(s));if(p[2]=="{"){s.type==b?c=V:c=J;break}if(p[3]){a=!1;if(p[3]=="/>"||!r.prefix&&K.test(r.name))r=n.pop();else if(r.prefix=="b"&&r.name in Q){c=Q[r.name];break}c=R;break}if(p[2]=="="){c=$;break}s={type:w},c=z;break;case W:s.value=e.substring(o,h-3),c=R;break;case V:s.refs?s.refs.push(p[1]):s.refs=[p[1]],p[2]!="|"&&(s.type==T?(h-=p[2].length-1,s.value=e.substring(o,h),c=R):s.type==N?c=W:s.type==w&&e[h]=="="?(h++,c=$):(s={type:w},c=z));break;case $:s.value=p[1].replace(rt,'"'),s={type:w},c=z;break;case Q.text:case Q.style:r.childs.push({type:T,value:p[1]}),r=n.pop(),c=R;break;default:throw 29}c==R&&(f=h)}return f!=h&&r.childs.push({type:T,value:e.substring(f,h)}),t.templateTokens=!0,t},st={},ot=n.Token.subclass({className:f+".L10nProxyToken",token:null,url:"",init:function(e){this.url=e.dictionary.resource.url+":"+e.name,this.token=e,this.set(),e.attach(this.set,this)},set:function(){return n.Token.prototype.set.call(this,this.token.type=="markup"?ut(this.token.value,this.token.name+"@"+this.token.dictionary.resource.url):"")},destroy:function(){n.Token.prototype.destroy.call(this),this.token=null}}),ct=function(){function y(e){return(e.prefix?e.prefix+":":"")+e.name}function H(e,t){return f[t]||(t.charAt(0)=="#"?f[t]=String.fromCharCode(t.charAt(1)=="x"||t.charAt(1)=="X"?parseInt(t.substr(2),16):t.substr(1)):l&&(l.innerHTML=e,f[t]=l.firstChild?l.firstChild.nodeValue:e)),f[t]||e}function j(e){return e.replace(a,H)}function F(e){var t=e.refs;return!t||!t.length?0:t}function I(e){var t,n=[],r=[],i={};for(var s=0;s<e.length;s++)s%2?(t=e[s],i[t]||(i[t]=n.length,n.push(t)),r.push(i[t])):e[s]&&r.push(j(e[s]));return[n,r]}function q(e,n){var a=0,f,l;if(n)switch(e){case"class":if(f=n.match(t)){var c=[];a=[];for(var h=0,p;p=f[h];h++)(l=p.match(r))?a.push([l[1]||"",l[2]]):c.push(p);n=c.join(" ")}break;case"style":var d=[];a=[];if(f=n.match(i))for(var h=0,p;p=f[h];h++){var l=p.match(s),v=l[1],n=l[2].trim(),m=n.split(o);if(m.length>1){var g=I(m);g.push(v),a.push(g)}else d.push(v+": "+j(n))}n=d.join("; "),n&&(n+=";");break;default:f=n.split(u),f.length>1?a=I(f):n=j(n)}return a&&!a.length&&(a=0),{binding:a,value:n,type:D[e]||2}}function R(e,t,n){var r=e.attrs,i=[],s,o,a;for(var f=0,l;l=r[f];f++){if(l.prefix=="b"){switch(l.name){case"ref":var c=(l.value||"").trim().split(/\s+/);for(var h=0;h<c.length;h++)U(t,c[h]);break;case"show":case"hide":o=l}continue}if(a=l.name.match(M)){i.push(a[1]==l.value?[x,a[1]]:[x,a[1],l.value]);continue}var p=q(l.name,l.value),d=[p.type,p.binding,F(l)];p.type==2&&d.push(y(l)),p.value&&(!n||!p.binding||p.type!=2)&&d.push(p.value),p.type==S&&(s=d),i.push(d)}if(o){s||(s=[S,0,0],i.push(s)),s[1]||(s[1]=[]);var v=I((o.value||o.name).split(u));v[0].length-v[1].length?s[3]=(s[3]?s[3]+"; ":"")+(o.name=="show"^o.value===""?"":"display: none"):(o.name=="show"&&(s[3]=(s[3]?s[3]+"; ":"")+"display: none"),s[1].push(v.concat("display",o.name)))}return i.length?i:0}function U(e,t){e[L]||(e[L]=[]),d(e[L],t),t!="element"&&(e[k]=e[L].length==1?t:0)}function z(e,t){var n=e[L].indexOf(t);if(n!=-1){var r=e[k]&&typeof e[k]=="number";e[L].splice(n,1),r&&n==e[k]-1&&(e[k]=t),e[L].length?r&&(e[k]-=n<e[k]-1):e[L]=0}}function W(e){var t={};if(e.attrs)for(var n=0,r;r=e.attrs[n];n++)t[y(r)]=r.value;return t}function X(e,t){for(var n=0;n<t.length;n++)d(e,t[n])}function V(e,t,n){for(var r=0,i;i=t[r];r++)i[1]!==g&&(i[1]=n+i[1]);e.unshift.apply(e,t)}function $(e,t,r,i){var s;if(r)s=h.resolve(e.baseURI+r);else{var o=t.childs[0];s=n.resource.virtual("css",o?o.value:"",e.sourceUrl).url}return e.resources.push([s,i]),s}function J(t,r,i,s){function o(t,n,r){var s=W(t);n&&(s.name=n);if(!s.name)return;if(!e.test(s.name))return;var o=ct[s.ref||"element"];if(o&&o.token[C]==b){var u=o.token,a=s.name.match(M),f=a?x:D[s.name]||w,l=P[f]||O,c=u&&p(u,s.name,function(e){return e[C]==x?"event-"+e[1]:_[e[C]]||e[A]},B);!c&&r!="remove"&&(a?c=[f,a[1]]:(c=[f,0,0,f==w?s.name:""],f==w&&c.push("")),u||(u=[],o.token.push(u)),u.push(c));var h=s.name=="class"||s.name=="style";switch(r){case"set":if(c[C]==x){s.value==a[1]?c.length=2:c[l]=s.value;return}var m=q(s.name,s.value);c[k]=m.binding,!i.optimizeSize||!c[k]||h?c[l]=m.value||"":c.length=l;if(h&&!c[k]&&!c[l]){v(u,c);return}break;case"append":var m=q(s.name,s.value);if(!a)if(m.binding){var g=c[k];if(g)switch(s.name){case"style":var y={};for(var E=0,S;S=g[E];E++)y[S[2]]=E;for(var E=0,T;T=m.binding[E];E++)T[2]in y?g[y[T[2]]]=T:g.push(T);break;case"class":g.push.apply(g,m.binding);break;default:m.binding[0].forEach(function(e){d(this,e)},g[0]);for(var E=0;E<m.binding[1].length;E++){var N=m.binding[1][E];typeof N=="number"&&(N=g[0].indexOf(m.binding[0][N])),g[1].push(N)}}else c[k]=m.binding,h||c[k][1].unshift(c[l])}else!h&&c[k]&&c[k][1].push(s.value);m.value&&(c[l]=(c[l]||"")+(c[l]&&(a||h)?" ":"")+m.value);if(h&&!c[k]&&!c[l]){v(u,c);return}break;case"remove":c&&v(u,c)}}}var u=[];for(var a=0,f,l;f=t[a];a++){var E=F(f),S=E&&E.length==1?E[0]:0;switch(f.type){case b:if(f.prefix=="b"){var L=W(f);switch(f.name){case"style":var H=L.namespace||L.ns,I=H?g:s&&s.isolate||"",G=$(r,f,L.src,I);H&&(G in g==0&&(g[G]=ft()),r.styleNSPrefix[H]=g[G]);break;case"isolate":r.isolate||(r.isolate=L.prefix||i.isolate||ft());break;case"l10n":L.src&&(r.dictURI=h.resolve(r.baseURI,L.src));break;case"define":if("name"in L&&!r.defines[L.name])switch(L.type){case"bool":r.defines[L.name]=[L["default"]=="true"?1:0];break;case"enum":var Z=L.values?L.values.trim().split(" "):[];r.defines[L.name]=[Z.indexOf(L["default"])+1,Z]}break;case"text":var et=f.childs[0];t[a--]=n.object.extend(et,{refs:(L.ref||"").trim().split(/\s+/),value:"notrim"in L?et.value:et.value.replace(/^\s*[\r\n]+|[\r\n]\s*$/g,"")});break;case"include":var tt=L.src;if(tt){var nt=/^#\d+$/.test(tt),rt=/^id:/.test(tt),st=nt?tt.substr(1):tt,ot;nt?ot=m[st]:rt?ot=wt(st.substr(3)):/^[a-z0-9\.]+$/i.test(st)&&!/\.tmpl$/.test(st)?ot=kt(st):ot=n.resource(h.resolve(r.baseURI+st));if(!ot)continue;if(c.indexOf(ot)==-1){var ut="isolate"in L?L.isolate||ft():"",lt;rt||d(r.deps,ot),nt?(ot.source.bindingBridge&&d(r.deps,ot.source),lt=mt(ot.source,ot.baseURI,!0,i)):lt=mt(ot,ot.url?h.dirname(ot.url)+"/":"",!0,i),lt.resources&&"no-style"in L==0&&V(r.resources,lt.resources,ut),lt.deps&&X(r.deps,lt.deps);var ct=Q(lt.tokens),ht=(f.childs||[]).slice(),pt=n.object.slice(lt.styleNSPrefix);L["class"]&&ht.push({type:b,prefix:"b",name:"append-class",attrs:[{type:w,name:"value",value:L["class"]}]}),L.id&&ht.push({type:b,prefix:"b",name:"set-attr",attrs:[{type:w,name:"name",value:"id"},{type:w,name:"value",value:L.id}]}),L.ref&&ct.element&&L.ref.trim().split(/\s+/).map(function(e){U(ct.element.token,e)});for(var dt=0,vt;vt=ht[dt];dt++)if(vt.type==b&&vt.prefix=="b")switch(vt.name){case"style":var gt=W(vt),H=gt.namespace||gt.ns,I=H?g:ut,G=$(r,vt,gt.src,I);H&&(G in g==0&&(g[G]=ft()),pt[H]=g[G]);break;case"replace":case"remove":case"before":case"after":var yt=vt.name=="replace"||vt.name=="remove",gt=W(vt),bt="ref"in gt||!yt?gt.ref:"element",Et=bt&&ct[bt];if(Et){var St=Et.owner.indexOf(Et.token);if(St!=-1){var xt=[St+(vt.name=="after"),yt];vt.name!="remove"&&(xt=xt.concat(J(vt.childs,r,i)||[])),Et.owner.splice.apply(Et.owner,xt)}}break;case"prepend":case"append":var gt=W(vt),bt="ref"in gt?gt.ref:"element",Et=bt&&ct[bt],f=Et&&Et.token;if(f&&f[C]==b){var Tt=J(vt.childs,r,i)||[];vt.name=="prepend"?f.splice.apply(f,[B,0].concat(Tt)):f.push.apply(f,Tt)}break;case"attr":case"set-attr":o(vt,!1,"set");break;case"append-attr":o(vt,!1,"append");break;case"remove-attr":o(vt,!1,"remove");break;case"class":case"append-class":o(vt,"class","append");break;case"set-class":o(vt,"class","set");break;case"remove-class":o(vt,"class","remove");break;case"add-ref":var gt=W(vt),bt="ref"in gt?gt.ref:"element",Et=bt&&ct[bt],f=Et&&Et.token;f&&gt.name&&U(f,gt.name);break;case"remove-ref":var gt=W(vt),bt="ref"in gt?gt.ref:"element",Et=bt&&ct[bt],f=Et&&Et.token;f&&z(f,gt.name||gt.ref);break;default:}else lt.tokens.push.apply(lt.tokens,J([vt],r,i)||[]);ct.element&&z(ct.element.token,"element"),n.object.complete(r.styleNSPrefix,pt),ut?Y(lt.tokens,ut):lt.isolate&&!r.isolate&&(r.isolate=i.isolate||ft()),u.push.apply(u,lt.tokens)}}}continue}l=[1,S,E,y(f)],l.push.apply(l,R(f,l,i.optimizeSize)||[]),l.push.apply(l,J(f.childs,r,i)||[]);break;case T:E&&E.length==2&&p(E,"element")&&(S=E[+!E.lastSearchIndex]);if(S){var Nt=K(S,r.dictURI),Ct=Nt.split(/[:@\{]/);if(Ct[0]=="l10n"&&Ct.length==3)if(!Ct[2])v(E,S),E.length==0&&(E=null),S=0,f.value=f.value.replace(/\}$/,"@undefined}");else{var Lt=Ct.slice(1).join("@"),At=n.l10n.token(Lt),Ot=at(At);r.l10nResolved=!0;if(Ot&&At.type=="markup"){t[a--]=it('<b:include src="#'+Ot.templateId+'"/>')[0];continue}}}l=[3,S,E],(!E||f.value!="{"+E.join("|")+"}")&&l.push(j(f.value));break;case N:if(i.optimizeSize&&!S&&!E)continue;l=[8,S,E],i.optimizeSize||(!E||f.value!="{"+E.join("|")+"}")&&l.push(j(f.value))}while(l[l.length-1]===0)l.pop();u.push(l)}return u.length?u:0}function K(e,t){if(typeof e!="string")return e;var n=e.split(":");return n.length==2&&n[0]=="l10n"&&n[1].indexOf("@")==-1&&(n[1]=n[1]+"@"+t),n.join(":")}function Q(e,t,n,r){n||(n={});for(var i=r||0,s;s=e[i];i++){if(s[C]==x)continue;var o=s[L];if(o)for(var u=o.length-1,a;a=o[u];u--){if(a.indexOf(":")!=-1){z(s,a);continue}n[a]&&z(n[a].token,a),s[k]==a&&(s[k]=u+1),n[a]={owner:e,token:s}}switch(s[C]){case T:s[k]=K(s[k],t);break;case w:if(s[k]){var f=s[k][0];for(var u=0;u<f.length;u++)f[u]=K(f[u],t)}break;case b:Q(s,t,n,B)}}return n}function G(e,t,n,r){var i=0;for(var s=r||0,o;o=e[s];s++){var u=o[C];u==b&&(i+=G(o,t,n,B));if(u==E||u==w&&o[A]=="class"){var a=o[k],f=P[u];if(a){var l=(o[f]||"").trim().split(" ");for(var c=0,h;h=a[c];c++){if(h.length>2)continue;var p=h[1].split(":").pop(),v=t.defines[p];v?(h.push.apply(h,v),v.used=!0,v[0]&&(v.length==1?d(l,h[0]+p):d(l,h[0]+v[1][v[0]-1]))):i++}o[f]=l.join(" "),n.optimizeSize&&!o[f]&&(o.length=f)}}}return i}function Y(e,t,n,r){function i(e){var r=e.split(":");return r.length==1?t+r[0]:n?r[0]?r[0]in n.styleNSPrefix==0?e:n.styleNSPrefix[r[0]]+r[1]:r[1]:e}for(var s=r||0,o;o=e[s];s++){var u=o[C];u==b&&Y(o,t,n,B);if(u==E||u==w&&o[A]=="class"){var a=o[k],f=P[u];o[f]&&(o[f]=o[f].split(/\s+/).map(i).join(" "));if(a)for(var l=0,c;c=a[l];l++)c[0]=i(c[0])}}}var e=/^[a-z_][a-z0-9_\-]*$/i,t=/(\S+)/g,r=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,i=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,s=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,o=/\{([a-z_][a-z0-9_]*)\}/i,u=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,a=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,f=n.NODE_ENV?__nodejsRequire("./template/htmlentity.json"):{},l=n.NODE_ENV?null:document.createElement("div"),c=[],g={};return function(t,r,i,s,o){i=i||{};var u=[],a={sourceUrl:s,baseURI:r||"",tokens:null,resources:[],styleNSPrefix:{},deps:[],defines:{},unpredictable:!0,warns:u,isolate:!1};a.dictURI=s?n.path.resolve(s):r||"";if(a.dictURI){var f=n.path.extname(a.dictURI);f&&f!=".l10n"&&(a.dictURI=a.dictURI.substr(0,a.dictURI.length-f.length)+".l10n")}t.templateTokens||(t=it(String(t))),t.warns&&u.push.apply(u,t.warns),c.push(o!==!0&&o||{}),a.tokens=J(t,a,i),c.pop(),a.tokens||(a.tokens=[[3,0,0,""]]),U(a.tokens[0],"element"),Q(a.tokens,a.dictURI),a.unpredictable=!!G(a.tokens,a,i);if(c.length==0){Y(a.tokens,a.isolate||"",a);if(a.isolate)for(var l=0,h;h=a.resources[l];l++)h[1]!==g&&(h[1]=a.isolate+h[1]);a.resources=a.resources.filter(function(e,t,r){return!n.array.search(r,String(e),String,t+1)}).map(function(e){var t=e[0],r=e[1];r===g&&(r=g[t]);if(!r)return t;var i=n.resource.virtual("css","").ready(function(e){s(),n.object.extend(e,{url:t+"?isolate-prefix="+r,baseURI:n.path.dirname(t)+"/"})}),s=n.resource(t).ready(function(e){var t=lt(e.cssText||"",r);i.update(t)});return i.url})}return delete a.defines,delete a.l10nResolved,u.length||(a.warns=!1),a}}(),yt={},Et=l(null,{className:f+".Template",__extend__:function(e){return e instanceof Et?e:e instanceof St?new xt(e):new Et(e)},source:"",baseURI:"",init:function(e){if(m.length==4096)throw 30;this.attaches_=[],this.setSource(e||""),this.templateId=m.push(this)-1},bindingBridge:{attach:function(e,t,n){for(var r=0,i;i=e.attaches_[r];r++)if(i.handler==t&&i.context==n)return;e.attaches_.push({handler:t,context:n})},detach:function(e,t,n){for(var r=0,i;i=e.attaches_[r];r++)if(i.handler==t&&i.context==n){e.attaches_.splice(r,1);return}},get:function(){}},createInstance:function(e,t,n,r,i){return gt.call(this),this.createInstance(e,t,n,r,i)},clearInstance:function(e){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},getBinding:function(e){return gt.call(this),this.getBinding(e)},setSource:function(e){var t=this.source;if(t!=e){if(typeof e=="string"){var r=e.match(/^([a-z]+):/);if(r){var i=r[1];e=e.substr(r[0].length);switch(i){case"file":e=n.resource(e);break;case"id":e=wt(e);break;case"tokens":e=n.string.toObject(e),e.isDecl=!0;break;case"raw":break;case"path":e=kt(e);break;default:}}}if(t&&t.bindingBridge){var s=t.url&&g[t.url];s&&(v(s,this),s.length||delete g[t.url]),this.baseURI="",this.source.bindingBridge.detach(t,dt,this)}e&&e.bindingBridge&&(e.url&&(this.baseURI=h.dirname(e.url)+"/",g[e.url]||(g[e.url]=[]),d(g[e.url],this)),e.bindingBridge.attach(e,dt,this)),this.source=e,dt.call(this)}},destroy:function(){this.destroyBuilder&&this.destroyBuilder(),this.attaches_=null,this.createInstance=null,this.getBinding=null,this.resources=null,this.source=null}}),St=function(e){n.object.extend(this,e)},xt=n.Class(null,{className:f+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:Et,ruleEvents:null,rule:String,init:function(e){this.ruleRet_=[],this.templates_=[],this.rule=e.rule;var t=e.events;if(t&&t.length){this.ruleEvents={};for(var n=0,r;r=t[n];n++)this.ruleEvents[r]=!0}c.add(this)},resolve:function(e){var t=this.rule(e),n=this.ruleRet_.indexOf(t);return n==-1&&(this.ruleRet_.push(t),n=this.templates_.push(new this.templateClass(t))-1),this.templates_[n]},destroy:function(){this.rule=null,this.templates_=null,this.ruleRet_=null}}),Nt=l(null,{className:f+".Theme",get:kt}),Ct=l(n.Token,{className:f+".SourceWrapper",path:"",url:"",baseURI:"",init:function(e,t){this.path=t,n.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var e=Ot(Ft,this.path);this.value!=e&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,Ct.prototype.apply,this),this.value=e,this.url=e&&e.url||"",this.baseURI=(typeof e=="object"||typeof e=="function")&&"baseURI"in e?e.baseURI:h.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,Ct.prototype.apply,this),this.apply())},destroy:function(){this.url=null,this.baseURI=null,this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this),n.Token.prototype.destroy.call(this)}}),Ht={},Bt={},jt=Pt(),Ft="base",It=[];c.add({destroy:function(){for(var e in Bt)Bt[e].destroy();Ht=null,Bt=null;for(var t=0,n;n=m[t];t++)n.destroy();m=null}}),t.exports={DECLARATION_VERSION:y,TYPE_ELEMENT:b,TYPE_ATTRIBUTE:w,TYPE_ATTRIBUTE_CLASS:E,TYPE_ATTRIBUTE_STYLE:S,TYPE_ATTRIBUTE_EVENT:x,TYPE_TEXT:T,TYPE_COMMENT:N,TOKEN_TYPE:C,TOKEN_BINDINGS:k,TOKEN_REFS:L,ATTR_NAME:A,ATTR_VALUE:O,ATTR_NAME_BY_TYPE:_,ELEMENT_NAME:H,ELEMENT_ATTRS:B,ELEMENT_CHILDS:j,TEXT_VALUE:F,COMMENT_VALUE:I,L10nProxyToken:ot,TemplateSwitchConfig:St,TemplateSwitcher:xt,Template:Et,SourceWrapper:Ct,switcher:Tt,tokenize:it,isolateCss:lt,getDeclFromSource:mt,makeDeclaration:ct,getL10nTemplate:at,Theme:Nt,theme:Pt,getThemeList:function(){return n.object.keys(Ht)},currentTheme:function(){return Ht[Ft].theme},setTheme:function(e){return Pt(e).apply()},onThemeChange:qt,define:jt.define,get:kt,getPathList:function(){return n.object.keys(Bt)}},Pt("base").define({"#1":n.resource("./0.tmpl"),"#2":n.resource("./1.tmpl"),"#3":n.resource("./2.tmpl"),"#4":n.resource("./3.tmpl"),"#5":n.resource("./4.tmpl"),"#6":n.resource("./5.tmpl"),"#7":n.resource("./6.tmpl"),"#8":n.resource("./7.tmpl"),"#9":n.resource("./8.tmpl"),"#a":n.resource("./9.tmpl"),"#b":n.resource("./a.tmpl"),"#c":n.resource("./b.tmpl"),"#d":n.resource("./c.tmpl"),"#e":n.resource("./d.tmpl")})},"5.js":function(e,t,n,r,i,s,o,u,a){function j(){}function F(){}function I(){}function q(e){e.setDelegate=n.fn.$undef,e.destroy=j}function R(e){var t=e.constructor.prototype;e.setDelegate=t.setDelegate,e.destroy=t.destroy}function U(e){return e.sortingValue||0}function z(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,+(e>t)||-(e<t)}function W(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,-(e>t)||+(e<t)}function X(e){return e.childNodes.sort(e.sortingDesc?W:z)}function V(e,t,n,r){if(!e.length)return 0;r=!!r;var i,s,o=0,u=e.length-1;do{i=o+u>>1,s=n(e[i]);if(r?t>s:t<s)u=i-1;else{if(!(r?t<s:t>s))return t==s?i:0;o=i+1}}while(o<=u);return i+(s<t^r)}function $(e,t,n,r,i){if(t===n)return;var s,o=e,u=[];r&&(e.contextSelection=n,e.selected&&u.push(e));while(o){s=!o.selection||i&&o===e?o.firstChild:null;if(s&&s.contextSelection!==t)throw 6;while(!s){if(o===e){u.length&&(t&&t.remove(u),n&&n.add(u));return}s=o.nextSibling,s||(o=o.parentNode)}o=s,o.selected&&u.push(o),o.contextSelection=n}}function J(e,t){if(e.contextDisabled!=t){e.contextDisabled=t;if(e.disabled)return;t?e.emit_disable():e.emit_enable()}}function K(e){if(!e)return null;if(e.isSatelliteConfig)return e;if(e instanceof et)return e;l.isClass(e)&&(e={instanceOf:e});if(e&&e.constructor===Object){var t=!1,n={isSatelliteConfig:!0},r;for(var i in e)switch(i){case"instance":e[i]instanceof et&&(n[i]=e[i]);break;case"instanceOf":l.isClass(e[i])&&e[i].isSubclassOf(et)&&(r=e[i]);break;case"existsIf":case"delegate":case"dataSource":t=!0,n[i]=v(e[i]);break;case"config":n[i]=e[i]}n.instance||(n.instanceOf=r||et);if(t){var s="events"in e?e.events:"update";Array.isArray(s)&&(s=s.join(" "));if(typeof s=="string"){var o={};s=s.split(/\s+/);for(var u=0,a;a=s[u];u++)o[a]=Y,n.handler=o}}return n}return null}function Q(e,t){for(var n in t)t[n]&&typeof t[n]=="object"&&e.setSatellite(n,t[n])}function it(e,t){var n=t.length-1;e.childNodes=t,e.firstChild=t[0]||null,e.lastChild=t[n]||null;for(var r,i=n;r=t[i];i--)r.nextSibling=t[i+1]||null,r.previousSibling=t[i-1]||null,e.insertBefore(r,r.nextSibling)}function st(e,t){for(var n=0,r;r=t[n];n++)r.groupNode.nodes.push(r);t.length=0;for(var i=e.grouping.nullGroup;i;i=i.nextSibling){var s=i.nodes;i.first=s[0]||null,i.last=s[s.length-1]||null,t.push.apply(t,s),i.emit_childNodesModified({inserted:s})}return t}function ot(e,t){var n;if(typeof e.childFactory=="function"){n=e.childFactory(t);if(n instanceof e.childClass)return n}throw n?10:9}n.require("./3.js"),n.require("./4.js");var f=this.path,l=n.Class,c=n.object.complete,h=n.array,p=n.array.remove,d=n.fn.$undef,v=n.getter,m=n.fn.nullGetter,g=l.oneFunctionProperty,y=n.event.create,b=n.event.events,w=n.data.SUBSCRIPTION,E=n.data.STATE,S=n.data.AbstractData,x=n.data.Object,T=n.data.ReadOnlyDataset,N=n.data.Dataset,C=n.data.DatasetWrapper,k=f+": Node can't be inserted at specified point in hierarchy",L=f+": Node was not found",A=f+": Child node has wrong class",O=f+": Child node is null",M=f+": Operation is not allowed because node is under dataSource control",_=f+": Operation is not allowed because node is under dataSource adapter control",D=f+": Node can't has owner and parentNode",P=f+": Node can't has children and dataSource as childClass isn't specified",H={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},B={};w.addProperty("owner"),w.addProperty("dataSource");var G=l.customExtendProperty({},function(e,t){for(var n in t)e[n]=K(t[n])}),Y=function(e){var t=this.name,n=this.config,r=!n.existsIf||n.existsIf(e),i=e.satellite[t];if(r)if(i)n.delegate&&i.setDelegate(n.delegate(e)),n.dataSource&&i.setDataSource(n.dataSource(e));else{i=n.instance;if(!i){var s,o=(typeof n.config=="function"?n.config(e):n.config)||{};o.owner=e,n.delegate&&(o.autoDelegate=!1,o.delegate=n.delegate(e)),n.dataSource&&(o.dataSource=n.dataSource(e)),i=new n.instanceOf(o),i.destroy=I,(s=e.listen.satellite)&&i.addHandler(s,e),(s=e.listen["satellite:"+t])&&i.addHandler(s,e)}else n.delegate&&i.setDelegate(n.delegate(e)),n.dataSource&&i.setDataSource(n.dataSource(e));e.satellite.__auto__[t].instance=i,e.setSatellite(t,i,!0)}else i&&(n.instance&&(n.delegate&&i.setDelegate(),n.dataSource&&i.setDataSource()),e.satellite.__auto__[t].instance=null,e.setSatellite(t,null,!0))},Z={destroy:function(){this.owner.setSatellite(this.name,null)}},et=l(x,{className:f+".AbstractNode",subscribeTo:x.prototype.subscribeTo+w.DATASOURCE,isSyncRequired:function(){return this.state==E.UNDEFINED||this.state==E.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(e){x.prototype.emit_update.call(this,e);var t=this.parentNode;t&&(t.matchFunction&&this.match(t.matchFunction),t.insertBefore(this,this.nextSibling))},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:H.NONE,name:null,childNodes:null,emit_childNodesModified:y("childNodesModified","delta")&&function(e){b.childNodesModified.call(this,e);var t=this.listen.childNode,n;if(t){if(n=e.inserted)for(var r=0,i;i=n[r];r++)i.addHandler(t,this);if(n=e.deleted)for(var r=0,i;i=n[r];r++)i.removeHandler(t,this)}},childNodesState:E.UNDEFINED,emit_childNodesStateChanged:y("childNodesStateChanged","oldState"),childClass:et,dataSource:null,emit_dataSourceChanged:y("dataSourceChanged","oldDataSource"),dataSourceAdapter_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,sorting:m,sortingDesc:!1,emit_sortingChanged:y("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:y("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:G,ownerSatelliteName:null,emit_satelliteChanged:y("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:y("ownerChanged","oldOwner"),init:function(){x.prototype.init.call(this);var e=this.childNodes,t=this.dataSource;e&&(this.childNodes=null),t&&(this.dataSource=null);var n=this.grouping;n&&(this.grouping=null,this.setGrouping(n)),this.childClass&&(this.childNodes=[],t?this.setDataSource(t):e&&this.setChildNodes(e));var r=this.satellite;r!==G&&(this.satellite=G,Q(this,r));var i=this.owner;i&&(this.owner=null,this.setOwner(i))},setChildNodesState:function(e,t){var n=String(e),r=this.childNodesState;if(!E.values[n])throw 7;if(r!=n||r.data!=t)this.childNodesState=Object(n),this.childNodesState.data=t,this.emit_childNodesStateChanged(r)},appendChild:function(e){},insertBefore:function(e,t){},removeChild:function(e){},replaceChild:function(e,t){},clear:function(e){},setChildNodes:function(e){},setGrouping:function(e,t){},setSorting:function(e,t){},setDataSource:function(e){},setOwner:function(e){if(!e||e instanceof et==0)e=null;if(e&&this.parentNode)throw 8;var t=this.owner;if(t!==e){var n=this.listen.owner;if(t){if(this.ownerSatelliteName&&t.satellite.__auto__&&this.ownerSatelliteName in t.satellite.__auto__)return;n&&t.removeHandler(n,this),this.ownerSatelliteName&&(this.owner=null,t.setSatellite(this.ownerSatelliteName,null))}e&&n&&e.addHandler(n,this),this.owner=e,this.emit_ownerChanged(t),(this.autoDelegate==H.OWNER||this.autoDelegate===H.ANY)&&this.setDelegate(e)}},setSatellite:function(e,t,n){var r=this.satellite[e]||null,i=this.satellite.__auto__,s=i&&i[e],o=n&&s;if(o)t=s.instance,s.config.instance&&t&&delete s.config.instance.setOwner;else{t=K(t);if(t&&t.owner&&i&&t.ownerSatelliteName&&i[t.ownerSatelliteName])return;s&&(delete i[e],s.config.instance&&s.config.instance.removeHandler(Z,s),s.config.handler&&this.removeHandler(s.config.handler,s))}if(r!==t){var u=this.listen.satellite,a=this.listen["satellite:"+e],f;r&&(delete this.satellite[e],r.ownerSatelliteName=null,s&&r.destroy===I?f=r:(u&&r.removeHandler(u,this),a&&r.removeHandler(a,this),r.setOwner(null)),o&&!t&&s.config.instance&&(s.config.instance.setOwner=F));if(t){if(t instanceof et==0){var s={owner:this,name:e,config:t,instance:null};t.handler&&this.addHandler(t.handler,s),t.instance&&(t.instance.addHandler(Z,s),t.instance.setOwner=F),i||(this.satellite===G&&(this.satellite={}),i=this.satellite.__auto__={}),i[e]=s,Y.call(s,this),!s.instance&&r&&this.emit_satelliteChanged(e,r),f&&(delete f.destroy,f.destroy());return}if(t.owner!==this){if(s&&s.config.delegate){var l=t.autoDelegate;t.autoDelegate=!1,t.setOwner(this),t.autoDelegate=l}else t.setOwner(this);if(t.owner!==this)return;u&&t.addHandler(u,this),a&&t.addHandler(a,this)}else t.ownerSatelliteName&&(delete this.satellite[t.ownerSatelliteName],this.emit_satelliteChanged(t.ownerSatelliteName,t));this.satellite==G&&(this.satellite={}),this.satellite[e]=t,t.ownerSatelliteName=e}this.emit_satelliteChanged(e,r),f&&(delete f.destroy,f.destroy())}},getChildNodesDataset:function(){return B[this.basisObjectId]||new ct({sourceNode:this})},destroy:function(){x.prototype.destroy.call(this),this.dataSource||this.dataSourceAdapter_?this.setDataSource():this.firstChild&&this.clear(),this.parentNode&&this.parentNode.removeChild(this),this.grouping&&(this.grouping.setOwner(),this.grouping=null),this.owner&&this.setOwner();var e=this.satellite;if(e!==G){var t=e.__auto__;delete e.__auto__;for(var n in t)t[n].config.instance&&!t[n].instance&&t[n].config.instance.destroy();for(var n in e){var r=e[n];r.owner=null,r.ownerSatelliteName=null,r.destroy===I&&delete r.destroy,r.destroy()}this.satellite=null}this.childNodes=null,this.parentNode=null,this.previousSibling=null,this.nextSibling=null,this.firstChild=null,this.lastChild=null}}),tt=l(et,{className:f+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[],et.prototype.init.call(this)},insert:function(e,t){var n=this.nodes,r=t?n.indexOf(t):-1;r==-1?(n.push(e),this.last=e):n.splice(r,0,e),this.first=n[0],e.groupNode=this,this.emit_childNodesModified({inserted:[e]})},remove:function(e){var t=this.nodes;p(t,e)&&(this.first=t[0]||null,this.last=t[t.length-1]||null,e.groupNode=null,this.emit_childNodesModified({deleted:[e]})),!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(!this.first)return;var e=this.nodes;for(var t=e.length;t-->0;)e[t].groupNode=null;this.nodes=[],this.first=null,this.last=null,this.emit_childNodesModified({deleted:e}),this.autoDestroyIfEmpty&&this.destroy()},destroy:function(){et.prototype.destroy.call(this),this.nodes=null,this.first=null,this.last=null}}),nt={itemsChanged:function(e,t){var n={},r=[];if(t.deleted){n.deleted=r;if(this.childNodes.length==t.deleted.length){r=h(this.childNodes);for(var i=0,s;s=r[i];i++)R(s);var o=this.dataSource;this.dataSource=null,this.clear(!0),this.dataSource=o,this.dataSourceMap_={}}else for(var i=0,u;u=t.deleted[i];i++){var a=u.basisObjectId,f=this.dataSourceMap_[a];R(f),delete this.dataSourceMap_[a],this.removeChild(f),r.push(f)}}if(t.inserted){n.inserted=[];for(var i=0,u;u=t.inserted[i];i++){var l=ot(this,{delegate:u});q(l),this.dataSourceMap_[u.basisObjectId]=l,n.inserted.push(l),this.firstChild&&this.insertBefore(l)}}this.firstChild?this.emit_childNodesModified(n):this.setChildNodes(n.inserted);if(this.destroyDataSourceMember&&r.length)for(var i=0,u;u=r[i];i++)u.destroy()},stateChanged:function(e){this.setChildNodesState(e.state,e.state.data)},destroy:function(e){this.dataSourceAdapter_||this.setDataSource()}},rt={datasetChanged:function(e){this.setDataSource(e)},destroy:function(){this.setDataSource()}},ut={childClass:et,childFactory:null,listen:{dataSource:nt},getChild:function(e,t){return n.array.search(this.childNodes,e,t)},getChildByName:function(e){return this.getChild(e,"name")},appendChild:function(e){return this.insertBefore(e)},insertBefore:function(e,t){if(!this.childClass)throw 11;if(e.firstChild){var n=this;while(n=n.parentNode)if(n===e)throw 12}var r=e&&e instanceof this.childClass;if(this.dataSource){if(!r||!e.delegate||this.dataSourceMap_[e.delegate.basisObjectId]!==e)throw 13}else if(this.dataSourceAdapter_)throw 14;r||(e=ot(this,e instanceof x?{delegate:e}:e));if(e.owner)throw 15;var i=e.parentNode===this,s=this.childNodes,o=this.grouping,u,a=e.groupNode,f=null,l=this.sorting,c,h=!1,d,v=-1,g,y;i&&(g=e.nextSibling,y=e.previousSibling),l!==m&&(t=null,c=this.sortingDesc,d=l(e)||0,i&&(d===e.sortingValue?h=!0:(!g||(c?g.sortingValue<=d:g.sortingValue>=d))&&(!y||(c?y.sortingValue>=d:y.sortingValue<=d))&&(e.sortingValue=d,h=!0)));if(o){var n;f=o.getGroupNode(e,!0),u=f.nodes;if(a===f)if(h||l===m&&g===t)return e;l!==m?a===f&&h?g&&g.groupNode===f?v=u.indexOf(g):v=u.length:(v=V(u,d,U,c),e.sortingValue=d):t&&t.groupNode===f?v=u.indexOf(t):v=u.length;if(v<u.length)t=u[v];else if(f.last)t=f.last.nextSibling;else{n=f,t=null;while(n=n.nextSibling)if(t=n.first)break}if(e===t||i&&g===t)return a!==f&&(a&&a.remove(e),f.insert(e,t)),e;v=-1}else if(l!==m){if(h)return e;v=V(s,d,U,c),t=s[v],e.sortingValue=d;if(e===t||i&&g===t)return e}else{if(t&&t.parentNode!==this)throw 16;if(i){if(g===t)return e;if(e===t)throw 17}}if(i){g?(g.previousSibling=y,e.nextSibling=null):this.lastChild=y,y?(y.nextSibling=g,e.previousSibling=null):this.firstChild=g;if(v==-1)p(s,e);else{var b=s.indexOf(e);s.splice(b,1),v-=b<v}a&&(a.remove(e),a=null)}else e.parentNode&&e.parentNode.removeChild(e);a!=f&&f.insert(e,t);if(t){v==-1&&(v=s.indexOf(t));if(v==-1)throw 18;e.nextSibling=t,s.splice(v,0,e)}else v=s.length,s.push(e),t={previousSibling:this.lastChild},this.lastChild=e;return e.parentNode=this,e.previousSibling=t.previousSibling,v==0?this.firstChild=e:t.previousSibling.nextSibling=e,t.previousSibling=e,i||($(e,e.contextSelection,this.selection||this.contextSelection,!0),J(e,this.disabled||this.contextDisabled),(e.underMatch_||this.matchFunction)&&e.match&&e.match(this.matchFunction),(e.autoDelegate==H.PARENT||e.autoDelegate===H.ANY)&&e.setDelegate(this),this.dataSource||this.emit_childNodesModified({inserted:[e]}),e.listen.parentNode&&this.addHandler(e.listen.parentNode,e)),e},removeChild:function(e){if(!e||e.parentNode!==this)throw 19;if(e instanceof this.childClass==0)throw 20;if(this.dataSource){if(this.dataSource.has(e.delegate))throw 21}else if(this.dataSourceAdapter_)throw 22;var t=this.childNodes.indexOf(e);if(t==-1)throw 23;return this.childNodes.splice(t,1),e.parentNode=null,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:this.lastChild=e.previousSibling,e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:this.firstChild=e.nextSibling,e.nextSibling=null,e.previousSibling=null,e.listen.parentNode&&this.removeHandler(e.listen.parentNode,e),$(e,e.contextSelection,null,!0),e.groupNode&&e.groupNode.remove(e),this.dataSource||this.emit_childNodesModified({deleted:[e]}),(e.autoDelegate==H.PARENT||e.autoDelegate===H.ANY)&&e.setDelegate(),e},replaceChild:function(e,t){if(this.dataSource)throw 24;if(this.dataSourceAdapter_)throw 25;if(t==null||t.parentNode!==this)throw 26;return this.insertBefore(e,t),this.removeChild(t)},clear:function(e){if(this.dataSource&&this.dataSource.itemCount)throw 27;if(!this.firstChild)return;e&&$(this,this.selection||this.contextSelection,null,!1,!0);var t=this.childNodes;this.firstChild=null,this.lastChild=null,this.childNodes=[],this.emit_childNodesModified({deleted:t});for(var n=t.length;n-->0;){var r=t[n];r.listen.parentNode&&r.parentNode.removeHandler(r.listen.parentNode,r),r.parentNode=null,r.groupNode=null,e?(r.nextSibling=null,r.previousSibling=null,(r.autoDelegate==H.PARENT||r.autoDelegate===H.ANY)&&r.setDelegate()):r.destroy()}if(this.grouping)for(var t=this.grouping.childNodes,n=t.length-1,i;i=t[n];n--)i.clear()},setChildNodes:function(e,t){!this.dataSource&&!this.dataSourceAdapter_&&this.clear(t);if(e){"length"in e==0&&(e=[e]);if(e.length){var n=this.emit_childNodesModified;this.emit_childNodesModified=d;for(var r=0,i=e.length;r<i;r++)this.insertBefore(e[r]);this.emit_childNodesModified=n,this.emit_childNodesModified({inserted:this.childNodes})}}},setDataSource:function(e){if(!this.childClass)throw 28;e=n.data.resolveDataset(this,this.setDataSource,e,"dataSourceAdapter_");if(this.dataSource!==e){var t=this.dataSource,r=this.listen.dataSource;t&&(this.dataSourceMap_=null,this.dataSource=null,r&&t.removeHandler(r,this));if(this.firstChild){if(t)for(var i=0,s;s=this.childNodes[i];i++)R(s);this.clear()}this.dataSource=e,e?(this.dataSourceMap_={},this.setChildNodesState(e.state,e.state.data),r&&(e.addHandler(r,this),e.itemCount&&r.itemsChanged&&r.itemsChanged.call(this,e,{inserted:e.getItems()}))):this.setChildNodesState(E.UNDEFINED),this.emit_dataSourceChanged(t)}},setGrouping:function(e,t){if(typeof e=="function"||typeof e=="string")e={rule:e};e instanceof ft==0&&(e=e&&typeof e=="object"?new this.groupingClass(e):null);if(this.grouping!==e){var n=this.grouping,r;if(n){this.grouping=null;if(!e&&this.firstChild){this.sorting!==m?r=X(this):r=this.childNodes,n.nullGroup.clear();var i=n.childNodes.slice(0);for(var s=0;s<i.length;s++)i[s].clear();it(this,r)}n.setOwner()}if(e){this.grouping=e,e.setOwner(this);if(this.firstChild){this.sorting!==m?r=X(this):r=this.childNodes;for(var s=0,o;o=r[s];s++)o.groupNode=this.grouping.getGroupNode(o,!0);r=st(this,r),it(this,r)}}this.emit_groupingChanged(n)}},setSorting:function(e,t){e=v(e),t=!!t;if(this.sorting!==e||this.sortingDesc!=!!t){var n=this.sorting,r=this.sortingDesc;this.sorting=e,this.sortingDesc=!!t;if(e!==m&&this.firstChild){var i=[],s;for(var o=this.firstChild;o;o=o.nextSibling)o.sortingValue=e(o)||0;if(this.grouping)for(var u=this.grouping.nullGroup;u;u=u.nextSibling)s=u.nodes=X({childNodes:u.nodes,sortingDesc:this.sortingDesc}),u.first=s[0]||null,u.last=s[s.length-1]||null,i.push.apply(i,s);else i=X(this);it(this,i)}this.emit_sortingChanged(n,r)}},setMatchFunction:function(e){if(this.matchFunction!=e){var t=this.matchFunction;this.matchFunction=e;for(var n=this.lastChild;n;n=n.previousSibling)n.match(e);this.emit_matchFunctionChanged(t)}}},at=l(et,ut,{className:f+".Node",emit_enable:y("enable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)J(e,!1);b.enable.call(this)},emit_disable:y("disable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)J(e,!0);b.disable.call(this)},emit_satelliteChanged:function(e,t){et.prototype.emit_satelliteChanged.call(this,e,t),this.satellite[e]instanceof at&&J(this.satellite[e],this.disabled||this.contextDisabled)},emit_select:y("select"),emit_unselect:y("unselect"),emit_match:y("match"),emit_unmatch:y("unmatch"),emit_matchFunctionChanged:y("matchFunctionChanged","oldMatchFunction"),selectable:!0,selected:!1,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,contextDisabled:!1,listen:{owner:{enable:function(){J(this,!1)},disable:function(){J(this,!0)}}},init:function(){this.selection&&(this.selection instanceof T==0&&(this.selection=new ht(this.selection)),this.listen.selection&&this.selection.addHandler(this.listen.selection,this)),et.prototype.init.call(this),this.disabled&&this.emit_disable(),this.selected&&(this.selected=!1,this.select(!0))},setSelection:function(e){if(this.selection!==e)return $(this,this.selection||this.contextSelection,e||this.contextSelection,!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),this.selection=e,e&&this.listen.selection&&e.addHandler(this.listen.selection,this),!0},select:function(e){var t=this.selected,n=this.contextSelection;return n?e?t?n.remove([this]):n.add([this]):this.selectable&&n.set([this]):!t&&this.selectable&&(this.selected=!0,this.emit_select()),this.selected!=t},unselect:function(){var e=this.selected;if(e){var t=this.contextSelection;t?t.remove([this]):(this.selected=!1,this.emit_unselect())}return this.selected!=e},setSelected:function(e,t){return e?this.select(t):this.unselect()},enable:function(){var e=this.disabled;return e&&(this.disabled=!1,this.contextDisabled||this.emit_enable()),this.disabled!=e},disable:function(){var e=this.disabled;return e||(this.disabled=!0,this.contextDisabled||this.emit_disable()),this.disabled!=e},setDisabled:function(e){return e?this.disable():this.enable()},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(e){typeof e!="function"&&(e=null),this.underMatch_&&!e&&this.underMatch_(this,!0),this.underMatch_=e;var t=!e||e(this);this.matched!=t&&(this.matched=t,t?this.emit_match():this.emit_unmatch())},destroy:function(){this.unselect(),this.contextSelection=null,this.selection&&this.setSelection(),et.prototype.destroy.call(this)}}),ft=l(et,ut,{className:f+".GroupingNode",emit_childNodesModified:function(e){b.childNodesModified.call(this,e),this.nullGroup.nextSibling=this.firstChild;var t;if(t=e.inserted){for(var n=0,r;r=t[n++];)r.groupId_=r.delegate?r.delegate.basisObjectId:r.data.id,this.map_[r.groupId_]=r;if(this.dataSource&&this.nullGroup.first){var i=this.owner,s=h(this.nullGroup.nodes);for(var n=s.length;n-->0;)i.insertBefore(s[n],s[n].nextSibling)}}},emit_ownerChanged:function(e){e&&e.grouping===this&&e.setGrouping(null,!0),this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this),b.ownerChanged.call(this,e),!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:m,childClass:tt,childFactory:function(e){return new this.childClass(c({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},e))},init:function(){this.map_={},this.nullGroup=new tt,et.prototype.init.call(this)},getGroupNode:function(e,t){var n=this.rule(e),r=n instanceof x,i=this.map_[r?n.basisObjectId:n];return this.dataSource&&(t=!1),!i&&t&&(i=this.appendChild(r?n:{data:{id:n,title:n}})),i||this.nullGroup},setDataSource:function(e){var t=this.dataSource;ut.setDataSource.call(this,e);var n=this.owner;if(n&&this.dataSource!==t){var r=h(n.childNodes);for(var i=r.length-1;i>=0;i--)n.insertBefore(r[i],r[i+1])}},insertBefore:function(e,t){e=ut.insertBefore.call(this,e,t);var n=e.first;if(n){var r=n.parentNode,i=e.last,s,o,u,a=null,f=e;while(f=f.nextSibling)if(a=f.first)break;u=a?a.previousSibling:r.lastChild,s=n.previousSibling,o=i.nextSibling;if(o!==a){var l=r.childNodes,c=e.nodes,h=c.length;s&&(s.nextSibling=o),o&&(o.previousSibling=s),u&&(u.nextSibling=n),a&&(a.previousSibling=i),n.previousSibling=u,i.nextSibling=a;var p=l.indexOf(n),d=a?l.indexOf(a):l.length;d>p&&(d-=h),l.splice(p,h),l.splice.apply(l,[d,0].concat(c));if(!u||!s)r.firstChild=l[0];if(!a||!o)r.lastChild=l[l.length-1];if(n instanceof tt)for(var v=h,m=a;v-->0;)r.insertBefore(c[v],m),m=c[v]}}return e},removeChild:function(e){if(e=ut.removeChild.call(this,e)){delete this.map_[e.groupId_];for(var t=0,n;n=e.nodes[t];t++)n.parentNode.insertBefore(n)}return e},clear:function(e){var t=[],n=this.getGroupNode,r=this.nullGroup;this.getGroupNode=function(){return r};for(var i=this.firstChild;i;i=i.nextSibling)t.push.apply(t,i.nodes);for(var s=0,o;o=t[s];s++)o.parentNode.insertBefore(o);this.getGroupNode=n,ut.clear.call(this,e),this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1,et.prototype.destroy.call(this),this.nullGroup.destroy(),this.nullGroup=null,this.map_=null}});et.prototype.groupingClass=ft;var lt={childNodesModified:function(e,t){var n=this.members_,r={},i,s=0,o=0,u=t.inserted,a=t.deleted;if(u&&u.length){r.inserted=u;while(i=u[s])n[i.basisObjectId]=i,s++}if(a&&a.length){r.deleted=a;while(i=a[o])delete n[i.basisObjectId],o++}(s||o)&&this.emit_itemsChanged(r)},destroy:function(){this.destroy()}},ct=l(T,{className:f+".ChildNodesDataset",sourceNode:null,init:function(){T.prototype.init.call(this);var e=this.sourceNode;B[e.basisObjectId]=this,e.firstChild&&lt.childNodesModified.call(this,e,{inserted:e.childNodes}),e.addHandler(lt,this)},destroy:function(){this.sourceNode.removeHandler(lt,this),delete B[this.sourceNode.basisObjectId],T.prototype.destroy.call(this)}}),ht=l(N,{className:f+".Selection",multiple:!1,emit_itemsChanged:function(e){N.prototype.emit_itemsChanged.call(this,e);if(e.inserted)for(var t=0,n;n=e.inserted[t];t++)n.selected||(n.selected=!0,n.emit_select());if(e.deleted)for(var t=0,n;n=e.deleted[t];t++)n.selected&&(n.selected=!1,n.emit_unselect())},add:function(e){if(!this.multiple){if(this.itemCount)return this.set(e);e=[e[0]]}var t=[];for(var n=0,r;r=e[n];n++)r.contextSelection==this&&r.selectable&&t.push(r);return N.prototype.add.call(this,t)},set:function(e){var t=[];for(var n=0,r;r=e[n];n++)r.contextSelection==this&&r.selectable&&t.push(r);return this.multiple||t.splice(1),N.prototype.set.call(this,t)}});t.exports={DELEGATE:H,AbstractNode:et,Node:at,GroupingNode:ft,PartitionNode:tt,ChildNodesDataset:ct,Selection:ht,nullSelection:new T}},"1d.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),t.exports=n.ui.field.Text.subclass({autoDelegate:!0,handler:{update:function(){var e=this.delegate.data;e&&this.setValue(e[this.name])}},action:{keyup:function(e){if(this.delegate){var t={};t[this.name]=e.sender.value,this.delegate.update(t)}}}})},"4.js":function(e,t,n,r,i,s,o,u,a){function N(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function C(e){var t=T[e];if(!t){var n=[],r={},i=1;t=T[e]={actions:n,handler:r};while(e){if(e&1){var s=E[i];n.push(s.action);for(var o in s.handler)r[o]=r[o]?N(r[o],s.handler[o]):s.handler[o]}i<<=1,e>>=1}}return t}function k(e,t){var n=C(t);for(var r=0,i;i=n.actions[r];r++)i(x.link,e);e.addHandler(n.handler)}function L(e,t){var n=C(t);for(var r=0,i;i=n.actions[r++];)i(x.unlink,e);e.removeHandler(n.handler)}function q(e,t){while(t&&t!==e&&t!==t.delegate)t=t.delegate;return t===e}function R(e,t,n){var r=e.delegate;r&&(e.root=r.root,e.target=r.target,e.data=r.data,e.state=r.state);if(e.root!==t){var i=e.listen.root;i&&(t&&t!==e&&t.removeHandler(i,e),e.root&&e.root!==e&&e.root.addHandler(i,e)),e.emit_rootChanged(t)}if(e.target!==n){var s=e.listen.target;s&&(n&&n!==e&&n.removeHandler(s,e),e.target&&e.target!==e&&e.target.addHandler(s,e)),e.emit_targetChanged(n)}var o=e.delegates_;while(o)o.delegate&&R(o.delegate,t,n),o=o.next}function V(e,t){var n={},r;e&&e.length&&(r=n.inserted=e),t&&t.length&&(r=n.deleted=t);if(r)return n}function $(e,t){if(!e||!e.itemCount){if(t&&t.itemCount)return{inserted:t.getItems()}}else{if(!!t&&!!t.itemCount){var n=[],r=[];for(var i in e.items_){var s=e.items_[i];s.basisObjectId in t.items_==0&&r.push(s)}for(var i in t.items_){var s=t.items_[i];s.basisObjectId in e.items_==0&&n.push(s)}return V(n,r)}if(e.itemCount)return{deleted:e.getItems()}}}function nt(e,t,n,r){var i=e[r]||null,s=null;return typeof n=="function"&&(n=n.call(e,e)),n&&(n instanceof J?(s=new G(e,t,n,et),n=n.dataset):n instanceof B?(s=new G(e,t,n,tt),n=nt(s,s.proxy,n.value,"next")):n.bindingBridge&&(s=new Y(e,t,n,Z),n=nt(s,s.proxy,n.value,"next"))),n instanceof K==0&&(n=null),r&&i!==s&&(i&&(i.detach(),i.next&&nt(i,null,null,"next")),s&&s.attach(),e[r]=s),n}function rt(e,t,n,r){var i=e[r]||null,s=null;return typeof n=="function"&&(n=n.call(e,e)),n&&(n instanceof B?(s=new G(e,t,n,tt),n=rt(s,s.proxy,n.value,"next")):n.bindingBridge&&(s=new Y(e,t,n,Z),n=rt(s,s.proxy,n.value,"next"))),n instanceof U==0&&(n=null),r&&i!==s&&(i&&(i.detach(),i.next&&rt(i,null,null,"next")),s&&s.attach(),e[r]=s),n}function it(e){return Array.isArray(e)?e.map(function(e){return{data:e}}):{data:e}}function st(e){if(!e||e.constructor!==Object)e={value:e};return new U({data:e})}function ot(e,t){var n=t?st:it;return Array.isArray(e)?e.map(n):n(e)}n.require("./3.js");var f=this.path,l=n.Class,c=Array.prototype.slice,h=n.object.values,p=n.fn.$self,d=n.event.Emitter,v=n.event.create,m=n.event.events,g={},y=[],b={},w={priority:[],values:{},add:function(e,t){var n=e,r=e.toLowerCase();w[n]=r,b[r]=n,this.values[r]=n,t?t=this.priority.indexOf(t):t=-1,t==-1?this.priority.push(r):this.priority.splice(t,0,r)},getList:function(){return h(b)}};w.add("READY"),w.add("DEPRECATED"),w.add("UNDEFINED"),w.add("ERROR"),w.add("PROCESSING");var E={},S=1,x={NONE:0,ALL:0,link:function(e,t,n){var r=e+t.basisObjectId,i=n.subscribers_;i||(i=n.subscribers_={});if(!i[r]){i[r]=t;var s=n.subscriberCount+=1;s==1&&n.emit_subscribersChanged(1)}},unlink:function(e,t,n){var r=e+t.basisObjectId,i=n.subscribers_;if(i&&i[r]){delete i[r];var s=n.subscriberCount-=1;s==0&&(n.emit_subscribersChanged(-1),n.subscribers_=null)}},add:function(e,t,n){E[S]={handler:t,action:n},x[e]=S,x.ALL|=S,S<<=1},addProperty:function(e,t){var n={};n[t||e+"Changed"]=function(t,n){n instanceof A&&x.unlink(e,t,n),t[e]instanceof A&&x.link(e,t,t[e])},this.add(e.toUpperCase(),n,function(t,n){n[e]&&t(e,n,n[e])})}},T={};x.addProperty("delegate"),x.addProperty("target"),x.addProperty("dataset"),x.addProperty("value","change");var A=l(d,{className:f+".AbstractData",state:w.UNDEFINED,emit_stateChanged:v("stateChanged","oldState"),active:!1,emit_activeChanged:v("activeChanged"),subscribeTo:x.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:v("subscribersChanged","delta"),syncEvents:l.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){d.prototype.init.call(this),this.active&&this.addHandler(C(this.subscribeTo).handler);var e=this.syncAction;e&&(this.syncAction=null,this.setSyncAction(e))},setState:function(e,t){var n=String(e);if(!b[n])throw 4;if(this.state!=n||this.state.data!=t){var r=this.state;return this.state=Object(n),this.state.data=t,this.emit_stateChanged(r),!0}return!1},deprecate:function(){this.state!=w.PROCESSING&&this.setState(w.DEPRECATED)},setActive:function(e){return e=!!e,this.active!=e?(this.active=e,this.emit_activeChanged(),e?k(this,this.subscribeTo):L(this,this.subscribeTo),!0):!1},setSubscription:function(e){var t=this.subscribeTo,n=e&x.ALL,r=t^n;if(r){this.subscribeTo=n;if(this.active){var i=C(t),s=C(n);this.removeHandler(i.handler),this.addHandler(s.handler);var o=1;while(r){if(r&1){var u=E[o];t&o?u.action(x.unlink,this):u.action(x.link,this)}o<<=1,r>>=1}}return!0}return!1},isSyncRequired:function(){return this.subscriberCount>0&&(this.state==w.UNDEFINED||this.state==w.DEPRECATED)},setSyncAction:function(e){var t=this.syncAction;typeof e!="function"&&(e=null),this.syncAction=e,e?(t||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):t&&this.removeHandler(this.syncEvents)},destroy:function(){d.prototype.destroy.call(this);if(this.active){var e=C(this.subscribeTo);for(var t=0,n;n=e.actions[t];t++)n(x.unlink,this)}this.state=w.UNDEFINED}}),O=n.getter.ID,M={destroy:function(e){this.value.unlink(e,this.fn)}},_={destroy:function(e){this.set(null)}},D={},P={},H=function(e){this.set(this.fn(e))},B=l(A,{className:f+".Value",subscribeTo:x.VALUE,emit_change:v("change","oldValue")&&function(e){m.change.call(this,e);var t=this;while(t=t.links_)t.fn.call(t.context,this.value,e)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(e,t,n){e.link(n,t,!0)},detach:function(e,t,n){e.unlink(n,t)},get:function(e){return e.value}},init:function(){A.prototype.init.call(this),this.proxy&&(this.value=this.proxy(this.value)),this.setNullOnEmitterDestroy&&this.value instanceof d&&this.value.addHandler(_,this),this.initValue=this.value},set:function(e){var t=this.value,n=this.proxy?this.proxy(e):e,r=n!==t;return r&&(this.setNullOnEmitterDestroy&&(t instanceof d&&t.removeHandler(_,this),n instanceof d&&n.addHandler(_,this)),this.value=n,this.locked||this.emit_change(t)),r},reset:function(){this.set(this.initValue)},isLocked:function(){return this.locked>0},lock:function(){this.locked++,this.locked==1&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked){this.locked--;if(!this.locked){var e=this.lockedValue_;this.lockedValue_=null,this.value!==e&&this.emit_change(e)}}},compute:function(e,t){t||(t=e,e=null),t||(t=p);var r=this,i=n.event.createHandler(e,function(e){this.set(t(e,r.value))}),s=t[O]||String(t),o=i.events.concat(s,this.basisObjectId).join("_"),u=D[o];if(!u){var a={};i.destroy=function(e){delete a[e.basisObjectId],this.destroy()},this.addHandler({change:function(){for(var e in a){var n=a[e];n.token.set(t(n.object,this.value))}},destroy:function(){for(var e in a){var t=a[e];t.object.removeHandler(i,t.token),t.token.destroy()}a=null,r=null}}),u=D[o]=function(e){var s=e.basisObjectId,o=a[s],u=t(e,r.value);if(!o){var f=new n.Token(u);e.addHandler(i,f),o=a[s]={token:f,object:e}}else o.token.set(u);return o.token},u.deferred=function(){return function(e){return u(e).deferred()}}}return u},as:function(e,t){e||(e=p);if(this.links_){var r=this,i=e[O]||String(e);while(r=r.links_){var s=r.context;if(s instanceof n.Token&&(s.fn[O]||String(s.fn))==i)return t?s.deferred():s}}var o=new n.Token;return o.fn=e,this.link(o,H),t?o.deferred():o},deferred:function(e){return this.as(e,!0)},link:function(e,t,n){if(typeof t!="function"){var r=String(t);t=P[r],t||(t=P[r]=function(e){this[r]=e})}return this.links_={value:this,context:e,fn:t,links_:this.links_},e instanceof d&&e.addHandler(M,this.links_),n||t.call(e,this.value),e},unlink:function(e,t){var r=this,i;while(i=r,r=r.links_)r.context===e&&(!t||r.fn===t)&&(r.fn=n.fn.$undef,i.links_=r.links_,r.context instanceof d&&r.context.removeHandler(M,r))},destroy:function(){A.prototype.destroy.call(this),this.setNullOnEmitterDestroy&&this.value instanceof d&&this.value.removeHandler(_,this);var e=this;while(e=e.links_)e.context instanceof d&&e.context.removeHandler(M,e);this.proxy=null,this.initValue=null,this.value=null,this.lockedValue_=null,this.links_=null}}),j={},F=function(e){B.prototype.set.call(this,e)};B.from=function(e,t,r){var i;if(!e)return null;if(e instanceof d){r||(r=t,t=null),r||(r=p);var s=n.event.createHandler(t,F),o=r[O]||String(r),u=s.events.concat(o,e.basisObjectId).join("_");i=j[u],i||(i=j[u]=new B({value:e,proxy:n.getter(r),set:n.fn.$undef,handler:{destroy:function(){j[u]=null,e.removeHandler(s,this)}}}),s.destroy=function(e){j[u]=null,this.destroy()},e.addHandler(s,i))}if(!i){var u=e.basisObjectId,a=e.bindingBridge;u&&a&&(i=j[u],i||(i=j[u]=new B({value:a.get(e)}),a.attach(e,i.set,i)))}if(!i)throw 5;return i},B.factory=function(e,t){return function(n){return B.from(n,e,t)}};var I={},U=l(A,{className:f+".Object",subscribeTo:x.DELEGATE+x.TARGET,data:null,emit_update:v("update","delta")&&function(e){var t=this.delegates_;m.update.call(this,e);while(t)t.delegate&&t.delegate.emit_update(e),t=t.next},emit_stateChanged:function(e){var t=this.delegates_;A.prototype.emit_stateChanged.call(this,e);while(t)t.delegate&&(t.delegate.state=this.state,t.delegate.emit_stateChanged(e)),t=t.next},delegate:null,delegateAdapter_:null,delegates_:null,emit_delegateChanged:v("delegateChanged","oldDelegate"),target:null,emit_targetChanged:v("targetChanged","oldTarget"),root:null,emit_rootChanged:v("rootChanged","oldRoot"),init:function(){this.root=this,A.prototype.init.call(this);var e=this.delegate,t=this.data;e?(this.delegate=null,this.target=null,this.data=I,this.setDelegate(e),this.data===I&&(this.data=t||{})):(t||(this.data={}),this.target!==null&&(this.target=this))},setDelegate:function(e){e=rt(this,this.setDelegate,e,"delegateAdapter_");if(e&&e instanceof U){if(e.delegate&&q(this,e))return!1}else e=null;if(this.delegate!==e){var t=this.state,n=this.data,r=this.delegate,i=this.target,s=this.root,o=this.listen.delegate,u=!1,a;if(r){o&&r.removeHandler(o,this);var f=r.delegates_,l=r;while(f){if(f.delegate===this){f.delegate=null,l===r?r.delegates_=f.next:l.next=f.next;break}l=f,f=f.next}}if(e){this.delegate=e,o&&e.addHandler(o,this),e.delegates_={delegate:this,next:e.delegates_};if(this.data!==I){a={};for(var c in e.data)c in n==0&&(u=!0,a[c]=undefined);for(var c in n)n[c]!==e.data[c]&&(u=!0,a[c]=n[c])}}else{this.delegate=null,this.target=null,this.root=this,this.data={};for(var c in n)this.data[c]=n[c]}return R(this,s,i),u&&this.emit_update(a),a&&t!==this.state&&(String(t)!=this.state||t.data!==this.state.data)&&this.emit_stateChanged(t),this.emit_delegateChanged(r),!0}return!1},setState:function(e,t){return this.delegate?this.root.setState(e,t):A.prototype.setState.call(this,e,t)},update:function(e){if(this.delegate)return this.root.update(e);if(e){var t={},n=!1;for(var r in e)this.data[r]!==e[r]&&(n=!0,t[r]=this.data[r],this.data[r]=e[r]);if(n)return this.emit_update(t),t}return!1},destroy:function(){A.prototype.destroy.call(this);var e=this.delegates_;this.delegates_=null;while(e)e.delegate.setDelegate(),e=e.next;this.delegate&&this.setDelegate(),this.data=g,this.root=null,this.target=null}}),z=l(U,{className:f+".Slot"}),W={destroy:function(){delete this.map[this.id]}},X=l(A,{className:f+".KeyObjectMap",itemClass:U,keyGetter:p,autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={},A.prototype.init.call(this)},resolve:function(e){return this.get(this.keyGetter(e),e)},create:function(e,t){var n;return e instanceof U?n={delegate:e}:n={data:{id:e,title:e}},new this.itemClass(n)},get:function(e,t){var n=e instanceof U?e.basisObjectId:e,r=this.map_[n];!r&&t&&(r=this.map_[n]={map:this.map_,id:n,item:this.create(e,t)},r.item.addHandler(W,r));if(r)return r.item},destroy:function(){A.prototype.destroy.call(this);var e=this.map_;this.map_=null;for(var t in e){var n=e[t];this.autoDestroyMembers?n.item.destroy():n.item.removeHandler(W,n)}}}),J=l(U,{className:f+".DatasetWrapper",subscribeTo:U.prototype.subscribeTo+x.DATASET,listen:{dataset:{itemsChanged:function(e,t){this.itemCount=e.itemCount,this.emit_itemsChanged(t)},destroy:function(){this.setDataset()}}},dataset:null,datasetAdapter_:null,emit_datasetChanged:v("datasetChanged","oldDataset"),emit_itemsChanged:v("itemsChanged","delta"),init:function(){U.prototype.init.call(this);var e=this.dataset;e&&(this.dataset=null,this.setDataset(e))},setDataset:function(e){e=nt(this,this.setDataset,e,"datasetAdapter_");if(this.dataset!==e){var t=this.listen.dataset,n=this.dataset,r;t&&(n&&n.removeHandler(t,this),e&&e.addHandler(t,this)),this.itemCount=e?e.itemCount:0,(r=$(n,e))&&this.emit_itemsChanged(r),this.dataset=e,this.emit_datasetChanged(n)}},has:function(e){return this.dataset?this.dataset.has(e):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(e){return this.dataset?this.dataset.top(e):[]},forEach:function(e){if(this.dataset)return this.dataset.forEach(e)},destroy:function(){(this.dataset||this.datasetAdapter_)&&this.setDataset(),U.prototype.destroy.call(this)}}),K=l(A,{className:f+".ReadOnlyDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:v("itemsChanged","delta")&&function(e){var t,n=0,r=0,i;if(t=e.inserted)while(i=t[n])this.items_[i.basisObjectId]=i,n++;if(t=e.deleted)while(i=t[r])delete this.items_[i.basisObjectId],r++;this.itemCount+=n-r,this.cache_=n==this.itemCount?e.inserted:null,m.itemsChanged.call(this,e)},init:function(){A.prototype.init.call(this),this.members_={},this.items_={}},has:function(e){return!!e&&!!this.items_[e.basisObjectId]},getItems:function(){return this.cache_||(this.cache_=h(this.items_)),this.cache_},getValues:function(e){return this.getItems().map(n.getter(e||p))},pick:function(){for(var e in this.items_)return this.items_[e];return null},top:function(e){var t=[];if(e)for(var n in this.items_)if(t.push(this.items_[n])>=e)break;return t},forEach:function(e){var t=this.getItems();for(var n=0;n<t.length;n++)e(t[n])},destroy:function(){A.prototype.destroy.call(this),this.cache_=y,this.itemCount=0,this.members_=null,this.items_=null}}),Q=l(K,{className:f+".Dataset",listen:{item:{destroy:function(e){this.remove([e])}}},init:function(){K.prototype.init.call(this);var e=this.items;e&&(this.items=null,this.set(e))},add:function(e){var t=this.members_,n=this.listen.item,r=[],i;e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var o=e[s];if(o instanceof U){var u=o.basisObjectId;t[u]||(t[u]=o,n&&o.addHandler(n,this),r.push(o))}}return r.length&&this.emit_itemsChanged(i={inserted:r}),i},remove:function(e){var t=this.members_,n=this.listen.item,r=[],i;e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var o=e[s];if(o instanceof U){var u=o.basisObjectId;t[u]&&(n&&o.removeHandler(n,this),delete t[u],r.push(o))}}return r.length&&this.emit_itemsChanged(i={deleted:r}),i},set:function(e){if(!this.itemCount)return this.add(e);if(!e||!e.length)return this.clear();var t=this.members_,n=this.listen.item,r={},i=[],s=[],o,u,a;for(var f=0;f<e.length;f++)o=e[f],o instanceof U&&(u=o.basisObjectId,r[u]=o,t[u]||(t[u]=o,n&&o.addHandler(n,this),s.push(o)));for(var u in t)r[u]||(o=t[u],n&&o.removeHandler(n,this),delete t[u],i.push(o));return(a=V(s,i))&&this.emit_itemsChanged(a),a},sync:function(e){var t=this.set(e)||{},n=t.deleted;Q.setAccumulateState(!0);if(n)for(var r=0,i;i=n[r];r++)i.destroy();return Q.setAccumulateState(!1),t.inserted},clear:function(){var e=this.getItems(),t=this.listen.item,n;if(e.length){if(t)for(var r=0;r<e.length;r++)e[r].removeHandler(t,this);this.emit_itemsChanged(n={deleted:e}),this.members_={}}return n},destroy:function(){this.clear(),K.prototype.destroy.call(this)}}),G=function(e,t,n,r){this.context=e,this.fn=t,this.source=n,this.handler=r};G.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)},proxy:function(){this.fn.call(this.context,this.source)}};var Y=function(){G.apply(this,arguments)};Y.prototype=new G,Y.prototype.attach=function(){this.source.bindingBridge.attach(this.source,this.handler,this)},Y.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var Z=function(){this.fn.call(this.context,this.source)},et={datasetChanged:function(){this.fn.call(this.context,this.source)},destroy:function(){this.fn.call(this.context,null)}},tt={change:function(){this.fn.call(this.context,this.source)},destroy:function(){this.fn.call(this.context,null)}};Q.setAccumulateState=function(){function o(e){var t=e.dataset;s.call(t,e)}function u(){var e=t;t={};for(var n in e){var r=e[n];r&&o(r)}}function a(e){var n=this,r=n.basisObjectId,i=e.inserted,u=e.deleted,a=t[r];if(i&&u||a&&a.mixed){a&&(t[r]=null,o(a)),s.call(n,e);return}if(a){var f=i?"inserted":"deleted",l=a[f];if(!l){var h=i?"deleted":"inserted",p=a[h],d={},v=i||u,m=[],g=0;for(var y=0;y<p.length;y++)d[p[y].basisObjectId]=y;for(var y=0;y<v.length;y++){var b=v[y].basisObjectId;b in d==0?m.push(v[y]):(g||(p=c.call(p)),g++,p[d[b]]=null)}g&&(g<p.length?p=p.filter(Boolean):p=null,a[h]=p),m.length?(a[f]=m,p&&(a.mixed=!0)):(m=null,p||(t[r]=null))}else l.push.apply(l,i||u);return}t[r]={inserted:i,deleted:u,dataset:n,mixed:!1}}function f(){i=null,r&&(r=0,l())}function l(){e.emit_itemsChanged=s,u()}var e=K.prototype,t={},r=0,i,s;return function(t){t?(r==0&&(s=e.emit_itemsChanged,e.emit_itemsChanged=a,i||(i=n.setImmediate(f))),r++):(r-=r>0,r==0&&l())}}(),t.exports={STATE:w,SUBSCRIPTION:x,AbstractData:A,Value:B,Object:U,Slot:z,KeyObjectMap:X,ReadOnlyDataset:K,Dataset:Q,DatasetWrapper:J,isConnected:q,getDatasetDelta:$,ResolveAdapter:G,resolveDataset:nt,resolveObject:rt,wrapData:it,wrapObject:st,wrap:ot}},"1e.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js"),n.require("./e.js"),n.require("./f.js");var f=n.require("./a.js"),l=n.require("./1d.js");t.exports=n.ui.form.FormContent.subclass({name:"EmployeeForm",template:n.template.get("#e"),satellite:{submitButton:{instanceOf:n.ui.button.Button.subclass({caption:"Save",click:function(){this.owner.submit()}})}},binding:{submitButton:"satellite:"},childFactory:function(e){return new l(e)},childNodes:[{title:"Name",name:"name"},{title:"Surname",name:"surname"},{title:"Work start",name:"work_start"},{title:"Work end",name:"work_end"}],onSubmit:function(){var e=this;f.request({url:"http://localhost:8888/employee/update",method:"POST",contentType:"application/json",postBody:JSON.stringify(e.data),handler:{success:function(){e.owner.delegate.sync(),alert("EmployeeEntity successfully updated")},failure:function(){alert("Update of employee is failed")}}})}})},"3.js":function(e,t,n,r,i,s,o,u,a){function m(e){var t=d[e];return t||(t=function(){var t=this,n,r;while(t=t.handler){r=t.callbacks[e];if(typeof r=="function"){if(!n){n=[this];for(var i=0;i<arguments.length;i++)n.push(arguments[i])}r.apply(t.context||this,n)}r=t.callbacks["*"];if(typeof r=="function"){if(!n){n=[this];for(var i=0;i<arguments.length;i++)n.push(arguments[i])}r.call(t.context||this,{sender:this,type:e,args:n})}}},d[e]=t),t}function g(e,t){var n={events:[]};if(e){e=String(e).trim().split(/\s+|\s*,\s*/).sort(),n={events:e};for(var r=0,i;i=e[r];r++)i!="destroy"&&(n[i]=t)}return n}var f=this.path,l=n.Class,c=n.object.extend,h=Array.prototype.slice,p={},d={},v=function(){},y=l(null,{className:f+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:m("destroy"),listen:l.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(e,t){t=t||this,this.handler={callbacks:e,context:t,handler:this.handler}},removeHandler:function(e,t){var n=this,r;t=t||this;while(r=n,n=n.handler)if(n.callbacks===e&&n.context===t){n.callbacks=p,r.handler=n.handler;return}},destroy:function(){this.destroy=v,this.emit_destroy(),this.handler=null}});t.exports={create:m,createHandler:g,events:d,Emitter:y}},"2.js":function(e,t,n,r,i,s,o,u,a){function p(e){var t=[];for(var n in e)h.call(e,n)&&t.push(n);return t}function w(e){if(e.charAt(0)=="#")return d[parseInt(e.substr(1),36)];var t=e.match(/^(.+?)@(.+)$/);if(t)return C(n.path.resolve(t[2])).token(t[1])}function T(e,t,n,r){var i=e.cultureValues[t];r=r?r+".":"";for(var s in n)if(h.call(n,s)){var o=r+s,u=n[s];i[o]=u,u&&(typeof u=="object"||Array.isArray(u))&&T(e,t,u,o)}}function C(e){var t;if(typeof e=="string"){var r=e,i=n.path.extname(r);i!=".l10n"&&(r=n.path.dirname(r)+"/"+n.path.basename(r,i)+".l10n"),e=n.resource(r)}return n.resource.isResource(e)&&(t=S[e.url]),t||new N(e)}function k(){return E.slice(0)}function H(e,t){return e&&!O[e]&&(O[e]=new P(e,t)),O[e||A]}function B(){return A}function j(e){if(!e)return;if(A!=e){if(L.indexOf(e)==-1)return;A=e;for(var t=0,r;r=E[t];t++)r.syncValues();n.Token.prototype.set.call(H,e)}}function F(){return L.slice(0)}function I(e){typeof e=="string"&&(e=e.trim().split(" "));if(!e.length)return;var t={},r,i;M={};for(var s=0,o,u;o=e[s];s++)r=o.split("/"),r.length>2&&(r=r.slice(0,2)),u=r[0],i||(i=u),t[u]=H(u),M[u]=r;for(var u in M)M[u]=n.array.flatten(M[u].map(function(e){return M[e]})).concat(i).filter(function(e,t,n){return!t||n.lastIndexOf(e,t-1)==-1});L=n.object.keys(t),A in t==0&&j(i)}function q(e,t,n){H.attach(e,t),n&&e.call(t,A)}n.require("./3.js");var f=this.path,l=n.Class,c=n.event.Emitter,h=Object.prototype.hasOwnProperty;n.resource.extensions[".l10n"]=function(e,t){return C(t).update(n.resource.extensions[".json"](e,t))};var d=[],v={},m={},g=n.Token.prototype.set,y=l(n.Token,{className:f+".ComputeToken",init:function(e,t){t.computeTokens[this.basisObjectId]=this,this.token=t,n.Token.prototype.init.call(this,e)},get:function(){var e=this.token.type=="plural"?O[A].plural(this.value):this.value;return this.token.dictionary.getValue(this.token.name+"."+e)},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId],this.token=null,n.Token.prototype.destroy.call(this)}}),b=l(n.Token,{className:f+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,init:function(e,t,r,i){n.Token.prototype.init.call(this,i),this.index=d.push(this)-1,this.name=t,this.dictionary=e,this.computeTokens={},r?this.setType(r):this.apply()},toString:function(){return this.get()},apply:function(){for(var e in this.computeTokens)this.computeTokens[e].apply();n.Token.prototype.apply.call(this)},set:function(){},setType:function(e){e!="plural"&&(!n.l10n.enableMarkup||e!="markup")&&(e="default"),this.type!=e&&(this.type=e,this.apply())},compute:function(e,t){arguments.length==1&&(t=e,e=""),t=n.getter(t),e=String(e).trim().split(/\s+|\s*,\s*/).sort();var r=this.basisObjectId,i=e.concat(r,t[n.getter.ID]).join("_");if(v[i])return v[i];var s=this,o={},u=function(e){g.call(this,t(e))},a={destroy:function(e){delete o[e.basisObjectId],this.destroy()}};for(var f=0,l;l=e[f];f++)l!="destroy"&&(a[l]=u);return v[i]=function(e){if(e instanceof c==0)throw 3;var n=e.basisObjectId,r=o[n];return r||(r=o[n]=new y(t(e),s),e.addHandler(a,r)),r}},computeToken:function(e){return new y(e,this)},token:function(e){this.type=="plural"&&(e=O[A].plural(e));if(this.dictionary)return this.dictionary.token(this.name+"."+e)},destroy:function(){for(var e in this.computeTokens)this.computeTokens[e].destroy();this.computeTokens=null,this.value=null,n.Token.prototype.destroy.call(this)}}),E=[],S={},x=new n.Token,N=l(null,{className:f+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(e){this.tokens={},this.types={},this.cultureValues={},this.index=E.push(this)-1;if(n.resource.isResource(e)){var t=e;this.resource=t,S[t.url]||(S[t.url]=this,x.set(t.url)),t.fetch()}else this.update(e||{})},update:function(e){e||(e={}),this.cultureValues={};for(var t in e)/^_|_$/.test(t)||(this.cultureValues[t]={},T(this,t,e[t]));this.types=e._meta&&e._meta.type||{};for(var n in this.tokens)this.tokens[n].setType(this.types[n]);return this.syncValues(),this},syncValues:function(){for(var e in this.tokens)g.call(this.tokens[e],this.getValue(e))},getValue:function(e){var t=M[A]||[];for(var n=0,r;r=t[n];n++){var i=this.cultureValues[r];if(i&&e in i)return i[e]}},getCultureValue:function(e,t){return this.cultureValues[e]&&this.cultureValues[e][t]},token:function(e){var t=this.tokens[e];return t||(t=this.tokens[e]=new b(this,e,this.types[e],this.getValue(e))),t},destroy:function(){this.tokens=null,this.cultureValues=null,n.array.remove(E,this),this.resource&&(delete S[this.resource.url],this.resource=null)}}),L=[],A=null,O={},M={},_={},D=[[1,function(e){return 0}],[2,function(e){return e==1||e%10==1?0:1}],[2,function(e){return e==0?0:1}],[2,function(e){return e==1?0:1}],[2,function(e){return e==0||e==1?0:1}],[2,function(e){return e%10!=1||e%100==11?1:0}],[3,function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e!=0?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e==0?0:e==1?1:2}],[3,function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2}],[3,function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e==1?0:e>=2&&e<=4?1:2}],[4,function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3}],[4,function(e){return e==1?0:e==2?1:e==3?2:3}],[4,function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0}],[4,function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3}],[4,function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3}],[5,function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4}],[6,function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5}]];["ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh","mk","jv","af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo","ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh","is","csb","lv","lt","be bs hr ru sr uk","mnk","ro","pl","cs sk","cy","kw","sl","mt","gd","ga","ar"].forEach(function(e,t){e.split(" ").forEach(function(e){_[e]=this},D[t])});var P=n.Class(null,{className:f+".Culture",name:"",pluralForm:null,init:function(e,t){this.name=e,O[e]||(O[e]=this),this.pluralForm=t||_[e]||_[e.split("-")[0]]||D[0]},plural:function(e){return Number(this.pluralForm[1](Math.abs(parseInt(e,10))))}});n.object.extend(H,new n.Token),H.set=j,I("en-US"),j("en-US"),t.exports={ComputeToken:y,Token:b,token:w,Dictionary:N,dictionary:C,getDictionaries:k,addCreateDictionaryHandler:x.attach.bind(x),removeCreateDictionaryHandler:x.detach.bind(x),Culture:P,culture:H,getCulture:B,setCulture:j,getCultureList:F,setCultureList:I,pluralForms:D,onCultureChange:q}},"0.js":function(e,t,n,r,i,s,o,u,a){n.require("./1.js");var f=n.require("./a.js"),l=n.require("./d.js"),c=n.require("./u.js"),h=n.require("./y.js"),p=n.require("./10.js"),d=n.require("./11.js"),v=n.require("./14.js"),m=n.require("./1a.js"),g,y="http://localhost:8888/model",b=new n.entity.EntityType({name:"EmployeeEntity",fields:{path:String,team_code:String,id:n.entity.IntId,name:String,surname:String,work_start:Date,work_end:Date,days:Object,team_id:String}}),w=new n.entity.EntityType({name:"TeamEntity",fields:{path:String,team_code:String,code:String,id:n.entity.IntId,name:String}}),E=new n.data.Object({data:{month:"March",year:2015,team:"",teams:[],publicHolidays:{},dayTypes:{},employeesByTeams:undefined},sync:function(e){var t=this;f.request({url:y,method:"GET",handler:{success:function(r,i,s){s.teams.forEach(w),s.employees.forEach(b),s.employeesByTeams=new n.data.dataset.Split({source:new n.data.dataset.Merge({sources:[w.all,b.all]}),rule:function(e){return e.data.path}}),t.update(s),!(e&&e.constructor&&e.call&&e.apply)||e()}}})}});new h({authCallback:function(){E.sync(function(){l.start(),new c({delegate:E}),g=new p({delegate:E,router:l,childNodes:[d,v,m]})})}})}};(function n(r,i,s){function f(e){function t(e){return Math.round(e).toString(36)}var n=t(10+25*Math.random());e||(e=16);while(n.length<e)n+=t(new Date*Math.random());return n.substr(0,e)}function l(e,t){for(var n in t)e[n]=t[n];return e}function c(e,t){for(var n in t)n in e==0&&(e[n]=t[n]);return e}function h(e){var t=[];for(var n in e)t.push(n);return t}function p(e){var t=[];for(var n in e)t.push(e[n]);return t}function d(e,t){var n={};if(!t)return l(n,e);for(var r=0,i;i=t[r++];)i in e&&(n[i]=e[i]);return n}function v(e,t){var n={};if(!t)return l(n,e);for(var r=0,i;i=t[r++];)i in e&&(n[i]=e[i],delete e[i]);return n}function m(){var e={};for(var t=0;t<arguments.length;t++)l(e,arguments[t]);return e}function g(e,t,n){var r=[];for(var i in e)r.push(t.call(n,i,e[i]));return r}function y(e){return e==undefined}function b(e){return e!=undefined}function w(e){return e==null||e==undefined}function E(e){return e!=null&&e!=undefined}function S(e){return e===this}function x(e){return e!==this}function T(e){return e}function N(e){return function(){return e}}function C(){return!1}function k(){return!0}function L(){return null}function A(){}function _(e){return function(t){var n={};return n[e]=t,n}}function D(e,t){var n=0,r,i;return r=function(){return n++||(r.inited=!0,r.data=i=e.apply(t||this,arguments)),i}}function P(e,t,n){var r=0,i,s;return i=function(){return r++||(i.inited=!0,i.data=s=e.call(n||this)),t.apply(s,arguments),s}}function H(e,t){var n=0;return function(){if(!(n++))return e.apply(t||this,arguments)}}function z(){var e=s;if(!e)if(I)R=__filename.replace(/\\/g,"/");else{var t=u.scripts;for(var n=0,r;r=t[n];n++){var i=r.hasAttribute("basis-config")?r.getAttribute("basis-config"):r.getAttribute("data-basis-config");r.removeAttribute("basis-config"),r.removeAttribute("data-basis-config");if(i!==null){R=q.normalize(r.src);try{e=Function("return{"+i+"}")()}catch(o){}break}}}return W(e)}function W(e,t){e=d(e);var n=[],r=m(e.path,e.modules,{basis:R});e.modules={};if(e.autoload){var i=String(e.autoload).match(/^((?:[^\/]*\/)*)([a-z$_][a-z0-9$_]*)((?:\.[a-z$_][a-z0-9$_]*)*)$/i);i&&(r[i[2]]={autoload:!0,filename:i[1]+i[2]+(i[3]||".js")}),delete e.autoload}for(var s in r){var o=r[s];typeof o=="string"&&(o={filename:o.replace(/\/$/,"/"+s+".js")});var u=o.filename,a=o.path;u&&!a&&(u=q.resolve(u),a=u.substr(0,u.length-q.extname(u).length),u="../"+q.basename(u)),a=q.resolve(a),!u&&a&&(u=q.basename(a),a=q.dirname(a)),q.extname(u)||(u+=".js"),u=q.resolve(a,u),e.modules[s]={path:a,filename:u},o.autoload&&(e.autoload=n,n.push(s))}return e}function Z(e){var t=G[e.url];if(t)for(var n=0;n<t.length;n++)t[n](e.get(),e.url)}function rt(e,t,n){try{return new Function(t,n)}catch(r){B.error("Compilation error at "+e+("line"in r?":"+(r.line-1):"")+": "+r)}}function lt(e){if(e in ot==0){var t=e.split("."),n=t.shift(),r=t.join("/")+".js";n in at==0&&(at[n]=q.baseURI+n+"/"),n==e?r=at[n].replace(/\/$/,"")+".js":r=at[n]+r,ot[e]=r,ut[r]=e}return ot[e]}function ct(e){var t=st[e];return t||(t=st[e]=new ft(e),t.namespaces_={},t.namespaces_[e]=t,U.noConflict||(r[e]=t)),t}function ht(e){e=e.split(".");var t=ct(e[0]),n=t;for(var r=1,i;i=e[r];r++){if(!n[i]){var s=e.slice(0,r+1).join(".");n[i]=new ft(s),t.namespaces_[s]=n[i]}n=n[i]}return st[e.join(".")]=n,n}function dt(e,t){!/[^a-z0-9_\.]/i.test(e)&&q.extname(e)!=".js"?e=lt(e):e=q.resolve(e),G[e]?G[e].push(t):G[e]=[t];var n=nt.get(e);n&&n.isResolved()&&t(n.get(),n.url)}function vt(e,t){if(e!=null){var n=e.length;if(typeof n=="undefined"||a.call(e)=="[object Function]")return[e];t||(t=0);if(n-t>0){for(var r=[],i=0,s=t;s<n;)r[i++]=e[s++];return r}}return[]}function mt(e,t,n){var r=[],i=typeof t=="function";for(var s=0;s<e;s++)r[s]=i?t.call(n,s,r):t;return r}var o="1.3.4",u=r.document,a=Object.prototype.toString,O=function(){function o(e){if(n.test(e)){var t=e.split("."),r=t[0],i=t[1],s=t[2],o;switch(t.length){case 1:o=function(e){return e!=null?e[r]:e};break;case 2:o=function(e){return e!=null?e[r][i]:e};break;case 3:o=function(e){return e!=null?e[r][i][s]:e};break;default:o=function(e){if(e!=null){e=e[r][i][s];for(var n=3,o;o=t[n];n++)e=e[o]}return e}}return o}return new Function("object","return object != null ? object."+e+" : object")}var e="basisGetterId"+f()+"_",t=1,n=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,r=[],i={},s={},u=function(n,u){var a,f,l;if(!n||n===M)return M;typeof n=="function"?(l=n[e],l?a=r[Math.abs(l)-1]:(a=function(e){return n(e)},a.base=n,a.__extend__=O,l=r.push(a),n[e]=-l,a[e]=l)):(a=i[n],a?l=a[e]:(a=o(n),a.base=n,a.__extend__=O,l=r.push(a),a[e]=l,i[n]=a));var c=u!=null&&typeof u;if(!c)return a;var h=s[l],p;if(c=="string")p=c+u;else if(c=="function")p=u.basisModId_;else if(c!="object")return a;if(p&&h&&h[p])return h[p];typeof a.base=="function"&&(a=a.base);switch(c){case"string":f=function(e){return Et.format(u,a(e))};break;case"function":p||(p=c+t++,u.basisModId_=p),f=function(e){return u(a(e))};break;default:f=function(e){return u[a(e)]}}return f.base=a.base||a,f.__extend__=O,p&&(h||(h={},s[l]=h),h[p]=f,f.mod=u,f[e]=r.push(f)),f};return u.ID=e,u}(),M=l(function(){},{__extend__:O}),B=function(){var e={log:A,info:A,warn:A,error:A};return typeof console!="undefined"&&g(e,function(t){e[t]="bind"in Function.prototype&&typeof console[t]=="function"?Function.prototype.bind.call(console[t],console):function(){Function.prototype.apply.call(console[t],console,arguments)}}),e}(),j=r.setImmediate||r.msSetImmediate,F=r.clearImmediate||r.msSetImmediate;j&&(j=j.bind(r)),F&&(F=F.bind(r)),j||function(){var e="basisjs.setImmediate",t=function(){var e={},t=1;return j=function(r){if(typeof r!="function")return;return e[++t]={fn:r,args:vt(arguments,1)},n(t),t},F=function(t){delete e[t]},function(t){var n=e[t];if(n)return delete e[t],n.fn.apply(undefined,n.args)}}(),n=function(e){setTimeout(function(){t(e)},0)};if(r.process&&typeof process.nextTick=="function")n=function(e){process.nextTick(function(){t(e)})};else if(r.MessageChannel){var i=new r.MessageChannel;i.port1.onmessage=function(e){var n=e.data;t(n)},n=function(e){i.port2.postMessage(e)}}else{var s=r.postMessage&&!r.importScripts;if(s){var o=r.onmessage;r.onmessage=function(){s=!1},r.postMessage("","*"),r.onmessage=o}if(s){var a=function(n){if(n&&n.source==r){var i=String(n.data).split(e)[1];i&&t(i)}};r.addEventListener?r.addEventListener("message",a,!0):r.attachEvent("onmessage",a),n=function(t){r.postMessage(e+t,"*")}}else{var f=function(){return u.createElement("script")};if(u&&"onreadystatechange"in f()){var l=n;n=function c(e){typeof Ct!="undefined"&&(n=l,Ct.head.ready(function(){n=function(e){var n=f();n.onreadystatechange=function(){n.onreadystatechange=null,Ct.remove(n),n=null,t(e)},Ct.head.add(n)}})),n===c?l(e):n(e)}}}}}();var I=typeof process=="object"&&a.call(process)=="[object process]",q=function(){var e=/^([^\/]+:|\/)/,t=/^[a-zA-Z0-9\-]+:\/?/,n=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,r=/[\?#].*$/,i,s,o;if(I){var u=(process.basisjsBaseURI||require("path").resolve(".")).replace(/\\/g,"/");i=u.replace(/^[^\/]*/,""),s=u.replace(/\/.*/,"")}else i=location.pathname.replace(/[^\/]+$/,""),s=location.protocol+"//"+location.host;return o={baseURI:i,origin:s,normalize:function(e){e=(e||"").replace(t,"/").replace(n,"/").replace(r,"");var i=[],s=e.split("/");for(var o=0;o<s.length;o++)s[o]==".."?(i.length>1||i[0])&&i.pop():(s[o]||!o)&&s[o]!="."&&i.push(s[o]);return i.join("/")||(e[0]==="/"?"/":"")},dirname:function(e){var t=o.normalize(e);return t.replace(/\/([^\/]*)$|^[^\/]+$/,"")||(t[0]=="/"?"/":".")},extname:function(e){var t=o.normalize(e).match(/[^\/](\.[^\/\.]*)$/);return t?t[1]:""},basename:function(e,t){var n=o.normalize(e).match(/[^\\\/]*$/);return n=n?n[0]:"",t==o.extname(n)&&(n=n.substring(0,n.length-t.length)),n},resolve:function(t,n){var r=vt(arguments).reverse(),s=[],u=!1;for(var a=0;!u&&a<r.length;a++)typeof r[a]=="string"&&(s.unshift(r[a]),u=e.test(r[a]));return u||s.unshift(i=="/"?"":i),o.normalize(s.join("/"))},relative:function(e,t){typeof t!="string"&&(t=e,e=i),e=o.normalize(e),t=o.normalize(t);if(e[0]=="/"&&t[0]!="/")return e;if(t[0]=="/"&&e[0]!="/")return t;var n=e.replace(/^\/$/,"").split(/\//),r=t.replace(/^\/$/,"").split(/\//),s=[],u=0;while(r[u]==n[u]&&typeof n[u]=="string")u++;for(var a=n.length-u;a>0;a--)s.push("..");return s.concat(r.slice(u).filter(Boolean)).join("/")}},o}(),R=i||"",U=s||{modules:{},autoload:["./0.js"]},X=function(){function r(e){return typeof e=="function"&&!!e.basisClassId_}function i(e){var t=this;while(t&&t!==e)t=t.superClass_;return t===e}function s(e,t,n){return(new Function(h(t),'return {"'+e+'": '+n+'\n}["'+e+'"]')).apply(null,p(t))}function u(s,o){var a=t++;typeof s!="function"&&(s=c);var h=function(){};h.prototype=s.prototype;var p=new h,d={basisClassId_:a,superClass_:s,extendConstructor_:!!s.extendConstructor_,isSubclassOf:i,subclass:function(){return u.apply(null,[g].concat(vt(arguments)))},extend:f,__extend__:function(e){return e&&e!==n&&(typeof e=="object"||typeof e=="function"&&!r(e))?c.create.call(null,g,e):e},prototype:p};for(var v=1,m;m=arguments[v];v++)d.extend(m);var g=d.extendConstructor_?function(t){this.basisObjectId=e.id++;var n;for(var r in t)n=this[r],this[r]=n&&n.__extend__?n.__extend__(t[r]):t[r];this.init(),this.postInit()}:function(){this.basisObjectId=e.id++,this.init.apply(this,arguments),this.postInit()};p.constructor=g;for(var y in p)p[y]===n&&(p[y]=g);return l(g,d),g}function f(e){var t=this.prototype;typeof e=="function"&&!r(e)&&(e=e(this.superClass_.prototype,d(t))),e.prototype&&(e=e.prototype);for(var n in e){var i=e[n],s=t[n];n=="className"||n=="extendConstructor_"?this[n]=i:s&&s.__extend__?t[n]=s.__extend__(i):t[n]=i}return o&&e[n="toString"]!==a&&(t[n]=e[n]),this}var e={id:1},t=1,n={},o=function(){for(var e in{toString:1})return!1;return!0}(),c=l(u,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var e in this)hasOwnProperty.call(this,e)&&(this[e]=null);this.destroy=A}}}),v=function(e,t,n){return{__extend__:function(e){if(!e)return e;if(e&&e.__extend__)return e;var n=function(){};n.prototype=this;var r=new n;return t(r,e),r}}.__extend__(e||{})},m=function(e){return v(e,l,"extensibleProperty")},g=function(e){return v(e,function(e,t){for(var n in t){var r=e[n];e[n]=r&&r.__extend__?r.__extend__(t[n]):m(t[n])}},"nestedExtendProperty")},y=function(e,t){var n=function(t){var r={__extend__:n};if(t){if(t.__extend__)return t;for(var i in t)t[i]&&(r[i]=e)}return r};return n(t||{})};return l(c,{SELF:n,create:u,isClass:r,customExtendProperty:v,extensibleProperty:m,nestedExtendProperty:g,oneFunctionProperty:y})}(),V=X(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(e,t,n){e.attach(t,n)},detach:function(e,t,n){e.detach(t,n)},get:function(e){return e.get()}},init:function(e){this.value=e},get:function(){return this.value},set:function(e){this.value!==e&&(this.value=e,this.apply())},attach:function(e,t){this.handler={fn:e,context:t,handler:this.handler}},detach:function(e,t){var n=this,r;while(r=n,n=n.handler)if(n.fn===e&&n.context===t){n.fn=A,r.handler=n.handler;return}},apply:function(){var e=this.get(),t=this;while(t=t.handler)t.fn.call(t.context,e)},deferred:function(){var e=this.deferredToken;return e||(e=this.deferredToken=new J(this.value),this.attach(e.set,e)),e},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null),this.handler=null,this.value=null,this.attach=A,this.detach=A}}),$=function(){function n(){var n=e;e={},t=null;for(var r in n)n[r].apply()}var e={},t;return function(r){if(r.basisObjectId in e)return;e[r.basisObjectId]=r,t||j(n)}}(),J=V.subclass({className:"basis.DeferredToken",set:function(e){this.value!==e&&(this.value=e,$(this))},deferred:function(){return this}}),K={},Q={},G={},Y=1;(function(){var e=typeof t!="undefined"?t:null;if(e)for(var n in e)Q[q.resolve(n)]=e[n]})();var et=function(e,t){if(t||!Q.hasOwnProperty(e)){var n="";if(!I){var r=new XMLHttpRequest;r.open("GET",e,!1),r.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString()),r.setRequestHeader("X-Basis-Resource",1),r.send(""),r.status>=200&&r.status<400&&(n=r.responseText)}else try{n=process.basisjsReadFile?process.basisjsReadFile(e):require("fs").readFileSync(e,"utf-8")}catch(i){}Q[e]=n}return Q[e]},tt=function(e,t){var n=q.extname(e),r=nt.extensions[n],i=arguments.length>1,s=!1,o=!1;i&&(e+="#virtual");var u=function(){if(s)return t;var n=i?t:et(e);return r?o||(o=!0,t=r(n,e)):t=n,s=!0,Z(u),u.apply(),t};return l(u,l(new V,{url:e,type:n,virtual:i,fetch:function(){return u()},toString:function(){return"[basis.resource "+e+"]"},isResolved:function(){return s},update:function(n){if(!s||i||n!=Q[e])i||(Q[e]=n),r?(!o&&i&&(t=n),o&&!r.permanent&&(t=r(n,e,t),Z(u),u.apply())):(t=n,s=!0,Z(u),u.apply())},reload:function(){if(i)return;var t=Q[e],n=et(e,!0);n!=t&&(s=!1,u.update(n))},get:function(n){return i&&n?r?wrappedContent:t:n?et(e):u()},ready:function(e,t){if(s){e.call(t,u());if(r&&r.permanent)return}return u.attach(e,t),u}})),K[e]=u,u},nt=function(e){var t=K[e];return t?t:(e=q.resolve(e),t=K[e],t||tt(e))};l(nt,{isResource:function(e){return e?K[e.url]===e:!1},isResolved:function(e){var t=nt.get(e);return t?t.isResolved():!1},exists:function(e){return K.hasOwnProperty(q.resolve(e))},get:function(e){return e=q.resolve(e),nt.exists(e)?nt(e):null},getFiles:function(e){return h(e?Q:K).map(q.relative)},virtual:function(e,t,n){return tt((n?n+":":q.normalize(q.baseURI=="/"?"":q.baseURI)+"/")+"virtual-resource"+Y++ +"."+e,t)},extensions:{".js":l(function(e,t){var n=ut[t];if(!n){var r=!0,i=q.dirname(t)+"/"+q.basename(t,q.extname(t));for(var s in at){var o=at[s]+s+"/";if(i.substr(0,o.length)==o){r=!1,i=i.substr(at[s].length);break}}n=i.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,"."),r&&(n="implicit."+n)}if(!st[n]){var s=ht(n);s.exports=it({path:s.path,exports:s.exports},t,e).exports,s.exports&&s.exports.constructor===Object&&c(s,s.exports)}return st[n].exports},{permanent:!0}),".css":function(e,t,n){return n||(n=new Lt(t)),n.updateCssText(e),n},".json":function(e,t){if(typeof e=="object")return e;var n;try{e=String(e),n=At.json.parse(e)}catch(r){}return n||null}}});var it=function(e,t,n){var i=q.dirname(t)+"/",s=n;return e.exports||(e.exports={}),typeof s!="function"&&(s=rt(t,["exports","module","basis","global","__filename","__dirname","resource","require"],'"use strict";\n'+n)),typeof s=="function"&&s.call(e.exports,e.exports,e,At,r,t,i,function(e){return nt(q.resolve(i,e))},function(e,t){return pt(e,t||i)}),e},st={},ot={},ut={},at={};g(U.modules,function(e,t){at[e]=t.path+"/",ot[e]=t.filename,ut[t.filename]=e}),function(t){var t=typeof e!="undefined"?e:null;if(t)for(var n in t){var r=q.resolve(n),i=t[n];ut[r]=i,ot[i]=r}}();var ft=X(null,{className:"basis.Namespace",init:function(e){this.name=e,this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(e){return l(this.exports,e),c(this,e)}}),pt=function(){if(I){var e=module.constructor.prototype;return function(t,n){if(!/[^a-z0-9_\.]/i.test(t)||q.extname(t)==".js"){var r=e._compile,i=ht(t);e._compile=function(e,t){this.basis=At,e='var __nodejsRequire = require;\nvar basis = module.basis;\nvar resource = function(filename){ return basis.resource(__dirname + "/" + filename) };\nvar require = function(filename, baseURI){ return basis.require(filename, baseURI || __dirname) };\n'+e,r.call(l(this,i),e,t)};var s=require(__dirname+"/"+t.replace(/\./g,"/"));return i.exports=s,s&&s.constructor===Object&&c(i,s),e._compile=r,s}return t=q.resolve(n,t),require(t)}}return function(e,t){return!/[^a-z0-9_\.]/i.test(e)&&q.extname(e)!=".js"?e=lt(e):e=q.resolve(t,e),nt(e).fetch()}}();c(Function.prototype,{bind:function(e){var t=this,n=vt(arguments,1);return n.length?function(){return t.apply(e,n.concat.apply(n,arguments))}:function(){return t.apply(e,arguments)}}}),c(Array,{isArray:function(e){return a.call(e)==="[object Array]"}}),c(Array.prototype,{indexOf:function(e,t){t=parseInt(t,10)||0;if(t<0)return-1;for(;t<this.length;t++)if(this[t]===e)return t;return-1},lastIndexOf:function(e,t){var n=this.length;t=parseInt(t,10),isNaN(t)||t>=n?t=n-1:t=(t+n)%n;for(;t>=0;t--)if(this[t]===e)return t;return-1},forEach:function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)},every:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0},some:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1},filter:function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)r in this&&e.call(t,this[r],r,this)&&n.push(this[r]);return n},map:function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)r in this&&(n[r]=e.call(t,this[r],r,this));return n},reduce:function(e,t){var n=this.length,r=arguments.length;if(n==0&&r==1)throw 1;var i,s=0;r>1&&(i=t,s=1);for(var o=0;o<n;o++)o in this&&(s++?i=e.call(null,i,this[o],o,this):i=this[o]);return i}});var gt={from:vt,create:mt,flatten:function(e){return e.concat.apply([],e)},repeat:function(e,t){return gt.flatten(mt(parseInt(t,10)||0,e))},search:function(e,t,n,r){e.lastSearchIndex=-1,n=O(n||T);for(var i=parseInt(r,10)||0,s=e.length;i<s;i++)if(n(e[i])===t)return e[e.lastSearchIndex=i]},lastSearch:function(e,t,n,r){e.lastSearchIndex=-1,n=O(n||T);var i=e.length,s=isNaN(r)||r==null?i:parseInt(r,10);for(var o=s>i?i:s;o-->0;)if(n(e[o])===t)return e[e.lastSearchIndex=o]},add:function(e,t){return e.indexOf(t)==-1&&!!e.push(t)},remove:function(e,t){var n=e.indexOf(t);return n!=-1&&!!e.splice(n,1)},has:function(e,t){return e.indexOf(t)!=-1},sortAsObject:function(){return gt.sort.apply(this,arguments)},sort:function(e,t,n,r){return t=O(t),r=r?-1:1,e.map(function(e,n){return{i:n,v:t(e)}}).sort(n||function(e,t){return r*(e.v>t.v||-(e.v<t.v)||(e.i>t.i?1:-1))}).map(function(e){return this[e.i]},e)}};if(![1,2].splice(1).length){var yt=Array.prototype.splice;Array.prototype.splice=function(){var e=vt(arguments);return e.length<2&&(e[1]=this.length),yt.apply(this,e)}}var bt=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,wt=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi;c(String,{toLowerCase:function(e){return String(e).toLowerCase()},toUpperCase:function(e){return String(e).toUpperCase()},trim:function(e){return String(e).trim()},trimLeft:function(e){return String(e).trimLeft()},trimRight:function(e){return String(e).trimRight()}}),c(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var Et={toObject:function(e,t){try{return(new Function("return 0,"+e))()}catch(n){if(t)throw 2}},repeat:function(e,t){return(new Array(parseInt(t,10)+1||0)).join(e)},qw:function(e){var t=e.trim();return t?t.split(/\s+/):[]},forRegExp:function(e){return e.replace(bt,"\\$1")},format:function(e,t){var n=vt(arguments,1);return typeof t=="object"&&l(n,t),e.replace(wt,function(e,t,r,i,s){var o=t in n?n[t]:s?"":e;return r&&!isNaN(o)?(o=Number(o),r=="."?o.toFixed(i):Tt.lead(o,i)):o})},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},dasherize:function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},isEmpty:function(e){return e==null||String(e)==""},isNotEmpty:function(e){return e!=null&&String(e)!=""}};if("|||".split(/\|/).length+"|||".split(/(\|)/).length!=11){var St=String.prototype.split;String.prototype.split=function(e,t){if(!e||e instanceof RegExp==0||e.source=="")return St.apply(this,arguments);var n=[],r=0,i;e.global||(e=new RegExp(e.source,/\/([mi]*)$/.exec(e)[1]+"g"));while(i=e.exec(this))i[0]=this.substring(r,i.index),n.push.apply(n,i),r=e.lastIndex;return n.push(this.substr(r)),n}}if("12".substr(-1)!="2"){var xt=String.prototype.substr;String.prototype.substr=function(e,t){return xt.call(this,e<0?Math.max(0,this.length+e):e,t)}}var Tt={fit:function(e,t,n){return!isNaN(t)&&e<t?Number(t):!isNaN(n)&&e>n?Number(n):e},lead:function(e,t,n){return String(e).replace(/\d+/,function(e){return(t-=e.length-1)>1?(new Array(t)).join(n||0)+e:e})},group:function(e,t,n){return String(e).replace(/\d+/,function(e){return e.replace(/\d/g,function(r,i){return!i+(e.length-i)%(t||3)?r:(n||" ")+r})})},format:function(e,t,n,r,i,s){var o=e.toFixed(t);if(n||s)o=o.replace(/(\d+)(\.?)/,function(e,t,r){return(n?At.number.group(Number(t),3,n):t)+(r?s||r:"")});return r&&(o=o.replace(/^-?/,"$&"+(r||""))),o+(i||"")}};c(Date,{now:function(){return Number(new Date)}});var Nt=function(){function e(){return u.readyState=="complete"&&!!u.body}function i(e){e.callback.call(e.context)}function s(){if(e()&&!(t++))while(n)i(n),n=n.next}function o(){try{u.documentElement.doScroll("left"),s()}catch(e){setTimeout(o,1)}}var t=!u||e(),n;if(!t)if(u.addEventListener)u.addEventListener("DOMContentLoaded",s,!1),r.addEventListener("load",s,!1);else{u.attachEvent("onreadystatechange",s),r.attachEvent("onload",s);try{!r.frameElement&&u.documentElement.doScroll&&o()}catch(a){}}return function(e,r){t?i({callback:e,context:r}):n={callback:e,context:r,next:n}}}(),Ct=function(){function r(e){if(u&&!t[e]){t[e]=u[e]||u.getElementsByTagName(e)[0];if(t[e]){var r=n[e];delete n[e];for(var i=0,s;s=r[i];i++)s[0].call(s[1],t[e])}}return t[e]}function i(){var e=this[0],t=this[1],s=this[2];o(t);var u=r(e);if(u){s===!0&&(s=u.firstChild);if(!s||s.parentNode!==u)s=null;u.insertBefore(t,s)}else n[e].push([i,[e,t,s]])}function s(e,r,i){n[e]?n[e].push([r,i]):r.call(i,t[e])}function o(e){for(var t in n){var r=gt.search(n[t],e,function(e){return e[1]&&e[1][1]});r&&gt.remove(n[t],r)}e&&e.parentNode&&e.parentNode.nodeType==1&&e.parentNode.removeChild(e)}function a(){e&&r("head")&&r("body")&&(e=clearInterval(e))}var e,t={},n={head:[],body:[]};return u&&(!r("head")||!r("body"))&&(e=setInterval(a,5),Nt(a)),{head:{ready:function(e,t){s("head",e,t)},add:function(e,t){i.call(["head",e,t])}},body:{ready:function(e,t){s("body",e,t)},add:function(e,t){i.call(["body",e,t])}},remove:o}}(),kt=function(){function t(t){n.globalDestroy=!0,n.add=A,n.remove=A;var r;while(r=e.pop())if(typeof r.destroy=="function")try{r.destroy()}catch(i){}else for(var s in r)r[s]=null;e.length=0}var e=[];if("attachEvent"in r)r.attachEvent("onunload",t);else{if(!("addEventListener"in r))return{add:A,remove:A};r.addEventListener("unload",t,!1)}var n={add:function(t){t!=null&&e.push(t)},remove:function(t){gt.remove(e,t)}};return n}(),Lt=function(){function n(e){t.setAttribute("href",e),Ct.head.add(t,!0)}function r(){t.setAttribute("href",location.href),Ct.remove(t)}function i(){n(this.baseURI),this.element||(this.element=u.createElement("style"),e||this.element.appendChild(u.createTextNode(""))),Ct.head.add(this.element),this.syncCssText(),r()}var e=function(){try{return!u.createElement("style").appendChild(u.createTextNode(""))}catch(e){return!0}}(),t=u&&u.createElement("base");return X(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:undefined,element:null,init:function(e){this.url=e,this.baseURI=q.dirname(e)+"/"},updateCssText:function(e){this.cssText!=e&&(this.cssText=e,this.inUse&&this.element&&(n(this.baseURI),this.syncCssText(),r()))},syncCssText:e?function(){this.element.styleSheet.cssText=this.cssText}:function(){var e=this.cssText;this.element.firstChild.nodeValue=e},startUse:function(){this.inUse||Ct.head.ready(i,this),this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&Ct.remove(this.element))},destroy:function(){this.element&&Ct.remove(this.element),this.element=null,this.cssText=null}})}(),At=ht("basis").extend({version:o,NODE_ENV:I,config:U,createSandbox:function(e){return n(r,R,c({noConflict:!0},e))},resolveNSFilename:lt,patch:dt,namespace:ht,require:pt,resource:nt,asset:function(e){return e},setImmediate:j,clearImmediate:F,nextTick:function(){j.apply(null,arguments)},Class:X,Token:V,DeferredToken:J,genUID:f,getter:O,ready:Nt,cleaner:kt,console:B,path:q,doc:Ct,object:{extend:l,complete:c,keys:h,values:p,slice:d,splice:v,merge:m,iterate:g},fn:{$undefined:y,$defined:b,$isNull:w,$isNotNull:E,$isSame:S,$isNotSame:x,$self:T,$const:N,$false:C,$true:k,$null:L,$undef:A,getter:O,nullGetter:M,wrapper:_,lazyInit:D,lazyInitAndRun:P,runOnce:H},array:l(vt,gt),string:Et,number:Tt,bool:{invert:function(e){return!e}},json:{parse:typeof JSON!="undefined"?JSON.parse:function(e){return Et.toObject(e,!0)}}});return ht("basis.dev").extend(B),U.autoload&&U.autoload.forEach(function(e){pt(e)}),At})(this)}).call(this)