(function(){"use strict";var e={"0.js":"app","1.js":"basis.net.ajax","2.js":"basis.ua","3.js":"basis.net","4.js":"basis.event","5.js":"basis.data","6.js":"basis.router","7.js":"basis.dom.event","8.js":"basis.data.dataset","9.js":"basis.ui","a.js":"basis.template.html","b.js":"basis.l10n","c.js":"basis.template.htmlfgen","d.js":"basis.template.const","e.js":"basis.template","f.js":"basis.template.declaration","g.js":"basis.template.store","h.js":"basis.template.theme","i.js":"basis.template.buildDom","j.js":"basis.dom.wrapper","k.js":"basis.dom","l.js":"basis.ui.button","m.js":"basis.ui.calendar","n.js":"basis.date","o.js":"basis.entity","p.js":"basis.ui.tree","q.js":"basis.ui.form","r.js":"basis.ui.field","s.js":"basis.ui.popup","t.js":"basis.cssom","u.js":"basis.layout","v.js":"basis.dom.computedStyle"},t={"0.css":"","4.tmpl":[[1,0,["element"],"div",[4,[["q79lo9ydk47gnuo3__","sectionName",1,"sectionName",0,["Month","Year","YearDecade","Century","YearQuarter","Quarter"]],["Basis-Calendar-Section-","sectionName",1,"sectionName",0,["Month","Year","YearDecade","Century","YearQuarter","Quarter"]],["","selected",2,"selected",0]],0,"Basis-Calendar-Section"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],[3,1,["title"]]],[1,1,["childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"]]],[1,1,["tabElement"],"div",[4,[["","selected",2,"selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click","select"],[3,1,["tabTitle"]]]],"1x.tmpl":[[1,0,["element"],"div",[4,0,0,"form"],[1,0,0,"h3",[3,0,0,"Profile form"]],[1,1,["childNodesElement"],"div"],[1,0,0,"div",[4,0,0,"aright"],[8,1,["submitButton"]]]]],"1w.tmpl":[[1,0,["element"],"div",[1,0,0,"h2",[3,0,0,"Statistic of compensatory leave"]],[1,0,0,"table",[4,0,0,"report"],[1,0,0,"thead",[1,0,0,"tr",[1,0,0,"th",[3,0,0,"Team"]],[1,0,0,"th",[3,0,0,"Name"]],[1,0,0,"th",[3,0,0,"Count"]]]],[1,1,["childNodesElement"],"tbody"]]]],"1v.tmpl":[[1,0,["element"],"div",[4,[["page-","unselected",0]],0,"page"],[2,[["name"],[0]],0,"id"],[1,0,0,"h2",[3,1,["name"]]],[1,1,["childNodesElement"],"div"],[1,1,["footer"],"div"],[8,1,["teamForm"]],[8,1,["employeeForm"]],[8,1,["userForm"]]]],"1u.tmpl":[[1,0,["element"],"div",[4,0,0,"form"],[1,0,0,"h3",[3,0,0,"User form"]],[1,1,["childNodesElement"],"div"],[1,0,0,"div",[4,0,0,"aright"],[8,1,["submitButton"]]]]],"1t.tmpl":[[1,0,["element"],"div",[4,0,0,"form"],[1,0,0,"h3",[3,0,0,"Employee form"]],[1,1,["childNodesElement"],"div"],[8,1,["maternityLeaves"]],[8,1,["compensatoryLeaves"]],[1,0,0,"div",[4,0,0,"aright"],[8,1,["submitButton"]]]]],"1s.tmpl":[[1,0,["element"],"tr",[1,0,0,"td",[3,1,["id"]]]]],"1r.tmpl":[[1,0,["element"],"table",[4,0,0,"maternity-leaves"],[1,0,0,"caption",[3,0,0,'Maternity leaves (format: "YYYY-MM-DD")']],[1,0,0,"thead",[1,0,0,"tr",[1,0,0,"th",[3,0,0,"ID"]],[1,0,0,"th",[3,0,0,"Date of start"]],[1,0,0,"th",[3,0,0,"Date of end"]]]],[1,1,["childNodesElement"],"tbody"],[1,0,0,"tbody",[1,0,0,"tr",[1,0,0,"td",[2,0,0,"colspan","3"],[4,0,0,"aright"],[3,1,["addButton"]]]]]]],"1q.tmpl":[[1,0,["element"],"tr",[1,0,0,"td",[3,1,["id"]]]]],"1p.tmpl":[[1,0,["element"],"table",[4,0,0,"maternity-leaves"],[1,0,0,"caption",[3,0,0,'Compensatory leaves (format: "YYYY-MM-DD")']],[1,0,0,"thead",[1,0,0,"tr",[1,0,0,"th",[3,0,0,"ID"]],[1,0,0,"th",[3,0,0,"Date"]],[1,0,0,"th",[3,0,0,"Description"]],[1,0,0,"th",[3,0,0,"Value"]]]],[1,1,["childNodesElement"],"tbody"],[1,0,0,"tbody",[1,0,0,"tr",[1,0,0,"td",[2,0,0,"colspan","4"],[4,0,0,"aright"],[3,1,["addButton"]]]]]]],"1o.tmpl":[[1,0,["element"],"div",[3,1,["title"]],[3,0,0,": "],[1,0,0,"strong",[1,1,["childNodesElement"],"span"]],[3,0,0," "],[3,1,["change"]],[3,1,["clear"]]]],"1n.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",1,"orientation",0,["v-left-top","v-right-top","v-center-top","v-left-center","v-right-center","v-center-center","v-left-bottom","v-right-bottom","v-center-bottom","h-left-top","h-right-top","h-center-top","h-left-center","h-right-center","h-center-center","h-left-bottom","h-right-bottom","h-center-bottom"]],["","anim:visible",1,"visible",2,["visible","hidden"]]],0,"Basis-Popup"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]],[3,1,["calendar"]],[3,0,0,"</b:inclide>"]],"1m.tmpl":[[1,0,["element"],"div",[4,0,0,"form"],[1,0,0,"h3",[3,0,0,"Team form"]],[1,1,["childNodesElement"],"div"],[1,0,0,"div",[4,0,0,"aright"],[8,1,["submitButton"]],[3,0,0," "],[8,1,["addEmployeeButton"]],[3,0,0," "],[8,1,["addUserButton"]]]]],"17.tmpl":[[1,0,["content","childNodesElement","element"],"div",[4,0,0,"Basis-FormContent"]]],"16.tmpl":[[1,1,["form","element"],"form",[4,0,0,"Basis-Form"],[2,[["method"],[0]],0,"method"],[2,[["action"],[0]],0,"action"],[2,[["target"],[0]],0,"target"],[2,[["enctype"],[0]],0,"enctype"],[6,"submit","validate"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-FormContent"]]]],"15.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","file"],[4,0,0,"native-type-file"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,"change"]]],"14.tmpl":[[1,0,["field","focus","childNodesElement","element"],"select",[4,[["","disabled",2,"disabled",0],["","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Select"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[2,[["multiple"],[0]],0,"multiple"],[6,"change"],[6,"keyup"],[6,"keypress"],[6,"keydown"],[6,"focus"],[6,"blur"]]],"13.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","radio"],[4,0,0,"native-type-radio"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]]],"12.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[2,[["readonly"],[0]],0,"readonly"],[2,[["indeterminate"],[0]],0,"indeterminate"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]]],"11.tmpl":[[1,0,["field","focus","element"],"textarea",[4,[["native-textarea_","validity",1,"validity",0,["invalid"]]],0,"native-textarea"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup","keyup updateSymbolsLeft"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change","change updateSymbolsLeft"],[6,"input","input updateSymbolsLeft"]]],"10.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","password"],[4,[["native-type-password_","validity",1,"validity",0,["invalid"]]],0,"native-type-password"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],"z.tmpl":[[1,0,["field","focus","element"],"input",[2,0,0,"type","text"],[4,[["native-type-text_","validity",1,"validity",0,["invalid"]]],0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],"y.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-MatchInput"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","text"],[4,[["native-type-text_","validity",1,"validity",0,["invalid"]]],0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"x.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",1,"orientation",0,["v-left-top","v-right-top","v-center-top","v-left-center","v-right-center","v-center-center","v-left-bottom","v-right-bottom","v-center-bottom","h-left-top","h-right-top","h-center-top","h-left-center","h-right-center","h-center-center","h-left-bottom","h-right-bottom","h-center-bottom"]],["","anim:visible",1,"visible",2,["visible","hidden"]]],0,"Basis-Popup Basis-DropdownList-Popup"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]]],"0.tmpl":[[1,0,["element"],"button",[4,[["","disabled",2,"disabled",0]],0,"Basis-Button dep4sabhpeokwg39__button"],[2,[["disabled"],[0]],0,"disabled"],[6,"click"],[1,0,0,"span",[4,0,0,"Basis-Button-Back dep4sabhpeokwg39__button-back"]],[1,0,0,"span",[4,0,0,"Basis-Button-Caption"],[3,1,["caption"]]]]],"1.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-ButtonPanel"],[1,0,["childNodesElement","content"],"div",[4,0,0,"Basis-ButtonPanel-Content"]]]],"2.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-ButtonGroup dep4sabhpeokwg39__group"]]],"w.tmpl":[[1,0,["element"],"div",[4,[["","selected",2,"selected",0],["","disabled",2,"disabled",0]],0,"Basis-Combobox-Item y1ua9g3ys8l3saqm__item"],[6,"click","select"],[3,1,["title"]]]],"18.tmpl":[[1,0,["element"],"div",[4,0,0,"float_left"],[1,1,["childNodesElement"],"ul"]]],"19.tmpl":[[1,0,["element"],"li",[1,0,0,"button",[6,"click","selectTeam"],[3,1,["name"]],[3,0,0," schedule"]]]],"v.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,"content",0,"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"span",[4,[["Basis-DropdownList-","opened",2,"opened",0],["","disabled",2,"disabled",0]],0,"Basis-DropdownList y1ua9g3ys8l3saqm__combobox"],[6,"click","togglePopup"],[6,"keyup"],[6,"keydown"],[6,"keypressed"],[6,"focus"],[6,"blur"],[2,[["tabindex"],[0]],0,"tabindex"],[1,0,0,"span",[4,0,0,"Basis-DropdownList-Caption"],[8,1,["captionItem"]]],[1,0,0,"span",[4,0,0,"Basis-DropdownList-Trigger"]],[8,1,["hiddenField"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-DropdownList-PopupContent"]]],[8,1,["description"]],[8,1,["example"]]]],"u.tmpl":[[1,1,["field","element"],"option",[2,[["value"],[0]],0,"value"],[2,[["selected"],[0]],0,"selected"],[2,[["disabled"],[0]],0,"disabled"],[3,1,["title"]]]],"t.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus","childNodesElement"],"select",[4,[["","disabled",2,"disabled",0],["","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Select"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[2,[["multiple"],[0]],0,"multiple"],[6,"change"],[6,"keyup"],[6,"keypress"],[6,"keydown"],[6,"focus"],[6,"blur"]]],[8,1,["description"]],[8,1,["example"]]]],"3.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-Calendar"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Header"],[1,1,["sectionTabs"],"div",[4,0,0,"Basis-Calendar-SectionTabs"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Body"],[1,0,0,"span",[6,"click","movePrev"],[4,0,0,"Basis-Calendar-ButtonPrevPeriod"],[1,0,0,"span",[3,0,0,"‹"]]],[1,0,0,"span",[6,"click","moveNext"],[4,0,0,"Basis-Calendar-ButtonNextPeriod"],[1,0,0,"span",[3,0,0,"›"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-Content"]]],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer"],[1,0,0,"div",[4,0,0,"Basis-Calendar-Footer-Date"],[1,0,0,"span",[4,0,0,"Basis-Calendar-Footer-Label"],[3,"l10n:today@0.l10n",0],[3,0,0,":"]],[1,0,0,"span",[6,"click","selectToday"],[4,0,0,"Basis-Calendar-Footer-Value"],[3,1,["today"]]]]]]],"a.tmpl":[[1,0,["element"],"li",[4,0,0,"Basis-TreeNode"],[1,1,["content"],"div",[4,0,0,"Basis-TreeNode-Title"],[1,0,0,"div",[4,[["Basis-TreeNode_Expander__","collapsed",2,"collapsed",0]],0,"Basis-TreeNode_Expander"],[6,"click","toggle"]],[1,0,0,"span",[4,[["Basis-TreeNode-FolderCaption_","collapsed",2,"collapsed",0],["Basis-TreeNode-Caption__","disabled",2,"disabled",0],["Basis-TreeNode-Caption__","selected",2,"selected",0]],0,"Basis-TreeNode-Caption Basis-TreeNode-FolderCaption"],[6,"click","select"],[3,1,["title"]]]],[1,1,["childNodesElement"],"ul",[4,[["Basis-TreeNode-Content__","collapsed",2,"collapsed",0]],0,"Basis-TreeNode-Content"]]]],"5.tmpl":[[1,0,["element"],"div",[4,[["","selected",2,"selected",0]],0,"Basis-Calendar-Section q79lo9ydk47gnuo3__Month Basis-Calendar-Section-Month"],[1,0,0,"div",[4,0,0,"Basis-Calendar-SectionTitle"],[3,1,["title"]],[3,0,0," "],[3,1,["year"]]],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Calendar-SectionContent"],[1,0,0,"div",[4,0,0,"Basis-Calendar-MonthWeekDays"],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.mon@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.tue@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.wed@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.thr@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.fri@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.sat@0.l10n",0]],[1,0,0,"span",[4,0,0,"Basis-Calendar-MonthWeekDays-Day"],[3,"l10n:day2.sun@0.l10n",0]]]]],[1,1,["tabElement"],"div",[4,[["","selected",2,"selected",0]],0,"Basis-Calendar-SectionTab"],[6,"click","select"],[3,1,["tabTitle"]]]],"6.tmpl":[[1,0,["element"],"a",[4,[["","nodePeriodName",1,"nodePeriodName",0,["day","month","year","decade","quarter"]],["","selected",2,"selected",0],["","disabled",2,"disabled",0],["","before",2,"before",0],["","after",2,"after",0]],0,"Basis-Calendar-Node q79lo9ydk47gnuo3__node"],[6,"click"],[3,1,["title"]]]],"1a.tmpl":[[1,0,["element"],"div",[8,1,["buttonPrevMonth"]],[1,0,0,"input",[4,0,0,"float_left acenter"],[2,0,0,"type","text"],[2,[["date"],[0]],0,"value"],[6,"click","showCalendar"],[2,0,0,"readonly"]],[8,1,["buttonNextMonth"]],[1,0,0,"div",[4,0,0,"calendar-wrapper"],[1,0,0,"div",[4,0,0,"aright"],[1,0,0,"button",[4,[["","isCalendarShown",0]],0,"calendar-close-button"],[6,"click","hideCalendar"],[3,0,0,"Close"]]],[8,1,["calendar"]]],[1,0,0,"div",[4,0,0,"float_left"],[3,0,0," "],[8,1,["buttonPublicHolidays"]]],[1,0,0,"div",[4,0,0,"float_left"],[3,0,0," "],[8,1,["buttonAdmin"]]],[1,0,0,"div",[4,0,0,"float_left"],[3,0,0," "],[8,1,["buttonReports"]]],[1,0,0,"div",[2,0,0,"id","content"],[8,1,["teamsList"]]]]],"1b.tmpl":[[1,0,["element"],"button",[4,[["","disabled",2,"disabled",0]],0,"Basis-Button dep4sabhpeokwg39__button float_left"],[2,[["disabled"],[0]],0,"disabled"],[6,"click"],[1,0,0,"span",[4,0,0,"Basis-Button-Back dep4sabhpeokwg39__button-back"]],[1,0,0,"span",[4,0,0,"Basis-Button-Caption"],[3,1,["caption"]]]],[3,0,0,"</b:inclide>"]],"s.tmpl":[[1,0,["element"],"label",[4,[["","selected",2,"selected",0],["","disabled",2,"disabled",0]],0,"Basis-CheckGroup-Item"],[6,"click","select"],[1,0,["field","focus"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[2,[["readonly"],[0]],0,"readonly"],[2,[["indeterminate"],[0]],0,"indeterminate"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,1,["content"],"span",[4,0,0,"Basis-CheckGroup-Item__text"],[3,1,["title"]]]]],"r.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","childNodesElement"],"div",[4,0,0,"Basis-CheckGroup"]]],[8,1,["description"]],[8,1,["example"]]]],"1c.tmpl":[[1,0,["element"],"p",[4,0,0,"auth_info"],[3,0,0,"You are currently logged in as "],[1,0,0,"a",[2,0,0,"href","#profile"],[3,1,["loggedInAs"]]],[3,0,0," "],[8,1,["logoutButton"]]]],"1d.tmpl":[[1,0,["element"],"div",[8,1,["loginStatus"]],[8,1,["loginForm"]]]],"q.tmpl":[[1,0,["element"],"label",[4,[["","selected",2,"selected",0],["","disabled",2,"disabled",0]],0,"Basis-RadioGroup-Item"],[6,"click","select"],[1,0,["field","focus"],"input",[2,0,0,"type","radio"],[4,0,0,"native-type-radio"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,1,["content"],"span",[4,0,0,"Basis-RadioGroup-Item__text"],[3,1,["title"]]]]],"1e.tmpl":[[1,0,["element"],"div",[1,0,0,"style",[2,0,0,"type","text/css"],[3,1,["styles_for_types"]]]]],"p.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","childNodesElement"],"div",[4,0,0,"Basis-RadioGroup"]]],[8,1,["description"]],[8,1,["example"]]]],"o.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field-Label"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,1,["field"],"label",[3,1,["value"]]]],[8,1,["description"]],[8,1,["example"]]]],"1f.tmpl":[[1,0,["element"],"div",[4,[["page-","unselected",0]],0,"page"],[2,[["name"],[0]],0,"id"],[1,0,0,"h2",[3,1,["name"]]],[1,1,["childNodesElement"],"div"],[1,1,["footer"],"div"]]],"n.tmpl":[[1,0,["element"],"div",[4,[["","disabled",2,"disabled",0],["","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field Basis-Field-Checkbox"],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,0,"label",[1,0,["field","focus"],"input",[2,0,0,"type","checkbox"],[4,0,0,"native-type-checkbox"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["disabled"],[0]],0,"disabled"],[2,[["checked"],[0]],0,"checked"],[2,[["readonly"],[0]],0,"readonly"],[2,[["indeterminate"],[0]],0,"indeterminate"],[6,"focus"],[6,"blur"],[6,"change"],[6,"keydown"],[6,"keyup"],[6,"keypress"]],[1,0,0,"span",[4,0,0,"Basis-Field-Checkbox__text"],[3,1,["title"]]]]]]],"m.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"textarea",[4,[["native-textarea_","validity",1,"validity",0,["invalid"]]],0,"native-textarea"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup","keyup updateSymbolsLeft"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change","change updateSymbolsLeft"],[6,"input","input updateSymbolsLeft"]],[8,1,["counter"]]],[8,1,["description"]],[8,1,["example"]]]],"l.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","password"],[4,[["native-type-password_","validity",1,"validity",0,["invalid"]]],0,"native-type-password"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"k.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","text"],[4,[["native-type-text_","validity",1,"validity",0,["invalid"]]],0,"native-type-text"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[2,[["readonly"],[0]],0,"readonly"],[2,[["disabled"],[0]],0,"disabled"],[2,[["maxlength"],[0]],0,"maxlength"],[2,[["autocomplete"],[0]],0,"autocomplete"],[2,[["placeholder"],[0]],0,"placeholder"],[6,"keydown"],[6,"keyup"],[6,"keypress"],[6,"focus"],[6,"blur"],[6,"change"],[6,"input"]]],[8,1,["description"]],[8,1,["example"]]]],"j.tmpl":[[1,1,["field","element"],"input",[2,0,0,"type","hidden"],[2,[["name"],[0]],0,"name"],[2,[["value"],[0]],0,"value"],[6,"change"]]],"i.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[1,0,["field","focus"],"input",[2,0,0,"type","file"],[4,0,0,"native-type-file"],[2,[["name"],[0]],0,"name"],[2,[["disabled"],[0]],0,"disabled"],[6,"change"]]],[8,1,["description"]],[8,1,["example"]]]],"1g.tmpl":[[1,0,["element"],"td",[4,[["","isShift",0],["","isType",0],["","weekend",0],["type_","type",0],["","checked",0],["","clickable",0]],0,"day"],[6,"click","dayClick"],[1,0,0,"span",[3,1,["title"]]]]],"1h.tmpl":[[1,0,["element"],"div",[4,[["","isActive",0]],0],[1,0,0,"div",[4,0,0,"month_title"],[1,0,0,"p",[3,1,["name"]],[3,0,0," - "],[3,1,["year"]]],[1,0,0,"p",[3,0,0,"working scheme: 5/2"]],[1,0,0,"p",[3,0,0,"working days: "],[3,1,["workingDays"]]]],[1,0,0,"table",[4,0,0,"month"],[1,0,0,"tbody",[1,1,["childNodesElement"],"tr"]]]]],"h.tmpl":[[1,1,["sampleContainer","element"],"div",[4,[["","disabled",2,"disabled",0],["","focused",2,"focused",0],["Basis-Field__","validity",1,"validity",1,["indeterminate","valid","invalid"]]],0,"Basis-Field"],[2,[["error"],[0]],0,"title"],[1,0,0,"div",[4,0,0,"Basis-Field-Title"],[1,0,0,"label",[1,1,["titleEl"],"span",[3,1,["title"]]]]],[1,1,["content"],"div",[4,0,0,"Basis-Field-Container"],[8,1,["fieldPlace"]]],[8,1,["description"]],[8,1,["example"]]]],"1i.tmpl":[[1,0,["element"],"div",[4,0,0,"employee"],[1,0,0,"div",[4,0,0,"name"],[3,1,["name"]],[3,0,0," "],[3,1,["surname"]]],[1,1,["childNodesElement"],"div"]]],"1j.tmpl":[[1,0,["element"],"div",[4,0,0,"team"],[1,0,0,"h1",[3,0,0,"Team "],[3,1,["code"]]],[8,1,["modeSwitcher"]],[8,1,["month"]],[1,1,["childNodesElement"],"div"]]],"g.tmpl":[[1,0,["element"],"div",[4,0,0,"Basis-Field-LengthCounter"],[3,"l10n:symbolsLeft@1.l10n",0],[3,0,0,": "],[3,1,["availChars"]]]],"1k.tmpl":[[1,0,["element"],"div",[4,0,0,"agenda"],[1,0,0,"h2",[3,0,0,"Agenda"]],[1,1,["childNodesElement"],"ul"]]],"1l.tmpl":[[1,0,["element"],"li",[4,0,0,"agenda_li"],[1,0,0,"span",[4,[["","isType",0],["","isShift",0],["type_","id",0]],0,"agenda_box"],[1,0,0,"span"]],[3,0,0," - "],[3,1,["name"]],[3,0,0," "],[1,0,0,"button",[6,"click","applyType"],[3,0,0,"apply for selected days"]]]],"f.tmpl":[[1,0,["element"],"span",[4,0,0,"Basis-Field-Description"],[3,1,["description"]]]],"e.tmpl":[[1,0,["element"],"span",[4,0,0,"Basis-Field-Sample"],[3,1,["example"]]]],"7.tmpl":[[1,0,["element"],"ul",[4,0,0,"Basis-Tree"]]],"8.tmpl":[[1,0,["element"],"li",[4,0,0,"Basis-TreePartitionNode"],[1,0,0,"div",[4,0,0,"Basis-TreePartitionNode-Title"],[1,0,0,"span",[3,1,["title"]]]],[1,1,["childNodesElement"],"ul",[4,0,0,"Basis-TreePartitionNode-Content"]]]],"9.tmpl":[[1,0,["element"],"li",[4,0,0,"Basis-TreeNode"],[1,1,["content"],"div",[4,0,0,"Basis-TreeNode-Title"],[1,0,0,"span",[4,[["Basis-TreeNode-Caption__","disabled",2,"disabled",0],["Basis-TreeNode-Caption__","selected",2,"selected",0]],0,"Basis-TreeNode-Caption"],[6,"click","select"],[3,1,["title"]]]]]],"d.tmpl":[[1,0,["element"],"div",[2,0,0,"id","Basis-PopupStack"],[4,[["","hasChildren",2,"hasChildren",0]],0]]],"c.tmpl":[[1,0,["element"],"div",[4,[["mode-","orientation",1,"orientation",0,["v-left-top","v-right-top","v-center-top","v-left-center","v-right-center","v-center-center","v-left-bottom","v-right-bottom","v-center-bottom","h-left-top","h-right-top","h-center-top","h-left-center","h-right-center","h-center-center","h-left-bottom","h-right-bottom","h-center-bottom"]],["","anim:visible",1,"visible",2,["visible","hidden"]]],0,"Basis-Balloon"],[6,"click"],[1,0,0,"div",[4,0,0,"Basis-Balloon-Canvas"],[1,0,0,"div",[4,0,0,"corner-left-top"]],[1,0,0,"div",[4,0,0,"corner-right-top"]],[1,0,0,"div",[4,0,0,"side-top"]],[1,0,0,"div",[4,0,0,"side-left"]],[1,0,0,"div",[4,0,0,"side-right"]],[1,0,0,"div",[4,0,0,"content"]],[1,0,0,"div",[4,0,0,"corner-left-bottom"]],[1,0,0,"div",[4,0,0,"corner-right-bottom"]],[1,0,0,"div",[4,0,0,"side-bottom"]],[1,0,0,"div",[4,0,0,"tail"]]],[1,0,0,"div",[4,0,0,"Basis-Balloon-Layout"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Balloon-Content"]]]]],"b.tmpl":[[1,0,["element"],"div",[4,[["popup-","orientation",1,"orientation",0,["v-left-top","v-right-top","v-center-top","v-left-center","v-right-center","v-center-center","v-left-bottom","v-right-bottom","v-center-bottom","h-left-top","h-right-top","h-center-top","h-left-center","h-right-center","h-center-center","h-left-bottom","h-right-bottom","h-center-bottom"]],["","anim:visible",1,"visible",2,["visible","hidden"]]],0,"Basis-Popup"],[1,0,["content","childNodesElement"],"div",[4,0,0,"Basis-Popup-Content"]]]],"0.l10n":{"en-US":{quarter:["1 Quarter","2 Quarter","3 Quarter","4 Quarter"],today:"Today",selected:"Selected",month:{jan:"January",feb:"February",mar:"March",apr:"April",may:"May",jun:"June",jul:"July",aug:"August",sep:"September",oct:"October",nov:"November",dec:"December"},monthShort:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"},day:{mon:"Monday",tue:"Tuesday",wed:"Wednesday",thr:"Thursday",fri:"Friday",sat:"Saturday",sun:"Sunday"},day2:{mon:"Mo",tue:"Tu",wed:"We",thr:"Th",fri:"Fr",sat:"Sa",sun:"Su"},day3:{mon:"Mon",tue:"Tue",wed:"Wed",thr:"Thr",fri:"Fri",sat:"Sat",sun:"Sun"}}},"1.l10n":{"en-US":{symbolsLeft:"Symbols left"}},"2.l10n":{"en-US":{validator:{regExpWrongFormat:"The value has wrong format.",required:"The field is required and must have a value.",numberWrongFormat:"The value has wrong format of number.",currencyWrongFormat:"The value has wrong format of currency.",currencyMustBeGreaterZero:"The value must be greater than zero.",emailWrongFormat:"The value has a wrong format of e-mail.",urlWrongFormat:"The value has a wrong format of URL.",minLengthError:"The value must be longer than {0} symbols.",maxLengthError:"The value must be shorter than {0} symbols."}}},"z.js":function(e,t,n,r,i,s,o,u,a){function v(){return n.genUID()+"__"}function m(e,t,n){function r(t,n){var r=e.indexOf(t,n);N=r!==-1?r+t.length:S.length}function i(){var e=S[N];if(e!=='"'&&e!=="'")return;for(N++;N<x&&S[N]!==e;N++)S[N]==="\\"&&N++;return!0}function s(){var e=S[N];if(e==="(")return r(")",N+1),!0;if(e==="["){for(N++;N<x&&S[N]!=="]";N++)i();return!0}}function o(){if(S[N]!=="/"||S[N+1]!=="*")return;return r("*/",N+2),!0}function u(){for(;N<x&&S[N]!=")";N++)if(o()||s()||a()||y())continue}function a(){if(S[N]!==":")return;var t=e.substr(N+1,d).match(p);return t&&(N+=t[0].length+1,u()),!0}function m(){if(S[N]!=="@")return;var t=e.substr(N+1,h).match(c);return t&&(N+=t[0].length,C=!0),!0}function g(){if(S[N]!=="{")return;if(C){N++,b(!0);return}for(N++;N<x&&S[N]!=="}";N++)i()||s();return!0}function y(){if(S[N]!==".")return;var n=e.substr(N+1,l).match(f);return n&&(N++,w[N+E.length/2*t.length-1]=N,E.push(e.substring(T,N),t),T=N),!0}function b(e){for(C=!1;N<x;N++){if(o()||m()||a()||s()||y())continue;if(e&&S[N]=="}")return;g()}}var w={},E=[],S=e.split(""),x=S.length,T=0,N=0,C;return t||(t=v()),b(!1),E=E.join("")+e.substring(T),n?{css:E,map:w,prefix:t}:E}var f=/^\-?([_a-z]|[^\x00-\xb1]|\\[0-9a-f]{1,6}(\r\n|[ \n\r\t\f])?|\\[^\n\r\f0-9a-f])/i,l=8,c=/^(media|supports|document)\b/i,h=8,p=/^(not|has|matches|nth-child|nth-last-child)\(/i,d=15;t.exports=m},"r.js":function(e,t,n,r,i,s,o,u,a){function N(e){return v.apply(null,arguments),function(){this.revalidateRule(e),m[e].apply(this,arguments)}}function B(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach(function(e){n.array.add(this,e)},t),t}function z(e){return e.tmpl.title||e.tmpl.titleText}function et(e){var t=e&&e.type||"text";if(Z.hasOwnProperty(t))return new Z[t](e);throw"Unknown field type `"+t+"`"}var f=this.path,l=n.Class,c=n.getter,h=n.array.from,p=n.require("./k.js"),d=n.require("./4.js"),v=d.create,m=d.events,g=n.require("./5.js").Value,y=n.require("./9.js").Node,b=n.require("./s.js").Popup,w=n.require("./b.js").dictionary("./2.l10n"),E=n.require("./e.js").define(f,{Example:n.resource("./e.tmpl"),Description:n.resource("./f.tmpl"),Counter:n.resource("./g.tmpl"),Field:n.resource("./h.tmpl"),File:n.resource("./i.tmpl"),Hidden:n.resource("./j.tmpl"),Text:n.resource("./k.tmpl"),Password:n.resource("./l.tmpl"),Textarea:n.resource("./m.tmpl"),Checkbox:n.resource("./n.tmpl"),Label:n.resource("./o.tmpl"),RadioGroup:n.resource("./p.tmpl"),RadioGroupItem:n.resource("./q.tmpl"),CheckGroup:n.resource("./r.tmpl"),CheckGroupItem:n.resource("./s.tmpl"),Select:n.resource("./t.tmpl"),SelectItem:n.resource("./u.tmpl"),Combobox:n.resource("./v.tmpl"),ComboboxItem:n.resource("./w.tmpl"),ComboboxDropdownList:n.resource("./x.tmpl"),MatchInput:n.resource("./y.tmpl")});n.require("./e.js").define(f+".native",{text:n.resource("./z.tmpl"),password:n.resource("./10.tmpl"),textarea:n.resource("./11.tmpl"),checkbox:n.resource("./12.tmpl"),radio:n.resource("./13.tmpl"),select:n.resource("./14.tmpl"),file:n.resource("./15.tmpl")});var S="indeterminate",x="valid",T="invalid",C=y.subclass({className:f+".Field",childClass:null,nextFieldOnEnter:!0,serializable:!0,name:"",title:"",error:"",example:null,focused:!1,defaultValue:undefined,value:undefined,validators:null,validity:S,revalidateEvents:["change","fieldChange"],revalidateRule:function(e){this.error&&this.revalidateEvents.indexOf(e)!=-1&&this.validate()},focusable:!0,emit_commit:N("commit"),emit_change:N("change","oldValue"),emit_validityChanged:v("validityChanged","oldValidity"),emit_errorChanged:v("errorChanged"),emit_exampleChanged:v("exampleChanged"),emit_descriptionChanged:v("descriptionChanged"),emit_fieldInput:N("fieldInput","event"),emit_fieldChange:N("fieldChange","event"),emit_fieldKeydown:N("fieldKeydown","event"),emit_fieldKeypress:N("fieldKeypress","event"),emit_fieldKeyup:N("fieldKeyup","event")&&function(e){this.nextFieldOnEnter&&(e.key==e.KEY.ENTER||e.key==e.KEY.CTRL_ENTER)&&(e.preventDefault(),this.commit()),m.fieldKeyup.call(this,e)},emit_fieldFocus:N("fieldFocus","event")&&function(e){this.focused=!0,this.revalidateRule("fieldFocus"),m.fieldFocus.call(this,e)},emit_fieldBlur:N("fieldBlur","event")&&function(e){this.focused=!1,this.revalidateRule("fieldBlur"),m.fieldBlur.call(this,e)},template:E.Field,binding:{focused:{events:"fieldFocus fieldBlur",getter:function(e){return e.focused?"focused":""}},name:"name",title:"title",value:{events:"change",getter:function(e){return e.getValue()}},defaultValue:{getter:"defaultValue"},validity:{events:"validityChanged",getter:"validity"},error:{events:"errorChanged",getter:"error"},example:"satellite:",description:"satellite:",titleText:function(e){return e.title}},action:"focus blur change keydown keypress keyup input".split(" ").reduce(function(e,t){var r="emit_field"+n.string.capitalize(t),i=function(e){this.syncFieldValue_(),this[r](e)};return e[t]=i,e},{}),satellite:{example:{events:"exampleChanged",existsIf:function(e){return e.example},instance:y.subclass({className:f+".Example",template:E.Example,binding:{example:g.factory("ownerChanged","owner").pipe("exampleChanged","example")}})},description:{events:"descriptionChanged",existsIf:function(e){return e.description},instance:y.subclass({className:f+".Description",template:E.Description,binding:{example:g.factory("ownerChanged","owner").pipe("descriptionChanged","description")}})}},init:function(){this.validators=h(this.validators),typeof this.defaultValue=="undefined"&&(this.defaultValue=this.value),y.prototype.init.call(this);if(this.value){var e=this.value;this.value=undefined,this.setValue(e)}this.init=!0},setExample:function(e){e!=this.example&&(this.example=e,this.emit_exampleChanged())},setDescription:function(e){e!=this.description&&(this.description=e,this.emit_descriptionChanged())},syncFieldValue_:function(){this.setValue(this.getValue())},getValue:function(){return this.value},setValue:function(e){if(this.value!==e){var t=this.value;this.value=e,this.init===!0&&this.emit_change(t)}},reset:function(){this.setValue(this.defaultValue),this.setValidity()},attachValidator:function(e,t){n.array.add(this.validators,e)&&t&&this.validate()},detachValidator:function(e,t){n.array.remove(this.validators,e)&&t&&this.validate()},setValidity:function(e,t){e||(e=S),this.validity!==e&&(this.validity=e,this.emit_validityChanged());if(!t||e!=T)t="";this.error!=t&&(this.error=t,this.emit_errorChanged())},validate:function(e){var t;this.setValidity();for(var n=0;n<this.validators.length;n++)if(t=this.validators[n](this))return e||this.setValidity(T,t.message),t;this.getValue()!=""&&this.setValidity(x)},commit:function(){this.emit_commit()},destroy:function(){this.validators=null,this.error=null,this.example=null,this.value=null,this.defaultValue=null,y.prototype.destroy.call(this)}}),k=C.subclass({className:f+".File",template:E.File}),L=C.subclass({className:f+".TextField",emit_minLengthChanged:v("minLengthChanged"),emit_maxLengthChanged:v("maxLengthChanged"),defaultValue:"",readOnly:!1,minLength:0,maxLength:0,autocomplete:"",placeholder:"",binding:{minlength:{events:"minLengthChanged",getter:function(e){return e.minLength>0?e.minLength:""}},maxlength:{events:"maxLengthChanged",getter:function(e){return e.maxLength>0?e.maxLength:""}},readonly:function(e){return e.readOnly?"readonly":""},autocomplete:"autocomplete",placeholder:"placeholder"},init:function(){typeof this.value=="undefined"&&(this.value=""),C.prototype.init.call(this);var e=this.minLength;delete this.minLength,this.setMinLength(e);var t=this.maxLength;delete this.maxLength,this.setMaxLength(t)},setValue:function(e){return C.prototype.setValue.call(this,e==null?"":String(e))},setReadOnly:function(e){this.readOnly=!!e,this.updateBind("readonly")},setMinLength:function(e){e=Math.max(parseInt(e,10)||0,0),this.minLength!=e&&(!this.minLength^!e&&(e?this.attachValidator(Y.MinLength):this.detachValidator(Y.MinLength)),this.minLength=e,this.emit_minLengthChanged())},setMaxLength:function(e){e=Math.max(parseInt(e,10)||0,0),this.maxLength!=e&&(!this.maxLength^!e&&(e?this.attachValidator(Y.MaxLength):this.detachValidator(Y.MaxLength)),this.maxLength=e,this.emit_maxLengthChanged())},syncFieldValue_:function(){this.tmpl&&this.tmpl.field&&this.setValue(this.tmpl.field.value)}}),A=L.subclass({className:f+".Hidden",focusable:!1,template:E.Hidden}),O=L.subclass({className:f+".Text",template:E.Text}),M=L.subclass({className:f+".Password",template:E.Password}),_=L.subclass({className:f+".Textarea",nextFieldOnEnter:!1,symbolsLeft:0,emit_symbolsLeftChanged:v("symbolsLeftChanged"),emit_fieldFocus:r.opera?function(e){this.contentEditable=!0,this.contentEditable=!1,L.prototype.emit_fieldFocus.call(this,e)}:L.prototype.emit_fieldFocus,template:E.Textarea,binding:{availChars:{events:"symbolsLeftChanged",getter:"symbolsLeft"},counter:"satellite:"},action:{updateSymbolsLeft:function(){this.updateSymbolsLeft()}},satellite:{counter:{events:"maxLengthChanged",existsIf:function(e){return e.maxLength>0},instance:y.subclass({className:f+".Counter",template:E.Counter,binding:{availChars:g.factory("ownerChanged","owner").pipe("symbolsLeftChanged","symbolsLeft")}})}},init:function(){L.prototype.init.call(this),this.updateSymbolsLeft()},updateSymbolsLeft:function(){var e=this.maxLength?this.maxLength-this.getValue().length:-1;e<=0&&(e=0),this.symbolsLeft!=e&&(this.symbolsLeft=e,this.emit_symbolsLeftChanged())}}),D=C.subclass({className:f+".Checkbox",value:!1,indeterminate:!1,template:E.Checkbox,binding:{indeterminate:"indeterminate",checked:{events:"change",getter:function(e){return e.value?"checked":""}}},emit_change:function(e){C.prototype.emit_change.call(this,e),this.syncIndeterminate()},toggle:function(){this.setValue(!this.getValue())},setValue:function(e){return C.prototype.setValue.call(this,!!e)},syncFieldValue_:function(){this.tmpl&&this.tmpl.field&&this.setValue(!!this.tmpl.field.checked)},syncIndeterminate:function(){this.indeterminate=!this.indeterminate,this.updateBind("indeterminate"),this.indeterminate=!this.indeterminate,this.updateBind("indeterminate")},setIndeterminate:function(e){this.indeterminate=!!e,this.syncIndeterminate()}}),P=C.subclass({className:f+".Label",focusable:!1,template:E.Label}),H=y.subclass({className:f+".ComplexFieldItem",childClass:null,name:"",binding:{name:"name",title:function(e){return e.getTitle()},value:function(e){return e.getValue()},checked:{events:"select unselect",getter:function(e){return e.selected?"checked":""}}},action:{select:function(e){this.isDisabled()||(this.select(this.contextSelection&&this.contextSelection.multiple),e.sender.tagName!="INPUT"&&e.die())},selectByKey:function(e){(!this.isDisabled()&&e.key==e.KEY.SPACE||e.key==e.KEY.ENTER)&&this.action.select.call(this,e)}},titleGetter:n.getter(function(e){return e.title||e.getValue()}),valueGetter:c("value"),getTitle:function(){return this.titleGetter(this)},getValue:function(){return this.valueGetter(this)},setName:function(e){this.name!=e&&(this.name=e,this.updateBind("name"))}}),j=l(C,{className:f+".ComplexField",childClass:H,ignoreSelectionChanges_:!1,emit_childNodesModified:function(e){C.prototype.emit_childNodesModified.call(this,e),this.init===!0&&this.syncSelectedChildren_()},selection:{multiple:!1},binding:{multiple:function(e){return e.selection.multiple}},listen:{selection:{itemsChanged:function(e){if(!this.ignoreSelectionChanges_){var t=e.getValues("getValue()");this.setValue(e.multiple?t:t[0])}}}},syncSelectedChildren_:function(){var e;this.selection.multiple?e=this.value.length?this.childNodes.filter(function(e){return this.value.indexOf(e.getValue())!==-1},this):[]:e=this.childNodes.filter(function(e){return e.getValue()===this.value},this),this.ignoreSelectionChanges_=!0,this.selection.set(e),this.ignoreSelectionChanges_=!1},setValue:function(e){var t=this.value;if(e===t)return;if(this.selection.multiple){e=B(e);if(!Array.isArray(t))t=e;else if(e.length==t.length){var n=!1;for(var r=0;!n&&r<e.length;r++)n=t.indexOf(e[r])==-1;if(!n)return}}this.value=e,this.init===!0&&t!==e&&this.emit_change(t),this.value===e&&this.syncSelectedChildren_()}}),F=j.subclass({className:f+".RadioGroup",template:E.RadioGroup,childClass:{className:f+".RadioGroupItem",template:E.RadioGroupItem}}),I=j.subclass({className:f+".CheckGroup",template:E.CheckGroup,selection:{multiple:!0},childClass:{className:f+".CheckGroupItem",template:E.CheckGroupItem}}),q=j.subclass({className:f+".Select",template:E.Select,templateSync:function(){j.prototype.templateSync.call(this),this.syncFieldValue_()},syncFieldValue_:function(){if(this.tmpl&&this.tmpl.field){var e;this.selection.multiple&&this.tmpl.field.selectedIndex!=-1?e=this.childNodes.filter(function(e){return e.tmpl&&e.tmpl.field&&e.tmpl.field.selected}):e=[this.childNodes[this.tmpl.field.selectedIndex]],this.selection.set(e)}},childClass:{className:f+".SelectItem",template:E.SelectItem}}),R=H.subclass({className:f+".ComboboxItem",template:E.ComboboxItem,binding:{title:function(e){return e.getTitle()||" "}},action:{select:function(e){if(!this.isDisabled()){this.select();var t=this.parentNode||this.owner;t&&t.hide(),e.die()}}}}),U=j.subclass({className:f+".Combobox",childClass:R,emit_change:function(e){j.prototype.emit_change.call(this,e);if(this.property){var t=this.getValue();this.property.set(t)}},emit_childNodesModified:function(e){j.prototype.emit_childNodesModified.call(this,e),this.property&&this.setValue(this.property.value)},caption:null,property:null,opened:!1,popup:null,popupClass:b.subclass({className:f+".ComboboxDropdownList",autorotate:!0,relElement:"owner:field",template:E.ComboboxDropdownList,templateSync:function(){b.prototype.templateSync.call(this),this.owner&&this.owner.childNodesElement&&(this.tmpl.content||this.element).appendChild(this.owner.childNodesElement)}}),satellite:{popup:{config:"popup"},hiddenField:{existsIf:function(e){return e.name},instance:A.subclass({className:f+".ComboboxHidden",emit_ownerChanged:function(e){A.prototype.emit_ownerChanged.call(this,e),this.owner&&this.setValue(this.owner.getValue())},listen:{owner:{change:function(){this.setValue(this.owner.getValue())}}}}),config:function(e){return{name:e.name,value:e.getValue()}}}},template:E.Combobox,binding:{captionItem:"satellite:",hiddenField:"satellite:",opened:"opened"},action:{togglePopup:function(){this.isDisabled()||this.popup.visible?this.hide():this.show()},keyup:function(e){var t=this.selection.pick(),n;switch(e.key){case e.KEY.DOWN:if(e.altKey){this.popup.visible?this.hide():this.isDisabled()||this.show();return}n=t?t.nextSibling:this.firstChild;while(n&&n.isDisabled())n=n.nextSibling;break;case e.KEY.UP:if(e.altKey){this.popup.visible?this.hide():this.isDisabled()||this.show();return}n=t?t.previousSibling:this.lastChild;while(n&&n.isDisabled())n=n.previousSibling}n&&(n.select(),this.focus()),this.emit_fieldKeyup(e)},keydown:function(e){switch(e.key){case e.KEY.DOWN:case e.KEY.UP:e.die();break;case e.KEY.ENTER:this.popup.visible&&this.hide(),e.die()}this.emit_fieldKeydown(e)}},init:function(){this.property&&(this.value=this.property.value),j.prototype.init.call(this),this.setSatellite("captionItem",new this.childClass({delegate:g.from(this.selection,"itemsChanged",function(e){return e.pick()}),getTitle:function(){if(this.delegate)return this.delegate.getTitle()},getValue:function(){if(this.delegate)return this.delegate.getValue()},handler:{delegateChanged:function(){this.updateBind("title")}}})),this.popup=new this.popupClass(this.popup),this.setSatellite("popup",this.popup),this.opened=g.from(this.popup,"show hide","visible"),this.property&&this.property.link(this,this.setValue)},templateSync:function(){y.prototype.templateSync.call(this),this.childNodesElement&&this.popup&&(this.popup.tmpl.content||this.popup.element).appendChild(this.childNodesElement),this.popup.ignoreClickFor=[this.tmpl.field]},show:function(){this.tmpl&&(this.popup.show(),this.focus())},hide:function(){this.popup.hide()},getTitle:function(){var e=this.selection.pick();return e&&e.getTitle()},destroy:function(){this.property=null,this.opened=null,this.popup.destroy(),this.popup=null,j.prototype.destroy.call(this)}}),W=g.subclass({className:f+".MatchProperty",matchFunction:function(e,t){if(!t){var n=e._original||this.textNodeGetter(e);Array.isArray(n)||(n=[n]),e._original=n;var r=0;for(var i=n.length;i-->0;){var s=n[i];if(!s)continue;var o=s.nodeValue.split(this.rx);o.length>1?(e._replaced||(e._replaced={}),p.replace(e._replaced[i]||s,e._replaced[i]=p.createElement("SPAN.matched",p.wrap(o,this.map))),r++):e._replaced&&e._replaced[i]&&(p.replace(e._replaced[i],s),delete e._replaced[i])}return r>0}if(e._replaced){for(var u in e._replaced)p.replace(e._replaced[u],e._original[u]);delete e._replaced,delete e._original}return!1},emit_change:function(e){this.rx=this.regexpGetter(this.value),g.prototype.emit_change.call(this,e)},init:function(){var e=this.startPoints||"";this.textNodeGetter=c(this.textNodeGetter||z),typeof this.regexpGetter!="function"&&(this.regexpGetter=function(t){return new RegExp("("+e+")("+n.string.forRegExp(t)+")","i")}),this.map={},this.map[this.wrapElement||"SPAN.match"]=function(e,t){return t%3==2},g.prototype.init.call(this,"",this.handlers,String.trim)}}),X={childNodesModified:function(e,t){t.inserted&&t.inserted.forEach(function(e){this.matchFunction(e,this.value=="")},this)}},V=W.subclass({className:f+".Matcher",emit_change:function(e){W.prototype.emit_change.call(this,e),this.applyMatch()},init:function(){W.prototype.init.call(this),this.node.addHandler(X,this)},applyMatch:function(){this.node.childNodes.forEach(function(e){this.matchFunction(e,this.value=="")},this)}}),$=W.subclass({className:f+".MatchFilter",emit_change:function(e){W.prototype.emit_change.call(this,e),this.node.setMatchFunction(this.value?this.matchFunction.bind(this):null)}}),J=O.subclass({className:f+".MatchInput",template:E.MatchInput,matchFilterClass:$,emit_fieldKeyup:function(e){O.prototype.emit_fieldKeyup.call(this,e),this.matchFilter.set(this.getValue())},emit_change:function(e){O.prototype.emit_change.call(this,e),this.matchFilter.set(this.getValue())},init:function(){O.prototype.init.call(this),this.matchFilter=new this.matchFilterClass(this.matchFilter)}}),K=/^([a-z0-9а-яА-ЯёЁ\.\-\_]+|[a-z0-9а-яА-ЯёЁ\.\-\_]+\+[a-z0-9а-яА-ЯёЁ\.\-\_]+)\@(([a-z0-9а-яА-ЯёЁ][a-z0-9а-яА-ЯёЁ\-]*\.)+[a-zа-яА-ЯёЁ]{2,6}|(\d{1,3}\.){3}\d{1,3})$/i,Q=/^(https?\:\/\/)?((\d{1,3}\.){3}\d{1,3}|([a-zA-Zа-яА-ЯёЁ0-9][a-zA-Zа-яА-ЯёЁ\d\-\._]+\.)+[a-zA-Zа-яА-ЯёЁ]{2,7})(:\d+)?(\/[^\?]*(\?\S+(\=\S*))*(\#\S*)?)?$/i,G=l(null,{className:f+".ValidatorError",init:function(e,t){this.field=e,this.message=String(t)}}),Y={RegExp:function(e){return e.constructor!=RegExp&&(e=new RegExp(e)),function(t){var n=String(t.getValue());if(n!=""&&!n.match(e))return new G(t,w.token("validator.regExpWrongFormat"))}},Required:function(e){var t=e.getValue();if(n.fn.$isNull(t)||String(t).trim()=="")return new G(e,w.token("validator.required"))},Number:function(e){var t=e.getValue();if(isNaN(t))return new G(e,w.token("validator.numberWrongFormat"))},Currency:function(e){var t=e.getValue();if(isNaN(t))return new G(e,w.token("validator.currencyWrongFormat"));if(t<=0)return new G(e,w.token("validator.currencyMustBeGreaterZero"))},Email:function(e){var t=String(e.getValue()).trim();if(t!=""&&!t.match(K))return new G(e,w.token("validator.emailWrongFormat"))},Url:function(e){var t=String(e.getValue()).trim();if(t!=""&&!t.match(Q))return new G(e,w.token("validator.urlWrongFormat"))},MinLength:function(e){var t=e.getValue(),r=n.fn.$isNotNull(t.length)?t.length:String(t).length;if(t&&r<e.minLength)return new G(e,n.string.format(String(w.token("validator.minLengthError")),e.minLength))},MaxLength:function(e){var t=e.getValue(),r=n.fn.$isNotNull(t.length)?t.length:String(t).length;if(r>e.maxLength)return new G(e,n.string.format(String(w.token("validator.maxLengthError")),e.maxLength))}},Z={hidden:A,file:k,text:O,password:M,textarea:_,checkbox:D,label:P,select:q,combobox:U,radiogroup:F,checkgroup:I};t.exports={VALIDITY:{INDETERMINATE:S,INVALID:T,VALID:x},validator:Y,ValidatorError:G,create:et,addFieldType:function(e,t){if(!t.isSubclassOf(C))throw"basis.ui.field.addFieldType: fieldClass is not a subclass of Field (ignored)";Z[e]=t},Field:C,Hidden:A,File:k,TextField:L,Text:O,Password:M,Textarea:_,Checkbox:D,Label:P,ComplexFieldItem:H,ComplexField:j,Select:q,RadioGroup:F,CheckGroup:I,Combobox:U,Matcher:V,MatchProperty:W,MatchFilter:$,MatchInput:J}},"t.js":function(e,t,n,r,i,s,o,u,a){function S(e,t){return L(t,!0).createRule(e)}function x(e,t){return e.getPropertyPriority?e.getPropertyPriority(t)==y:!1}function T(e){var t="genericRule-"+b++;e&&R(e).add(t);var n=S("."+t);return n.token=t,n}function N(e,t){var n=e.match(/^([^{]+)\{(.*)\}\s*$/);if(n){var r=n[1].trim().split(/\s*,\s*/);for(var i=0;i<r.length;i++)this.addRule(r[i],n[2]||null,t++);return t-1}}function C(e){try{e.cssRules||(e.cssRules=e.rules)}catch(t){}return e.insertRule||(e.insertRule=N),e.deleteRule||(e.deleteRule=e.removeRule),e}function k(e,t){var r=d.createElement(e?n.string.format('link[type="text/css"][rel="{alt}stylesheet"][href="{url}"]',{alt:t?"alternate ":"",url:e.replace(/\"/g,'\\"')}):'style[type="text/css"]');return n.doc.head.add(r),C(r.sheet||r.styleSheet)}function L(e,t){return e||(e="DefaultGenericStyleSheet"),w[e]||t&&(w[e]=new j(k())),w[e]}function _(e,t,n,r){r=r||{},t=t.split(" ");for(var i=0,s;s=t[i];i++)if(typeof A.style[s]!="undefined"){n&&(M["css-"+e]=s),O[e]={key:s,getter:r[s]};return}}function D(e,t,n){var r=O[t],i=r?r.key:h(t.replace(/^-ms-/,"ms-"));if(!i)return;r&&r.getter&&(n=r.getter(n));var s=!!g.test(n),o=e.style;if(!s&&!x(o,t)){if(E)try{e.style[i]=n}catch(f){}else e.style[i]=n;return e.style[i]}n=n.replace(g,"");if(o.setProperty)s||o.setProperty(t,""),o.setProperty(t,n,s?y:"");else{var u=i+": "+n+(s?" !"+y:"")+";",a=o[i]?t+"\\s*:\\s*"+o[i]+"(\\s*!"+y+")?\\s*;?":"^";try{o.cssText=o.cssText.replace(new RegExp(a,"i"),u)}catch(f){}}}function P(e,t){for(var n in t)D(e,n,t[n]);return e}function H(e,t){return D(e,"display",typeof t=="string"?t:t?"":"none")}function B(e,t){return D(e,"visibility",t?"":"hidden")}function I(e){return function(){for(var t=0,n;n=this.rules[t];t++)n[e].apply(n,arguments)}}function z(e){return U[e]||(U[e]=new RegExp("\\s*\\b"+e+"\\b"))}function V(e,t){var n=(t?"g":"s")+e;return X[n]||(X[n]=new RegExp((t?"":"\\s*")+"\\b"+e+"\\S*\\b"))}function Q(e){return function(t){return t==0||isNaN(t)?"0":t+e}}var f=this.path,l=r.document,c=n.array.from,h=n.string.camelize,p=n.Class,d=n.require("./k.js"),v=r.DOMTokenList,m=v&&l&&l.documentElement.classList instanceof v,g=/\s*!important/i,y="important",b=1,w={},E=function(){var e=d.createElement();try{e.style.width="badvalue"}catch(t){return!0}return!1}(),A=d.createElement(""),O={},M={};_("opacity","opacity filter",!0,{filter:function(e){return"alpha(opacity:"+parseInt(e*100,10)+")"}}),_("float","cssFloat styleFloat");var j=p(null,{className:f+".StyleSheet",styleSheet:null,rules:null,init:function(e){this.styleSheet=e,this.rules=[]},createRule:function(e){var t=this.styleSheet,n=this.rules.length;t.insertRule(e+"{}",n);var r=c(t.cssRules,n),i=r[1]?new q(r,this):new F(r[0],this);return this.rules.push.apply(this.rules,i.rules||[i]),i},deleteRule:function(e){if(e instanceof q)e.rules.forEach(this.deleteRule,this);else{var t=this.rules.indexOf(e);t!=-1&&(this.rules.splice(t,1),this.styleSheet.deleteRule(t))}e.owner=null,e.destroy()},destroy:function(){this.rules.forEach(function(e){e.destroy()}),this.styleSheet=null,this.rules=null}}),F=p(null,{className:f+".Rule",rule:null,selector:"",init:function(e,t){this.owner=t,this.rule=e,this.selector=e.selectorText},setProperty:function(e,t){D(this.rule,e,t)},setStyle:function(e){n.object.iterate(e,this.setProperty,this)},clear:function(){this.rule.style.cssText=""},destroy:function(){this.owner&&this.owner.deleteRule(this),this.owner=null,this.rule=null}}),q=p(null,{className:f+".RuleSet",rules:null,init:function(e,t){this.owner=t,this.rules=e.map(function(e){return new F(e,this)},this)},createRule:function(e){var t=this.owner.createRule(e);return this.rules.push(t),t.owner=this,t},deleteRule:function(e){var t=this.rules.indexOf(e);t!=-1&&(this.rules.splice(t,1),this.owner.deleteRule(e))},setProperty:I("setProperty"),setStyle:I("setStyle"),clear:I("clear"),destroy:function(){this.owner&&this.owner.deleteRule(this),this.owner=null,this.rules=null}}),R,U={},W=p(null,{className:f+".ClassList",init:function(e){if(!e)throw f+".classList: Element "+e+" not found!";this.element=e},set_:function(e){var t=this.element.className;return typeof t=="string"?this.element.className=e:t.baseVal=e},toString:function(){var e=this.element.className;return typeof e=="string"?e:e.baseVal},set:function(e){this.clear(),e.trim().split(" ").forEach(this.add,this)},replace:function(e,t,n){n=n||"",typeof e!="undefined"&&this.remove(n+e),typeof t!="undefined"&&this.add(n+t)},bool:function(e,t){t?this.add(e):this.remove(e)},clear:function(){this.set_("")},contains:function(e){return!!this.toString().match(z(e))},item:function(e){return this.toString().trim().split(" ")[e]},add:function(e){var t=this.toString();t.match(z(e))||this.set_(t+" "+e)},remove:function(e){var t=this.toString(),n=t.replace(z(e),"");n!=t&&this.set_(n)},toggle:function(e){var t=this.contains(e);return t?this.remove(e):this.add(e),!t}}),X={},$=p(null,{className:f+".ClassListNS",delim:"-",init:function(e,t){this.classList=t,this.prefix=e+this.delim},add:function(e){this.classList.add(this.prefix+e)},remove:function(e){this.classList.remove(this.prefix+e)},items:function(){var e=this.classList.toString();return e?e.match(V(this.prefix,!0)):null},set:function(e){var t=this.items(),n=typeof e!="undefined"?this.prefix+e:"",r=this.classList;if(t)if(t.length==1){if(t[0]===n)return;r.remove(t[0])}else this.clear();n&&r.add(n)},clear:function(){this.items().forEach(this.classList.remove,this.classList)}});if(m){var J=W.prototype;n.object.extend(v.prototype,{set:J.set,replace:J.replace,bool:J.bool,clear:function(){for(var e=this.length;e>0;)this.remove(this[--e])},setPrefixToken:J.setPrefixToken}),R=function(e){return(typeof e=="string"?d.get(e):e).classList}}else R=function(e){return new W(typeof e=="string"?d.get(e):e)};var K=function(e,t){return t?new $(t,R(e)):R(e)};t.exports={features:M,setStyleProperty:D,setStyle:P,classList:K,uniqueRule:T,createRule:S,getStyleSheet:L,addStyleSheet:k,StyleSheet:j,Rule:F,RuleSet:q,display:H,visibility:B,em:Q("em"),ex:Q("ex"),px:Q("px"),percent:Q("%")}},"u.js":function(e,t,n,r,i,s,o,u,a){function p(e){var t=e.offsetParent||l;while(t&&t!==l&&c(t,"position")=="static")t=t.offsetParent;return t||l}function d(e){var t=0,n=0;if(e&&e.getBoundingClientRect){var i=e.getBoundingClientRect();t=-i.top,n=-i.left}else if(h)t=r.pageYOffset||l.scrollTop,n=r.pageXOffset||l.scrollLeft;else{var s=f.body;e!==s&&(t=s.scrollTop-s.clientTop,n=s.scrollLeft-s.clientLeft)}return{left:n,top:t}}function v(e,t){var n=0,r=0,i=d(t);if(e&&e.getBoundingClientRect){var s=e.getBoundingClientRect();r=s.top,n=s.left}return{top:r+i.top,left:n+i.left}}function m(e,t){var n=0,r=0,i=0,s=0,o=d(t);if(e&&e.getBoundingClientRect){var u=e.getBoundingClientRect();n=u.top,r=u.left,i=u.right,s=u.bottom}return{top:n+o.top,left:r+o.left,right:i+o.left,bottom:s+o.top,width:i-r,height:s-n}}function g(e,t){var n=h?f.documentElement:f.body,i=e===n&&!t?d():v(e,t),s=i.top,o=i.left,u,a;return!e||e===r?(u=r.innerWidth||0,a=r.innerHeight||0):(s+=e.clientTop,o+=e.clientLeft,u=e.clientWidth,a=e.clientHeight),{top:s,left:o,right:o+u,bottom:s+a,width:u,height:a}}var f=r.document,l=f.documentElement,c=n.require("./v.js").get,h=f.compatMode=="CSS1Compat";t.exports={getOffset:d,getOffsetParent:p,getTopLeftPoint:v,getBoundingRect:m,getViewportRect:g}},"v.js":function(e,t,n,r,i,s,o,u,a){var f=r.document,l;if("getComputedStyle"in r){var c={top:!0,bottom:!0,left:!0,right:!0,height:!0,width:!0},h=n.fn.runOnce(function(){var e=f.createElement("div");e.setAttribute("style","position:absolute;top:auto!important"),n.doc.body.add(e),r.getComputedStyle(e).top=="auto"&&(c={}),n.doc.remove(e)});l=function(e,t){var n=r.getComputedStyle(e),i;if(n){t in c&&h();if(c[t]&&n.position!="static"){var s=e.style.display;e.style.display="none",i=n.getPropertyValue(t),e.style.display=s}else i=n.getPropertyValue(t);return i}}}else{var p=/^-?(\d*\.)?\d+([a-z]+|%)?$/i,d=/\dpx$/i,v=function(e,t){if(d.test(t))return parseInt(t,10)+"px";var n=e.style,r=e.runtimeStyle,i=n.left,s=r.left;return r.left=e.currentStyle.left,n.left=t||0,t=n.pixelLeft,n.left=i,r.left=s,t+"px"};l=function(e,t){var r=e.currentStyle;if(r){var i=r[t=="float"?"styleFloat":n.string.camelize(t)],s=(i||"").match(p);return s&&s[2]&&s[2]!="px"&&(i=v(e,i)),i}}}t.exports={get:l}},"q.js":function(e,t,n,r,i,s,o,u,a){var f=this.path,l=n.require("./r.js"),c=n.require("./4.js"),h=c.create,p=n.require("./9.js").Node,d=n.require("./e.js").define(f,{Form:n.resource("./16.tmpl"),FormContent:n.resource("./17.tmpl")}),v=p.subclass({className:f+".FormContent",template:d.FormContent,childClass:l.Field,childFactory:l.create,listen:{childNode:{commit:function(e){while(e=e.nextSibling)if(e.focusable&&!e.isDisabled())return e.focus(!0);this.submit()}}},emit_reset:h("reset"),onSubmit:n.fn.$false,focusFirstNonEmpty:!0,focus:function(e){for(var t=0,n;n=this.childNodes[t];t++)if(n.focusable&&(!this.focusFirstNonEmpty||!n.getValue()||!n.getValue().length)){n.focus(e);return}},loadData:function(e,t){for(var n=0,r;r=this.childNodes[n];n++)r.name in e?(r.setValue(e[r.name]),r.setValidity()):r.reset();t||this.validate()},reset:function(){for(var e=0,t;t=this.childNodes[e];e++)t.reset();this.emit_reset()},validate:function(){var e=[],t;for(var n=0,r;r=this.childNodes[n];n++)(t=r.validate())&&e.push(t);return e.length?(e[0].field.focus(),e):!0},serialize:function(){return this.childNodes.reduce(function(e,t){return t.serializable&&t.name&&(e[t.name]=t.getValue()),e},{})},submit:function(){this.validate()===!0&&this.onSubmit&&this.onSubmit(this.serialize())}}),m=v.subclass({className:f+".Form",formTarget:"",formAction:"",formEnctype:"",formMethod:"POST",template:d.Form,binding:{target:"formTarget",action:"formAction",enctype:"formEnctype",method:"formMethod"},action:{submit:function(){this.submit()},validate:function(e){this.validate()!==!0&&e.preventDefault()}},submit:function(){this.onSubmit&&this.onSubmit(this.serialize()),this.tmpl&&this.tmpl.form&&this.tmpl.form.submit()}});t.exports={FormContent:v,Form:m}},"1g.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./l.js"),c=n.require("./q.js"),h=n.require("./1.js"),p=n.require("./w.js"),d=n.require("./1h.js"),v=n.require("./1f.js");t.exports=c.Form.subclass({name:"TeamForm",template:n.template.get("#f"),satellite:{submitButton:{instance:l.Button.subclass({caption:"Save",click:function(){this.owner.submit()}})},addEmployeeButton:{instance:l.Button.subclass({caption:"Add new employee",click:function(){var e=this.owner.data,t={path:e.path+e.code+"/",team_code:e.code,id:0,name:"New employee",surname:"New employee",work_start:p().format("YYYY-MM-DD"),work_end:null,days:{},team_id:e.id,maternity_leaves:[],position:""};this.owner.owner.data.Employee(t),this.owner.owner.getChildByName("TeamsTree").setDataSource([]),this.owner.owner.getChildByName("TeamsTree").setDataSource(this.owner.owner.data.employeesAndUsersByTeams.getSubset("/"))}})},addUserButton:{instance:l.Button.subclass({caption:"Add new user",click:function(){var e=this.owner.data,t={path:e.path+e.code+"/",team_code:e.code,id:0,name:"New user",surname:"New user",is_super:!1,team_id:e.id};this.owner.owner.data.User(t),this.owner.owner.getChildByName("TeamsTree").setDataSource([]),this.owner.owner.getChildByName("TeamsTree").setDataSource(this.owner.owner.data.employeesAndUsersByTeams.getSubset("/"))}})}},binding:{submitButton:"satellite:",addEmployeeButton:"satellite:",addUserButton:"satellite:"},childFactory:function(e){return new d(e)},childNodes:[{type:"text",title:"Name",name:"name"},{type:"text",title:"Code",name:"code"}],onSubmit:function(){var e=this;h.request({url:"/team/update",method:"POST",contentType:"application/json",body:JSON.stringify(e.data),handler:{success:function(){e.owner.delegate.setAndDestroyRemoved(),alert("Team successfully updated")},failure:function(){alert("Update of team is failed")}}})}})},"w.js":function(e,t,n,r,i,s,o,u,a){(function(n,r){typeof e=="object"&&typeof t!="undefined"?t.exports=r():typeof define=="function"&&define.amd?define(r):n.moment=r()})(this,function(){function r(){return e.apply(null,arguments)}function i(t){e=t}function s(e){return Object.prototype.toString.call(e)==="[object Array]"}function o(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function u(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function l(e,t,n,r){return bn(e,t,n,r,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(e){return e._pf==null&&(e._pf=c()),e._pf}function p(e){if(e._isValid==null){var t=h(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined)}return e._isValid}function d(e){var t=l(NaN);return e!=null?f(h(t),e):h(t).userInvalidated=!0,t}function m(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=h(t)),typeof t._locale!="undefined"&&(e._locale=t._locale);if(v.length>0)for(n in v)r=v[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function y(e){m(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),g===!1&&(g=!0,r.updateOffset(this),g=!1)}function b(e){return e instanceof y||e!=null&&e._isAMomentObject!=null}function w(e){return e<0?Math.ceil(e):Math.floor(e)}function E(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=w(t)),n}function S(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&E(e[o])!==E(t[o]))&&s++;return s+i}function x(){}function C(e){return e?e.toLowerCase().replace("_","-"):e}function k(e){var t=0,n,r,i,s;while(t<e.length){s=C(e[t]).split("-"),n=s.length,r=C(e[t+1]),r=r?r.split("-"):null;while(n>0){i=L(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&S(s,r,!0)>=n-1)break;n--}t++}return null}function L(e){var r=null;if(!T[e]&&typeof t!="undefined"&&t&&t.exports)try{r=N._abbr,n.require("./locale/"+e,"/components/moment"),A(r)}catch(i){}return T[e]}function A(e,t){var n;return e&&(typeof t=="undefined"?n=M(e):n=O(e,t),n&&(N=n)),N._abbr}function O(e,t){return t!==null?(t.abbr=e,T[e]=T[e]||new x,T[e].set(t),A(e),T[e]):(delete T[e],null)}function M(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return N;if(!s(e)){t=L(e);if(t)return t;e=[e]}return k(e)}function D(e,t){var n=e.toLowerCase();_[n]=_[n+"s"]=_[t]=e}function P(e){return typeof e=="string"?_[e]||_[e.toLowerCase()]:undefined}function H(e){var t={},n,r;for(r in e)a(e,r)&&(n=P(r),n&&(t[n]=e[r]));return t}function B(e,t){return function(n){return n!=null?(F(this,e,n),r.updateOffset(this,t),this):j(this,e)}}function j(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function F(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function I(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=P(e);if(typeof this[e]=="function")return this[e](t)}return this}function q(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function X(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(W[e]=i),t&&(W[t[0]]=function(){return q(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function $(e){var t=e.match(R),n,r;for(n=0,r=t.length;n<r;n++)W[t[n]]?t[n]=W[t[n]]:t[n]=V(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function J(e,t){return e.isValid()?(t=K(t,e.localeData()),z[t]=z[t]||$(t),z[t](e)):e.localeData().invalidDate()}function K(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;U.lastIndex=0;while(n>=0&&U.test(e))e=e.replace(U,r),U.lastIndex=0,n-=1;return e}function ct(e){return typeof e=="function"&&Object.prototype.toString.call(e)==="[object Function]"}function ht(e,t,n){lt[e]=ct(t)?t:function(e){return e&&n?n:t}}function pt(e,t){return a(lt,e)?lt[e](t._strict,t._locale):new RegExp(dt(e))}function dt(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function mt(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=E(e)});for(n=0;n<e.length;n++)vt[e[n]]=r}function gt(e,t){mt(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function yt(e,t,n){t!=null&&a(vt,e)&&vt[e](t,n._a,n,e)}function Ct(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function Lt(e){return this._months[e.month()]}function Ot(e){return this._monthsShort[e.month()]}function Mt(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=l([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function _t(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Ct(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Dt(e){return e!=null?(_t(this,e),r.updateOffset(this,!0),this):j(this,"Month")}function Pt(){return Ct(this.year(),this.month())}function Ht(e){var t,n=e._a;return n&&h(e).overflow===-2&&(t=n[wt]<0||n[wt]>11?wt:n[Et]<1||n[Et]>Ct(n[bt],n[wt])?Et:n[St]<0||n[St]>24||n[St]===24&&(n[xt]!==0||n[Tt]!==0||n[Nt]!==0)?St:n[xt]<0||n[xt]>59?xt:n[Tt]<0||n[Tt]>59?Tt:n[Nt]<0||n[Nt]>999?Nt:-1,h(e)._overflowDayOfYear&&(t<bt||t>Et)&&(t=Et),h(e).overflow=t),e}function Bt(e){r.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function jt(e,t){var n=!0;return f(function(){return n&&(Bt(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function It(e,t){Ft[e]||(Bt(t),Ft[e]=!0)}function Wt(e){var t,n,r=e._i,i=qt.exec(r);if(i){h(e).iso=!0;for(t=0,n=Rt.length;t<n;t++)if(Rt[t][1].exec(r)){e._f=Rt[t][0];break}for(t=0,n=Ut.length;t<n;t++)if(Ut[t][1].exec(r)){e._f+=(i[6]||" ")+Ut[t][0];break}r.match(ut)&&(e._f+="Z"),hn(e)}else e._isValid=!1}function Xt(e){var t=zt.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}Wt(e),e._isValid===!1&&(delete e._isValid,r.createFromInputFallback(e))}function Vt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function $t(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Jt(e){return Kt(e)?366:365}function Kt(e){return e%4===0&&e%100!==0||e%400===0}function Gt(){return Kt(this.year())}function Yt(e,t,n){var r=n-t,i=n-e.day(),s;return i>r&&(i-=7),i<r-7&&(i+=7),s=wn(e).add(i,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function Zt(e){return Yt(e,this._week.dow,this._week.doy).week}function tn(){return this._week.dow}function nn(){return this._week.doy}function rn(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function sn(e){var t=Yt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function on(e,t,n,r,i){var s=6+i-r,o=$t(e,0,1+s),u=o.getUTCDay(),a;return u<i&&(u+=7),n=n!=null?1*n:i,a=1+s+7*(t-1)-u+n,{year:a>0?e:e-1,dayOfYear:a>0?a:Jt(e-1)+a}}function un(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function an(e,t,n){return e!=null?e:t!=null?t:n}function fn(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ln(e){var t,n,r=[],i,s;if(e._d)return;i=fn(e),e._w&&e._a[Et]==null&&e._a[wt]==null&&cn(e),e._dayOfYear&&(s=an(e._a[bt],i[bt]),e._dayOfYear>Jt(s)&&(h(e)._overflowDayOfYear=!0),n=$t(s,0,e._dayOfYear),e._a[wt]=n.getUTCMonth(),e._a[Et]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[St]===24&&e._a[xt]===0&&e._a[Tt]===0&&e._a[Nt]===0&&(e._nextDay=!0,e._a[St]=0),e._d=(e._useUTC?$t:Vt).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[St]=24)}function cn(e){var t,n,r,i,s,o,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,o=4,n=an(t.GG,e._a[bt],Yt(wn(),1,4).year),r=an(t.W,1),i=an(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=an(t.gg,e._a[bt],Yt(wn(),s,o).year),r=an(t.w,1),t.d!=null?(i=t.d,i<s&&++r):t.e!=null?i=t.e+s:i=s),u=on(n,r,i,o,s),e._a[bt]=u.year,e._dayOfYear=u.dayOfYear}function hn(e){if(e._f===r.ISO_8601){Wt(e);return}e._a=[],h(e).empty=!0;var t=""+e._i,n,i,s,o,u,a=t.length,f=0;s=K(e._f,e._locale).match(R)||[];for(n=0;n<s.length;n++)o=s[n],i=(t.match(pt(o,e))||[])[0],i&&(u=t.substr(0,t.indexOf(i)),u.length>0&&h(e).unusedInput.push(u),t=t.slice(t.indexOf(i)+i.length),f+=i.length),W[o]?(i?h(e).empty=!1:h(e).unusedTokens.push(o),yt(o,i,e)):e._strict&&!i&&h(e).unusedTokens.push(o);h(e).charsLeftOver=a-f,t.length>0&&h(e).unusedInput.push(t),h(e).bigHour===!0&&e._a[St]<=12&&e._a[St]>0&&(h(e).bigHour=undefined),e._a[St]=pn(e._locale,e._a[St],e._meridiem),ln(e),Ht(e)}function pn(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function dn(e){var t,n,r,i,s;if(e._f.length===0){h(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=m({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],hn(t);if(!p(t))continue;s+=h(t).charsLeftOver,s+=h(t).unusedTokens.length*10,h(t).score=s;if(r==null||s<r)r=s,n=t}f(e,n||t)}function vn(e){if(e._d)return;var t=H(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],ln(e)}function mn(e){var t=new y(Ht(gn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function gn(e){var t=e._i,n=e._f;return e._locale=e._locale||M(e._l),t===null||n===undefined&&t===""?d({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),b(t)?new y(Ht(t)):(s(n)?dn(e):n?hn(e):o(t)?e._d=t:yn(e),e))}function yn(e){var t=e._i;t===undefined?e._d=new Date:o(t)?e._d=new Date(+t):typeof t=="string"?Xt(e):s(t)?(e._a=u(t.slice(0),function(e){return parseInt(e,10)}),ln(e)):typeof t=="object"?vn(e):typeof t=="number"?e._d=new Date(t):r.createFromInputFallback(e)}function bn(e,t,n,r,i){var s={};return typeof n=="boolean"&&(r=n,n=undefined),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,mn(s)}function wn(e,t,n,r){return bn(e,t,n,r,!1)}function xn(e,t){var n,r;t.length===1&&s(t[0])&&(t=t[0]);if(!t.length)return wn();n=t[0];for(r=1;r<t.length;++r)if(!t[r].isValid()||t[r][e](n))n=t[r];return n}function Tn(){var e=[].slice.call(arguments,0);return xn("isBefore",e)}function Nn(){var e=[].slice.call(arguments,0);return xn("isAfter",e)}function Cn(e){var t=H(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=M(),this._bubble()}function kn(e){return e instanceof Cn}function Ln(e,t){X(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+q(~~(e/60),2)+t+q(~~e%60,2)})}function On(e){var t=(e||"").match(ut)||[],n=t[t.length-1]||[],r=(n+"").match(An)||["-",0,0],i=+(r[1]*60)+E(r[2]);return r[0]==="+"?i:-i}function Mn(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(b(e)||o(e)?+e:+wn(e))- +n,n._d.setTime(+n._d+i),r.updateOffset(n,!1),n):wn(e).local()}function _n(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function Dn(e,t){var n=this._offset||0,i;return e!=null?(typeof e=="string"&&(e=On(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(i=_n(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),n!==e&&(!t||this._changeInProgress?Gn(this,Vn(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:_n(this)}function Pn(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Hn(e){return this.utcOffset(0,e)}function Bn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_n(this),"m")),this}function jn(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(On(this._i)),this}function Fn(e){return e=e?wn(e).utcOffset():0,(this.utcOffset()-e)%60===0}function In(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qn(){if(typeof this._isDSTShifted!="undefined")return this._isDSTShifted;var e={};m(e,this),e=gn(e);if(e._a){var t=e._isUTC?l(e._a):wn(e._a);this._isDSTShifted=this.isValid()&&S(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Rn(){return!this._isUTC}function Un(){return this._isUTC}function zn(){return this._isUTC&&this._offset===0}function Vn(e,t){var n=e,r=null,i,s,o;return kn(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=Wn.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:E(r[Et])*i,h:E(r[St])*i,m:E(r[xt])*i,s:E(r[Tt])*i,ms:E(r[Nt])*i}):(r=Xn.exec(e))?(i=r[1]==="-"?-1:1,n={y:$n(r[2],i),M:$n(r[3],i),d:$n(r[4],i),h:$n(r[5],i),m:$n(r[6],i),s:$n(r[7],i),w:$n(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=Kn(wn(n.from),wn(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),s=new Cn(n),kn(e)&&a(e,"_locale")&&(s._locale=e._locale),s}function $n(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Jn(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function Kn(e,t){var n;return t=Mn(t,e),e.isBefore(t)?n=Jn(e,t):(n=Jn(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qn(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(It(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=Vn(n,r),Gn(this,i,e),this}}function Gn(e,t,n,i){var s=t._milliseconds,o=t._days,u=t._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*n),o&&F(e,"Date",j(e,"Date")+o*n),u&&_t(e,j(e,"Month")+u*n),i&&r.updateOffset(e,o||u)}function er(e,t){var n=e||wn(),r=Mn(n,this).startOf("day"),i=this.diff(r,"days",!0),s=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(t&&t[s]||this.localeData().calendar(s,this,wn(n)))}function tr(){return new y(this)}function nr(e,t){var n;return t=P(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=b(e)?e:wn(e),+this>+e):(n=b(e)?+e:+wn(e),n<+this.clone().startOf(t))}function rr(e,t){var n;return t=P(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=b(e)?e:wn(e),+this<+e):(n=b(e)?+e:+wn(e),+this.clone().endOf(t)<n)}function ir(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function sr(e,t){var n;return t=P(t||"millisecond"),t==="millisecond"?(e=b(e)?e:wn(e),+this===+e):(n=+wn(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function or(e,t,n){var r=Mn(e,this),i=(r.utcOffset()-this.utcOffset())*6e4,s,o;return t=P(t),t==="year"||t==="month"||t==="quarter"?(o=ur(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:w(o)}function ur(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function ar(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fr(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():J(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):J(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function lr(e){var t=J(this,e||r.defaultFormat);return this.localeData().postformat(t)}function cr(e,t){return this.isValid()?Vn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function hr(e){return this.from(wn(),e)}function pr(e,t){return this.isValid()?Vn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function dr(e){return this.to(wn(),e)}function vr(e){var t;return e===undefined?this._locale._abbr:(t=M(e),t!=null&&(this._locale=t),this)}function gr(){return this._locale}function yr(e){e=P(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function br(e){return e=P(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function wr(){return+this._d-(this._offset||0)*6e4}function Er(){return Math.floor(+this/1e3)}function Sr(){return this._offset?new Date(+this):this._d}function xr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Tr(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Nr(){return p(this)}function Cr(){return f({},h(this))}function kr(){return h(this).overflow}function Lr(e,t){X(0,[e,e.length],0,t)}function Ar(e,t,n){return Yt(wn([e,11,31+t-n]),t,n).week}function Or(e){var t=Yt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")}function Mr(e){var t=Yt(this,1,4).year;return e==null?t:this.add(e-t,"y")}function _r(){return Ar(this.year(),1,4)}function Dr(){var e=this.localeData()._week;return Ar(this.year(),e.dow,e.doy)}function Pr(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function Br(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Fr(e){return this._weekdays[e.day()]}function qr(e){return this._weekdaysShort[e.day()]}function Ur(e){return this._weekdaysMin[e.day()]}function zr(e){var t,n,r;this._weekdaysParse=this._weekdaysParse||[];for(t=0;t<7;t++){this._weekdaysParse[t]||(n=wn([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}}function Wr(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Br(e,this.localeData()),this.add(e-t,"d")):t}function Xr(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Vr(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)}function $r(e,t){X(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Jr(e,t){return t._meridiemParse}function Kr(e){return(e+"").toLowerCase().charAt(0)==="p"}function Gr(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function ni(e,t){t[Nt]=E(("0."+e)*1e3)}function ii(){return this._isUTC?"UTC":""}function si(){return this._isUTC?"Coordinated Universal Time":""}function ai(e){return wn(e*1e3)}function fi(){return wn.apply(null,arguments).parseZone()}function ci(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.call(t,n):r}function pi(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function vi(){return this._invalidDate}function yi(e){return this._ordinal.replace("%d",e)}function bi(e){return e}function Ei(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)}function Si(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)}function xi(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function Ni(e,t,n,r){var i=M(),s=l().set(r,t);return i[n](s,e)}function Ci(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return Ni(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=Ni(e,s,n,i);return o}function ki(e,t){return Ci(e,t,"months",12,"month")}function Li(e,t){return Ci(e,t,"monthsShort",12,"month")}function Ai(e,t){return Ci(e,t,"weekdays",7,"day")}function Oi(e,t){return Ci(e,t,"weekdaysShort",7,"day")}function Mi(e,t){return Ci(e,t,"weekdaysMin",7,"day")}function Di(){var e=this._data;return this._milliseconds=_i(this._milliseconds),this._days=_i(this._days),this._months=_i(this._months),e.milliseconds=_i(e.milliseconds),e.seconds=_i(e.seconds),e.minutes=_i(e.minutes),e.hours=_i(e.hours),e.months=_i(e.months),e.years=_i(e.years),this}function Pi(e,t,n,r){var i=Vn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Hi(e,t){return Pi(this,e,t,1)}function Bi(e,t){return Pi(this,e,t,-1)}function ji(e){return e<0?Math.floor(e):Math.ceil(e)}function Fi(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=ji(qi(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=w(e/1e3),r.seconds=i%60,s=w(i/60),r.minutes=s%60,o=w(s/60),r.hours=o%24,t+=w(o/24),a=w(Ii(t)),n+=a,t-=ji(qi(a)),u=w(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function Ii(e){return e*4800/146097}function qi(e){return e*146097/4800}function Ri(e){var t,n,r=this._milliseconds;e=P(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+Ii(t),e==="month"?n:n/12;t=this._days+Math.round(qi(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function Ui(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+E(this._months/12)*31536e6}function zi(e){return function(){return this.as(e)}}function Yi(e){return e=P(e),this[e+"s"]()}function Zi(e){return function(){return this._data[e]}}function us(){return w(this.days()/7)}function ls(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function cs(e,t,n){var r=Vn(e).abs(),i=as(r.as("s")),s=as(r.as("m")),o=as(r.as("h")),u=as(r.as("d")),a=as(r.as("M")),f=as(r.as("y")),l=i<fs.s&&["s",i]||s===1&&["m"]||s<fs.m&&["mm",s]||o===1&&["h"]||o<fs.h&&["hh",o]||u===1&&["d"]||u<fs.d&&["dd",u]||a===1&&["M"]||a<fs.M&&["MM",a]||f===1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,ls.apply(null,l)}function hs(e,t){return fs[e]===undefined?!1:t===undefined?fs[e]:(fs[e]=t,!0)}function ps(e){var t=this.localeData(),n=cs(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function vs(){var e=ds(this._milliseconds)/1e3,t=ds(this._days),n=ds(this._months),r,i,s;r=w(e/60),i=w(r/60),e%=60,r%=60,s=w(n/12),n%=12;var o=s,u=n,a=t,f=i,l=r,c=e,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var e,v=r.momentProperties=[],g=!1,T={},N,_={},R=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},W={},Q=/\d/,G=/\d\d/,Y=/\d{3}/,Z=/\d{4}/,et=/[+-]?\d{6}/,tt=/\d\d?/,nt=/\d{1,3}/,rt=/\d{1,4}/,it=/[+-]?\d{1,6}/,st=/\d+/,ot=/[+-]?\d+/,ut=/Z|[+-]\d\d:?\d\d/gi,at=/[+-]?\d+(\.\d{1,3})?/,ft=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,lt={},vt={},bt=0,wt=1,Et=2,St=3,xt=4,Tt=5,Nt=6;X("M",["MM",2],"Mo",function(){return this.month()+1}),X("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),X("MMMM",0,0,function(e){return this.localeData().months(this,e)}),D("month","M"),ht("M",tt),ht("MM",tt,G),ht("MMM",ft),ht("MMMM",ft),mt(["M","MM"],function(e,t){t[wt]=E(e)-1}),mt(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[wt]=i:h(n).invalidMonth=e});var kt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),At="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ft={};r.suppressDeprecationWarnings=!1;var qt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Rt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Ut=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],zt=/^\/?Date\((\-?\d+)/i;r.createFromInputFallback=jt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),X(0,["YY",2],0,function(){return this.year()%100}),X(0,["YYYY",4],0,"year"),X(0,["YYYYY",5],0,"year"),X(0,["YYYYYY",6,!0],0,"year"),D("year","y"),ht("Y",ot),ht("YY",tt,G),ht("YYYY",rt,Z),ht("YYYYY",it,et),ht("YYYYYY",it,et),mt(["YYYYY","YYYYYY"],bt),mt("YYYY",function(e,t){t[bt]=e.length===2?r.parseTwoDigitYear(e):E(e)}),mt("YY",function(e,t){t[bt]=r.parseTwoDigitYear(e)}),r.parseTwoDigitYear=function(e){return E(e)+(E(e)>68?1900:2e3)};var Qt=B("FullYear",!1);X("w",["ww",2],"wo","week"),X("W",["WW",2],"Wo","isoWeek"),D("week","w"),D("isoWeek","W"),ht("w",tt),ht("ww",tt,G),ht("W",tt),ht("WW",tt,G),gt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=E(e)});var en={dow:0,doy:6};X("DDD",["DDDD",3],"DDDo","dayOfYear"),D("dayOfYear","DDD"),ht("DDD",nt),ht("DDDD",Y),mt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=E(e)}),r.ISO_8601=function(){};var En=jt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=wn.apply(null,arguments);return e<this?this:e}),Sn=jt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=wn.apply(null,arguments);return e>this?this:e});Ln("Z",":"),Ln("ZZ",""),ht("Z",ut),ht("ZZ",ut),mt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=On(e)});var An=/([\+\-]|\d\d)/gi;r.updateOffset=function(){};var Wn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Xn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Vn.fn=Cn.prototype;var Yn=Qn(1,"add"),Zn=Qn(-1,"subtract");r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var mr=jt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});X(0,["gg",2],0,function(){return this.weekYear()%100}),X(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Lr("gggg","weekYear"),Lr("ggggg","weekYear"),Lr("GGGG","isoWeekYear"),Lr("GGGGG","isoWeekYear"),D("weekYear","gg"),D("isoWeekYear","GG"),ht("G",ot),ht("g",ot),ht("GG",tt,G),ht("gg",tt,G),ht("GGGG",rt,Z),ht("gggg",rt,Z),ht("GGGGG",it,et),ht("ggggg",it,et),gt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=E(e)}),gt(["gg","GG"],function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)}),X("Q",0,0,"quarter"),D("quarter","Q"),ht("Q",Q),mt("Q",function(e,t){t[wt]=(E(e)-1)*3}),X("D",["DD",2],"Do","date"),D("date","D"),ht("D",tt),ht("DD",tt,G),ht("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),mt(["D","DD"],Et),mt("Do",function(e,t){t[Et]=E(e.match(tt)[0],10)});var Hr=B("Date",!0);X("d",0,"do","day"),X("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),X("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),X("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),X("e",0,0,"weekday"),X("E",0,0,"isoWeekday"),D("day","d"),D("weekday","e"),D("isoWeekday","E"),ht("d",tt),ht("e",tt),ht("E",tt),ht("dd",ft),ht("ddd",ft),ht("dddd",ft),gt(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);r!=null?t.d=r:h(n).invalidWeekday=e}),gt(["d","e","E"],function(e,t,n,r){t[r]=E(e)});var jr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ir="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rr="Su_Mo_Tu_We_Th_Fr_Sa".split("_");X("H",["HH",2],0,"hour"),X("h",["hh",2],0,function(){return this.hours()%12||12}),$r("a",!0),$r("A",!1),D("hour","h"),ht("a",Jr),ht("A",Jr),ht("H",tt),ht("h",tt),ht("HH",tt,G),ht("hh",tt,G),mt(["H","HH"],St),mt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),mt(["h","hh"],function(e,t,n){t[St]=E(e),h(n).bigHour=!0});var Qr=/[ap]\.?m?\.?/i,Yr=B("Hours",!0);X("m",["mm",2],0,"minute"),D("minute","m"),ht("m",tt),ht("mm",tt,G),mt(["m","mm"],xt);var Zr=B("Minutes",!1);X("s",["ss",2],0,"second"),D("second","s"),ht("s",tt),ht("ss",tt,G),mt(["s","ss"],Tt);var ei=B("Seconds",!1);X("S",0,0,function(){return~~(this.millisecond()/100)}),X(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),X(0,["SSS",3],0,"millisecond"),X(0,["SSSS",4],0,function(){return this.millisecond()*10}),X(0,["SSSSS",5],0,function(){return this.millisecond()*100}),X(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),X(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),X(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),X(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),D("millisecond","ms"),ht("S",nt,Q),ht("SS",nt,G),ht("SSS",nt,Y);var ti;for(ti="SSSS";ti.length<=9;ti+="S")ht(ti,st);for(ti="S";ti.length<=9;ti+="S")mt(ti,ni);var ri=B("Milliseconds",!1);X("z",0,0,"zoneAbbr"),X("zz",0,0,"zoneName");var oi=y.prototype;oi.add=Yn,oi.calendar=er,oi.clone=tr,oi.diff=or,oi.endOf=br,oi.format=lr,oi.from=cr,oi.fromNow=hr,oi.to=pr,oi.toNow=dr,oi.get=I,oi.invalidAt=kr,oi.isAfter=nr,oi.isBefore=rr,oi.isBetween=ir,oi.isSame=sr,oi.isValid=Nr,oi.lang=mr,oi.locale=vr,oi.localeData=gr,oi.max=Sn,oi.min=En,oi.parsingFlags=Cr,oi.set=I,oi.startOf=yr,oi.subtract=Zn,oi.toArray=xr,oi.toObject=Tr,oi.toDate=Sr,oi.toISOString=fr,oi.toJSON=fr,oi.toString=ar,oi.unix=Er,oi.valueOf=wr,oi.year=Qt,oi.isLeapYear=Gt,oi.weekYear=Or,oi.isoWeekYear=Mr,oi.quarter=oi.quarters=Pr,oi.month=Dt,oi.daysInMonth=Pt,oi.week=oi.weeks=rn,oi.isoWeek=oi.isoWeeks=sn,oi.weeksInYear=Dr,oi.isoWeeksInYear=_r,oi.date=Hr,oi.day=oi.days=Wr,oi.weekday=Xr,oi.isoWeekday=Vr,oi.dayOfYear=un,oi.hour=oi.hours=Yr,oi.minute=oi.minutes=Zr,oi.second=oi.seconds=ei,oi.millisecond=oi.milliseconds=ri,oi.utcOffset=Dn,oi.utc=Hn,oi.local=Bn,oi.parseZone=jn,oi.hasAlignedHourOffset=Fn,oi.isDST=In,oi.isDSTShifted=qn,oi.isLocal=Rn,oi.isUtcOffset=Un,oi.isUtc=zn,oi.isUTC=zn,oi.zoneAbbr=ii,oi.zoneName=si,oi.dates=jt("dates accessor is deprecated. Use date instead.",Hr),oi.months=jt("months accessor is deprecated. Use month instead",Dt),oi.years=jt("years accessor is deprecated. Use year instead",Qt),oi.zone=jt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Pn);var ui=oi,li={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},hi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},di="Invalid date",mi="%d",gi=/\d{1,2}/,wi={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ti=x.prototype;Ti._calendar=li,Ti.calendar=ci,Ti._longDateFormat=hi,Ti.longDateFormat=pi,Ti._invalidDate=di,Ti.invalidDate=vi,Ti._ordinal=mi,Ti.ordinal=yi,Ti._ordinalParse=gi,Ti.preparse=bi,Ti.postformat=bi,Ti._relativeTime=wi,Ti.relativeTime=Ei,Ti.pastFuture=Si,Ti.set=xi,Ti.months=Lt,Ti._months=kt,Ti.monthsShort=Ot,Ti._monthsShort=At,Ti.monthsParse=Mt,Ti.week=Zt,Ti._week=en,Ti.firstDayOfYear=nn,Ti.firstDayOfWeek=tn,Ti.weekdays=Fr,Ti._weekdays=jr,Ti.weekdaysMin=Ur,Ti._weekdaysMin=Rr,Ti.weekdaysShort=qr,Ti._weekdaysShort=Ir,Ti.weekdaysParse=zr,Ti.isPM=Kr,Ti._meridiemParse=Qr,Ti.meridiem=Gr,A("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=E(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),r.lang=jt("moment.lang is deprecated. Use moment.locale instead.",A),r.langData=jt("moment.langData is deprecated. Use moment.localeData instead.",M);var _i=Math.abs,Wi=zi("ms"),Xi=zi("s"),Vi=zi("m"),$i=zi("h"),Ji=zi("d"),Ki=zi("w"),Qi=zi("M"),Gi=zi("y"),es=Zi("milliseconds"),ts=Zi("seconds"),ns=Zi("minutes"),rs=Zi("hours"),is=Zi("days"),ss=Zi("months"),os=Zi("years"),as=Math.round,fs={s:45,m:45,h:22,d:26,M:11},ds=Math.abs,ms=Cn.prototype;ms.abs=Di,ms.add=Hi,ms.subtract=Bi,ms.as=Ri,ms.asMilliseconds=Wi,ms.asSeconds=Xi,ms.asMinutes=Vi,ms.asHours=$i,ms.asDays=Ji,ms.asWeeks=Ki,ms.asMonths=Qi,ms.asYears=Gi,ms.valueOf=Ui,ms._bubble=Fi,ms.get=Yi,ms.milliseconds=es,ms.seconds=ts,ms.minutes=ns,ms.hours=rs,ms.days=is,ms.weeks=us,ms.months=ss,ms.years=os,ms.humanize=ps,ms.toISOString=vs,ms.toString=vs,ms.toJSON=vs,ms.locale=vr,ms.localeData=gr,ms.toIsoString=jt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",vs),ms.lang=mr,X("X",0,0,"unix"),X("x",0,0,"valueOf"),ht("x",ot),ht("X",at),mt("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),mt("x",function(e,t,n){n._d=new Date(E(e))}),r.version="2.10.6",i(wn),r.fn=ui,r.min=Tn,r.max=Nn,r.utc=l,r.unix=ai,r.months=ki,r.isDate=o,r.locale=A,r.invalid=d,r.duration=Vn,r.isMoment=b,r.weekdays=Ai,r.parseZone=fi,r.localeData=M,r.isDuration=kn,r.monthsShort=Li,r.weekdaysMin=Mi,r.defineLocale=O,r.weekdaysShort=Oi,r.normalizeUnits=P,r.relativeTimeThreshold=hs;var gs=r;return gs})},"p.js":function(e,t,n,r,i,s,o,u,a){function y(e){typeof e.expand=="function"&&e.expand()}function b(e){typeof e.collapse=="function"&&e.collapse()}var f=this.path,l=n.Class,c=n.require("./k.js"),h=n.require("./4.js").create,p=n.require("./9.js"),d=p.Node,v=p.PartitionNode,m=p.GroupingNode,g=n.require("./e.js").define(f,{Tree:n.resource("./7.tmpl"),PartitionNode:n.resource("./8.tmpl"),Node:n.resource("./9.tmpl"),Folder:n.resource("./a.tmpl")}),w={expandAll:function(){c.axis(this,c.AXIS_DESCENDANT_OR_SELF,y)},collapseAll:function(){c.axis(this,c.AXIS_DESCENDANT_OR_SELF,b)},expand:function(){},collapse:function(){},toggle:function(){}},E=l(v,{className:f+".PartitionNode",template:g.PartitionNode}),S=l(m,{className:f+".GroupingNode",childClass:E}),x=l(d,w,{className:f+".Node",childClass:null,childFactory:null,emit_collapse:h("collapse"),emit_expand:h("expand"),template:g.Node,binding:{title:{events:"update",getter:function(e){return e.data.title||"[no title]"}},collapsed:{events:"expand collapse",getter:function(e){return e.collapsed?"collapsed":""}}},action:{select:function(e){this.isDisabled()||this.select(e.ctrlKey||e.metaKey)},toggle:function(){this.toggle()}}}),T=l(x,{className:f+".Folder",childClass:x,groupingClass:S,template:g.Folder,collapsible:!0,collapsed:!1,init:function(){x.prototype.init.call(this),this.collapsed&&this.collapsible&&this.emit_collapse()},expand:function(){return this.collapsed?(this.collapsed=!1,this.emit_expand(),!0):!1},collapse:function(){return!this.collapsed&&this.collapsible?(this.collapsed=!0,this.emit_collapse(),!0):!1},toggle:function(){this.collapsed?this.expand():this.collapse()}}),N=l(d,w,{className:f+".Tree",selection:!0,template:g.Tree,childClass:x,groupingClass:S});t.exports={Tree:N,Node:x,Folder:T,GroupingNode:S,PartitionNode:E}},"1f.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./p.js");t.exports=function(e){var t={childClass:f.PartitionNode,rule:function(e){return e instanceof l.Folder==0},sorting:n.getter("data.id")},r=l.Node.subclass({name:"employee",binding:{title:"data:name",type:"employee"},handler:{select:function(){this.parentNode.parentNode.emit_select("employee",this.delegate)}}}),i=l.Node.subclass({template:'<b:include src="basis.ui.tree.Node" class="selection-red"></b:include>',name:"user",binding:{title:"data:name",type:"user"},handler:{select:function(){this.parentNode.parentNode.emit_select("user",this.delegate)}}}),s=l.Folder.subclass({name:"team",binding:{title:"data:name"},sorting:n.getter("data.name"),grouping:t,init:function(){l.Node.prototype.init.call(this),this.setDataSource(e.getSubset(this.data.path+""+this.data.team_code+"/"))},handler:{select:function(){this.parentNode.emit_select("team",this.delegate)}}}),o=l.Tree.subclass({name:"TeamsTree",selection:{multiple:!1},grouping:{childClass:f.PartitionNode,rule:function(e){return e instanceof l.Folder==0},sorting:n.getter("data.id")},dataSource:e.getSubset("/"),childFactory:function(e){return e.delegate.data.hasOwnProperty("surname")?e.delegate.data.hasOwnProperty("is_super")?new i(e):new r(e):new s(n.object.extend({childFactory:this.childFactory},e))},init:function(){l.Node.prototype.init.call(this)},handler:{select:function(e,t,n){n&&(this.parentNode.delegate.update({adminEdit:{delegate:n}}),this.parentNode.emit_select(t,n.data.id))}}});return new o}},"1e.js":function(e,t,n,r,i,s,o,u,a){function g(e,t,n){var r=e.childNodes;for(var i=0;i<r.length;i++)if(t=="team"){if(r[i].delegate.data.id==n){r[i].select();return}}else for(var s=0;s<r[i].childNodes.length;s++)if(r[i].childNodes[s].delegate.data.id==n&&r[i].childNodes[s].name==t){r[i].childNodes[s].select();return}}var f=n.require("./9.js"),l=n.require("./l.js"),c=n.require("./1.js"),h=n.require("./16.js"),p=n.require("./1f.js"),d=n.require("./1g.js"),v=n.require("./1i.js"),m=n.require("./1m.js");t.exports=h.subclass({name:"adminPage",title:"Admin area",template:n.template.get("#o"),satellite:{teamForm:{instance:d,existsIf:function(e){return e.data.adminEdit&&!e.data.adminEdit.delegate.data.hasOwnProperty("surname")},delegate:function(e){return e.delegate.data.adminEdit.delegate}},employeeForm:{instance:v,existsIf:function(e){return e.data.adminEdit&&e.data.adminEdit.delegate.data.hasOwnProperty("surname")&&!e.data.adminEdit.delegate.data.hasOwnProperty("is_super")},delegate:function(e){return e.delegate.data.adminEdit.delegate}},userForm:{instance:m,existsIf:function(e){return e.data.adminEdit&&e.data.adminEdit.delegate.data.hasOwnProperty("surname")&&e.data.adminEdit.delegate.data.hasOwnProperty("is_super")},delegate:function(e){return e.delegate.data.adminEdit.delegate}}},binding:{teamForm:"satellite:",userForm:"satellite:",employeeForm:"satellite:"},init:function(){f.Node.prototype.init.call(this);var e=[p(this.data.employeesAndUsersByTeams)];this.data.user.is_super&&e.push(new l.Button({caption:"Create new team",click:function(){this.parentNode.delegate.data.Team({path:"/",team_code:"new",code:"new",id:0,name:"New team"})}})),this.setChildNodes(e);var t=this;this.router.add("admin",{match:function(){t.select()}}),this.router.add("admin/employee/:id",{match:function(e){t.select(),g(t.getChildByName("TeamsTree"),"employee",e)}}),this.router.add("admin/team/:id",{match:function(e){t.select(),g(t.getChildByName("TeamsTree"),"team",e)}}),this.router.add("admin/user/:id",{match:function(e){t.select(),g(t.getChildByName("TeamsTree"),"user",e)}})},handler:{select:function(e,t,n){typeof t!="undefined"&&typeof n!="undefined"&&this.router.navigate("admin/"+t+"/"+n)}}})},"1d.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js");t.exports=f.Node.subclass({name:"Agenda",template:n.template.get("#d"),childClass:{template:n.template.get("#e"),binding:{id:"data:",name:"data:",isType:"data:",isShift:"data:"},action:{applyType:function(){this.parentNode.parentNode.emit_applyDayType(this.data.id)}}},handler:{update:function(){var e=this,t;e.data.teams.map(function(n){if(n.code==e.data.team)return t=n,!1});if(e.data.mode=="days")var n=Object.keys(e.data.dayTypes).map(function(t){var n=e.data.dayTypes[t];return n.isType=!0,n.isShift=!1,{data:n}});else n=Object.keys(e.data.shifts).map(function(n){var r=e.data.shifts[n];return r.isType=!1,r.isShift=!0,r.name=t.shifts.hasOwnProperty(r.id)?t.shifts[r.id].description:"",{data:r}});e.setChildNodes(n)}}})},"1c.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./1a.js"),c=n.require("./1b.js");t.exports=f.Node.subclass({className:"Employee",template:n.template.get("#b"),binding:{name:"data.name",surname:"data.surname"},init:function(){f.Node.prototype.init.call(this),this.setChildNodes([new l({data:{month:this.month,year:this.year,mode:this.mode,publicHolidays:this.publicHolidays,entity:this.data}})])}})},"1b.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js");t.exports=f.Node.subclass({data:{day:null,title:"",weekend:!1,type:"",checked:!1,isShift:!1},template:n.template.get("#9"),binding:{day:"data:day",title:"data:title",weekend:"data:weekend",type:"data:type",isType:function(e){return!e.data.isShift},isShift:"data:isShift",checked:function(e){return e.data.checked?"checked_day":""},clickable:function(){return!0}},action:{dayClick:function(){this.data.checked=!this.data.checked,this.updateBind("checked")}}})},"1a.js":function(e,t,n,r,i,s,o,u,a){function h(e,t,n){if(t.hasOwnProperty(e))var r=t[e];else n?r=3:r="";return r}function p(e,t,n,r){if(t.hasOwnProperty(e)||n||r)var i="";else i="-";return i}var f=n.require("./9.js"),l=n.require("./w.js"),c=n.require("./1b.js");t.exports=f.Node.subclass({template:n.template.get("#a"),className:"Month",binding:{name:"data:name",year:"data:year",isActive:"data:isActive",workingDays:"data:workingDays"},init:function(){f.Node.prototype.init.call(this),this.handler.callbacks.update.call(this)},handler:{update:function(){var e=[],t=l().year(this.data.year).month(this.data.month);this.data.workingDays=0,this.data.name=t.format("MMMM");var n=typeof this.data.entity!="undefined";for(var r=0;r<t.daysInMonth();r++){var i=t.date(r+1),s=[6,7].indexOf(i.isoWeekday())!=-1,o=i.format("YYYY-MM-DD"),u=this.data.publicHolidays.hasOwnProperty(o);!s&&!u&&this.data.workingDays++,this.data.mode=="shifts"&&n?this.data.entity.shifts[o]&&e.push(new c({data:{day:r+1,title:"",weekend:!1,type:this.data.entity.shifts[o],isShift:!0}})):e.push(new c({data:{day:r+1,title:n?p(o,this.data.entity.days,s,u):r+1,weekend:s,type:n?h(o,this.data.entity.days,u):""}}))}this.setChildNodes(e),this.updateBind("name"),this.updateBind("workingDays")}}})},"19.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./6.js"),c=n.require("./1a.js"),h=n.require("./1c.js");t.exports=f.Node.subclass({name:"Team",template:n.template.get("#c"),satellite:{month:{instance:c,delegate:function(e){return e.delegate},existsIf:function(e){return e.data.month}},modeSwitcher:{instance:f.Node.subclass({template:'<button type="button" event-click="onClick">{title}</button>',binding:{title:function(e){return"Switch to "+(e.data.mode=="days"?"Shifts":"Days")}},autoDelegate:!0,action:{onClick:function(){var e=this.data.mode.trim()=="days"?"shifts":"days";l.navigate("team/"+this.data.team+"/"+this.data.month+"/"+this.data.year+"/"+e),this.updateBind("title")}}})}},binding:{name:"name",code:"data:team",month:"satellite:",modeSwitcher:"satellite:"},handler:{update:function(){if(this.dataSource){var e=this.dataSource;this.setDataSource([]),this.setDataSource(e)}}},childFactory:function(e){return new h(n.object.extend({month:this.data.month,year:this.data.year,mode:this.data.mode,publicHolidays:this.data.publicHolidays},e))}})},"18.js":function(e,t,n,r,i,s,o,u,a){function m(e,t,n){var r=[],i=e.childNodes,s=[];for(var o=0;o<i.length;o++){var u=i[o];if(u.constructor.className=="Employee")for(var a=0;a<u.childNodes.length;a++){var f=u.childNodes[a];if(f.constructor.className=="Month"){var l=f.childNodes;for(var p=0;p<l.length;p++)l[p].data.checked&&(s.push(l[p]),r.push({id:u.data.id,date:h().month(f.data.name).year(f.data.year).date(l[p].data.day).format("YYYY-MM-DD"),type:t}))}}}var d=n.data.mode=="days"?"/set-type":"/set-shift";r.length&&c.request({url:d,method:"POST",contentType:"application/json",body:JSON.stringify(r),handler:{success:function(){for(var e=0;e<s.length;e++)s[e].data.checked=!1,s[e].updateBind("checked");n.setAndDestroyRemoved()},failure:function(){alert("Setting of shift failed")}}})}var f=n.require("./9.js"),l=n.require("./4.js"),c=n.require("./1.js"),h=n.require("./w.js"),p=n.require("./16.js"),d=n.require("./19.js"),v=n.require("./1d.js");t.exports=p.subclass({name:"teamPage",title:"Team schedule",emit_applyDayType:l.create("applyDayType","typeId"),handler:{applyDayType:function(e,t){m(this.getChildByName("Team"),t,this.delegate)}},init:function(){f.Node.prototype.init.call(this),this.setChildNodes([new d({delegate:this.delegate}),new v({delegate:this.delegate})]);var e=this;this.router.add("team/:team/:month/:year/:mode",{match:function(t,n,r,i){var s={team:t,month:n,year:r,mode:i};e.update(s),e.select(),e.getChildByName("Team").setDataSource(e.data.employeesByTeams.getSubset("/"+t+"/"))}})}})},"o.js":function(e,t,n,r,i,s,o,u,a){function H(e){return P[e]=P[e]||0,e+P[e]++}function q(e,t){var n=F[e];if(n){for(var r=0,i;i=n[r];r++){var s=i[0],o=i[1];s[o]=t}delete F[e]}B[e]=t}function R(e,t,n){if(B[e])return B[e];var r=F[e];return r||(r=F[e]=[]),r.push([t,n]),function(t,n){var r=B[e];if(r)return r(t,n)}}function U(){for(var e in F)n.dev.warn(f+": type `"+e+"` is not defined, but used by "+F[e].length+" type(s)")}function W(){var e=m(arguments),t=e.pop(),n=e[0],r=e[1],i=e[2],s;if(typeof t!="function")throw"Last argument for calculate field constructor must be a function";switch(e.length){case 0:s=function(){return t()};break;case 1:s=function(e,r,i){return n in e?t(r[n]):i};break;case 2:s=function(e,i,s){return n in e||r in e?t(i[n],i[r]):s};break;case 3:s=function(e,s,o){return n in e||r in e||i in e?t(s[n],s[r],s[i]):o};break;default:s=function(n,r,i){var s=!1,o=[];for(var u=0,a;a=e[u];u++)s=s||a in n,o.push(r[a]);return s?t.apply(null,o):i}}return s.args=e,s.calc=s,s}function X(e){return arguments.length==1?function(t,n,r){return e in t?n[e]!=null?String(n[e]):null:r}:W.apply(null,m(arguments).concat(function(){for(var e=arguments.length-1;e>=0;e--)if(arguments[e]==null)return null;return Array.prototype.join.call(arguments,"-")}))}function V(e,t){var n={},r;e&&e.length&&(r=n.inserted=e),t&&t.length&&(r=n.deleted=t);if(r)return n}function ut(e,t,n){var r=["has"],i=[c],s=[];for(var o in e)if(c.call(e,o)){var u='"'+o.replace(/"/g,'"')+'"';if(c.call(n,o)){s.push(u+":"+"undefined");continue}var a="v"+s.length,f="f"+s.length,l=e[o];r.push(a,f),i.push(l,t[o]),s.push(u+":"+f+"("+"has.call(data,"+u+")"+"?"+"data["+u+"]"+":"+a+(typeof l=="function"?"(data)":"")+")")}var h=s.sort().join(","),p=st[h];return p||(p=st[h]=new Function(r,"return function(data){return {"+h+"};"+"};")),p.apply(null,i)}function at(e,t){if(!Array.isArray(e))return null;if(!Array.isArray(t)||e.length!=t.length)return e||null;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return e;return t}function ht(e,t){return typeof e=="string"&&e?ct(e):typeof e=="number"&&isNaN(e)==0?new Date(e):e==null?null:e&&e.constructor===Date?e:t||null}function pt(e,t,r){typeof r=="string"||Array.isArray(r)||typeof r=="function"&&r.calc!==r?r={type:r}:r=r?n.object.slice(r):{};if("type"in r){typeof r.type=="string"&&(r.type=R(r.type,e.fields,t));if(Array.isArray(r.type)){var i=r.type.slice();if(i.length==1)r.type=n.fn.$const(i[0]),r.defValue=i[0];else{var s;r.type=function(e,t){var n=e===s||i.indexOf(e)!=-1;return n?e:t===undefined?s:t},s=i.indexOf(r.defValue)!=-1?r.defValue:i[0],r.defValue=s}}r.type===Array&&(r.type=at),r.type===Date&&(r.type=ht),typeof r.type!="function"&&(r.type=null)}var o=r.type||v;if(r.id||r.index||[O,M,_,D].indexOf(o)!=-1)e.idFields[t]=r;r.calc?(vt(e,t,r.calc),e.fields[t]=ot):(e.fields[t]=o,e.aliases[t]=t),e.defaults[t]="defValue"in r?r.defValue:o(),it[t]||(it[t]={destroy:function(){this.set(t,null)}})}function dt(e,t,n){if(n in e.fields==0)return;if(n in e.calcMap)return;if(t in e.aliases)return;e.aliases[t]=n}function vt(e,t,r){var i=e.calcs,s=e.deps,o=r.args||[],u={args:o,wrapper:r},a=e.calcs.length,f=0;if(o)for(var l=0,c;c=i[l];l++)o.indexOf(c.key)!=-1&&(f=l+1);if(t){u.key=t,e.calcMap[t]=u;for(var l=0,c;c=i[l];l++)if(c.args.indexOf(t)!=-1){a=l;break}if(f>a)return;s[t]=o.reduce(function(e,t){var r=s[t]||[t];for(var i=0;i<r.length;i++)n.array.add(e,r[i]);return e},[]);for(var h in s){var p=s[h].indexOf(t);p!=-1&&Array.prototype.splice.apply(s[h],[p,1].concat(s[t]))}}else a=f;i.splice(Math.min(a,f),0,u)}function mt(e){return function(t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]}}function gt(e){return function(t,n){return this.set(e,t,n)}}function Et(e){return e&&e instanceof bt}function St(e,t){var r=e||{};return typeof e=="string"?r={name:r,fields:t||{}}:t&&(r=n.object.merge(r,{fields:t})),new rt(r)}function xt(e,t,r){switch(arguments.length){case 0:case 1:e&&e.constructor===Object?(r=n.object.slice(e),t=n.object.splice(r).type,e=n.object.splice(r).name):(t=e,e=undefined);break;case 2:t&&t.constructor===Object&&(r=t,t=e,e=undefined)}return new tt(t,e,r)}var f=this.path,l=n.Class,c=Object.prototype.hasOwnProperty,h=n.object.keys,p=n.object.extend,d=n.object.complete,v=n.fn.$self,m=n.array.from,g=n.require("./4.js"),y=g.Emitter,b=g.create,w=n.require("./5.js"),E=w.Object,S=w.Slot,x=w.Dataset,T=n.require("./8.js"),N=T.Filter,C=T.Split,k={},L=[],A={string:!0,number:!0},O=function(e){return e==null||isNaN(e)?null:Number(e)},M=function(e){return e==null||isNaN(e)?null:Number(e)},_=function(e){return e==null||isNaN(e)?null:parseInt(e,10)},D=function(e){return e==null?null:String(e)},P={},B={},j={},F={},I=function(){},z=l(null,{className:f+".Index",items:null,init:function(){this.items={}},get:function(e,t){var n=c.call(this.items,e)&&this.items[e];if(n&&(!t||n.entityType===t))return n},add:function(e,t){if(t){var n=this.get(e);if(!n)return this.items[e]=t,!0;if(n!==t)throw"basis.entity: Value `"+e+"` for index is already occupied"}},remove:function(e,t){if(this.items[e]===t)return delete this.items[e],!0},destroy:function(){this.items=null}}),$="wrapped"+n.genUID(),J=function(e,t){return function(n){n&&!Array.isArray(n)&&(n=[n]);var r=n&&!n[$];if(r){if(this.localId){var i=m(this.getItems());n=n.map(function(e){for(var t=0;t<i.length;t++)if(this.localId(e,i[t]))return this.wrapper(e,i[t]);return e=this.wrapper(e),i.push(e),e},this)}else n=n.map(this.wrapper);n[$]=!0}var s=e.prototype[t].call(this,n);if(r){n[$]=!1;if(this.localId&&s&&s.deleted){x.setAccumulateState(!0);for(var o=0;o<s.deleted.length;o++)s.deleted[o].root&&s.deleted[o].destroy();x.setAccumulateState(!1)}}return s}},K=function(e,t){return function(){this.name||(this.name=H(t)),e.prototype.init.call(this)}},Q=function(){return function(e){if(this.localId)return this.set(e);var t=this.wrapper.all===this,r=n.object.slice(this.items_),i=this.listen.item,s=[],o=[],u;if(e){x.setAccumulateState(!0);for(var a=0;a<e.length;a++){var f=this.wrapper(e[a]);f&&(f.basisObjectId in r==0&&s.push(f),r[f.basisObjectId]=!1)}x.setAccumulateState(!1)}for(var l in r)r[l]&&o.push(r[l]);if(!t&&(u=V(s,o))){if(i){if(u.deleted)for(var a=0;a<u.deleted.length;a++)u.deleted[a].removeHandler(i,this);if(u.inserted)for(var a=0;a<u.inserted.length;a++)u.inserted[a].addHandler(i,this)}this.emit_itemsChanged(u)}o.length&&this.wrapper.all&&this.wrapper.all.emit_itemsChanged({deleted:o}),x.setAccumulateState(!0);for(var a=0;a<o.length;a++)o[a].destroy();return x.setAccumulateState(!1),s.length?s:null}},G=l(x,{className:f+".EntitySet",name:null,wrapper:v,init:K(x,"EntitySet"),setAndDestroyRemoved:Q(x),set:J(x,"set"),add:J(x,"add"),remove:J(x,"remove"),clear:function(){var e=x.prototype.clear.call(this);if(this.localId&&e&&e.deleted){x.setAccumulateState(!0);for(var t=0;t<e.deleted.length;t++)e.deleted[t].destroy();x.setAccumulateState(!1)}return e},destroy:function(){x.prototype.destroy.call(this),this.wrapper=null}}),Y=l(G,{className:f+".ReadOnlyEntitySet",set:n.fn.$false,add:n.fn.$false,remove:n.fn.$false,clear:n.fn.$false}),Z=l(N,{className:f+".EntityCollection",name:null,init:K(N,"EntityCollection")}),et=l(C,{className:f+".EntityGrouping",name:null,subsetClass:Y,init:K(C,"EntityGrouping"),getSubset:function(e,t){var n=C.prototype.getSubset.call(this,e,t);return n&&n.dataset&&(n.dataset.wrapper=this.wrapper),n}}),tt=function(e,t,n){function r(e){if(typeof e=="string")return function(t,n){return t[e]==n.data[e]};if(typeof e=="function")return e}if(this instanceof tt){e||(e=v);if(!t||B[t])t=H("UntitledEntitySetType");var i=new nt({entitySetClass:{wrapper:e,localId:r(n&&n.localId)}}),s=i.entitySetClass,o=function(e,t){return e!=null?(t instanceof G==0&&(t=i.createEntitySet()),t.set(e instanceof x?e.getItems():m(e)),t):null};return typeof e=="string"&&(s.prototype.wrapper=R(e,s.prototype,"wrapper")),q(t,o),p(o,{type:i,typeName:t,toString:function(){return t+"()"},reader:function(e){if(Array.isArray(e)){var t=s.prototype.wrapper;return e.map(t.reader||t)}return e},extendClass:function(e){return s.extend.call(s,e),o},extendReader:function(e){var t=o.reader;return o.reader=function(n){return Array.isArray(n)&&e(n),t(n)},o},entitySetType:i,extend:function(){return s.extend.apply(s,arguments)}}),o}},nt=l(null,{className:f+".EntitySetConstructor",entitySetClass:G,extendConstructor_:!0,createEntitySet:function(){return new this.entitySetClass}}),rt=function(e){if(this instanceof rt){var t;e.singleton?t=function(e){var t=n.get();return t?e&&t.update(e):t=new r(e||{}),t}:t=function(e,t){if(e!=null){if(!t||t.entityType!==n)t=null;if(e===t||e.entityType===n)return e;var i,s=n.idField;if(A[typeof e]){if(!s)return;if(t=n.index.get(e,n))return t;i=e,e={},e[s]=i}else n.compositeKey&&(i=n.compositeKey(e,e)),i!=null&&(t=n.index.get(i,n));return t&&t.entityType===n?t.update(e):t=new r(e),t}};var n=new yt(e||{},t),r=n.entityClass,i=n.name;return q(i,t),p(t,{all:n.all,type:n,typeName:i,toString:function(){return i+"()"},get:function(e){return n.get(e)},getSlot:function(e,t){return n.getSlot(e,t)},reader:function(e){return n.reader(e)},readList:function(e,n){if(!e)return[];Array.isArray(e)||(e=[e]),typeof n!="function"&&(n=v);for(var r=0;r<e.length;r++)e[r]=t(t.reader(n(e[r],r)));return e},extendClass:function(e){return r.extend.call(r,e),t},extendReader:function(e){var n=t.reader;return t.reader=function(t){return t&&typeof t=="object"&&e(t),n(t)},t},entityType:n,extend:function(){return r.extend.apply(r,arguments)}}),t}},it={},st={},ot=function(e,t){return t},ft=/\D/,lt=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,ct=function(){function e(e,n,r,i,s,o,u){var a=new Date(e,n-1,r,i||0,0,o||0,u?u.substr(0,3):0);return a.setMinutes((s||0)-t-a.getTimezoneOffset()),a}var t;return function(n){return t=0,e.apply(null,String(n||"").replace(lt,function(e,n,r,i){return t=Number(r||0)*60+Number(i||0),n}).split(ft))}}(),yt=l(null,{className:f+".EntityType",wrapper:null,all:null,fields:null,idField:null,idFields:null,compositeKey:null,idProperty:null,defaults:null,calcs:null,calcMap:null,aliases:null,slots:null,singleton:!1,index:null,indexes:null,entityClass:null,init:function(e,t){this.name=e.name;if(!this.name||B[this.name])this.name=H("UntitledEntityType");this.fields={},this.calcs=[],this.calcMap={},this.deps={},this.idFields={},this.defaults={},this.aliases={},this.slots={};var n=e.index;n&&n instanceof z&&(this.index=n),this.wrapper=t;if("all"in e==0||e.all||e.singleton)this.all=new Y(d({wrapper:t},e.all));this.singleton=!!e.singleton;if(this.singleton){var r;this.get=function(){return r},this.all.addHandler({itemsChanged:function(e,t){r=t.inserted?t.inserted[0]:null}},this)}for(var i in e.fields)pt(this,i,e.fields[i]);for(var i in e.aliases)dt(this,i,e.aliases[i]);e.constrains&&e.constrains.forEach(function(e){vt(this,null,e)},this),this.calcs.length||(this.calcs=null);var s=h(this.idFields),o={};if(s.length){for(var u in this.idFields){var a=this.idFields[u],n=a.index,f;if(!n||n instanceof z==0)typeof n=="string"?(n in j==0&&(j[n]=new z),n=j[n]):(this.index||(this.index=new z),n=this.index);f=o[n.basisObjectId],f||(f=o[n.basisObjectId]={index:n,fields:[]}),f.fields.push(u),this.idFields[u]=f}this.index&&this.index.basisObjectId in o==0&&(this.index=null);for(var l in o){var f=o[l];f.property="__id__"+l,f.compositeKey=X.apply(null,f.fields),f.fields.length==1&&(f.idField=f.fields[0])}var c=h(o),p=o[this.index?this.index.basisObjectId:c[0]];this.index=p.index,this.idField=p.idField,this.compositeKey=p.compositeKey,this.idProperty=p.property,this.indexes=o}else this.index&&(this.index=null);var v={};for(var i in this.defaults)v[i]=undefined;this.entityClass=wt(this,this.all,this.fields,this.slots),this.entityClass.extend({entityType:this,type:t,typeName:this.name,generateData:ut(this.defaults,this.fields,this.calcMap),initDelta:v});for(var m in this.fields)this.entityClass.prototype["get_"+m]=mt(m),this.fields[m]!==ot&&(this.entityClass.prototype["set_"+m]=gt(m));L.push(this)},reader:function(e){var t={};if(A[typeof e])return this.idField?e:null;if(!e||e==null)return null;for(var n in e){var r=this.aliases[n];if(r){var i=this.fields[r].reader;t[r]=i?i(e[n]):e[n]}}return t},get:function(e){var t=this.getId(e);if(this.index&&t!=null)return this.index.get(t,this)},getId:function(e){if(this.compositeKey&&e!=null){if(A[typeof e])return e;if(e&&e.entityType===this)return e[this.idProperty];e instanceof E&&(e=e.data);if(this.compositeKey)return this.compositeKey(e,e)}},getSlot:function(e){var t=this.getId(e);if(t!=null){var n=c.call(this.slots,t)&&this.slots[t];if(!n){if(A[typeof e]){var r={};this.idField&&(r[this.idField]=e),e=r}n=this.slots[t]=new S({delegate:this.get(t)||null,data:e})}return n}}}),bt=l(E,{className:f+".BaseEntity",target:!0,setDelegate:function(){},extendConstructor_:!1,fieldHandlers_:null,modified:null,emit_rollbackUpdate:b("rollbackUpdate")}),wt=function(e,t,r,i){function s(t,n,r){var i=e.calcs,s=t.data,u=!1;try{if(i)for(var a=0,f;f=i[a];a++){var l=f.key,c=s[l],h=f.wrapper(n,s,c);l&&h!==c&&(n[l]=c,s[l]=h,u=!0)}for(var p in e.indexes){var d=e.indexes[p],v=t[d.property],m=v;d.compositeKey&&(m=d.compositeKey(n,s,v)),m!==v&&(o(d.index,t,v,m),t[d.property]=m)}return u}catch(g){for(var l in n)t.data[l]=n[l];r&&!t.modified&&(t.modified=r)}}function o(e,t,n,r){r!=null&&(e.add(r,t),c.call(i,r)&&i[r].setDelegate(t)),n!=null&&(e.remove(n,t),c.call(i,n)&&i[n].setDelegate())}return l(bt,{className:e.name,syncEvents:{update:!0,stateChanged:!0,subscribersChanged:!0},isSyncRequired:function(){return E.prototype.isSyncRequired.call(this)&&(!e.idProperty||this[e.idProperty]!=null)},init:function(e){this.delegate=null,this.data=this.generateData(e),bt.prototype.init.call(this);var n;for(var r in this.data)n=this.data[r],n&&n!==this&&n instanceof y&&(n.addHandler(it[r],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[r]=!0);s(this,this.initDelta),t&&t.emit_itemsChanged({inserted:[this]})},toString:function(){return"[object "+this.constructor.className+"("+this.entityType.name+")]"},getId:function(){return this[e.idProperty]},get:function(e,t){return t&&this.modified&&e in this.modified?this.modified[e]:this.data[e]},set:function(t,n,i,o){var u=r[t];if(!u)return!1;var a,f=this.modified;u===at&&f&&t in f&&(n=at(n,f[t]));var l=u(n,this.data[t]),c=this.data[t],p=l!==c&&(!l||!c||l.constructor!==Date||c.constructor!==Date||+l!==+c);if(p)e:{a={};if(!e.idFields[t])if(i)f||(this.modified=f={}),t in f==0?(a.rollback={key:t,value:undefined},f[t]=c):f[t]===l&&(a.rollback={key:t,value:l},delete f[t],h(f).length||(this.modified=null));else if(f&&t in f){if(f[t]!==l){a.rollback={key:t,value:f[t]},f[t]=l;break e}return!1}this.data[t]=l,this.fieldHandlers_&&this.fieldHandlers_[t]&&(c.removeHandler(it[t],this),this.fieldHandlers_[t]=!1),l&&l!==this&&l instanceof y&&(l.addHandler(it[t],this),this.fieldHandlers_||(this.fieldHandlers_={}),this.fieldHandlers_[t]=!0),a.key=t,a.value=c,a.delta={},a.delta[t]=c}else!i&&f&&t in f&&(a={rollback:{key:t,value:f[t]}},delete f[t],h(f).length||(this.modified=null));if(!o&&a){var d=a.key,v=a.delta||{},m;a.rollback&&(m={},m[a.rollback.key]=a.rollback.value),s(this,v,m)&&(d=!0),d&&(this.emit_update(v),a.delta=v),m&&this.emit_rollbackUpdate(m)}return a||!1},update:function(e,t){var n=!1,r={};if(e){var i,o;for(var u in e)if(o=this.set(u,e[u],t,!0))o.key&&(n=!0,r[o.key]=o.value),o.rollback&&(i||(i={}),i[o.rollback.key]=o.rollback.value);s(this,r,i)&&(n=!0),n&&this.emit_update(r),i&&this.emit_rollbackUpdate(i)}return n?r:!1},read:function(e){return this.update(this.type.reader(e))},generateData:function(){return{}},reset:function(){this.update(this.generateData({}))},clear:function(){var e={};for(var t in this.data)e[t]=undefined;return this.update(e)},commit:function(e){var t=this.modified;this.modified=null,e&&this.update(e),t&&this.emit_rollbackUpdate(t)},rollback:function(t){var r=this.modified;r&&t&&(Array.isArray(t)||(t=[t]),r=n.object.slice(r,t.reduce(function(t,n){return t.concat(e.deps[n]||n)},[]))),this.update(r,!0)},destroy:function(){if(this.fieldHandlers_){for(var n in this.fieldHandlers_)this.fieldHandlers_[n]&&this.data[n].removeHandler(it[n],this);this.fieldHandlers_=null}for(var n in e.indexes){var r=e.indexes[n],i=this[r.property];i!=null&&o(r.index,this,i,null)}t&&t.has(this)&&t.emit_itemsChanged({deleted:[this]}),E.prototype.destroy.call(this),this.data=k,this.modified=null}})};t.exports={isEntity:Et,createType:St,createSetType:xt,validate:U,getTypeByName:function(e){return B[e]},getIndexByName:function(e){return j[e]},is:function(e,t){var n;return typeof t=="string"&&(t=B[t]),n=t&&t.type&&t.type.entityClass,e&&n?e instanceof n:!1},get:function(e,t){var n=B[e];if(n)return n.get(t)},resolve:function(e,t){var n=B[e];if(n)return n(t)},getByIndex:function(e,t){if(e in j)return j[e].get(t)},NumericId:O,NumberId:M,IntId:_,StringId:D,Index:z,CalculateField:W,ConcatStringField:X,calc:W,EntityType:rt,Entity:wt,BaseEntity:bt,EntitySetType:tt,EntitySet:G,ReadOnlyEntitySet:Y,Collection:Z,Grouping:et}},"17.js":function(e,t,n,r,i,s,o,u,a){function b(e,t){h.request({url:"/public-holidays/update",method:"POST",contentType:"application/json",body:JSON.stringify(e),handler:{success:function(){t()},failure:function(){}}})}var f=n.require("./9.js"),l=n.require("./l.js"),c=n.require("./o.js"),h=n.require("./1.js"),p=n.require("./w.js"),d=p(),v=[],m=[],g=365;for(var y=0;y<12;y++)v.push({monthId:parseInt(d.month(y).format("M"),10),title:d.month(y).format("MMMM")});for(y=0;y<g;y++)m.push({id:y,monthId:parseInt(d.dayOfYear(y).format("M"),10),title:d.dayOfYear(y).format("DD"),isHoliday:!1});var w=c.createType({name:"Month",fields:{monthId:c.IntId,title:String},all:{syncAction:function(){this.setAndDestroyRemoved(v&&v.map(this.wrapper.reader))}}}),E=c.createType({name:"Day",autoDelegate:!0,fields:{id:c.IntId,group:"Month",title:String,isHoliday:Boolean,isWeekend:Boolean,isChecked:Boolean,date:String},aliases:{monthId:"group"},all:{syncAction:function(){this.setAndDestroyRemoved(m&&m.map(this.wrapper.reader))}}});t.exports=f.Node.subclass({name:"PublicHolidaysYear",template:'<div class="days-list"><div{childNodesElement}/><div class="clearfix"></div><!--{toggleButton}--></div>',dataSource:E.all,binding:{toggleButton:new l.Button({caption:"Toggle selected items",click:function(){var e=[],t=this;for(var n=0;n<this.owner.childNodes.length;n++)(this.owner.childNodes[n].name=this.owner.childNodes[n].data.isChecked)&&e.push(this.owner.childNodes[n].data.date);e.length&&b(e,function(){t.owner.parentNode.delegate.setAndDestroyRemoved(function(){t.owner.update({publicHolidays:t.owner.parentNode.delegate.data.publicHolidays})})})}})},active:!0,selection:{multiple:!0},childClass:{name:"Day",template:'<div class="day {selected} {isHoliday} {isWeekend} {isChecked}" event-click="select">{title}</div>',action:{select:function(e){this.update({isChecked:!this.delegate.data.isChecked}),this.select(e.ctrlKey||e.metaKey)}},binding:{title:"data:",isHoliday:"data:",isWeekend:"data:",isChecked:"data:"}},sorting:"data.id",grouping:{dataSource:w.all,active:!0,rule:"data.group",childClass:{template:'<div class="month"><div class="month-Title">{title}</div></div>',binding:{title:"data:"}}},handler:{update:function(){var e=parseInt(this.data.year,10),t=p().date(1).month(0).year(e);m=[];while(t.format("YYYY")==e)m.push({id:t.format("DDD"),monthId:parseInt(t.format("M"),10),title:t.format("DD"),isHoliday:this.data.publicHolidays.hasOwnProperty(t.format("YYYY-MM-DD")),isWeekend:[6,7].indexOf(parseInt(t.format("E"),10))>=0,isChecked:!1,date:t.format("YYYY-MM-DD")}),t.add(1,"d");E.all.setAndDestroyRemoved(m&&m.map(E.all.wrapper.reader))}}})},"16.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js");t.exports=f.Node.subclass({template:n.template.get("#8"),binding:{name:"title"}})},"15.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./16.js"),c=n.require("./17.js");t.exports=l.subclass({name:"publicHolidaysPage",title:"Public holidays",childNodes:[new c],init:function(){f.Node.prototype.init.call(this);var e=this;this.router.add("public-holidays/:month/:year",{match:function(t,n){e.update({month:t,year:n}),e.select(),e.getChildByName("PublicHolidaysYear").update({year:e.data.year,publicHolidays:e.data.publicHolidays})}})}})},"14.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js");t.exports=f.Node.subclass({container:document.getElementById("page"),template:n.template.get("#7"),selection:!0,childFactory:function(e){return new e({delegate:this.delegate,router:this.router})},binding:{styles_for_types:function(e){var t="";for(var n in e.data.dayTypes)if(e.data.dayTypes.hasOwnProperty(n)){var r=e.data.dayTypes[n];t+=" .isType.type_"+r.id+"{"+"background-color: #"+r.background_color+" !important;"+"color: #"+r.color+" !important;"+"}",r.title&&(t+=" .isType.type_"+r.id+" span:before {"+'content: "'+r.title+'" !important;'+"}")}for(n in e.data.shifts)e.data.shifts.hasOwnProperty(n)&&(r=e.data.shifts[n],t+=" .isShift.type_"+r.id+"{"+"background-color: #"+r.background_color+" !important;"+"color: #"+r.color+" !important;"+"}",r.title&&(t+=" .isShift.type_"+r.id+" span:before {"+'content: "'+r.title+'" !important;'+"}"));return t}}})},"13.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./1.js");t.exports={whoami:function(e,t){return new f.Transport({url:"/whoami",method:"GET",handler:{success:function(n,r,i){i.success?e(i):t(i)}}})},signIn:function(e){return new f.Transport({url:"/login",method:"POST",contentType:"application/json",handler:{success:function(t,n,r){r.success?e(r):alert("Authentication failed")},failure:function(){alert("Authentication failed")}}})}}},"12.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./l.js"),c=n.require("./k.js"),h=n.require("./13.js"),p=f.Node.subclass({name:"LoginStatus",autoDelegate:!0,template:n.template.get("#5"),binding:{loggedInAs:function(e){return e.owner?e.owner.data.loggedInAs:""},logoutButton:new l.Button({caption:"Logout",click:function(){window.location="/logout"}})}});t.exports=f.Node.subclass({container:c.get("auth"),template:n.template.get("#6"),data:{loggedInAs:""},satellite:{loginStatus:{instance:p,existsIf:function(e){return e.data.loggedInAs!=""}}},binding:{loginStatus:"satellite:loginStatus"},init:function(){var e=this;f.Node.prototype.init.call(this),h.whoami(function(t){e.update({loggedInAs:t.user.name}),e.authCallback(t.user)},function(){window.location="/login"}).request()}})},"n.js":function(e,t,n,r,i,s,o,u,a){function y(e){return e<10?"0"+e:e}function b(e){return e<100?"0"+y(e):e}function w(e){return e instanceof Date&&(e=e.getFullYear()),!!(!(e%400)||e%100&&!(e%4))}function E(e,t){var n;return e instanceof Date?(t=e.getFullYear(),n=e.getMonth()):n=e-1,n==1?28+w(t):h[n]}function S(e,t,n){var r="";for(var i=0,s;i<t.length;i++){s=t.charAt(i);if(s=="%")switch(s=t.charAt(++i)){case"y":r+=String(n?e.getUTCFullYear():e.getFullYear()).substr(2);break;case"Y":r+=n?e.getUTCFullYear():e.getFullYear();break;case"d":r+=n?e.getUTCDate():e.getDate();break;case"D":r+=y(n?e.getUTCDate():e.getDate());break;case"m":r+=n?e.getUTCMonth()+1:e.getMonth()+1;break;case"M":r+=y(n?e.getUTCMonth()+1:e.getMonth()+1);break;case"h":r+=n?e.getUTCHours():e.getHours();break;case"H":r+=y(n?e.getUTCHours():e.getHours());break;case"i":r+=y((n?e.getUTCHours():e.getHours())%12||12);break;case"p":r+=(n?e.getUTCHours():e.getHours())>12?"pm":"am";break;case"P":r+=(n?e.getUTCHours():e.getHours())>12?"PM":"AM";break;case"I":r+=y(n?e.getUTCMinutes():e.getMinutes());break;case"s":r+=n?e.getUTCSeconds():e.getSeconds();break;case"S":r+=y(n?e.getUTCSeconds():e.getSeconds());break;case"z":r+=n?e.getUTCMilliseconds():e.getMilliseconds();break;case"Z":r+=b(n?e.getUTCMilliseconds():e.getMilliseconds());break;case"%":r+="%",i--;break;default:r+="%"+s}else r+=s}return r}function T(e){return S(e,f,!0)}function N(e){return S(e,"%Y-%M-%D",!0)}function C(e){return S(e,"%H:%I:%S.%Z",!0)}function k(e,t,n){var r=m[t];if(!r)return e;var i;if(t=="year"||t=="month")i=e.getDate(),i>28&&e.setDate(1);g[t](e,r(e)+n);if(i>28){var s=E(e);e.setDate(Math.min(i,s))}return e}function L(e,t,n){if(t=="year"||t=="month"){var r=Number(e)-Number(n)>0?-1:1,i=r>0?e:n,s=r>0?n:e,o=i.getFullYear(),u=s.getFullYear(),a=u-o;if(t=="year")return r*a;var f=i.getMonth(),l=s.getMonth(),c=a?(a>1?(a-1)*12:0)+(11-f)+(l+1):l-f;return r*c}var h=Math.floor((n-e)/v[t]);return h+Number(m[t](new Date(n-h*v[t]))-m[t](e)!=0)}function A(e,t,n){var r=g[t];if(!r)return e;var i;if(t=="year"||t=="month")i=e.getDate(),i>28&&e.setDate(1);r(e,n);if(i>28){var s=E(e);e.setDate(Math.min(i,s))}return e}function O(e,t){if(m[t])return m[t](e)}function M(e,t){return t instanceof Date&&(e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e.setTime(t.getTime())),e}var f="%Y-%M-%DT%H:%I:%S.%ZZ",l=/\D/,c=/(.{10,})([\-\+]\d{1,2}):?(\d{1,2})?$/,h=[31,28,31,30,31,30,31,31,30,31,30,31],p=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],d=["mon","tue","wed","thr","fri","sat","sun"],v={day:864e5,hour:36e5,minute:6e4,second:1e3},m={},g={};n.object.iterate({year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",millisecond:"Milliseconds"},function(e,t){m[e]=function(e){return e["get"+t]()},g[e]=function(e,n){return e["set"+t](n)}});var x=function(){function e(e,n,r,i,s,o,u){var a=new Date(e,n-1,r,i||0,0,o||0,u?u.substr(0,3):0);return a.setMinutes((s||0)-t-a.getTimezoneOffset()),a}var t;return function(n){return t=0,e.apply(null,String(n||"").replace(c,function(e,n,r,i){return t=Number(r||0)*60+Number(i||0),n}).split(l))}}();n.object.complete(Date.prototype,{toISOString:function(){return T(this)},toJSON:function(){return this.toISOString()}}),t.exports={monthNumToAbbr:p,dayNumToAbbr:d,fromISOString:x,format:S,toISOString:T,toISODateString:N,toISOTimeString:C,isLeapYear:w,getMonthDayCount:E,add:k,set:A,get:O,diff:L,fromDate:M}},"m.js":function(e,t,n,r,i,s,o,u,a){function x(e){return{hour:e.getHours(),day:e.getDate()-1,month:e.getMonth(),year:e.getFullYear()}}function T(e,t){if(!e.length)return-1;var n,r,i=0,s=e.length-1,o,u;do{r=e[n=i+s>>1];if(t<(o=r.periodStart))s=n-1;else{if(!(t>(u=r.periodEnd)))return t>=o&&t<=u?n:-1;i=n+1}}while(i<=s);return-1}function A(e,t){var n={},r=L[e];if(r){var i=t.getFullYear(),s=t.getMonth(),o=t.getDate();i-=i%r[1],s=r[2]?s-s%r[2]:0,o=r[3]?o:1,n.periodStart=new Date(i,s,o),n.periodEnd=new Date(new Date(i+r[4],s+r[5],o+r[6])-1)}else n.periodStart=new Date(t),n.periodEnd=new Date(t);return n}function M(e){var t=[],n=A(e.nodePeriodName,c.add(new Date(e.periodStart),e.nodePeriodUnit,-e.nodePeriodUnitCount*e.getInitOffset(e.periodStart)));for(var r=0;r<e.nodeCount;r++)t.push(n),n=A(e.nodePeriodName,c.add(new Date(n.periodStart),e.nodePeriodUnit,e.nodePeriodUnitCount));return t}var f=this.path,l=n.Class,c=n.require("./n.js"),h=c.monthNumToAbbr,p=n.require("./4.js").create,d=n.require("./5.js").Value,v=n.require("./9.js"),m=v.Node,g=v.ShadowNodeList,y="year",b="month",w="day",E=n.require("./b.js").dictionary("./0.l10n"),S=n.require("./e.js").define(f,{Calendar:n.resource("./3.tmpl"),Section:n.resource("./4.tmpl"),SectionMonth:n.resource("./5.tmpl"),Node:n.resource("./6.tmpl")}),N={},C=2147483647;(function(){var e=32,t=C;while(--e)N[e]=t,t>>=1})();var k={century:function(e){return e.periodStart.getFullYear()+" - "+e.periodEnd.getFullYear()},decade:function(e){return e.periodStart.getFullYear()+" - "+e.periodEnd.getFullYear()},year:function(e){return e.periodStart.getFullYear()},quarter:function(e){return E.token("quarter").token(Math.floor(e.periodStart.getMonth()/3))},month:function(e){return E.token("monthShort").token(h[e.periodStart.getMonth()])},day:function(e){return e.periodStart.getDate()}},L={century:[y,100,0,0,100,0,0],decade:[y,10,0,0,10,0,0],year:[y,1,0,0,1,0,0],quarter:[b,1,3,0,0,3,0],month:[b,1,1,0,0,1,0],day:[w,1,1,1,0,0,1]},O=l(m,{className:f+".Calendar.Node",childClass:null,periodStart:null,periodEnd:null,emit_periodChanged:p("periodChanged"),emit_select:function(){m.prototype.emit_select.call(this),this.focus()},template:S.Node,binding:{nodePeriodName:"nodePeriodName",title:{events:"periodChanged",getter:function(e){return e.parentNode&&k[e.nodePeriodName](e)}},before:{events:"periodChanged",getter:function(e){return e.parentNode?e.periodStart<e.parentNode.periodStart:!1}},after:{events:"periodChanged",getter:function(e){return e.parentNode?e.periodEnd>e.parentNode.periodEnd:!1}}},action:{click:function(){var e=this.parentNode&&this.parentNode.parentNode;e&&!this.isDisabled()&&e.selectNodeAction(this)}},isPeriodEnabled:function(){return!0},setPeriod:function(e,t,n){if(n||this.periodStart-e.periodStart||this.periodEnd-e.periodEnd)this.periodStart=e.periodStart,this.periodEnd=e.periodEnd,this.setDisabled(!this.isPeriodEnabled(this.periodStart,this.periodEnd)),t&&(t>=this.periodStart&&t<=this.periodEnd?this.select():this.unselect()),this.emit_periodChanged()}}),_=l(m,{className:f+".CalendarSection",emit_periodChanged:p("periodChanged"),emit_selectedDateChanged:p("selectedDateChanged"),template:S.Section,binding:{sectionName:"sectionName",title:{events:"periodChanged",getter:function(e){return e.getTitle(e.periodStart)}},tabTitle:{events:"selectedDateChanged",getter:function(e){return e.getTabTitle(e.selectedDate)}}},childClass:O,minDate:null,maxDate:null,periodStart:null,periodEnd:null,selectedDate:null,isPrevPeriodEnabled:!0,isNextPeriodEnabled:!0,periodName:"period",nodeCount:12,nodePeriodName:"-",nodePeriodUnit:"-",nodePeriodUnitCount:1,selection:!0,init:function(){this.childNodes=M(this).map(function(){return{nodePeriodName:this.nodePeriodName}},this),m.prototype.init.call(this);var e=this.selectedDate||new Date;this.selectedDate=null,this.setViewDate(e),this.setSelectedDate(e)},getNodeByDate:function(e){if(e&&this.periodStart<=e&&e<=this.periodEnd){var t=T(this.childNodes,e);if(t!=-1)return this.childNodes[t]}return null},isPeriodEnabled:function(){return!0},setPeriod:function(e,t){if(t||this.periodStart-e.periodStart||this.periodEnd-e.periodEnd){var n=this.periodStart,r=this.periodEnd;this.periodStart=e.periodStart,this.periodEnd=e.periodEnd;var i=M(this);this.minDate=i[0].periodStart,this.maxDate=i[i.length-1].periodEnd;if(this.firstChild)for(var s=0,o;o=this.childNodes[s];s++)o.setPeriod(i[s],this.selectedDate,t);this.emit_periodChanged(n,r)}},setSelectedDate:function(e){if(this.selectedDate-e){var t=this.selectedDate;this.selectedDate=e;var n=this.getNodeByDate(this.selectedDate);n?n.select():this.selectedDate?this.setViewDate(this.selectedDate):this.selection.clear(),this.emit_selectedDateChanged(t)}},prevPeriod:function(){this.isPrevPeriodEnabled&&this.setPeriod(A(this.periodName,new Date(Number(this.periodStart)-1)))},nextPeriod:function(){this.isNextPeriodEnabled&&this.setPeriod(A(this.periodName,new Date(Number(this.periodEnd)+1)))},setViewDate:function(e){this.setPeriod(A(this.periodName,e))},rebuild:function(){this.setPeriod(A(this.periodName,this.selectedDate),!0)},getInitOffset:function(){return 0},getTitle:function(){return"-"},getTabTitle:function(){return"-"}});_.Month=l(_,{className:f+".CalendarSection.Month",sectionName:"Month",periodName:b,nodeCount:42,nodePeriodName:w,nodePeriodUnit:w,getTabTitle:function(e){return e.getDate()},getInitOffset:function(e){return 1+(c.set(new Date(e),w,1).getDay()+5)%7},template:S.SectionMonth,binding:{year:{events:"periodChanged",getter:function(e){return e.periodStart.getFullYear()}},title:E.token("month").compute("periodChanged",function(e){return h[e.periodStart.getMonth()]})}}),_.Year=l(_,{className:f+".CalendarSection.Year",sectionName:"Year",periodName:y,nodePeriodName:b,nodePeriodUnit:b,getTitle:function(e){return e.getFullYear()},binding:{tabTitle:E.token("month").compute("selectedDateChanged",function(e){return h[e.selectedDate.getMonth()]})}}),_.YearDecade=l(_,{className:f+".CalendarSection.YearDecade",sectionName:"YearDecade",periodName:"decade",nodePeriodName:y,nodePeriodUnit:y,getInitOffset:function(){return 1},getTabTitle:function(e){return e.getFullYear()},getTitle:function(e){return e.getFullYear()+" - "+this.periodEnd.getFullYear()}}),_.Century=l(_,{className:f+".CalendarSection.Century",sectionName:"Century",periodName:"century",nodePeriodName:"decade",nodePeriodUnit:y,nodePeriodUnitCount:10,getTabTitle:function(e){var t=e.getFullYear(),r=t-t%10;return r+"-"+n.number.lead(Number(r.toString().substr(-2))+9,2)},getInitOffset:function(){return 1}}),_.YearQuarters=l(_,{className:f+".CalendarSection.YearQuarter",sectionName:"YearQuarter",periodName:y,nodeCount:4,nodePeriodName:"quarter",nodePeriodUnit:b,nodePeriodUnitCount:3}),_.Quarter=l(_,{className:f+".CalendarSection.Quarter",sectionName:"Quarter",periodName:"quarter",nodeCount:3,nodePeriodName:b,nodePeriodUnit:b,binding:{title:E.token("quarter").compute("periodChanged",function(e){return Math.floor(e.periodEnd.getMonth()/3)})}});var D=l(m,{className:f+".Calendar",emit_change:p("change"),emit_childNodesModified:function(e){if(e.inserted)for(var t=0,n;n=e.inserted[t++];)n.isPeriodEnabled=this.isPeriodEnabled,n.childNodes.forEach(function(e){e.isPeriodEnabled=this.isPeriodEnabled},this),n.setViewDate(this.date.value),this.selectedDate.link(n,n.setSelectedDate),n.rebuild();if(e.deleted)for(var t=0,n;n=e.deleted[t++];)this.selectedDate.unlink(n,n.setSelectedDate);m.prototype.emit_childNodesModified.call(this,e),this.selection&&!this.selection.itemCount&&this.firstChild&&this.firstChild.select()},template:S.Calendar,binding:{today:function(){return c.format(new Date,"%D.%M.%Y")}},action:{moveNext:function(){this.selection.pick().nextPeriod()},movePrev:function(){this.selection.pick().prevPeriod()},selectToday:function(){this.selectedDate.set(new Date)}},satellite:{shadowTabs:g.subclass({className:f+".ShadowTabs",getChildNodesElement:function(e){return e.tmpl.sectionTabs},childClass:{className:f+".ShadowTab",getElement:function(e){return e.tmpl.tabElement}}})},selection:!0,childClass:_,childFactory:function(e){var t=e;typeof e=="string"&&(t=_[e]);if(!n.Class.isClass(t)||!t.isSubclassOf(_))return;return new t},selectNodeAction:function(e){if(e instanceof O){var t=e.periodStart,n=this.selection.pick();this.selectedDate.set(c.add(new Date(this.selectedDate.value),n.nodePeriodUnit,c.diff(this.selectedDate.value,n.nodePeriodUnit,t))),this.nextSection()}},date:null,childNodes:["Month","Year","YearDecade"],minDate:null,maxDate:null,map:null,periodEnableByDefault:!0,init:function(){var e=new Date;this.selectedDate=new d({value:new Date(this.date||e)}),this.date=new d({value:new Date(this.date||e)}),this.isPeriodEnabled=this.isPeriodEnabled.bind(this),m.prototype.init.call(this),this.sections&&this.setChildNodes(this.sections)},setMinDate:function(e){if(this.minDate!=e){this.minDate=e;for(var t=0,n;n=this.childNodes[t];t++)n.rebuild()}},setMaxDate:function(e){if(this.maxDate!=e){this.maxDate=e;for(var t=0,n;n=this.childNodes[t];t++)n.rebuild()}},setSection:function(e){var t=n.array.search(this.childNodes,"sectionName",e);t&&t.select()},nextSection:function(e){var t=this.selection.pick(),n=e?t.nextSibling:t.previousSibling;n?(n.select(),n.setViewDate(this.selectedDate.value)):e||this.emit_change()},selectDate:function(e){e-this.date.value!=0&&this.date.set(new Date(e))},getNextPeriod:function(e,t){if(!this.isNextPeriodEnabled(e,t))return!1;if(this.map){var n=t?1:-1,r=t?"start":"till",i=t?"till":"start",s=c.add(new Date(e),"millisecond",n),o=this.map[this.periodEnableByDefault?"disabled":"enabled"];if(o){var u=A(y,s);u.periodEnd.getFullYear()==s.getFullYear()&&(u[r]=s);while(!this.isPeriodEnabled(u.periodStart,u.periodEnd))u=A(y,c.add(s,y,n));u[i]=A(b,u[r])[i];while(!this.isPeriodEnabled(u.periodStart,u.periodEnd))u=A(b,c.add(s,b,n));var a=x(u[r]),f=x(u[i]),l=o[f.year]&&o[f.year][f.month];if(!l)return A(w,u[r]);if(this.periodEnableByDefault){var h=N[u.periodEnd.getMonthDayCount()];l=l&h^h}for(var p=a.day;p!=f.day+n;p+=n)if(l>>p&1){s=new Date(a.year,a.month,p+1);break}}}return A(w,s)},isNextPeriodEnabled:function(e,t){if(!t&&this.minDate&&this.minDate>e)return!1;if(t&&this.maxDate&&this.maxDate<e)return!1;if(this.map){if(!this.periodEnableByDefault){var r=t?1:-1,i=e.getFullYear(),s=c.add(new Date(e),"millisecond",r),o=s.getFullYear(),u=n.object.keys(this.map.enable).filter(function(e){return r*e>=r*o}),a=u.length;if(a){u=u.sort(function(e,t){return r*(e>t)||-r*(e<t)});for(var f=0;f<a;f++){var l=A(y,new Date(u[f],0));if(this.isPeriodEnabled(t&&u[f]==i?s:l.periodStart,!t&&u[f]==i?s:l.periodEnd))return!0}}return!1}if(!t&&this.minDate)return this.isPeriodEnabled(this.minDate,e);if(t&&this.maxDate)return this.isPeriodEnabled(e,this.maxDate)}return!0},isPeriodEnabled:function(e,t){function n(e,t,n,r){return e?e==1?t&N[r+1]:t:t>>n}if(this.minDate&&this.minDate>t)return!1;if(this.maxDate&&this.maxDate<e)return!1;var r=this.map&&this.map[this.periodEnableByDefault?"disabled":"enabled"];if(r){var i=x(e),s=x(t),o=i.month,u,a,f,l=new Date(i.year,i.month),c=11-i.month,h=c+1+(s.year-i.year-1)*12+(s.month+1)-1;if(this.periodEnableByDefault){if(h==0)return!(u=r[i.year])||!(a=u[i.month])||(a^C)>>i.day&N[s.day-i.day+1];for(var p=0;p<=h;p++){if(!p||c==p%12){u=r[l.getFullYear()];if(!u)return!0}a=u[o=l.getMonth()];if(!a)return!0;f=N[l.getMonthDayCount()];if(n(p/h,a&f^f,i.day,s.day))return!0;l.setMonth(o+1)}return!1}if(h==0)return(u=r[i.year])&&(a=u[i.month])&&a>>i.day&N[s.day-i.day+1];for(var p=0;p<=h;p++){if(!p||c==p%12||!u){u=r[l.getFullYear()];if(!u){p+=12,l.setMonth(o+12);continue}}a=u[o=l.getMonth()];if(a&&n(p/h,a,i.day,s.day))return!0;l.setMonth(o+1)}return!1}return!0},destroy:function(){m.prototype.destroy.call(this),this.date.destroy(),this.date=null,this.selectedDate.destroy(),this.selectedDate=null,delete this.isPeriodEnabled,this.tabElementMap_=null}});t.exports={Calendar:D,CalendarSection:_}},"11.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./m.js"),l=n.require("./w.js");t.exports=f.Calendar.subclass({childNodes:["Year","YearDecade"],action:{click:function(){}},handler:{change:function(){this.owner.emit_monthChange(this.selectedDate.value)},update:function(){var e=l().year(parseInt(this.data.year)).month(this.data.month);this.selectedDate.set(e.toDate())}},init:function(){f.Calendar.prototype.init.call(this);var e=l().year(parseInt(this.data.year)).month(this.data.month);this.selectedDate.set(e.toDate())}})},"10.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js");t.exports=f.Node.subclass({template:n.template.get("#1"),childClass:f.Node.subclass({template:n.template.get("#2"),data:{name:"default",id:0},binding:{name:"data:name",id:"data:id"},action:{selectTeam:function(){this.parentNode.owner.emit_teamChange(this.data.code)}}}),handler:{update:function(){var e=this.data.teams,t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({data:{id:e[n].id,name:e[n].name,code:e[n].code}});this.setChildNodes(t)}}})},"l.js":function(e,t,n,r,i,s,o,u,a){var f=this.path,l=n.require("./9.js").Node,c=n.require("./5.js").resolveValue,h=n.require("./e.js").define(f,{Button:n.resource("./0.tmpl"),ButtonPanel:n.resource("./1.tmpl"),ButtonGroup:n.resource("./2.tmpl")}),p=l.subclass({className:f+".Button",template:h.Button,binding:{caption:"caption"},action:{click:function(){this.isDisabled()||this.click()}},caption:"",captionRA_:null,setCaption:function(e){e=c(this,this.setCaption,e,"captionRA_"),this.caption!=e&&(this.caption=e,this.tmpl&&this.updateBind("caption"))},click:function(){},init:function(){l.prototype.init.call(this),this.setCaption(this.caption||" ")},destroy:function(){this.captionRA_&&c(this,null,null,"captionRA_"),l.prototype.destroy.call(this)}}),d=l.subclass({className:f+".ButtonPanel",template:h.ButtonPanel,childClass:p,groupingClass:{className:f+".ButtonGroupingNode",rule:function(e){return e.groupId||e.basisObjectId},childClass:{className:f+".ButtonGroup",template:h.ButtonGroup}},grouping:{}});t.exports={Button:p,ButtonPanel:d}},"k.js":function(e,t,n,r,i,s,o,u,a){function it(e,t,n){return t!=null?e.insertBefore(nt(t)?t:pt(t),n||null):null}function ot(e,t){return e.outerHTML||yt("",t?e:e.cloneNode(!0)).innerHTML}function at(e){for(var t=0,n;n=ut[t++];)if(e[n]!=null)return e[n];return ct(e,M,function(e){return e.nodeType==b}).map(d("nodeValue")).join("")}function ft(e){return e&&(nt(e)||e.nodeType)?e:typeof e=="string"?l.getElementById(e):null}function lt(e,t){var n=ft(e)||l;return t=="*"&&n.all?p(n.all):p(n.getElementsByTagName(t||"*"))}function ct(e,t,r){var i=[],s,o;r=typeof r=="string"?d(r):r||n.fn.$true,t&(D|O|_)&&r(e)&&i.push(e);switch(t){case A:case O:o=e;while((o=o[V])&&o!==e.document)r(o)&&i.push(o);break;case H:o=e[$];while(o)r(o)&&i.push(o),o=o[K];break;case M:case _:e[$]&&(s=new st(e),s.nodes(r,i));break;case B:s=new st(e,r),s.cursor_=e[K]||e[V];while(o=s.next())i.push(o);break;case j:o=e;while(o=o[K])r(o)&&i.push(o);break;case P:r(e[V])&&i.push(e[V]);break;case F:s=new st(e,r,st.BACKWARD),s.cursor_=e[Q]||e[V];while(o=s.next())i.push(o);break;case I:o=e;while(o=o[Q])r(o)&&i.push(o)}return i}function ht(e,t,n){while(e&&e!==n){if(t(e))break;e=e.parentNode}return e||null}function pt(e){return l.createTextNode(e!=null?e:"")}function dt(){var e=l.createDocumentFragment(),t=arguments.length,n=dt.array=[];for(var r=0;r<t;r++)n.push(it(e,arguments[r]));return e}function yt(e){var t=e!=undefined&&typeof e!="string",r=(t?e.description:e)||"",i="div",s,o=r.match(/^([a-z0-9_\-]+)(.*)$/i);o&&(i=o[1],r=o[2]);if(r!=""){var u=[],a={},f;while(o=gt.exec(r)){if(o[8])throw new Error("Create element error in basis.dom.createElement()\n\nDescription:\n> "+r+"\n\nProblem place:\n> "+r.substr(0,o.index)+"-->"+r.substr(o.index)+"<--");f=o[1]||o[2]||o[3],o[1]?a.id=f:o[2]?u.push(f):f!="class"&&(a[f]=o[4]?o[5]||o[6]||o[7]||"":f)}vt&&a.name&&/^(input|textarea|select)$/i.test(i)&&(i="<"+i+" name="+a.name+">")}s=l.createElement(i);if(a){a.style&&mt&&(s.style.cssText=a.style);for(var c in a)s.setAttribute(c,a[c],0)}u&&u.length&&(s.className=u.join(" ")),arguments.length>1&&it(s,dt.apply(0,n.array.flatten(p(arguments,1))));if(t){e.css&&n.cssom&&n.cssom.setStyle(s,e.css);for(var h in e)typeof e[h]=="function"&&v.addHandler(s,h,e[h],s)}return s}function bt(e,t,n,r){e=ft(e)||e;switch(n){case undefined:case Y:r=null;break;case G:r=e[$];break;case Z:break;case et:r=r[K];break;default:n=Number(n),r=n>=0&&n<e.childNodes.length?e.childNodes[n]:null}var i=!nt(e),s;if(!t||!Array.isArray(t))s=i?t&&e.insertBefore(t,r):it(e,t,r);else if(i){s=[];for(var o=0,u=t.length;o<u;o++)s[o]=e.insertBefore(t[o],r)}else e.insertBefore(dt.apply(0,t),r),s=dt.array;return s}function wt(e){return e[V]?e[V].removeChild(e):e}function Et(e,t){return e[V]?e[V].replaceChild(t,e):e}function St(e,t){return e===t||tt(e,t)&(W|z|q)?!1:(Et(e,m),Et(t,e),Et(m,t),!0)}function xt(e,t){var n=e.cloneNode(!t);return n.attachEvent&&ct(n,_).forEach(v.clearHandlers),n}function Tt(e){e=ft(e);while(e[J])e.removeChild(e[J]);return e}function Nt(e,t,r){var i=[];r=n.getter(r||n.fn.$self);for(var s in t)for(var o=0;o<e.length;o++){var u=r(e[o]);i[o]=t[s](e[o],o,u)?yt(s,u):e[o]}return i}function Ct(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function kt(e,t){return rt(e,t)}function Lt(e,t){return e==t||rt(t,e)}function At(e,t){try{e=ft(e),e.focus(),t&&e.select&&e.select()}catch(n){}}function Ot(e,t,n){arguments.length<3&&(n=t);if(e.setSelectionRange)e.setSelectionRange(t,n);else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveStart("character",t),r.moveEnd("character",n-t),r.select()}}function Mt(e){if(l.selection){var t=l.selection.createRange();return t.compareEndPoints("StartToEnd",t)!=0&&t.collapse(e),t.getBookmark().charCodeAt(2)-2}return 0}function _t(e){return typeof e.selectionStart!="undefined"?e.selectionStart:Mt(!0)}function Dt(e){return typeof e.selectionEnd!="undefined"?e.selectionEnd:Mt(!1)}var f=this.path,l=r.document,c=r.Node,h=n.Class,p=n.array.from,d=n.getter,v=n.require("./7.js"),m=l.createElement("div"),g=1,y=2,b=3,w=4,E=5,S=6,x=7,T=8,N=9,C=10,k=11,L=12,A=1,O=2,M=4,_=8,D=16,P=32,H=64,B=128,j=256,F=512,I=1024,q=1,R=2,U=4,z=8,W=16,X=32,V="parentNode",$="firstChild",J="lastChild",K="nextSibling",Q="previousSibling",G="begin",Y="end",Z="before",et="after",tt;typeof m.compareDocumentPosition=="function"?tt=function(e,t){return e.compareDocumentPosition(t)}:tt=function(e,t){return e==t?0:e.document!=t.document?q|X:e.sourceIndex>t.sourceIndex?R|z*rt(t,e):U|W*rt(e,t)};var nt,rt;typeof c!="undefined"?(nt=function(e){return e instanceof c},c.prototype.contains?rt=function(e,t){return e.contains(t)}:rt=function(e,t){return!!(e.compareDocumentPosition(t)&W)}):(nt=function(e){return e&&e.ownerDocument===l},rt=function(e,t){return e===l?l.documentElement.contains(t):e.contains(t)});var st=h(null,{className:f+".TreeWalker",root_:null,cursor_:null,filter:n.fn.$true,init:function(e,t,n){this.setRoot(e),this.setDirection(n),typeof t=="function"&&(this.filter=t)},setDirection:function(e){n.object.extend(this,e?{a:J,b:Q,c:K,d:$}:{a:$,b:K,c:Q,d:J})},setRoot:function(e){this.root_=e||l,this.reset()},reset:function(){this.cursor_=null},first:function(e){return this.reset(),this.next(e)},last:function(e){return this.reset(),this.prev(e)},nodes:function(e,t){var n;t||(t=[]),this.reset();while(n=this.next(e))t.push(n);return t},next:function(e){e=e||this.filter;var t=this.cursor_||this.root_;do{var n=t[this.a];while(!n){if(t===this.root_)return this.cursor_=null;n=t[this.b],n||(t=t[V])}}while(!e(t=n));return this.cursor_=t},prev:function(e){e=e||this.filter;var t=this.cursor_,n=this.c,r=this.d;do{var i=t?t[n]:this.root_[r];if(i){while(i[r])i=i[r];t=i}else t&&(t=t[V]);if(!t||t===this.root_){t=null;break}}while(!e(t));return this.cursor_=t},destroy:function(){this.root_=null,this.cursor_=null}});st.BACKWARD=!0;var ut=["textContent","innerText","nodeValue"],vt=function(){var e=l.createElement("input");return e.name="a",!/name/.test(ot(e))}(),mt=function(){return m.setAttribute("style","color: red"),m.style.color!=="red"}(),gt=/#([a-z0-9_:\-]+)|\.([a-z0-9_:\-]+)|\[([a-z0-9_:\-]+)(="((?:\\.|[^"])*)"|='((?:\\.|[^'])*)'|=((?:\\.|[^\]])*))?\s*\]|\s*(\S)/gi;t.exports={ELEMENT_NODE:g,ATTRIBUTE_NODE:y,TEXT_NODE:b,CDATA_SECTION_NODE:w,ENTITY_REFERENCE_NODE:E,ENTITY_NODE:S,PROCESSING_INSTRUCTION_NODE:x,COMMENT_NODE:T,DOCUMENT_TYPE_NODE:C,DOCUMENT_NODE:N,DOCUMENT_FRAGMENT_NODE:k,NOTATION_NODE:L,AXIS_ANCESTOR:A,AXIS_ANCESTOR_OR_SELF:O,AXIS_DESCENDANT:M,AXIS_DESCENDANT_OR_SELF:_,AXIS_SELF:D,AXIS_PARENT:P,AXIS_CHILD:H,AXIS_FOLLOWING:B,AXIS_FOLLOWING_SIBLING:j,AXIS_PRECEDING:F,AXIS_PRECEDING_SIBLING:I,INSERT_BEGIN:G,INSERT_END:Y,INSERT_BEFORE:Z,INSERT_AFTER:et,TreeWalker:st,outerHTML:ot,textContent:at,get:ft,tag:lt,axis:ct,findAncestor:ht,createElement:yt,createText:pt,createFragment:dt,insert:bt,remove:wt,replace:Et,swap:St,clone:xt,clear:Tt,wrap:Nt,setAttribute:Ct,parentOf:kt,isInside:Lt,focus:At,setSelectionRange:Ot,getSelectionStart:_t,getSelectionEnd:Dt}},"j.js":function(e,t,n,r,i,s,o,u,a){function q(){}function R(){}function U(){}function z(e){e.setDelegate=n.fn.$undef,e.destroy=q}function W(e){var t=e.constructor.prototype;e.setDelegate=t.setDelegate,e.destroy=t.destroy}function X(e){return e.sortingValue}function V(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,+(e>t)||-(e<t)}function $(e,t){return e=e.sortingValue||0,t=t.sortingValue||0,-(e>t)||+(e<t)}function J(e){return e.childNodes.sort(e.sortingDesc?$:V)}function K(e,t,n,r){if(!e.length)return 0;r=!!r;var i=0,s=e.length-1,o=typeof t,u,a,f;do{f=i+s>>1,u=n(e[f]),a=typeof u;if(r){if(o>a||t>u){s=f-1;continue}if(o<a||t<u){i=f+1;continue}}else{if(o<a||t<u){s=f-1;continue}if(o>a||t>u){i=f+1;continue}}return t==u?f:0}while(i<=s);return f+((a<o||u<t)^r)}function Q(e,t,n,r,i){if(t===n)return;var s,o=e,u=[];r&&(e.contextSelection=n,e.selected&&!e.selectedRA_&&u.push(e));while(o){s=!o.selection||i&&o===e?o.firstChild:null;if(s&&s.contextSelection!==t)throw"Try change wrong context selection";while(!s){if(o===e){if(u.length){t&&t.remove(u);if(n){n.add(u);for(var a=0;a<u.length;a++){var f=u[a];f.selected&&!n.has(f)&&(f.selected=!1,f.emit_unselect())}}}return}s=o.nextSibling,s||(o=o.parentNode)}o=s,o.selected&&!o.selectedRA_&&u.push(o),o.contextSelection=n}}function G(e,t){if(e.contextDisabled!=t){e.contextDisabled=t;if(e.disabled)return;t?e.emit_disable():e.emit_enable()}}function Y(e){return e.isSubclassOf(it)?e:it}function Z(e){if(!e)return null;if(e.isSatelliteConfig)return e;if(e instanceof it)return e;e.constructor!==Object&&(e={instance:e});var t=!1,r="update",i={isSatelliteConfig:!0};for(var s in e){var o=e[s];switch(s){case"instance":o instanceof it?i.instance=o:l.isClass(o)?i.instanceClass=Y(o):(typeof o=="string"&&(o=n.getter(o)),i.getInstance=o);break;case"instanceOf":case"satelliteClass":if(s=="instanceOf"&&"satelliteClass"in e)break;if("instance"in e)break;l.isClass(o)&&(i.instanceClass=Y(o));break;case"existsIf":case"delegate":case"dataSource":o&&(typeof o=="string"&&(o=v(o)),typeof o!="function"?o=n.fn.$const(o):t=!0),i[s]=o;break;case"config":typeof o=="string"&&(o=v(o)),i.config=o;break;case"events":r=e.events;break;default:}}!i.instance&&!i.getInstance&&!i.instanceClass&&(i.instanceClass=Y(it));if(t){Array.isArray(r)&&(r=r.join(" "));if(typeof r=="string"){var u={};r=r.split(/\s+/);for(var a=0,f;f=r[a];a++)u[f]=nt,i.handler=u}}return i}function et(e,t){for(var n in t)t[n]&&typeof t[n]=="object"&&e.setSatellite(n,t[n])}function at(e,t){var n=t.length-1;e.childNodes=t,e.firstChild=t[0]||null,e.lastChild=t[n]||null;for(var r,i=n;r=t[i];i--)r.nextSibling=t[i+1]||null,r.previousSibling=t[i-1]||null,e.insertBefore(r,r.nextSibling)}function ft(e,t){for(var n=0,r;r=t[n];n++)r.groupNode.nodes.push(r);var i=[e.grouping.nullGroup].concat(e.grouping.childNodes),s=[];for(var n=0,o;o=i[n];n++){var u=o.nodes;o.first=u[0]||null,o.last=u[u.length-1]||null,s.push.apply(s,u),o.emit_childNodesModified({inserted:u})}return s}function lt(e,t){var n;if(typeof e.childFactory=="function"){n=e.childFactory(t);if(n instanceof e.childClass)return n}throw n?M:_}var f=this.path,l=n.Class,c=n.object.complete,h=n.array,p=n.array.remove,d=n.fn.$undef,v=n.getter,m=n.fn.nullGetter,g=n.require("./4.js"),y=g.create,b=g.events,w=n.require("./5.js"),E=w.resolveValue,S=w.resolveDataset,x=w.createResolveFunction,T=w.SUBSCRIPTION,N=w.STATE,C=w.Object,k=w.ReadOnlyDataset,L=w.Dataset,A=f+": Node can't be inserted at specified point in hierarchy",O=f+": Node was not found",M=f+": Child node has wrong class",_=f+": Child node is null",D=f+": Operation is not allowed because node is under dataSource control",P=f+": Operation is not allowed because node is under dataSource adapter control",H=f+": Node can't has owner and parentNode",B=f+": Node can't has children and dataSource as childClass isn't specified",j="__auto__",F={ANY:!0,NONE:!1,PARENT:"parent",OWNER:"owner"},I={};T.addProperty("owner"),T.addProperty("dataSource"),T.add("CHILD",{childNodesModified:function(e,t){var n;if(n=t.inserted)for(var r=0,i;i=n[r];r++)T.link("child",e,n[r]);if(n=t.deleted)for(var r=0,i;i=n[r];r++)T.unlink("child",e,n[r])}},function(e,t){var n=t.childNodes||[];for(var r=0,i;i=n[r];r++)e("child",t,i)}),T.add("SATELLITE",{satelliteChanged:function(e,t,n){n&&T.unlink("satellite",e,n),e.satellite[t]&&T.link("satellite",e,e.satellite[t])}},function(e,t){var n=t.satellite;if(n!==tt)for(var r in n)r!==j&&e("satellite",t,n[r])});var tt=l.customExtendProperty({},function(e,t){for(var n in t)e[n]=Z(t[n])}),nt=function(){var e=this.name,t=this.config,r=this.owner,i="existsIf"in t==0||t.existsIf(r);if(E(this,nt,i,"existsRA_")){var s=this.instance||t.instance;if(!s||this.factoryType=="value"){if(!this.factoryType){var o=t.getInstance,u=t.instanceClass;typeof o=="function"&&(o=o.call(r,r),l.isClass(o)&&(u=Y(o))),this.factoryType=u?"class":"value",this.factory=u||o}if(this.factoryType=="class"){var a={destroy:U};t.delegate&&(a.autoDelegate=!1,a.delegate=t.delegate(r)),t.dataSource&&(a.dataSource=t.dataSource(r)),t.config&&n.object.complete(a,typeof t.config=="function"?t.config(r):t.config),this.instance=new this.factory(a),r.setSatellite(e,this.instance,!0);return}s=st(this,nt,this.factory,"instanceRA_")}this.instance!==s&&(this.instance=s||null,r.setSatellite(e,this.instance,!0)),s&&s.owner===r&&(t.delegate&&s.setDelegate(t.delegate(r)),t.dataSource&&s.setDataSource(t.dataSource(r)))}else{var s=this.instance;s&&(t.instance&&(t.delegate&&s.setDelegate(),t.dataSource&&s.setDataSource()),this.instance=null,r.setSatellite(e,null,!0))}},rt={destroy:function(){this.instanceRA_||this.owner.setSatellite(this.name,null)}},it=l(C,{className:f+".AbstractNode",subscribeTo:C.prototype.subscribeTo+T.DATASOURCE+T.SATELLITE,isSyncRequired:function(){return this.state==N.UNDEFINED||this.state==N.DEPRECATED},syncEvents:{activeChanged:!1},emit_update:function(e){C.prototype.emit_update.call(this,e);var t=this.parentNode;t&&(t.matchFunction&&this.match(t.matchFunction),t.insertBefore(this,this.nextSibling))},listen:{owner:{destroy:function(){this.ownerSatelliteName||this.setOwner()}}},autoDelegate:F.NONE,name:null,childNodes:null,emit_childNodesModified:y("childNodesModified","delta")&&function(e){b.childNodesModified.call(this,e);var t=this.listen.childNode,n;if(t){if(n=e.inserted)for(var r=0,i;i=n[r];r++)i.addHandler(t,this);if(n=e.deleted)for(var r=0,i;i=n[r];r++)i.removeHandler(t,this)}},childNodesState:N.UNDEFINED,emit_childNodesStateChanged:y("childNodesStateChanged","oldState"),childClass:it,dataSource:null,emit_dataSourceChanged:y("dataSourceChanged","oldDataSource"),dataSourceRA_:null,dataSourceMap_:null,destroyDataSourceMember:!0,parentNode:null,emit_parentChanged:y("parentChanged","oldParentNode"),nextSibling:null,previousSibling:null,firstChild:null,lastChild:null,sorting:m,sortingDesc:!1,emit_sortingChanged:y("sortingChanged","oldSorting","oldSortingDesc"),groupingClass:null,grouping:null,emit_groupingChanged:y("groupingChanged","oldGrouping"),groupNode:null,groupId:NaN,satellite:tt,ownerSatelliteName:null,emit_satelliteChanged:y("satelliteChanged","name","oldSatellite"),owner:null,emit_ownerChanged:y("ownerChanged","oldOwner"),init:function(){C.prototype.init.call(this);var e=this.childNodes,t=this.dataSource;e&&(this.childNodes=null),t&&(this.dataSource=null);var n=this.grouping;n&&(this.grouping=null,this.setGrouping(n)),this.childClass&&(this.childNodes=[],t?this.setDataSource(t):e&&this.setChildNodes(e));var r=this.satellite;r!==tt&&(this.satellite=tt,et(this,r));var i=this.owner;i&&(this.owner=null,this.setOwner(i))},setChildNodesState:function(e,t){var n=String(e),r=this.childNodesState;if(!N.values[n])throw new Error("Wrong state value");if(r!=n||r.data!=t)this.childNodesState=Object(n),this.childNodesState.data=t,this.emit_childNodesStateChanged(r)},appendChild:function(e){},insertBefore:function(e,t){},removeChild:function(e){},replaceChild:function(e,t){},clear:function(e){},setChildNodes:function(e){},setGrouping:function(e,t){},setSorting:function(e,t){},setDataSource:function(e){},setOwner:function(e){if(!e||e instanceof it==0)e=null;if(e&&this.parentNode)throw H;var t=this.owner;if(t!==e){var n=this.listen.owner;if(t){if(this.ownerSatelliteName&&t.satellite[j]&&this.ownerSatelliteName in t.satellite[j])return;n&&t.removeHandler(n,this),this.ownerSatelliteName&&(this.owner=null,t.setSatellite(this.ownerSatelliteName,null))}e&&n&&e.addHandler(n,this),this.owner=e,this.emit_ownerChanged(t),(this.autoDelegate==F.OWNER||this.autoDelegate===F.ANY)&&this.setDelegate(e)}},setSatellite:function(e,t,n){var r=this.satellite[e]||null,i=this.satellite[j],s=i&&i[e],o=n&&s;if(o)t=s.instance,t&&s.config.instance&&delete s.config.instance.setOwner;else{t=Z(t);if(t&&t.owner===this&&i&&t.ownerSatelliteName&&i[t.ownerSatelliteName])return;s&&(delete i[e],s.config.instance&&s.config.instance.removeHandler(rt,s),s.config.handler&&this.removeHandler(s.config.handler,s))}if(r!==t){var u=this.listen.satellite,a=this.listen["satellite:"+e],f;r&&(delete this.satellite[e],r.ownerSatelliteName=null,s&&r.destroy===U?f=r:(u&&r.removeHandler(u,this),a&&r.removeHandler(a,this),r.setOwner(null)),o&&!t&&s.config.instance&&(s.config.instance.setOwner=R));if(t){if(t instanceof it==0){var s={owner:this,name:e,config:t,factoryType:null,factory:null,instance:null,instanceRA_:null,existsRA_:null};t.handler&&this.addHandler(t.handler,s),t.instance&&(t.instance.addHandler(rt,s),t.instance.setOwner=R),i||(this.satellite===tt&&(this.satellite={}),i=this.satellite[j]={}),i[e]=s,nt.call(s,this),!s.instance&&r&&this.emit_satelliteChanged(e,r),f&&(delete f.destroy,f.destroy());return}if(t.owner!==this){if(s&&s.config.delegate){var l=t.autoDelegate;t.autoDelegate=!1,t.setOwner(this),t.autoDelegate=l}else t.setOwner(this);if(t.owner!==this){this.setSatellite(e,null);return}u&&t.addHandler(u,this),a&&t.addHandler(a,this)}else t.ownerSatelliteName&&(delete this.satellite[t.ownerSatelliteName],this.emit_satelliteChanged(t.ownerSatelliteName,t));this.satellite==tt&&(this.satellite={}),this.satellite[e]=t,t.ownerSatelliteName=e}this.emit_satelliteChanged(e,r),f&&(delete f.destroy,f.destroy())}},getChildNodesDataset:function(){return I[this.basisObjectId]||new vt({sourceNode:this})},destroy:function(){C.prototype.destroy.call(this),this.dataSource||this.dataSourceRA_?this.setDataSource():this.firstChild&&this.clear(),this.parentNode&&this.parentNode.removeChild(this),this.grouping&&(this.grouping.setOwner(),this.grouping=null),this.owner&&this.setOwner();var e=this.satellite;if(e!==tt){var t=e[j];delete e[j];for(var n in t)t[n].config.instance&&!t[n].instance&&t[n].config.instance.destroy(),t[n].existsRA_&&E(t[n],null,null,"existsRA_"),t[n].instanceRA_&&E(t[n],null,null,"instanceRA_");for(var n in e){var r=e[n];r.owner=null,r.ownerSatelliteName=null,r.destroy===U&&delete r.destroy,r.destroy()}this.satellite=null}this.childNodes=null}}),st=x(it),ot=l(it,{className:f+".PartitionNode",autoDestroyIfEmpty:!1,nodes:null,first:null,last:null,init:function(){this.nodes=[],it.prototype.init.call(this)},insert:function(e,t){var n=this.nodes,r=t?n.indexOf(t):-1;r==-1?(n.push(e),this.last=e):n.splice(r,0,e),this.first=n[0],e.groupNode=this,this.emit_childNodesModified({inserted:[e]})},remove:function(e){var t=this.nodes;p(t,e)&&(this.first=t[0]||null,this.last=t[t.length-1]||null,e.groupNode=null,this.emit_childNodesModified({deleted:[e]})),!this.first&&this.autoDestroyIfEmpty&&this.destroy()},clear:function(){if(!this.first)return;var e=this.nodes;for(var t=e.length;t-->0;)e[t].groupNode=null;this.nodes=[],this.first=null,this.last=null,this.emit_childNodesModified({deleted:e}),this.autoDestroyIfEmpty&&this.destroy()},destroy:function(){it.prototype.destroy.call(this),this.nodes=null,this.first=null,this.last=null}}),ut={itemsChanged:function(e,t){var n={},r=[];if(t.deleted){n.deleted=r;if(this.childNodes.length==t.deleted.length){r=h(this.childNodes);for(var i=0,s;s=r[i];i++)W(s);this.dataSourceMap_=null,this.clear(!0),this.dataSourceMap_={}}else for(var i=0,o;o=t.deleted[i];i++){var u=o.basisObjectId,a=this.dataSourceMap_[u];W(a),delete this.dataSourceMap_[u],this.removeChild(a),r.push(a)}}if(t.inserted){n.inserted=[];for(var i=0,o;o=t.inserted[i];i++){var f=lt(this,{delegate:o});z(f),this.dataSourceMap_[o.basisObjectId]=f,n.inserted.push(f),this.firstChild&&this.insertBefore(f)}}this.firstChild?this.emit_childNodesModified(n):this.setChildNodes(n.inserted);if(this.destroyDataSourceMember&&r.length)for(var i=0,o;o=r[i];i++)o.destroy()},stateChanged:function(e){this.setChildNodesState(e.state,e.state.data)},destroy:function(){this.dataSourceRA_||this.setDataSource()}},ct={childClass:it,childFactory:null,listen:{dataSource:ut},getChild:function(e,t){return n.array.search(this.childNodes,e,t)},getChildByName:function(e){return this.getChild(e,"name")},appendChild:function(e){return this.insertBefore(e)},insertBefore:function(e,t){if(!this.childClass)throw B;if(e.firstChild){var n=this;while(n=n.parentNode)if(n===e)throw A}var r=e&&e instanceof this.childClass;if(this.dataSource){if(!r||!e.delegate||this.dataSourceMap_[e.delegate.basisObjectId]!==e)throw D}else if(this.dataSourceRA_)throw P;r||(e=lt(this,e instanceof C?{delegate:e}:e));if(e.owner)throw H;var i=e.parentNode===this,s=this.childNodes,o=this.grouping,u,a=e.groupNode,f=null,l=this.sorting,c,h=!1,d,v=-1,g,y;i&&(g=e.nextSibling,y=e.previousSibling);if(l!==m){t=null,c=this.sortingDesc,d=l(e);if(d==null)d=-Infinity;else if(typeof d!="number"||d!==d)d=String(d);i&&(d===e.sortingValue?h=!0:(c?h=(!g||typeof g.sortingValue<=typeof d&&g.sortingValue<=d)&&(!y||typeof y.sortingValue>=typeof d&&y.sortingValue>=d):h=(!g||typeof g.sortingValue>=typeof d&&g.sortingValue>=d)&&(!y||typeof y.sortingValue<=typeof d&&y.sortingValue<=d),h&&(e.sortingValue=d)))}if(o){var n;f=o.getGroupNode(e,!0),u=f.nodes;if(a===f)if(h||l===m&&g===t)return e;l!==m?a===f&&h?g&&g.groupNode===f?v=u.indexOf(g):v=u.length:(v=K(u,d,X,c),e.sortingValue=d):t&&t.groupNode===f?v=u.indexOf(t):v=u.length;if(v<u.length)t=u[v];else if(f.last)t=f.last.nextSibling;else{n=f,t=null;while(n=n.nextSibling)if(t=n.first)break}if(e===t||i&&g===t)return a!==f&&(a&&a.remove(e),f.insert(e,t)),e;v=-1}else if(l!==m){if(h)return e;v=K(s,d,X,c,this.lll),t=s[v],e.sortingValue=d;if(e===t||i&&g===t)return e}else{if(t&&t.parentNode!==this)throw O;if(i){if(g===t)return e;if(e===t)throw A}}if(i){g?(g.previousSibling=y,e.nextSibling=null):this.lastChild=y,y?(y.nextSibling=g,e.previousSibling=null):this.firstChild=g;if(v==-1)p(s,e);else{var b=s.indexOf(e);s.splice(b,1),v-=b<v}a&&(a.remove(e),a=null)}else e.parentNode&&e.parentNode.removeChild(e);a!=f&&f.insert(e,t);if(t){v==-1&&(v=s.indexOf(t));if(v==-1)throw O;e.nextSibling=t,s.splice(v,0,e)}else v=s.length,s.push(e),t={previousSibling:this.lastChild},this.lastChild=e;return e.parentNode=this,e.previousSibling=t.previousSibling,v==0?this.firstChild=e:t.previousSibling.nextSibling=e,t.previousSibling=e,i||(Q(e,e.contextSelection,this.selection||this.contextSelection,!0),G(e,this.disabled||this.contextDisabled),(e.underMatch_||this.matchFunction)&&e.match&&e.match(this.matchFunction),(e.autoDelegate==F.PARENT||e.autoDelegate===F.ANY)&&e.setDelegate(this),e.emit_parentChanged(null),this.dataSource||this.emit_childNodesModified({inserted:[e]}),e.listen.parentNode&&this.addHandler(e.listen.parentNode,e)),e},removeChild:function(e){if(!e||e.parentNode!==this)throw O;if(e instanceof this.childClass==0)throw M;if(this.dataSource){if(this.dataSource.has(e.delegate))throw D}else if(this.dataSourceRA_)throw P;var t=this.childNodes.indexOf(e);if(t==-1)throw O;return this.childNodes.splice(t,1),e.parentNode=null,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:this.lastChild=e.previousSibling,e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:this.firstChild=e.nextSibling,e.nextSibling=null,e.previousSibling=null,e.listen.parentNode&&this.removeHandler(e.listen.parentNode,e),Q(e,e.contextSelection,null,!0),e.groupNode&&e.groupNode.remove(e),e.emit_parentChanged(this),this.dataSource||this.emit_childNodesModified({deleted:[e]}),(e.autoDelegate==F.PARENT||e.autoDelegate===F.ANY)&&e.setDelegate(),e},replaceChild:function(e,t){if(this.dataSource)throw D;if(this.dataSourceRA_)throw P;if(t==null||t.parentNode!==this)throw O;return this.insertBefore(e,t),this.removeChild(t)},clear:function(e){if(this.dataSource&&this.dataSourceMap_&&this.dataSource.itemCount)throw D;if(!this.firstChild)return;e&&Q(this,this.selection||this.contextSelection,null,!1,!0);var t=this.childNodes;this.firstChild=null,this.lastChild=null,this.childNodes=[],this.emit_childNodesModified({deleted:t});for(var n=t.length;n-->0;){var r=t[n];r.listen.parentNode&&r.parentNode.removeHandler(r.listen.parentNode,r),r.parentNode=null,r.groupNode=null,e?(r.nextSibling=null,r.previousSibling=null,r.emit_parentChanged(this),(r.autoDelegate==F.PARENT||r.autoDelegate===F.ANY)&&r.setDelegate()):r.destroy()}if(this.grouping)for(var t=this.grouping.childNodes,n=t.length-1,i;i=t[n];n--)i.clear()},setChildNodes:function(e,t){!this.dataSource&&!this.dataSourceRA_&&this.clear(t);if(e){"length"in e==0&&(e=[e]);if(e.length){var n=this.emit_childNodesModified;this.emit_childNodesModified=d;for(var r=0,i=e.length;r<i;r++)this.insertBefore(e[r]);this.emit_childNodesModified=n,this.emit_childNodesModified({inserted:this.childNodes})}}},setDataSource:function(e){if(!this.childClass)throw B;e=S(this,this.setDataSource,e,"dataSourceRA_");if(this.dataSource!==e){var t=this.dataSource,n=this.listen.dataSource;t&&(this.dataSourceMap_=null,this.dataSource=null,n&&t.removeHandler(n,this));if(this.firstChild){if(t)for(var r=0,i;i=this.childNodes[r];r++)W(i);this.clear(!this.destroyDataSourceMember)}this.dataSource=e,e?(this.dataSourceMap_={},this.setChildNodesState(e.state,e.state.data),n&&(e.addHandler(n,this),e.itemCount&&n.itemsChanged&&n.itemsChanged.call(this,e,{inserted:e.getItems()}))):this.setChildNodesState(N.UNDEFINED),this.emit_dataSourceChanged(t)}},setGrouping:function(e,t){if(typeof e=="function"||typeof e=="string")e={rule:e};e instanceof pt==0&&(e=e&&typeof e=="object"?new this.groupingClass(e):null);if(this.grouping!==e){var n=this.grouping,r;if(n){this.grouping=null;if(!e&&this.firstChild){this.sorting!==m?r=J(this):r=this.childNodes,n.nullGroup.clear();var i=n.childNodes.slice(0);for(var s=0;s<i.length;s++)i[s].clear();at(this,r)}n.setOwner()}if(e){this.grouping=e,e.setOwner(this);if(this.firstChild){this.sorting!==m?r=J(this):r=this.childNodes;for(var s=0,o;o=r[s];s++)o.groupNode=this.grouping.getGroupNode(o,!0);r=ft(this,r),at(this,r)}}this.emit_groupingChanged(n),n&&!t&&n.destroy()}},setSorting:function(e,t){e=v(e),t=!!t;if(this.sorting!==e||this.sortingDesc!=!!t){var n=this.sorting,r=this.sortingDesc;this.sorting=e,this.sortingDesc=!!t;if(e!==m&&this.firstChild){var i=[],s;for(var o=this.firstChild;o;o=o.nextSibling){var u=e(o);if(u==null)u=-Infinity;else if(typeof u!="number"||u!==u)u=String(u);o.sortingValue=u}if(this.grouping){var a=[this.grouping.nullGroup].concat(this.grouping.childNodes);for(var f=0,l;l=a[f];f++)s=l.nodes=J({childNodes:l.nodes,sortingDesc:this.sortingDesc}),l.first=s[0]||null,l.last=s[s.length-1]||null,i.push.apply(i,s)}else i=J(this);at(this,i)}this.emit_sortingChanged(n,r)}},setMatchFunction:function(e){if(this.matchFunction!=e){var t=this.matchFunction;this.matchFunction=e;for(var n=this.lastChild;n;n=n.previousSibling)n.match(e);this.emit_matchFunctionChanged(t)}}},ht=l(it,ct,{className:f+".Node",emit_enable:y("enable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)G(e,!1);b.enable.call(this)},emit_disable:y("disable")&&function(){for(var e=this.firstChild;e;e=e.nextSibling)G(e,!0);b.disable.call(this)},emit_satelliteChanged:function(e,t){it.prototype.emit_satelliteChanged.call(this,e,t),this.satellite[e]instanceof ht&&G(this.satellite[e],this.disabled||this.contextDisabled)},emit_select:y("select"),emit_unselect:y("unselect"),emit_match:y("match"),emit_unmatch:y("unmatch"),emit_matchFunctionChanged:y("matchFunctionChanged","oldMatchFunction"),selected:!1,selectedRA_:null,selection:null,contextSelection:null,matchFunction:null,matched:!0,disabled:!1,disabledRA_:null,contextDisabled:!1,listen:{owner:{enable:function(){G(this,!1)},disable:function(){G(this,!0)}},selection:{destroy:function(){this.setSelection()}}},init:function(){var e=this.disabled;this.disabled=!1;var t=this.selection;t&&(this.selection=null,this.setSelection(t)),it.prototype.init.call(this);if(e){e=!!E(this,this.setDisabled,e,"disabledRA_");if(e){this.disabled=e;for(var n=this.firstChild;n;n=n.nextSibling)G(n,!0)}}this.selected&&(this.selected=!!E(this,this.setSelected,this.selected,"selectedRA_"))},setSelection:function(e){e instanceof mt==0&&(e=e?new mt(e):null);if(this.selection!==e)return Q(this,this.selection||this.contextSelection,e||this.contextSelection,!1,!0),this.selection&&this.listen.selection&&this.selection.removeHandler(this.listen.selection,this),this.selection=e,e&&this.listen.selection&&e.addHandler(this.listen.selection,this),!0},setSelected:function(e,t){var n=this.contextSelection;return e=!!E(this,this.setSelected,e,"selectedRA_"),this.selected&&n&&(this.selectedRA_?n.has(this)&&(this.selected=!1,n.remove(this),this.selected=!0):n.has(this)||n.add(this)),e!==this.selected?(this.selectedRA_?(this.selected=e,e?this.emit_select():this.emit_unselect()):e?n?t?n.add(this):n.set(this):(this.selected=!0,this.emit_select()):n?n.remove(this):(this.selected=!1,this.emit_unselect()),!0):(!this.selectedRA_&&e&&n&&(t?n.remove(this):n.set(this)),!1)},select:function(e){return this.selectedRA_?!1:this.setSelected(!0,e)},unselect:function(){return this.selectedRA_?!1:this.setSelected(!1)},setDisabled:function(e){return e=!!E(this,this.setDisabled,e,"disabledRA_"),this.disabled!==e?(this.disabled=e,this.contextDisabled||(e?this.emit_disable():this.emit_enable()),!0):!1},disable:function(){return this.disabledRA_?!1:this.setDisabled(!0)},enable:function(){return this.disabledRA_?!1:this.setDisabled(!1)},isDisabled:function(){return this.disabled||this.contextDisabled},match:function(e){typeof e!="function"&&(e=null),this.underMatch_&&!e&&this.underMatch_(this,!0),this.underMatch_=e;var t=!e||e(this);this.matched!=t&&(this.matched=t,t?this.emit_match():this.emit_unmatch())},destroy:function(){this.disabledRA_&&E(this,null,null,"disabledRA_"),this.selectedRA_&&E(this,null,null,"selectedRA_"),this.contextSelection=null,this.selection&&this.setSelection(),it.prototype.destroy.call(this)}}),pt=l(it,ct,{className:f+".GroupingNode",emit_childNodesModified:function(e){b.childNodesModified.call(this,e);var t;if(t=e.inserted){for(var n=0,r;r=t[n++];)r.groupId_=r.delegate?r.delegate.basisObjectId:r.data.id,this.map_[r.groupId_]=r;if(this.dataSource&&this.nullGroup.first){var i=this.owner,s=h(this.nullGroup.nodes);for(var n=s.length;n-->0;)i.insertBefore(s[n],s[n].nextSibling)}}},emit_ownerChanged:function(e){e&&e.grouping===this&&e.setGrouping(null,!0),this.owner&&this.owner.grouping!==this&&this.owner.setGrouping(this),b.ownerChanged.call(this,e),!this.owner&&this.autoDestroyWithNoOwner&&this.destroy()},map_:null,nullGroup:null,autoDestroyWithNoOwner:!0,autoDestroyEmptyGroups:!0,rule:m,childClass:ot,childFactory:function(e){return new this.childClass(c({autoDestroyIfEmpty:this.dataSource?!1:this.autoDestroyEmptyGroups},e))},init:function(){this.map_={},this.nullGroup=new ot,it.prototype.init.call(this)},getGroupNode:function(e,t){var n=this.rule(e),r=n instanceof C,i=this.map_[r?n.basisObjectId:n];return this.dataSource&&(t=!1),!i&&t&&(i=this.appendChild(r?n:{data:{id:n,title:n}})),i||this.nullGroup},setDataSource:function(e){var t=this.dataSource;ct.setDataSource.call(this,e);var n=this.owner;if(n&&this.dataSource!==t){var r=h(n.childNodes);for(var i=r.length-1;i>=0;i--)n.insertBefore(r[i],r[i+1])}},insertBefore:function(e,t){e=ct.insertBefore.call(this,e,t);var n=e.first;if(n){var r=n.parentNode,i=e.last,s,o,u,a=null,f=e;while(f=f.nextSibling)if(a=f.first)break;u=a?a.previousSibling:r.lastChild,s=n.previousSibling,o=i.nextSibling;if(o!==a){var l=r.childNodes,c=e.nodes,h=c.length;s&&(s.nextSibling=o),o&&(o.previousSibling=s),u&&(u.nextSibling=n),a&&(a.previousSibling=i),n.previousSibling=u,i.nextSibling=a;var p=l.indexOf(n),d=a?l.indexOf(a):l.length;d>p&&(d-=h),l.splice(p,h),l.splice.apply(l,[d,0].concat(c));if(!u||!s)r.firstChild=l[0];if(!a||!o)r.lastChild=l[l.length-1];if(n instanceof ot)for(var v=h,m=a;v-->0;)r.insertBefore(c[v],m),m=c[v]}}return e},removeChild:function(e){if(e=ct.removeChild.call(this,e)){delete this.map_[e.groupId_];for(var t=0,n;n=e.nodes[t];t++)n.parentNode.insertBefore(n)}return e},clear:function(e){var t=[],n=this.getGroupNode,r=this.nullGroup;this.getGroupNode=function(){return r};for(var i=this.firstChild;i;i=i.nextSibling)t.push.apply(t,i.nodes);for(var s=0,o;o=t[s];s++)o.parentNode.insertBefore(o);this.getGroupNode=n,ct.clear.call(this,e),this.map_={}},destroy:function(){this.autoDestroyWithNoOwner=!1,it.prototype.destroy.call(this),this.nullGroup.destroy(),this.nullGroup=null,this.map_=null}});it.prototype.groupingClass=pt;var dt={childNodesModified:function(e,t){var n=this.members_,r={},i,s=0,o=0,u=t.inserted,a=t.deleted;if(u&&u.length){r.inserted=u;while(i=u[s])n[i.basisObjectId]=i,s++}if(a&&a.length){r.deleted=a;while(i=a[o])delete n[i.basisObjectId],o++}(s||o)&&this.emit_itemsChanged(r)},destroy:function(){this.destroy()}},vt=l(k,{className:f+".ChildNodesDataset",sourceNode:null,init:function(){k.prototype.init.call(this);var e=this.sourceNode;I[e.basisObjectId]=this,e.firstChild&&dt.childNodesModified.call(this,e,{inserted:e.childNodes}),e.addHandler(dt,this)},destroy:function(){this.sourceNode.removeHandler(dt,this),delete I[this.sourceNode.basisObjectId],k.prototype.destroy.call(this)}}),mt=l(L,{className:f+".Selection",multiple:!1,emit_itemsChanged:function(e){var t;L.prototype.emit_itemsChanged.call(this,e);if(t=e.deleted)for(var n=0,r;r=t[n];n++)r.selected&&r.contextSelection===this&&(r.selected=!1,r.emit_unselect());if(t=e.inserted)for(var n=0,r;r=t[n];n++)!r.selected&&r.contextSelection===this&&(r.selected=!0,r.emit_select())},add:function(e){if(!e)return;if(!this.multiple&&this.itemCount)return this.set(e);Array.isArray(e)||(e=[e]),e=e.filter(this.filter,this),!this.multiple&&e.length>1&&(e=[e[0]]);if(e.length)return L.prototype.add.call(this,e)},set:function(e){return e?(Array.isArray(e)||(e=[e]),e=e.filter(this.filter,this),!this.multiple&&e.length>1&&(e=[e[0]]),e.length?L.prototype.set.call(this,e):this.clear()):this.clear()},filter:function(e){return e instanceof ht&&!e.selectedRA_&&e.contextSelection===this}});t.exports={DELEGATE:F,AbstractNode:it,Node:ht,GroupingNode:pt,PartitionNode:ot,ChildNodesDataset:vt,Selection:mt,nullSelection:new k}},"i.js":function(e,t,n,r,i,s,o,u,a){function R(e){return function(t){if(t.type=="click"&&t.which==3)return;var n=I[t.type]||t.type!="mouseenter"&&t.type!="mouseleave",r=t.sender,i;while(r){i=r.getAttribute&&r.getAttribute(e);if(!n||typeof i=="string")break;r=r.parentNode}if(typeof i=="string"){var s=r,o=s,u,a;if(I[t.type]){var f=t.relatedTarget;f&&(s===f||q(s,f))&&(s=null)}while(s){u=s[d];if(typeof u=="number")if(a=h(u))break;s=s.parentNode}var l=i.trim().split(/\s+/),c=a&&a.action;for(var p=0,v;v=l[p++];)switch(v){case"prevent-default":t.preventDefault();break;case"stop-propagation":t.stopPropagation();break;case"log-event":break;default:c&&(t.actionTarget=o,c.call(a.context,v,t))}}t.type in F&&F[t.type](t,r)}}function U(e,t){z(t),I[e]=!0,F[t]=function(t){t=new c.Event(t),t.type=e,j[e](t)},F[e]=function(t,n){if(!n||!n.parentNode)return;t=new c.Event(t),t.type=e,t.sender=n.parentNode,j[e](t)}}function z(e){if(l.call(j,e))return;j[e]=R("event-"+e);if(B)return;if(!H){if(e=="mouseenter")return U(e,"mouseover");if(e=="mouseleave")return U(e,"mouseout")}for(var t=0,n=c.browserEvents(e),r;r=n[t];t++)c.addGlobalHandler(r,j[e])}function $(e,t,n){z(t),B&&e.setAttribute("on"+t,B+'("'+t+'",event)'),e.setAttribute("event-"+t,n)}function J(e,t,n){X&&t=="class"&&(t="className");if(V&&t=="style")return e.style.cssText=n;e.setAttribute(t,n)}var f=r.Node,l=Object.prototype.hasOwnProperty,c=n.require("./7.js"),h=n.require("./g.js").resolveActionById,p=n.require("./d.js"),d=p.MARKER,v=p.CLONE_NORMALIZATION_TEXT_BUG,m=p.TYPE_ELEMENT,g=p.TYPE_ATTRIBUTE,y=p.TYPE_ATTRIBUTE_CLASS,b=p.TYPE_ATTRIBUTE_STYLE,w=p.TYPE_ATTRIBUTE_EVENT,E=p.TYPE_TEXT,S=p.TYPE_COMMENT,x=p.TOKEN_TYPE,T=p.TOKEN_BINDINGS,N=p.TOKEN_REFS,C=p.ATTR_NAME,k=p.ATTR_VALUE,L=p.ATTR_VALUE_INDEX,A=p.ELEMENT_NAME,O=p.ELEMENT_ATTRIBUTES_AND_CHILDREN,M=p.TEXT_VALUE,_=p.COMMENT_VALUE,D=p.CLASS_BINDING_ENUM,P=p.CLASS_BINDING_BOOL,H="onmouseenter"in document.documentElement,B=!1,j={},F={},I={},q;f&&!f.prototype.contains?q=function(e,t){return e.compareDocumentPosition(t)&16}:q=function(e,t){return e.contains(t)},document.addEventListener||(B=n.publicCallback(function(e,t){c.fireEvent(document,e),t.returnValue=!0;var n=j[e];n&&n(new c.Event(t))},!0));var W={svg:"http://www.w3.org/2000/svg"},X=function(){var e=document.createElement("div");return e.setAttribute("class","a"),!e.className}(),V=function(){var e=document.createElement("div");return e.setAttribute("style","position:absolute"),e.style.position!="absolute"}(),K=function(e,t){var n=t||document.createDocumentFragment(),r=t?O:0;for(var i=r,s;s=e[i];i++){var o=s[x];switch(o){case m:var u=s[A],a=u.indexOf(":"),f=a!=-1?document.createElementNS(W[u.substr(0,a)],u):document.createElement(u);K(s,f),n.appendChild(f);break;case g:s[T]||J(n,s[C],s[k]||"");break;case y:var l=s[L[o]];l=l?[l]:[];if(s[T])for(var c=0,h;h=s[T][c];c++){var p=h[4];if(p){var d=h[0];if(Array.isArray(d))l.push(d[p-1]);else switch(h[2]){case P:l.push(d+h[3]);break;case D:l.push(d+h[5][p-1])}}}l.length&&J(n,"class",l.join(" "));break;case b:var l=s[L[o]];l&&J(n,"style",l);break;case w:$(n,s[1],s[2]||s[1]);break;case S:n.appendChild(document.createComment(s[_]||(s[N]?"{"+s[N].join("|")+"}":"")));break;case E:v&&i&&e[i-1][x]==E&&n.appendChild(document.createComment("")),n.appendChild(document.createTextNode(s[M]||(s[N]?"{"+s[N].join("|")+"}":"")||(s[T]?"{"+s[T]+"}":"")))}}return!t&&e.length==1&&(n=n.firstChild),n};t.exports=K},"h.js":function(e,t,n,r,i,s,o,u,a){function g(){var e=n.array(arguments).join("."),t=c[e];return t||(t=new m("",e),c[e]=t),t}function y(e){var t={},n=[];for(var r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n}function b(e,t){var n=[];n.source=y(t).join("/");var r={base:!0};for(var i=0;i<t.length;i++){var s=t[i]||"base";if(s==e||r[s])continue;r[s]=!0,n.push(s),t.splice.apply(t,[i+1,0].concat(l[s].fallback))}return n.unshift(e),e!="base"&&n.push("base"),n.value=n.join("/"),n}function w(e,t){var n=l[e].sourcesList;for(var r=0,i;i=n[r];r++)if(i.hasOwnProperty(t))return i[t];return""}function E(e){return l[p].fallback.indexOf(e)!=-1}function S(e){g(e).set()}function x(){for(var e in c)S(e)}function T(e){e||(e="base");if(l[e])return l[e].theme;if(!/^([a-z0-9\_\-]+)$/.test(e))throw"Bad name for theme - "+e;var t={},r=[t],i=new v;l[e]={theme:i,sources:t,sourcesList:r,fallback:[]};var s=function(n,r){return n in t==0&&(t[n]=r,E(e)&&S(n)),g(n)};return n.object.extend(i,{name:e,fallback:function(t){if(i!==d&&arguments.length>0){var n=typeof t=="string"?t.split("/"):[],r={};n=b(e,n);if(l[e].fallback.source!=n.source){l[e].fallback.source=n.source;for(var s in l){var o=l[s].fallback,n=b(s,(o.source||"").split("/"));if(n.value!=o.value){r[s]=!0,l[s].fallback=n;var u=l[s].sourcesList;u.length=n.length;for(var a=0;a<u.length;a++)u[a]=l[n[a]].sources}}}for(var s in r)if(E(s)){x();break}}var f=l[e].fallback.slice(1);return f.source=l[e].fallback.source,f},define:function(e,t){typeof e=="function"&&(e=e());if(typeof e=="string"){if(typeof t=="object"){var n=e,r=t,o={};for(var u in r)r.hasOwnProperty(u)&&(o[u]=s(n+"."+u,r[u]));return o}return arguments.length==1?g(e):s(e,t)}if(typeof e=="object"){var r=e;for(var a in r)r.hasOwnProperty(a)&&s(a,r[a]);return i}},apply:function(){if(e!=p){p=e,x();for(var t=0,n;n=h[t];t++)n.fn.call(n.context,e)}return i},getSource:function(n,r){return r?w(e,n):t[n]},drop:function(n){t.hasOwnProperty(n)&&(delete t[n],E(e)&&S(n))}}),l[e].fallback=b(e,[]),r.push(l.base.sources),i}function N(e,t,n){h.push({fn:e,context:t}),n&&e.call(t,p)}var f=this.path,l={},c={},h=[],p="base",d,v=n.Class(null,{className:f+".Theme",get:g}),m=n.Class(n.Token,{className:f+".SourceWrapper",path:"",url:"",baseURI:"",init:function(e,t){this.path=t,n.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var e=w(p,this.path);this.value!=e&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,m.prototype.apply,this),this.value=e,this.url=e&&e.url||"",this.baseURI=(typeof e=="object"||typeof e=="function")&&"baseURI"in e?e.baseURI:n.path.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,m.prototype.apply,this),this.apply())},destroy:function(){this.url=null,this.baseURI=null,this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this),n.Token.prototype.destroy.call(this)}});n.cleaner.add({destroy:function(){for(var e in c)c[e].destroy();l=null,c=null}}),d=T(),t.exports={SourceWrapper:m,Theme:v,theme:T,getThemeList:function(){return n.object.keys(l)},currentTheme:function(){return l[p].theme},setTheme:function(e){return T(e).apply()},onThemeChange:N,define:d.define,get:g,getPathList:function(){return n.object.keys(c)}},T("base").define({"#1":n.resource("./18.tmpl"),"#2":n.resource("./19.tmpl"),"#3":n.resource("./1a.tmpl"),"#4":n.resource("./1b.tmpl"),"#5":n.resource("./1c.tmpl"),"#6":n.resource("./1d.tmpl"),"#7":n.resource("./1e.tmpl"),"#8":n.resource("./1f.tmpl"),"#9":n.resource("./1g.tmpl"),"#a":n.resource("./1h.tmpl"),"#b":n.resource("./1i.tmpl"),"#c":n.resource("./1j.tmpl"),"#d":n.resource("./1k.tmpl"),"#e":n.resource("./1l.tmpl"),"#f":n.resource("./1m.tmpl"),"#g":n.resource("./1n.tmpl"),"#h":n.resource("./1o.tmpl"),"#i":n.resource("./1p.tmpl"),"#j":n.resource("./1q.tmpl"),"#k":n.resource("./1r.tmpl"),"#l":n.resource("./1s.tmpl"),"#m":n.resource("./1t.tmpl"),"#n":n.resource("./1u.tmpl"),"#o":n.resource("./1v.tmpl"),"#p":n.resource("./1w.tmpl"),"#q":n.resource("./1x.tmpl")})},"g.js":function(e,t,n,r,i,s,o,u,a){function l(e,t,n){f[e]={template:t,instances:n}}function c(e){delete f[e]}function h(e){var t=e&4095,n=f[t];return n&&n.template}function p(e){var t=e&4095,n=e>>12,r=f[t];return r&&r.instances[n]}function d(e){var t=p(e);return t&&t.context}function v(e){var t=p(e);return t&&t.tmpl}function m(e){var t=p(e);return t&&{context:t.context,action:t.action}}var f={};t.exports={add:l,remove:c,resolveActionById:m,resolveTemplateById:h,resolveObjectById:d,resolveTmplById:v}},"s.js":function(e,t,n,r,i,s,o,u,a){function D(e,t){return _[typeof e=="string"&&e.toUpperCase()]||t}function P(e,t){return Array.isArray(e)?{left:e[0],right:e[0],width:0,top:e[1],bottom:e[1],height:0}:y(e,t)}function H(){var e=n.resource.get(n.resolveNSFilename("basis.ui.window"));return e?e.fetch().getWindowTopZIndex():2001}var f=this.path,l=r,c=r.document,h=n.array.from,p=n.require("./k.js"),d=n.require("./7.js"),v=n.require("./t.js"),m=n.require("./4.js").create,g=n.require("./u.js").getOffsetParent,y=n.require("./u.js").getBoundingRect,b=n.require("./u.js").getViewportRect,w=n.require("./9.js").Node,E=n.require("./e.js").define(f,{Popup:n.resource("./b.tmpl"),Balloon:n.resource("./c.tmpl"),popupManager:n.resource("./d.tmpl")}),S="LEFT",x="RIGHT",T="TOP",N="BOTTOM",C="CENTER",k={VERTICAL:"V",HORIZONTAL:"H"},L=String("LTRTRBLBLCCTRCCBCCCCCCCC"),A={L:S,R:x,T:T,B:N,C:C},O={LEFT:x,RIGHT:S,TOP:N,BOTTOM:T,CENTER:C},M=[x,N,x,T].join(" "),_=function(){var e=[S,C,x],t=[T,C,N],n={},r={};for(var i=0;i<3;i++)for(var s=0;s<3;s++)r[e[i]+" "+t[s]]=e[i]+" "+t[s],r[t[s]+" "+e[i]]=e[i]+" "+t[s];for(var o in r)for(var u in r)n[o+" "+u]=r[o]+" "+r[u];return n}(),B=n.object.extend([],{body:NaN,add:function(e){this.length||(d.addGlobalHandler("click",this.hideByClick,this),d.addGlobalHandler("keydown",this.hideByKey,this),d.addGlobalHandler("scroll",this.hideByScroll,this),d.addHandler(l,"resize",this.realignAll,this)),this.unshift(e),e.setZIndex(H()),this.body&&!p.parentOf(c,e.element)&&this.body.appendChild(e.element)},remove:function(e){var t=this.indexOf(e);if(t==-1)return;if(e.hideOnAnyClick){var r=this[t-1];r&&r.hide()}n.array.remove(this,e),e.element.parentNode===this.body&&p.remove(e.element),this.length||(d.removeGlobalHandler("click",this.hideByClick,this),d.removeGlobalHandler("keydown",this.hideByKey,this),d.removeGlobalHandler("scroll",this.hideByScroll,this),d.removeHandler(l,"resize",this.realignAll,this))},clear:function(){h(this).forEach(function(e){e.hide()})},realignAll:function(){this.forEach(function(e){e.autoRealign&&e.realign()})},hideByClick:function(e){if(!this.length)return;var t=p.axis(e.sender,p.AXIS_ANCESTOR_OR_SELF);for(var r=0,i;i=this[r];r++)if(t.indexOf(i.element)!=-1||t.some(function(e){return i.ignoreClickFor.indexOf(e)!=-1})){for(var s=r-1;i=this[s];s--)if(i.hideOnAnyClick){i.hide();break}return}var o=n.array.lastSearch(this,!0,"hideOnAnyClick");o&&o.hide()},hideByKey:function(e){var t=this[0];if(t){var n=t.hideOnKey,r;typeof n=="function"&&(r=n.call(this,e.key)),Array.isArray(n)&&(r=n.indexOf(e.key)!=-1),r&&t.hide()}},hideByScroll:function(e){var t=e.sender;if(p.parentOf(t,this.body))return;h(this).forEach(function(e){e.hideOnScroll&&e.relElement_&&!Array.isArray(e.relElement_)&&e.offsetParent!==t&&p.parentOf(t,e.relElement_)&&e.hide()})}});n.doc.body.ready(function(e){B.body=e,B.forEach(function(t){p.parentOf(c,t.element)||(e.appendChild(t.element),t.realign())})});var j=w.subclass({className:f+".Popup",template:E.Popup,binding:{visible:{events:"show hide",getter:function(e){return e.visible?"visible":"hidden"}},orientation:{events:"layoutChanged",getter:function(e){return(e.orientation+"-"+e.dir.split(" ").slice(2,4).join("-")).toLowerCase()}}},action:{hide:function(){this.hide()}},emit_beforeShow:m("beforeShow"),emit_show:m("show"),emit_hide:m("hide"),emit_realign:m("realign"),emit_layoutChanged:m("layoutChanged","oldOrientation","oldDir"),listen:{owner:{templateChanged:function(){this.visible&&this.show.apply(this,this.visibleArgs_)}}},visible:!1,visibleArgs_:null,autorotate:!1,autoRealign:!0,zIndex:0,dir:"",defaultDir:M,orientation:k.VERTICAL,relElement:null,relElement_:null,hideOnAnyClick:!0,hideOnKey:!1,hideOnScroll:!0,ignoreClickFor:null,init:function(){w.prototype.init.call(this),this.ignoreClickFor=h(this.ignoreClickFor),this.dir?(this.dir=D(this.dir,M),this.defaultDir=this.dir):(this.defaultDir=D(this.defaultDir,M),this.dir=this.defaultDir),this.setLayout(this.defaultDir,this.orientation)},templateSync:function(){w.prototype.templateSync.call(this),this.realign()},setLayout:function(e,t,n){var r=this.dir,i=this.orientation;this.dir=D(e,this.dir),typeof t=="string"&&(this.orientation=t);if(r!=this.dir||i!=this.orientation)this.emit_layoutChanged(i,r),n||this.realign()},flip:function(e){var t=this.dir.split(" "),n=e==k.VERTICAL;t[0+n]=O[t[0+n]],t[2+n]=O[t[2+n]],this.setLayout(t.join(" "))},rotate:function(e){var t=this.dir.split(" "),n=[];e=(e%4+4)%4;if(!e)return t;var r=t[0].charAt(0),i=t[1].charAt(0),s=L.indexOf(r+i)>>1,o=(s&252)+((s&3)+e&3)<<1;n.push(A[L.charAt(o)],A[L.charAt(o+1)]);var r=t[2].charAt(0),i=t[3].charAt(0),s=L.indexOf(r+i)>>1;e=r!="C"&&i!="C"&&t[0]==t[2]!=(t[1]==t[3])?-e+4:e;var o=(s&252)+((s&3)+e&3)<<1;return n.push(A[L.charAt(o)],A[L.charAt(o+1)]),n},isFitToViewport:function(e,t){if(this.visible&&t){var n=g(this.element),i=P(t,n),s=this.element.offsetWidth,o=this.element.offsetHeight,u=b(r,n);e=D(e,this.dir).split(" ");var a=e[0]==C?i.left+(i.width>>1):i[e[0].toLowerCase()],f=e[1]==C?i.top+(i.height>>1):i[e[1].toLowerCase()];return e[2]!=S&&a<s>>(e[2]==C)||e[2]!=x&&u.width-a+u.left<s>>(e[2]==C)||e[3]!=T&&f<o>>(e[3]==C)||e[3]!=N&&u.height-f+u.top<o>>(e[3]==C)?!1:{x:a,y:f}}},setZIndex:function(e){this.zIndex=isNaN(e)?"auto":e,v.setStyle(this.element,{"z-index":e})},realign:function(){this.setZIndex(this.zIndex);var e=this.visible&&this.relElement_;if(e){var t=this.dir.split(" "),n,r=0,i=t,s=t[2],o=t[3],u=typeof this.autorotate=="number"||!this.autorotate.length?3:this.autorotate.length,a=g(this.element);while(this.autorotate&&r<=u){if(n=this.isFitToViewport(i.join(" "),e)){s=i[2],o=i[3],this.setLayout(i.join(" "),null,!0);break}if(r==u)break;if(Array.isArray(this.autorotate)){var f=this.autorotate[r++];typeof f=="string"?i=D(f,i.join(" ")).split(" "):i=this.rotate(f)}else i=this.rotate(++r*this.autorotate)}if(!n){var l=P(e,a);n={x:t[0]==C?l.left+(l.width>>1):l[t[0].toLowerCase()],y:t[1]==C?l.top+(l.height>>1):l[t[1].toLowerCase()]}}var c={left:"auto",right:"auto",top:"auto",bottom:"auto"};switch(s){case S:c.left=n.x+"px";break;case C:c.left=Math.round(n.x-this.element.offsetWidth/2)+"px";break;case x:c.right=a.clientWidth-n.x+"px"}switch(o){case T:c.top=n.y+"px";break;case C:c.top=Math.round(n.y-this.element.offsetHeight/2)+"px";break;case N:c.bottom=a.clientHeight-n.y+"px"}v.setStyle(this.element,c),this.emit_realign()}},resolveRelElement:function(e){return typeof e=="string"?e.substr(0,6)!="owner:"?p.get(e):this.owner?this.owner.tmpl&&this.owner.tmpl[e.substr(6)]||this.owner.element:null:Array.isArray(e)?e:e||null},show:function(e,t,r){this.visibleArgs_=n.array(arguments),this.relElement_=this.resolveRelElement(e||this.relElement),this.setLayout(D(t,this.defaultDir),r);if(!this.visible){if(!this.relElement_)return;v.visibility(this.element,!1),B.add(this),this.emit_beforeShow(),this.visible=!0,this.realign(),v.visibility(this.element,!0),this.emit_show()}else this.realign()},hide:function(){this.visibleArgs_=null,this.relElement_=null,this.visible&&(this.visible=!1,B.remove(this),this.emit_hide())},hideAll:function(){B.clear()},destroy:function(){this.hide(),this.relElement=null,w.prototype.destroy.call(this)}}),F=j.subclass({className:f+".Balloon",template:E.Balloon});t.exports={ORIENTATION:k,DIR:{LEFT:S,RIGHT:x,TOP:T,BOTTOM:N,CENTER:C},Popup:j,Balloon:F}},"y.js":function(e,t,n,r,i,s,o,u,a){function P(e){var t,n=[],r=[],i={};for(var s=0;s<e.length;s++)s%2?(t=e[s],i[t]||(i[t]=n.length,n.push(t)),r.push(i[t])):e[s]&&r.push(D(e[s]));return[n,r]}function H(e,t,n){var r=e.value,i=0,s,o;if(r)switch(t){case"class":var u=e.valueRange.start_,a=/(\s*)(\S+)/g,f=[],l=[],h;i=[];while(y=a.exec(r)){var p=y[2],v={value:p,binding:!1,range:{start_:u+=y[1].length,end_:u+=p.length}};n(v),(o=p.match(L))?(h=[o[1]||"",o[2]],h.info_=v,v.binding=!0,i.push(h)):f.push(p),l.push(v)}r=f.join(" "),e.map_=l;break;case"style":var m=[];i=[];if(s=r.match(A))for(var g=0,y;y=s[g];g++){var o=y.match(O),b=o[1],r=o[2].trim(),w=r.split(M);if(w.length>1){var E=P(w);E.push(b),i.push(E)}else m.push(b+": "+D(r))}r=m.join("; "),r&&(r+=";");break;default:s=r.split(k),s.length>1?i=P(s):r=D(r)}i&&!i.length&&(i=0),e.binding=i,e.value=r,e.type=d[t]||c}function B(e,t,n){function r(e){return(e.prefix?e.prefix+":":"")+e.name}function i(e){return e.attrs.reduce(function(e,t){return e[r(t)]=t.value,e},{})}function s(){var e=1,t=0;c=new Array(n.length),d=new Array(n.length);for(var r=0;r<n.length+1;r++)c[r]=e,d[r]=t,n[r]==="\n"?(e++,t=0):t++}function o(e){return{line:c[e],column:d[e]}}function u(e){return{start:o(e.start_),end:o(e.end_)}}function a(e){t.loc&&(e.loc=u(e.range),e.valueRange&&(e.valueLoc=u(e.valueRange))),t.range?(e.range=[e.range.start_,e.range.end_],e.valueRange&&(e.valueRange=[e.valueRange.start_,e.valueRange.end_])):(delete e.range,delete e.valueRange)}function f(e){var t,n;for(var r=0;t=e[r++];n=t){if(t.type==l){var s=i(t);for(var o=0,u;u=t.attrs[o++];){var c=u.name;if(t.prefix=="b"&&u.name=="value"){var d=t.name.match(_);d&&(c=d[1]=="class"?"class":s.name)}H(u,c,a),a(u)}f(t.children)}t.type==h&&(t.value=D(t.value),!t.refs&&n&&n.type==h&&!n.refs&&(n.value+=t.value,n.end_=t.end_,e.splice(--r,1))),t.type==p&&(t.value=D(t.value)),a(t)}}var c,d;t.loc&&s(),f(e)}function j(e,t){var n=[],r=[],i={children:n},s=!1,o,u=m,a=0,f=0,d,k,L,A;if(!t||t.trim!==!1)a=f=e.match(/^\s*/)[0].length,e=e.trimRight();while(a<e.length||u!=m){u.lastIndex=a,L=a,A=u.exec(e);if(!A||A.index!==a){if(u==E&&o&&o.type==p){u=b;continue}s&&(i=r.pop()),o&&i.children.pop();if(o=i.children.pop())o.type==h&&!o.refs?f-="len"in o?o.len:o.value.length:i.children.push(o);s=!1,u=m;continue}a=u.lastIndex;switch(u){case m:d=L+A[1].length;if(f!=d){var O=f==L?A[1]:e.substring(f,d);O=O.replace(/\s*(\r\n?|\n\r?)\s*/g,""),O&&i.children.push({type:h,len:O.length,value:O,range:{start_:f,end_:d}})}f=d,A[3]?i.children.push({type:h,refs:["l10n:"+A[3]],value:"{l10n:"+A[3]+"}",range:{start_:d,end_:a}}):A[2]=="{"?(k=a-1,i.children.push(o={type:h,range:{start_:d,end_:d}}),u=E):A[4]?A[4]=="/"?(o=null,u=w):(i.children.push(o={type:p,range:{start_:d,end_:d}}),A[5]?(k=a-A[5].length,u=E):(k=a,u=b)):A[2]&&(s=!0,r.push(i),i.children.push(o={type:l,attrs:[],children:[],range:{start_:d,end_:d}}),i=o,u=g);break;case w:A[1]!==(i.prefix?i.prefix+":":"")+i.name?i.children.push({type:h,value:"</"+A[0],range:{start_:L-2,end_:L+A[0].length}}):i=r.pop(),u=m;break;case g:case y:if(A[2]==":"){o.prefix?u=T:o.prefix=A[1];break}A[1]&&(o.name=A[1],o.range.end_=L+A[1].length,o.type==c&&i.attrs.push(o));if(A[2]=="{"){o.type==l?u=E:u=T;break}if(A[3]){s=!1,i.range.end_=a;if(A[3]=="/>"||!i.prefix&&N.test(i.name))i=r.pop();else if(i.prefix=="b"&&i.name in C){u=C[i.name];break}u=m;break}if(A[2]=="="){u=S;break}o={type:c,range:{start_:a,end_:a}},u=y;break;case b:o.value=e.substring(k,a-3),o.range.end_=a,u=m;break;case E:o.refs?o.refs.push(A[1]):o.refs=[A[1]],A[2]!="|"&&(o.type==h?(a-=A[2].length-1,o.value=e.substring(k,a),o.range.end_=a,u=m):o.type==p?u=b:o.type==c&&e[a]=="="?(a++,u=S):(o={type:c,range:{start_:a,end_:a}},u=y));break;case S:o.value=A[1].replace(x,'"'),o.range.end_=a,o.valueRange={start_:L+1,end_:L+1+A[1].length},o={type:c,range:{start_:a,end_:a}},u=y;break;case C.text:case C.style:i.children.push({type:h,value:A[1],range:{start_:L,end_:L+A[1].length}}),i=r.pop(),u=m;break;default:throw v}u==m&&(f=a)}return f!=a&&i.children.push({type:h,value:e.substring(f,a),range:{start_:f,end_:a}}),B(n,t||{},e),n.templateTokens=!0,n}var f=n.require("./d.js"),l=f.TYPE_ELEMENT,c=f.TYPE_ATTRIBUTE,h=f.TYPE_TEXT,p=f.TYPE_COMMENT,d=f.ATTR_TYPE_BY_NAME,v="Invalid or unsupported syntax",m=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,g=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,y=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,b=/(.|[\r\n])*?-->/g,w=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,E=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,S=/"((?:(\\")|[^"])*?)"\s*/g,x=/\\"/g,T=/^/g,N=/^(area|base|br|col|command|embed|hr|img|input|link|meta|param|source)$/i,C={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g,style:/((?:.|[\r\n])*?)(?:<\/b:style>|$)/g},k=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,L=/^((?:[a-z_][a-z0-9_\-]*)?(?::(?:[a-z_][a-z0-9_\-]*)?)?)\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,A=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,O=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,M=/\{([a-z_][a-z0-9_]*)\}/i,_=/^(?:|append-|set-|remove-)(class|attr)$/,D=function(){function s(n,r){return e[r]||(r.charAt(0)=="#"?e[r]=String.fromCharCode(r.charAt(1)=="x"||r.charAt(1)=="X"?parseInt(r.substr(2),16):r.substr(1)):t&&(t.innerHTML=n,e[r]=t.firstChild?t.firstChild.nodeValue:n)),e[r]||n}var e={},t=n.NODE_ENV?null:r.document.createElement("div"),i=/&([a-z]+\d*|#\d+|#x[0-9a-f]{1,4});?/gi;return function(t){return String(t).replace(i,s)}}();t.exports=j},"f.js":function(e,t,n,r,i,s,o,u,a){function I(){return n.genUID()+"__"}function R(e){var t=[];for(var n=0;n<e.length;n++)t.push(Array.isArray(e[n])?R(e[n]):e[n]);return t}function U(e,t,r,i){var s=e,o;e.bindingBridge&&(t="baseURI"in e?e.baseURI:"url"in e?n.path.dirname(e.url):t,o="url"in e?e.url:o,s=e.bindingBridge.get(e));if(Array.isArray(s))r&&(s=R(s)),s={tokens:s};else if(typeof s!="object"||!Array.isArray(s.tokens))s=String(s);return typeof s=="string"&&(s=q(s,t,i,o,e)),s}var f=Object.prototype.hasOwnProperty,l=n.array.search,c=n.array.add,h=n.array.remove,p=n.require("./y.js"),d=n.require("./z.js"),v=n.require("./d.js"),m=v.TYPE_ELEMENT,g=v.TYPE_ATTRIBUTE,y=v.TYPE_ATTRIBUTE_CLASS,b=v.TYPE_ATTRIBUTE_STYLE,w=v.TYPE_ATTRIBUTE_EVENT,E=v.TYPE_TEXT,S=v.TYPE_COMMENT,x=v.TOKEN_TYPE,T=v.TOKEN_BINDINGS,N=v.TOKEN_REFS,C=v.ATTR_NAME,k=v.ATTR_VALUE,L=v.ATTR_NAME_BY_TYPE,A=v.ATTR_TYPE_BY_NAME,O=v.ATTR_VALUE_INDEX,M=v.ELEMENT_ATTRIBUTES_AND_CHILDREN,_=v.TEXT_VALUE,D=v.CLASS_BINDING_ENUM,P=v.CLASS_BINDING_BOOL,H=/^[a-z_][a-z0-9_\-]*$/i,B=/^event-(.+)$/,j=function(){},F=function(){},q=function(){function i(e){return(e.prefix?e.prefix+":":"")+e.name}function s(e){var t=e.refs;return!t||!t.length?0:t}function o(e,t){e[N]||(e[N]=[]),c(e[N],t),t!="element"&&(e[T]=e[N].length==1?t:0)}function u(e,t){var n=e[N].indexOf(t);if(n!=-1){var r=e[T]&&typeof e[T]=="number";e[N].splice(n,1),r&&n==e[T]-1&&(e[T]=t,r=!1),e[N].length?r&&(e[T]-=n<e[T]-1):e[N]=0}}function a(e){var t={};if(e.attrs)for(var n=0,r;r=e.attrs[n];n++)t[i(r)]=r.value;return t}function v(e){var t={};if(e.attrs)for(var n=0,r;r=e.attrs[n];n++)t[i(r)]=r;return t}function j(e,t){for(var n=0;n<t.length;n++)c(e,t[n])}function q(e,n,r,i){for(var s=0,o;o=n[s];s++)o[1]!==t&&(o[1]=r+o[1]),o[3]||(o[3]=i);e.unshift.apply(e,n)}function R(e,t,r,i,s){var o=t.children[0],u=r?n.resource.resolveURI(r,e.baseURI,'<b:style src="{url}"/>'):n.resource.virtual("css",o?o.value:"",e.sourceUrl).url;return e.resources.push([u,i,t,null,r?!1:o||!0,s]),u}function z(r,p,d){function y(e){var t={},n=(e||"").trim().split(/\s*,\s*/);for(var r=0;r<n.length;r++){var i=n[r].split(/\s*:\s*/);if(i.length!=2)return{};t[i[0]]=i[1]}return t}function N(e,t){var n=typeof e[0]=="number"?M:0;for(var r=n,i,s;i=e[r];r++){i[x]==w?s="event-"+i[1]:s=L[i[x]]||i[C];if(s==t)return i}}function _(e,t){var n=e[T];if(n)for(var r=0,i;i=n[r];r++)if(i[2]==t)return i}function W(e,t,n,r,i){var s=N(e,"style");s||(s=[b,0,0],e.push(s));var o=t.binding,u=!1,a=t.name==r,f=s[3];if(!o||o[0].length!=o[1].length)u=!(a^t.value==="");else{var l=s[T];o=o.concat(n,t.name),u=a,l?(h(l,_(s,n)),l.push(o)):s[T]=[o]}f&&(f=f.replace(new RegExp(n+"\\s*:\\s*[^;]+(;|$)"),"")),u&&(f=(f?f+" ":"")+i),s[3]=f}function V(e,t){(t.name=="show"||t.name=="hide")&&W(e,t,"display","show","display: none;"),(t.name=="visible"||t.name=="hidden")&&W(e,t,"visibility","visible","visibility: hidden;")}function J(e,t){var n=[],r,s,u,a,f;for(var l=0,c;c=e.attrs[l];l++){if(c.prefix=="b"){switch(c.name){case"ref":var h=(c.value||"").trim().split(/\s+/);for(var p=0;p<h.length;p++)o(t,h[p]);break;case"show":case"hide":s=c;break;case"visible":case"hidden":u=c}continue}(f=c.name.match(B))?a=f[1]==c.value?[w,f[1]]:[w,f[1],c.value]:(a=[c.type,c.binding,0],c.type==2&&a.push(i(c)),c.value&&(!d.optimizeSize||!c.binding||c.type!=2)&&a.push(c.value),c.type==b&&(r=a)),n.push(a)}return s&&V(n,s),u&&V(n,u),n.length?n:0}function K(e,t,r,i){var s=a(t),o=v(t);r&&(s.name=r);if(!s.name)return;if(!H.test(s.name))return;var u=Nt[s.ref||"element"];if(u&&u.token[x]==m){var f=u.token,l=s.name.match(B),p=s.name=="class"||s.name=="style",y=l?w:A[s.name]||g,b=O[y]||k,E=f&&N(f,s.name);E&&i=="set"&&(h(f,E),E=null),!E&&(i=="set"||i=="append")&&(i="set",l?E=[y,l[1]]:(E=[y,0,0,y==g?s.name:""],y==g&&E.push("")),f||(f=[],u.token.push(f)),f.push(E));switch(i){case"set":if(E[x]==w){s.value==l[1]?E.length=2:E[b]=s.value;return}var S=o.value||{};E[T]=S.binding||0,!d.optimizeSize||!E[T]||p?E[b]=S.value||"":E.length=b;if(p&&!E[T]&&!E[b]){h(f,E);return}break;case"append":var S=o.value||{},C=S.value||"",L=S.binding;if(!l)if(L){var M=E[T];if(M)switch(s.name){case"style":for(var D=0,P;P=L[D];D++)h(M,_(E,P[2])),M.push(P);break;case"class":M.push.apply(M,L);break;default:L[0].forEach(function(e){c(this,e)},M[0]);for(var D=0;D<L[1].length;D++){var j=L[1][D];typeof j=="number"&&(j=M[0].indexOf(L[0][j])),M[1].push(j)}}else E[T]=L,p||E[T][1].unshift(E[b])}else!p&&E[T]&&E[T][1].push(s.value);if(C)if(l||s.name=="class"){var F=(E[b]||"").trim(),I=C.trim();F=F?F.split(/\s+/):[],I=I?I.split(/\s+/):[];for(var D=0;D<I.length;D++){var q=I[D];n.array.remove(F,q),F.push(q)}E[b]=F.join(" ")}else E[b]=(E[b]||"")+(E[b]&&p?" ":"")+C;p&&!E[T]&&!E[b]&&h(f,E);break;case"remove-class":if(E){var S=o.value||{},R=(E[b]||"").split(" "),U=(S.value||"").split(" "),z=E[T];if(S.binding&&z){for(var D=0,W;W=S.binding[D];D++)for(var X=z.length-1,V;V=z[X];X--){var $=V[0],J=V[3]||V[1];$===W[0]&&J===W[1]&&z.splice(X,1)}z.length||(E[T]=0)}for(var D=0;D<U.length;D++)h(R,U[D]);E[b]=R.join(" "),!z.length&&!R.length&&h(f,E)}break;case"remove":E&&h(f,E)}}}var Q=[];for(var G=0,Y,Z;Y=r[G];G++){var et=s(Y),tt=et&&et.length==1?et[0]:0;switch(Y.type){case m:if(Y.prefix=="b"){var nt=a(Y),rt=v(Y);switch(Y.name){case"style":var it=!0;if(nt.options){var st=y(nt.options);for(var ot in st)it=it&&st[ot]==d.includeOptions[ot]}if(it){var ut=nt.namespace?"namespace":"ns",at=nt[ut],ft=at?t:"",lt=R(p,Y,nt.src,ft,at);at&&(lt in t==0&&(t[lt]=I()),p.styleNSPrefix[at]={name:at,prefix:t[lt]})}break;case"isolate":p.isolate||(p.isolate=nt.prefix||d.isolate||I());break;case"l10n":nt.src&&(d.dictURI=n.resource.resolveURI(nt.src,p.baseURI,"<b:"+Y.name+' src="{url}"/>'));break;case"define":if("name"in nt&&"type"in nt&&!f.call(d.defines,nt.name)){var ct=nt.from||nt.name,ht=nt.name,pt=!1,dt,vt;switch(nt.type){case"bool":pt=[ct,P,ht,nt["default"]=="true"?1:0];break;case"enum":if("values"in nt==0)break;vt=(nt.values||"").trim();if(!vt)break;vt=vt.split(/\s+/),dt=vt.indexOf(nt["default"]),pt=[ct,D,ht,dt+1,vt]}pt&&(d.defines[ht]=pt)}break;case"text":var mt=Y.children[0];r[G--]=n.object.extend(mt,{refs:(nt.ref||"").trim().split(/\s+/),value:"notrim"in nt?mt.value:mt.value.replace(/^\s*[\r\n]+|[\r\n]+\s*$/g,"")});break;case"include":var gt=nt.src;if(gt){var yt=F(gt,p.baseURI);if(!yt)continue;if(e.indexOf(yt)==-1){var bt=rt.isolate?rt.isolate.value||I():"",wt=nt.options?y(nt.options):null,Et=n.object.merge(d,{includeOptions:wt}),St=U(yt,"",!0,Et);c(p.deps,yt),p.includes.push({token:Y,resource:yt,nested:St.includes}),St.deps&&j(p.deps,St.deps),St.warns&&p.warns.push.apply(p.warns,St.warns),St.resources&&"no-style"in nt==0&&q(p.resources,St.resources,bt,Y);var xt=n.array(Y.children),Tt={prefix:I()},Nt=X(St.tokens,Tt);for(var Ct in St.styleNSPrefix)p.styleNSPrefix[Tt.prefix+Ct]=n.object.merge(St.styleNSPrefix[Ct],{});bt&&$(St.tokens,bt);for(var kt in rt)switch(kt){case"class":xt.unshift({type:m,prefix:"b",name:"append-class",attrs:[n.object.complete({name:"value"},rt["class"])]});break;case"id":xt.unshift({type:m,prefix:"b",name:"set-attr",attrs:[{type:g,name:"name",value:"id"},n.object.complete({name:"value"},rt.id)]});break;case"ref":Nt.element&&nt.ref.trim().split(/\s+/).map(function(e){o(Nt.element.token,e)});break;case"show":case"hide":case"visible":case"hidden":var Lt=Nt.element,Y=Lt&&Lt.token;Y&&Y[x]==m&&V(Y,rt[kt])}for(var At=0,Ot;Ot=xt[At];At++)if(Ot.type==m&&Ot.prefix=="b")switch(Ot.name){case"style":var Mt=a(Ot),_t=v(Ot),it=!0;if(Mt.options){var st=y(Mt.options);for(var ot in st)it=it&&st[ot]==wt[ot]}if(it){var ut=Mt.namespace?"namespace":"ns",at=Mt[ut],ft=at?t:bt,lt=R(p,Ot,Mt.src,ft,at);at&&(lt in t==0&&(t[lt]=I()),p.styleNSPrefix[Tt.prefix+at]={name:at,prefix:t[lt]})}break;case"replace":case"remove":case"before":case"after":var Dt=Ot.name=="replace"||Ot.name=="remove",Mt=a(Ot),Pt="ref"in Mt||!Dt?Mt.ref:"element",Lt=Pt&&Nt[Pt];if(Lt){var Ht=Lt.owner,Bt=Ht.indexOf(Lt.token);if(Bt!=-1){var jt=[Bt+(Ot.name=="after"),Dt];Ot.name!="remove"&&(jt=jt.concat(z(Ot.children,p,d)||[])),Ht.splice.apply(Ht,jt)}}break;case"prepend":case"append":var Mt=a(Ot),Pt="ref"in Mt?Mt.ref:"element",Lt=Pt&&Nt[Pt],Y=Lt&&Lt.token;if(Y&&Y[x]==m){var Ft=z(Ot.children,p,d)||[];Ot.name=="prepend"?Y.splice.apply(Y,[M,0].concat(Ft)):Y.push.apply(Y,Ft)}break;case"show":case"hide":case"visible":case"hidden":var Mt=a(Ot),Pt="ref"in Mt?Mt.ref:"element",Lt=Pt&&Nt[Pt],Y=Lt&&Lt.token;if(Y&&Y[x]==m){var It=v(Ot).expr;if(!It)break;V(Y,n.object.complete({name:Ot.name},v(Ot).expr))}break;case"attr":case"set-attr":K(Y,Ot,!1,"set");break;case"append-attr":K(Y,Ot,!1,"append");break;case"remove-attr":K(Y,Ot,!1,"remove");break;case"class":case"append-class":K(Y,Ot,"class","append");break;case"set-class":K(Y,Ot,"class","set");break;case"remove-class":var _t=v(Ot),qt=_t.value;qt&&(qt.value=qt.value.split(/\s+/).map(function(e){return e.indexOf(":")>0?Tt.prefix+e:e}).join(" "),qt.binding&&qt.binding.forEach(function(e){e[0].indexOf(":")>0&&(e[0]=Tt.prefix+e[0])}),qt.map_&&qt.map_.forEach(function(e){e.value.indexOf(":")>0&&(e.value=Tt.prefix+e.value)})),K(Y,Ot,"class","remove-class");break;case"add-ref":var Mt=a(Ot),Pt="ref"in Mt?Mt.ref:"element",Lt=Pt&&Nt[Pt],Y=Lt&&Lt.token;Y&&Mt.name&&o(Y,Mt.name);break;case"remove-ref":var Mt=a(Ot),Pt="ref"in Mt?Mt.ref:"element",Lt=Pt&&Nt[Pt],Y=Lt&&Lt.token;Y&&u(Y,Mt.name||Mt.ref);break;default:}else St.tokens.push.apply(St.tokens,z([Ot],p,d)||[]);Nt.element&&u(Nt.element.token,"element"),Q.push.apply(Q,St.tokens)}}break;default:}continue}Z=[1,tt,et,i(Y)],Z.push.apply(Z,J(Y,Z,d.optimizeSize)||[]),Z.push.apply(Z,z(Y.children,p,d)||[]);break;case E:et&&et.length==2&&l(et,"element")&&(tt=et[+!et.lastSearchIndex]),Z=[3,tt,et],(!et||Y.value!="{"+et.join("|")+"}")&&Z.push(Y.value);break;case S:if(d.optimizeSize&&!tt&&!et)continue;Z=[8,tt,et],d.optimizeSize||(!et||Y.value!="{"+et.join("|")+"}")&&Z.push(Y.value)}while(Z[Z.length-1]===0)Z.pop();Q.push(Z)}return Q.length?Q:0}function W(e,t,n){if(typeof e=="string"){var r=e.split(":"),i=r[1];if(r[0]=="l10n"){if(r.length==2&&i.indexOf("@")==-1){if(!t)return!1;i=i+"@"+t,e="l10n:"+i}c(n,i)}}return e}function X(e,t,n,r){function i(e){if(e.indexOf(":")<=0)return e;var n=e.split(":")[0];return t.map[t.prefix+n]=n,t.prefix+e}n||(n={});for(var s=r||0,o;o=e[s];s++){var a=o[x],f=o[N];if(t&&a==y){var l=o[T],c=O[a];o[c]&&(o[c]=o[c].split(/\s+/).map(i).join(" "));if(l)for(var h=0,p;p=l[h];h++)p[0]=i(p[0])}if(a!=w&&f)for(var d=f.length-1,v;v=f[d];d--){if(v.indexOf(":")!=-1){u(o,v);continue}n[v]&&u(n[v].token,v),o[T]==v&&(o[T]=d+1),n[v]={owner:e,token:o}}a===m&&X(o,t,n,M)}return n}function V(e,t,n,r){for(var i=r||0,s;s=e[i];i++){var o=s[x],u=s[T];switch(s[x]){case m:V(s,t,n,M);break;case E:if(u){var a=W(u,n.dictURI,t.l10n);s[T]=a||0,a===!1&&(s[_]="{"+u+"}")}break;case g:if(u){var l=u[0];for(var c=0;c<l.length;c++){var a=W(l[c],n.dictURI,t.l10n);l[c]=a===!1?"{"+l[c]+"}":a}}break;case y:if(u){for(var h=0,p;p=u[h];h++){if(p.length>2)continue;var d=p[1].split(":"),v=d.pop(),b=d.pop()||"";if(f.call(n.defines,v)){var w=n.defines[v];p[1]=(b?b+":":"")+w[0],p.push.apply(p,w.slice(1))}else p.push(0)}if(n.optimizeSize){var S=O[o];s[S]||(s.length=S)}}}}}function $(e,t,n,r,i){function s(e){if(e.indexOf(":")==-1)return t+e;if(!n)return e;var r=e.split(":");if(!r[0])return r[1];var i=f.call(n.styleNSPrefix,r[0])?n.styleNSPrefix[r[0]]:!1;return i?i.prefix+r[1]:!1}for(var o=i||0,u;u=e[o];o++){var a=u[x];a==m&&$(u,t,n,r,M);if(a==y){var l=u[T],c=O[a];u[c]&&(u[c]=u[c].split(/\s+/).map(function(e){return s(e,e,u.valueLocMap?u.valueLocMap[e]:null)}).filter(Boolean).join(" "));if(l){for(var h=0,p,d,v;p=l[h];h++)d=s(p[0],p[0]+"{"+p[1]+"}",p.loc),d===!1?(v=!0,l[h]=null):p[0]=d;v&&(l=l.filter(Boolean),u[T]=l.length?l:0)}}}}function J(e){return e[0]+"|"+e[1]}var e=[],t={},r={};return function(s,u,a,f,l){var c=[];a=n.object.slice(a),a.includeOptions=a.includeOptions||{},a.defines={},a.dictURI=f?n.path.resolve(f):u||"";var h={sourceUrl:f,baseURI:u||"",tokens:null,includes:[],deps:[],isolate:!1,styleNSPrefix:{},resources:[],l10n:[],warns:c};if(a.dictURI){var v=n.path.extname(a.dictURI);v&&v!=".l10n"&&(a.dictURI=a.dictURI.substr(0,a.dictURI.length-v.length)+".l10n")}s.templateTokens||(s=p(String(s),{loc:!!a.loc,range:!!a.range})),e.push(l!==!0&&l||{}),h.tokens=z(s,h,a),e.pop(),h.tokens||(h.tokens=[[E,0,0,""]]),o(h.tokens[0],"element"),X(h.tokens),V(h.tokens,h,a);if(e.length==0){$(h.tokens,h.isolate||"",h,a);if(h.isolate)for(var m=0,g;g=h.resources[m];m++)g[1]!==t&&(g[1]=h.isolate+g[1]);h.resources=h.resources.filter(function(e,t,r){return e[0]&&!n.array.search(r,J(e),J,t+1)}).map(function(e){var i=e[0],s=e[1],o=s===t,u;if(o){s=t[i];if(i in r)return r[i].url}if(!s)return i;var a=n.resource.virtual("css","").ready(function(e){e.url=i+"?isolate-prefix="+s,e.baseURI=n.path.dirname(i)+"/",e.map=u,f()}),f=n.resource(i).ready(function(e){var t=d(e.cssText||"",s,!0);u=t.map,a.update(t.css)});return o&&(r[i]=a),a.url})}return c.length||(h.warns=!1),h}}();n.resource("./e.js").ready(function(e){F=e.resolveResource,j=e.Template}),t.exports={VERSION:3,makeDeclaration:q,getDeclFromSource:U}},"e.js":function(e,t,n,r,i,s,o,u,a){function x(e){var t=S[e];if(!t){var r=l.getElementById(e),i="";r&&r.tagName=="SCRIPT"&&r.type=="text/basis-template"&&(i=r.textContent||r.text),t=S[e]=n.resource.virtual("tmpl",i||"")}return t}function T(e,t){return/^#\d+$/.test(e)?E[e.substr(1)]:/^id:/.test(e)?x(e.substr(3)):/^[a-z0-9\.]+$/i.test(e)&&!/\.tmpl$/.test(e)?w(e):n.resource(n.resource.resolveURI(e,t,'<b:include src="{url}"/>'))}function N(){this.destroyBuilder&&C.call(this);var e=this;while(e=e.attaches_)e.handler.call(e.context)}function C(){var e=m(this.source,this.baseURI,!1,{isolate:this.getIsolatePrefix()}),t=this.destroyBuilder,r={},i=this.builder(e.tokens,r);this.createInstance=i.createInstance,this.clearInstance=i.destroyInstance,this.destroyBuilder=i.destroy,y.add(this.templateId,this,r);var s=e.deps,o=this.deps_;this.deps_=s;if(o)for(var u=0,a;a=o[u];u++)a.bindingBridge.detach(a,C,this);if(s)for(var u=0,a;a=s[u];u++)a.bindingBridge.attach(a,C,this);var f=e.resources,l=this.resources;this.resources=f;if(f)for(var u=0,c;c=f[u];u++){var h=n.resource(c).fetch();typeof h.startUse=="function"&&h.startUse()}if(l)for(var u=0,c;c=l[u];u++){var h=n.resource(c).fetch();typeof h.stopUse=="function"&&h.stopUse()}t&&t(!0)}function O(e,t){return t||(t=e,e=null),typeof e=="string"&&(e=e.split(/\s+/)),new L({rule:t,events:e})}var f=this.path,l=r.document,c=n.Class,h=n.cleaner,p=n.path,d=n.require("./d.js"),v=n.require("./f.js").VERSION,m=n.require("./f.js").getDeclFromSource,g=n.require("./f.js").makeDeclaration,y=n.require("./g.js"),b=n.require("./h.js"),w=b.get,E=[],S={},k=c(null,{className:f+".Template",__extend__:function(e){return e instanceof k?e:e instanceof L?new A(e):new k(e)},source:"",baseURI:"",url:"",attaches_:null,init:function(e){if(E.length==4096)throw"Too many templates (maximum 4096)";this.setSource(e||""),this.templateId=E.push(this)-1},bindingBridge:{attach:function(e,t,n){e.attaches_={handler:t,context:n,attaches_:e.attaches_}},detach:function(e,t,n){var r=e,i;while(i=r,r=r.attaches_)if(r.handler===t&&r.context===n){i.attaches_=r.attaches_;return}},get:function(e){var t=e.source;return t&&t.bindingBridge?t.bindingBridge.get(t):t}},createInstance:function(e,t,n,r,i){return C.call(this),this.createInstance(e,t,n,r,i)},clearInstance:function(){},getIsolatePrefix:function(){return"i"+this.templateId+"__"},setSource:function(e){var t=this.source;if(t!=e){if(typeof e=="string"){var n=e.match(/^([a-z]+):/);if(n){e=e.substr(n[0].length);switch(n[1]){case"id":e=x(e);break;case"path":e=w(e);break;default:}}}t&&t.bindingBridge&&(this.url="",this.baseURI="",t.bindingBridge.detach(t,N,this)),e&&e.bindingBridge&&(e.url&&(this.url=e.url,this.baseURI=p.dirname(e.url)+"/"),e.bindingBridge.attach(e,N,this)),this.source=e,N.call(this)}},destroy:function(){this.destroyBuilder&&(y.remove(this.templateId),this.destroyBuilder()),this.attaches_=null,this.createInstance=null,this.resources=null,this.source=null}}),L=function(e){n.object.extend(this,e)},A=n.Class(null,{className:f+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:k,ruleEvents:null,rule:String,init:function(e){this.ruleRet_=[],this.templates_=[],this.rule=e.rule;var t=e.events;if(t&&t.length){this.ruleEvents={};for(var n=0,r;r=t[n];n++)this.ruleEvents[r]=!0}h.add(this)},resolve:function(e){var t=this.rule(e),n=this.ruleRet_.indexOf(t);return n==-1&&(this.ruleRet_.push(t),n=this.templates_.push(new this.templateClass(t))-1),this.templates_[n]},destroy:function(){this.rule=null,this.templates_=null,this.ruleRet_=null}});h.add({destroy:function(){for(var e=0,t;t=E[e];e++)t.destroy();E=null}}),t.exports={DECLARATION_VERSION:v,TYPE_ELEMENT:d.TYPE_ELEMENT,TYPE_ATTRIBUTE:d.TYPE_ATTRIBUTE,TYPE_ATTRIBUTE_CLASS:d.TYPE_ATTRIBUTE_CLASS,TYPE_ATTRIBUTE_STYLE:d.TYPE_ATTRIBUTE_STYLE,TYPE_ATTRIBUTE_EVENT:d.TYPE_ATTRIBUTE_EVENT,TYPE_TEXT:d.TYPE_TEXT,TYPE_COMMENT:d.TYPE_COMMENT,TOKEN_TYPE:d.TOKEN_TYPE,TOKEN_BINDINGS:d.TOKEN_BINDINGS,TOKEN_REFS:d.TOKEN_REFS,ATTR_NAME:d.ATTR_NAME,ATTR_VALUE:d.ATTR_VALUE,ATTR_NAME_BY_TYPE:d.ATTR_NAME_BY_TYPE,CLASS_BINDING_ENUM:d.CLASS_BINDING_ENUM,CLASS_BINDING_BOOL:d.CLASS_BINDING_BOOL,ELEMENT_NAME:d.ELEMENT_NAME,ELEMENT_ATTRS:d.ELEMENT_ATTRIBUTES_AND_CHILDREN,ELEMENT_ATTRIBUTES_AND_CHILDREN:d.ELEMENT_ATTRIBUTES_AND_CHILDREN,TEXT_VALUE:d.TEXT_VALUE,COMMENT_VALUE:d.COMMENT_VALUE,TemplateSwitchConfig:L,TemplateSwitcher:A,Template:k,switcher:O,getDeclFromSource:m,makeDeclaration:g,resolveResource:T,resolveTemplateById:y.resolveTemplateById,resolveObjectById:y.resolveObjectById,resolveTmplById:y.resolveTmplById,SourceWrapper:b.SourceWrapper,Theme:b.Theme,theme:b.theme,getThemeList:b.getThemeList,currentTheme:b.currentTheme,setTheme:b.setTheme,onThemeChange:b.onThemeChange,define:b.define,get:b.get,getPathList:b.getPathList}},"d.js":function(e,t,n,r,i,s,o,u,a){var f="basisTemplateId_"+n.genUID(),l=1,c=2,h=4,p=5,d=6,v=3,m=8,g=0,y=1,b=2,w=3,E=4,S={4:"class",5:"style"},x={"class":h,style:p},T={2:E,4:E-1,5:E-1,6:2},N=3,C=4,k=3,L=3,A=1,O=2,M=3,_=4,D=5,P=r.document,H=P?function(){var e=P.createElement("div");return e.appendChild(P.createTextNode("a")),e.appendChild(P.createTextNode("a")),e.cloneNode(true).childNodes.length==1}():!0;t.exports={MARKER:f,TYPE_ELEMENT:l,TYPE_ATTRIBUTE:c,TYPE_ATTRIBUTE_CLASS:h,TYPE_ATTRIBUTE_STYLE:p,TYPE_ATTRIBUTE_EVENT:d,TYPE_TEXT:v,TYPE_COMMENT:m,TOKEN_TYPE:g,TOKEN_BINDINGS:y,TOKEN_REFS:b,ATTR_NAME:w,ATTR_VALUE:E,ATTR_NAME_BY_TYPE:S,ATTR_TYPE_BY_NAME:x,ATTR_VALUE_INDEX:T,ELEMENT_NAME:N,ELEMENT_ATTRIBUTES_AND_CHILDREN:C,TEXT_VALUE:k,COMMENT_VALUE:L,CLASS_BINDING_ENUM:A,CLASS_BINDING_BOOL:O,CLASS_BINDING_INVERT:M,CLASS_BINDING_EQUAL:_,CLASS_BINDING_NOTEQUAL:D,CLONE_NORMALIZATION_TEXT_BUG:H}},"1h.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./r.js");t.exports=l.Text.subclass({autoDelegate:!0,handler:{update:function(){var e=this.delegate.data;e&&this.setValue(e[this.name])}},action:{keyup:function(e){if(this.delegate){var t={};t[this.name]=e.sender.value,this.delegate.update(t)}}}})},"c.js":function(e,t,n,r,i,s,o,u,a){function _(e,t){return new Function(e,t)}var f=Object.prototype.hasOwnProperty,l=n.require("./d.js"),c=l.MARKER,h=l.TYPE_ELEMENT,p=l.TYPE_ATTRIBUTE,d=l.TYPE_ATTRIBUTE_CLASS,v=l.TYPE_ATTRIBUTE_STYLE,m=l.TYPE_ATTRIBUTE_EVENT,g=l.TYPE_TEXT,y=l.TYPE_COMMENT,b=l.TOKEN_TYPE,w=l.TOKEN_BINDINGS,E=l.TOKEN_REFS,S=l.ATTR_NAME,x=l.ATTR_NAME_BY_TYPE,T=l.ELEMENT_NAME,N=l.ELEMENT_ATTRIBUTES_AND_CHILDREN,C=l.CLASS_BINDING_ENUM,k=l.CLASS_BINDING_BOOL,L={},A=function(){try{return r.document.createTextNode("").x=1,!0}catch(e){return!1}}(),O=function(){function u(e,t){for(var r=0,i;i=e[r];r++)i.indexOf(":")==-1&&n.push(i+":"+t)}function a(n){var r=t.length,i=e[r]||"r"+r;return t.push(i+"="+n),i}function f(e){r.push(e)}function l(e,n,r){var p,C,k,L,O;for(var M=0,_=0,D=0,P;P=e[M];M++,_++,L=!1){M?e[M+1]?(P[b]==e[M-1][b]&&P[b]==g&&D++,p=n+".childNodes["+(r?_:_+(D?" + "+D+" * TEXT_BUG":""))+"]"):p=n+".lastChild":p=n+".firstChild";if(C=P[E])L=!0,p=a(p),u(C,p);P[w]&&(P[w]&&typeof P[w]=="number"&&(P[w]=P[E][P[w]-1]),L||(L=!0,p=a(p)),f([P[b],p,P[w],C?C.indexOf("element")!=-1:!1])),n==s&&(A||P[b]==h)&&i.push(p+"."+c);if(P[b]==h){k=-1,L||(p=a(p),k=t.length);var H=[],B=[];for(var j=N,F;F=P[j];j++)F[b]==h||F[b]==g||F[b]==y?B.push(F):H.push(F);for(var j=0,I;I=H[j];j++){var q=I[b];if(q==m)continue;var R=x[q]||I[S];if(C=I[E])L=!0,u(C,a(p+'.getAttributeNode("'+R+'")'));if(O=I[w]){L=!0;switch(q){case d:for(var U=0,z;z=O[U];U++)f([2,p,z[1],R,z[0]].concat(z[2]==-1?[]:z.slice(2)));break;case v:for(var U=0,W;W=O[U];U++){o++;for(var X=0,V;V=W[0][X];X++)f([2,p,V,R,W[0],W[1],W[2],W[3],o])}break;default:o++;for(var U=0,V;V=O[0][U];U++)f([2,p,V,R,O[0],O[1],P[T],o])}}}B.length&&l(B,p,r),!L&&k==t.length&&t.pop()}}}var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),t,n,r,i,s,o;return function(e,u,a){return t=[],n=[],r=[],i=[],s=u||"_",o=0,l(e,s,a),{path:t,ref:n,binding:r,markedElementList:i}}}(),M=function(){function u(e){return'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}function a(t,n,r){var i=[],s=t[5],o=t[4],a,f;for(var l=0;l<s.length;l++)if(typeof s[l]=="string")i.push(u(s[l]));else{a=o[s[l]],f=a.indexOf(":");if(f==-1)i.push(n=="l10n"?'"{'+a+'}"':n=="bool"?"(__"+a+'||"")':"__"+a);else{var c=null,h=a.substr(f+1).replace(e,function(e,t){return c=t,""});c?i.push(r[a.substr(f+1)]):i.push('l10n["'+h+'"]')}}return i.length==1&&i.push('""'),i.join("+")}var e=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,t={disabled:"*",checked:["input"],indeterminate:["input"],value:["input","textarea","select"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},r={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0,indeterminate:!0},i={show:'"none"',visible:'"hidden"'},s={hide:'?"none":""',show:'?"":"none"',hidden:'?"hidden":""',visible:'?"":"hidden"'},o={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(u){function l(e){M[e]=!0,d.push(v+"="+e+"("+n.array(arguments,1)+");")}var c={},d,v,m=0,y=[],b=[],w=[],E,x,T=[],N={},L=0,A,O={},M={resolve:!0};for(var _=0,D;D=u[_];_++){var P=D[0],H=D[1],B=D[2],j=D[3],F=B.split(":");if(F[0]=="l10n"&&F[1]){var I=F[1],q=null,R=I.replace(e,function(e,t){return q=t,""});if(q){I in N==0&&(E="$l10n_"+L++,N[I]=E,T.push(E),y.push(E+'=tools.l10nToken("'+R+'").computeToken()'),d=c[q],d||(d=c[q]=[],y.push("__"+q)),d.push(E+".set(__"+q+");")),B=N[I],v="_"+m++,E="__"+B,d=c[B],d||(d=c[B]=[],y.push(E)),P==g?(y.push(v+"="+H),l(o[P],H,v,"value",j)):(W='"'+D[S]+'"',y.push(v),l("bind_attr",H,W,v,a(D,!1,N)));continue}}w.push(D)}for(var _=0,D;D=w[_];_++){var P=D[0],H=D[1],B=D[2],j=D[3];if(["get","set","templateId_"].indexOf(B)!=-1)continue;var F=B.split(":"),U=F[0]=="anim",z=F[0]=="l10n";U&&(B=F[1]),d=f.call(c,B)?c[B]:null,v="_"+m++,E="__"+B;if(z&&F[1]){var I=F[1],q=null,R=I;x||(x={}),c[R]||(c[R]=[],c[R].l10n="$l10n_"+L++,y.push("__"+c[R].l10n+'=l10n["'+R+'"]'),x[R]=[]),d=c[R];if(P==g){x[R].push(H+".nodeValue=value;"),d.nodeBind?d.push(H+".nodeValue=value;"):(y.push(v+"="+H),l(o[P],H,v,"value",j),d.nodeBind=v);continue}x[R].push("bind_attr("+[H,'"'+D[S]+'"',"NaN",a(D,"l10n",N)]+");")}d||(d=c[B]=[],y.push(E));if(P!=p)if(!d.nodeBind)y.push(v+"="+H),l(o[P],H,v,"value",j),d.nodeBind=v;else switch(P){case h:l(o[P],H,H,"value!==null?String(value):null");break;case g:d.push(H+".nodeValue=value;")}else{var W=D[S];switch(W){case"class":var X="",V="value",$=D[5],J=D[7];switch($){case k:var K=[D[6]],Q=D[4],G=Array.isArray(Q)?Q:K.map(function(e){return Q+e});V='value?"'+G[0]+'":""',J&&(X=G[J-1]);break;case C:var K=D[8],Q=D[4],G=Array.isArray(Q)?Q:K.map(function(e){return Q+e});V=K.map(function(e,t){return'value=="'+e+'"?"'+G[t]+'"'}).join(":")+':""',J&&(X=G[J-1]);break;default:var Q=D[4];V='typeof value=="string"||typeof value=="number"?"'+Q+'"+value:(value?"'+Q+B+'":"")'}y.push(v+'="'+X+'"'),l("bind_attrClass",H,v,V,U);break;case"style":var Y=a(D,!1,N);A=D[8],O[A]||(O[A]=v,y.push(v+"="+(i[D[7]]||'""'))),D[7]&&(Y=Y.replace(/\+""$/,"")+(s[D[7]]||"")),v=O[A],l("bind_attrStyle",H,'"'+D[6]+'"',v,Y);break;default:var Z=t[W],et=D[6].toLowerCase(),Y=Z&&r[W]?a(D,"bool",N)+'?"'+W+'":""':a(D,!1,N);A=D[7],O[A]||(y.push(v+"="+Y),O[A]=v),v=O[A],W=="tabindex"?l("bind_attr",H,'"'+W+'"',v,Y+"==-1?"+(["input","button","textarea"].indexOf(et)==-1?'""':"-1")+":"+Y):l("bind_attr",H,'"'+W+'"',v,Y),Z&&(Z=="*"||Z.indexOf(et)!=-1)&&d.push("if("+H+"."+W+"!="+v+")"+H+"."+W+"="+(r[W]?"!!"+v:v)+";")}}}b.push(';function set(bindName,value){if(typeof bindName!="string")');for(var B in c)c[B].nodeBind&&b.push("if(bindName==="+c[B].nodeBind+")"+'bindName="'+B+'";'+"else ");b.push("return;"),b.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");for(var B in c){var tt=c[B].l10n||B;b.push('case"'+B+'":'+"if(__"+tt+"!==value)"+"{"+"__"+tt+"=value;"+c[B].join("")+"}"+"break;")}b.push("}}");var nt=[];for(var rt in M)nt.push(rt+"=tools."+rt);return{keys:n.object.keys(c).filter(function(e){return e.indexOf("@")==-1}),tools:nt,vars:y,set:b.join(""),l10n:x,l10nCompute:T}}}(),D=function(e,t,r,i,s){var o=L[r&&n.path.relative(r)];if(o)return o;var u=O(e,"_",s),a=M(u.binding),f=u.markedElementList.join("="),l={keys:a.keys,l10nKeys:n.object.keys(a.l10n)};e.length==1&&(u.path[0]="a=_");if(a.l10n){var c=[];for(var h in a.l10n)c.push('case"'+h+'":'+a.l10n[h].join("")+"break;");l.createL10nSync=_(["_","l10n","bind_attr","TEXT_BUG"],"var "+u.path+";"+"return function(path, value){"+"switch(path){"+c.join("")+"}"+"}")}return l.createInstanceFactory=_(["tid","createDOM","tools","l10nMap","l10nMarkup","getBindings","TEXT_BUG"],"var "+(a.tools.length?a.tools+",":"")+"Attaches=function(){};"+"Attaches.prototype={"+a.keys.map(function(e){return e+":null"})+"};"+"return function createTmpl_(id,instance,initL10n){"+"var _=createDOM(),"+(a.l10n?"l10n=initL10n?{}:l10nMap,":"")+u.path.concat(a.vars)+(a.l10nCompute.length?";instance.compute=["+a.l10nCompute+"]":"")+";instance.tmpl={"+[u.ref,"templateId_:id","set:set"]+"}"+(f?";if(instance.context||instance.onAction)"+f+"=(id<<12)|tid":"")+a.set+(a.l10n?";if(initL10n){l10n=l10nMap;initL10n(set)};if(l10nMarkup.length)for(var idx=0,token;token=l10nMarkup[idx];idx++)set(token.path,token.token);":"")+";if(instance.bindings)instance.handler=getBindings(instance,set)"+";"+a.l10nCompute.map(function(e){return'set("'+e+'",'+e+")"})+"}"),l};t.exports={getFunctions:D}},"1i.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./l.js"),c=n.require("./5.js"),h=n.require("./1.js"),p=n.require("./1h.js"),d=n.require("./1j.js"),v=n.require("./5.js").Dataset,m=n.require("./1k.js"),g=n.require("./1l.js");t.exports=f.Node.subclass({name:"EmployeeForm",template:n.template.get("#m"),satellite:{compensatoryLeaves:{instance:m,dataSource:function(e){var t=e.data.compensatory_leaves.map(function(e){return new c.Object({data:e})});return new v({items:t})}},maternityLeaves:{instance:g,dataSource:function(e){var t=e.data.maternity_leaves.map(function(e){return new c.Object({data:e})});return new v({items:t})}},submitButton:{instance:l.Button.subclass({caption:"Save",click:function(){this.owner.submit()}})}},binding:{compensatoryLeaves:"satellite:",maternityLeaves:"satellite:",submitButton:"satellite:"},childFactory:function(e){return e.type=="date"?new d(e):new p(e)},childNodes:[{title:"Name",name:"name"},{title:"Surname",name:"surname"},{title:"Position",name:"position"},{title:"Work start",name:"work_start",type:"date"},{title:"Work end",name:"work_end",type:"date"}],submit:function(){var e=this;h.request({url:"/employee/update",method:"POST",contentType:"application/json",body:JSON.stringify(e.data),handler:{success:function(){e.owner.delegate.setAndDestroyRemoved(),alert("Employee successfully updated")},failure:function(){alert("Update of employee is failed")}}})}})},"1j.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./r.js"),c=n.require("./m.js"),h=n.require("./l.js"),p=n.require("./s.js").Popup,d=n.require("./5.js").Value,v=n.require("./w.js"),m=new p({dir:"left bottom left top",autorotate:!0,hideOnKey:n.fn.$true,template:n.template.get("#g"),childNodes:new c.Calendar({name:"Calendar",childNodes:["Month","Year","YearDecade"],action:{click:function(){}},handler:{change:function(){this.parentNode.caller.changeDate(this.selectedDate.value),m.hide()}}})});t.exports=f.Node.subclass({autoDelegate:!0,className:"BuBu",isCalendarVisible:!1,template:n.template.get("#h"),satellite:{clear:{instance:h.Button.subclass({caption:"Clear",click:function(){this.owner.changeDate()}})},change:{instance:h.Button.subclass({caption:"Change",date:new d(""),click:function(){m.caller=this.owner,m.getChildByName("Calendar").selectedDate.set(v(this.owner.date,"YYYY-MM-DD").toDate()),m.show(this.element)}})}},binding:{clear:"satellite:",change:"satellite:",title:function(e){return e.title}},childClass:new f.Node.subclass({template:"<span>{date}</span>",autoDelegate:!0,handler:{update:function(){var e=this.delegate.data;e&&e[this.name]&&e[this.name]!="null"?this.date=v(e[this.name]).format("YYYY-MM-DD"):this.date="not specified",this.updateBind("date"),this.parentNode.date=this.date}},binding:{date:function(e){return e.date}}}),handler:{select:function(){this.unselect()}},changeDate:function(e){this.isCalendarVisible=!1;var t={};t[this.name]=e?v(e).format("YYYY-MM-DD"):null,this.delegate.update(t)},init:function(){f.Node.prototype.init.call(this),this.setChildNodes([{title:this.title,name:this.name}])}})},"b.js":function(e,t,n,r,i,s,o,u,a){function E(e){if(e.charAt(0)=="#")return p[parseInt(e.substr(1),36)];var t=e.match(/^(.+?)@(.+)$/);if(t)return O(n.path.resolve(t[2])).token(t[1])}function S(e){return e?e instanceof w||e instanceof b:!1}function x(e){return S(e)&&y[e.getType()]}function T(e){return S(e)&&e.getType()=="markup"}function L(e,t,n,r){var i=e.cultureValues[t];r=r?r+".":"";for(var s in n){if(s.indexOf(".")!=-1)continue;if(h.call(n,s)){var o=r+s,u=n[s];i[o]=u,u&&(typeof u=="object"||Array.isArray(u))&&L(e,t,u,o)}}}function O(e){var t;if(typeof e=="string"){var r=e,i=n.path.extname(r);i!=".l10n"&&(r=r.replace(new RegExp(i+"([#?]|$)"),".l10n$1")),e=n.resource(r)}return n.resource.isResource(e)&&(t=C[e.url]),t||new A(e)}function M(){return N.slice(0)}function I(e,t){return e&&!P[e]&&(P[e]=new F(e,t)),P[e||D]}function q(){return D}function R(e){if(!e)return;if(D!=e){if(_.indexOf(e)==-1)return;D=e;for(var t=0,r;r=N[t];t++)r.syncValues();n.Token.prototype.set.call(I,e)}}function U(){return _.slice(0)}function z(e){typeof e=="string"&&(e=e.trim().split(" "));if(!e.length)return;var t={},r,i;H={};for(var s=0,o,u;o=e[s];s++)r=o.split("/"),r.length>2&&(r=r.slice(0,2)),u=r[0],i||(i=u),t[u]=I(u),H[u]=r;for(var u in H)H[u]=n.array.flatten(H[u].map(function(e){return H[e]})).concat(i).filter(function(e,t,n){return!t||n.lastIndexOf(e,t-1)==-1});_=n.object.keys(t),D in t==0&&R(i)}function W(e,t,n){I.attach(e,t),n&&e.call(t,D)}var f=this.path,l=n.Class,c=n.require("./4.js").Emitter,h=Object.prototype.hasOwnProperty;n.resource.extensions[".l10n"]=function(e,t){return O(t).update(n.resource.extensions[".json"](e,t))};var p=[],d={},v=n.Token.prototype.set,m={"default":!0,plural:!0,markup:!0,"plural-markup":!0,"enum-markup":!0},g={"default":"default",plural:"default",markup:"default","plural-markup":"markup","enum-markup":"markup"},y={plural:!0,"plural-markup":!0},b=l(n.Token,{className:f+".ComputeToken",dictionary:null,token:null,parent:"",init:function(e){this.token.computeTokens[this.basisObjectId]=this,n.Token.prototype.init.call(this,e)},get:function(){var e=this.dictionary.getValue(this.getName());return y[this.token.getType()]&&(e=String(e).replace(/\{#\}/g,this.value)),e},getName:function(){var e=this.value;return y[this.token.getType()]&&(e=P[D].plural(e)),this.parent+"."+e},getType:function(){var e=this.token.getType();return this.dictionary.types[this.getName()]||g[e]||"default"},getParentType:function(){return this.token.getType()},toString:function(){return this.get()},destroy:function(){delete this.token.computeTokens[this.basisObjectId],n.Token.prototype.destroy.call(this)}}),w=l(n.Token,{className:f+".Token",index:NaN,dictionary:null,name:"",type:"default",computeTokens:null,computeTokenClass:null,init:function(e,t,r){n.Token.prototype.init.call(this,r),this.index=p.push(this)-1,this.name=t,this.parent=t.replace(/(^|\.)[^.]+$/,""),this.dictionary=e,this.computeTokens={}},toString:function(){return this.get()},apply:function(){for(var e in this.computeTokens)this.computeTokens[e].apply();n.Token.prototype.apply.call(this)},set:function(){},getName:function(){return this.name},getType:function(){return this.dictionary.types[this.name]||g[this.dictionary.types[this.parent]]||"default"},getParentType:function(){return this.parent?this.dictionary.token(this.parent).getType():"default"},setType:function(){},compute:function(e,t){arguments.length==1&&(t=e,e=""),t=n.getter(t),e=String(e).trim().split(/\s+|\s*,\s*/).sort();var r=this.basisObjectId,i=e.concat(r,t[n.getter.ID]).join("_");if(d[i])return d[i];var s=this,o={},u=function(e){v.call(this,t(e))},a={destroy:function(e){delete o[e.basisObjectId],this.destroy()}};for(var f=0,l;l=e[f];f++)l!="destroy"&&(a[l]=u);return d[i]=function(e){if(e instanceof c==0)throw"basis.l10n.Token#compute: object must be an instanceof Emitter";var n=e.basisObjectId,r=o[n];return r||(r=o[n]=s.computeToken(t(e)),e.addHandler(a,r)),r}},computeToken:function(e){var t=this.computeTokenClass;return t||(t=this.computeTokenClass=b.subclass({dictionary:this.dictionary,token:this,parent:this.name})),new t(e)},token:function(e){if(y[this.getType()])return this.computeToken(e,this);if(this.dictionary)return this.dictionary.token(this.name+"."+e)},destroy:function(){for(var e in this.computeTokens)this.computeTokens[e].destroy();this.computeTokenClass=null,this.computeTokens=null,this.value=null,this.dictionary=null,p[this.index]=null,n.Token.prototype.destroy.call(this)}}),N=[],C={},k=new n.Token,A=l(null,{className:f+".Dictionary",tokens:null,types:null,cultureValues:null,index:NaN,resource:null,init:function(e){this.tokens={},this.types={},this.cultureValues={},this.index=N.push(this)-1;if(n.resource.isResource(e)){var t=e;this.resource=t,C[t.url]||(C[t.url]=this,k.set(t.url)),t.fetch()}else this.update(e||{})},update:function(e){e||(e={}),this.cultureValues={};for(var t in e)/^_|_$/.test(t)||(this.cultureValues[t]={},L(this,t,e[t]));var n=e._meta&&e._meta.type||{},r={};for(var i in this.tokens)r[i]=this.tokens[i].getType();this.types={};for(var i in n)this.types[i]=m[n[i]]==1?n[i]:"default";for(var i in this.tokens){var s=this.tokens[i];s.getType()!=r[i]&&this.tokens[i].apply()}return this.syncValues(),this},syncValues:function(){for(var e in this.tokens)v.call(this.tokens[e],this.getValue(e))},getValue:function(e){var t=H[D]||[];for(var n=0,r;r=t[n];n++){var i=this.cultureValues[r];if(i&&e in i)return i[e]}},getCultureValue:function(e,t){return this.cultureValues[e]&&this.cultureValues[e][t]},token:function(e){var t=this.tokens[e];return t||(t=this.tokens[e]=new w(this,e,this.getValue(e))),t},destroy:function(){this.tokens=null,this.cultureValues=null,n.array.remove(N,this),this.resource&&(delete C[this.resource.url],this.resource=null)}}),_=[],D=null,P={},H={},B={},j=[[1,function(){return 0}],[2,function(e){return e==1||e%10==1?0:1}],[2,function(e){return e==0?0:1}],[2,function(e){return e==1?0:1}],[2,function(e){return e==0||e==1?0:1}],[2,function(e){return e%10!=1||e%100==11?1:0}],[3,function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e!=0?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e==0?0:e==1?1:2}],[3,function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2}],[3,function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],[3,function(e){return e==1?0:e>=2&&e<=4?1:2}],[4,function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3}],[4,function(e){return e==1?0:e==2?1:e==3?2:3}],[4,function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0}],[4,function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3}],[4,function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3}],[5,function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4}],[6,function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5}]];["ay bo cgg dz fa id ja jbo ka kk km ko ky lo ms my sah su th tt ug vi wo zh","mk","jv","af an ast az bg bn brx ca da de doi el en eo es es-AR et eu ff fi fo fur fy gl gu ha he hi hne hu hy ia it kn ku lb mai ml mn mni mr nah nap nb ne nl nn no nso or pa pap pms ps pt rm rw sat sco sd se si so son sq sv sw ta te tk ur yo","ach ak am arn br fil fr gun ln mfe mg mi oc pt-BR tg ti tr uz wa zh","is","csb","lv","lt","be bs hr ru sr uk","mnk","ro","pl","cs sk","cy","kw","sl","mt","gd","ga","ar"].forEach(function(e,t){e.split(" ").forEach(function(e){B[e]=this},j[t])});var F=n.Class(null,{className:f+".Culture",name:"",pluralForm:null,init:function(e,t){this.name=e,P[e]||(P[e]=this),this.pluralForm=t||B[e]||B[e.split("-")[0]]||j[0]},plural:function(e){return Number(this.pluralForm[1](Math.abs(parseInt(e,10))))}});n.object.extend(I,new n.Token),I.set=R,z("en-US"),R("en-US"),t.exports={ComputeToken:b,Token:w,token:E,isToken:S,isPluralToken:x,isMarkupToken:T,Dictionary:A,dictionary:O,getDictionaries:M,addCreateDictionaryHandler:k.attach.bind(k),removeCreateDictionaryHandler:k.detach.bind(k),Culture:F,culture:I,getCulture:q,setCulture:R,getCultureList:U,setCultureList:z,pluralForms:j,onCultureChange:W}},"a.js":function(e,t,n,r,i,s,o,u,a){function C(e){var t=e.dictionary,n=t.resource?t.resource.url:"dictionary"+t.basisObjectId,r=e.getName(),i=r+"@"+n,s=N[i],o;if(!s){var u=t.token(r);s=N[i]=u.as(function(e){if(u.getType()=="markup"){var t=u.getParentType();return typeof e=="string"&&(t=="plural"||t=="plural-markup")&&(e=e.replace(/\{#\}/g,"{__templateContext}")),e!=this.value&&o&&(o.detach(u,u.apply),o=null),e&&String(e).substr(0,5)=="path:"&&(o=w(e.substr(5)),o.attach(u,u.apply)),o?o.bindingBridge.get(o):e}return this.value}),s.id="{l10n:"+i+"}",s.url=n+":"+r}return s}function k(e){typeof e=="string"&&(e=d(e));if(!e)return null;var t=C(e),n=t.id,r=T[n];return r||(r=T[n]=new A(t)),r}var f=this.path,l=r.document,c=r.Node,h=n.string.camelize,p=n.require("./b.js").isMarkupToken,d=n.require("./b.js").token,v=n.require("./c.js").getFunctions,m=n.require("./e.js"),g=m.TemplateSwitchConfig,y=m.TemplateSwitcher,b=m.Template,w=m.get,E=n.require("./i.js"),S=n.require("./d.js").CLONE_NORMALIZATION_TEXT_BUG,x=!!function(){try{return l.documentElement.style.color="x"}catch(e){}}(),T={},N={},L=function(){function s(e){var t=e.startMarker,n=e.endMarker,r=t.nextSibling;while(r&&r!==n){var i=r;r=r.nextSibling,e.appendChild(i)}return n.parentNode.removeChild(n),e.startMarker=null,e.endMarker=null,t}function b(){this.set(this.name,this.value)}function w(e,t,n){var r=t&&t.bindingBridge,i=this.attaches&&this.attaches[e],s=null;if(r||i)if(r){var o=p(t),u;o&&(u=k(t));if(!i||i.value!==t||i.template!==u){i&&(i.tmpl&&i.template.clearInstance(i.tmpl),i.value.bindingBridge.detach(i.value,b,i));if(u){var a=this.context,f=this.bindings,l=this.bindingInterface;s=u.createInstance(a,null,function h(){s=c.tmpl=u.createInstance(a,null,h,f,l),s.parent=s.element.parentNode||s.element,b.call(c)},f,l),s.parent=s.element.parentNode||s.element}this.attaches||(this.attaches=new n);var c=this.attaches[e]={name:e,value:t,template:u,tmpl:s,set:this.tmpl.set};r.attach(t,b,c)}else s=t&&p(t)?i.tmpl:null;if(s)return s.set("__templateContext",t.value),s.parent;t=r.get(t)}else i&&(i.tmpl&&i.template.clearInstance(i.tmpl),i.value.bindingBridge.detach(i.value,b,i),this.attaches[e]=null);return t}function T(e,t){var n=e[0],r=e[1],i=t[n],s=t[r];switch(e.length){case 1:return function(t){this(n,i(t))};case 2:return function(t){this(n,i(t)),this(r,s(t))};default:var o=e.map(function(e){return t[e]});return function(n){for(var r=0;r<e.length;r++)this(e[r],o[r](n))}}}function N(e,t){for(var n in e)e[n]=T(e[n],t);return n?e:null}function C(e){var t={};return function(r,i){var s=r.bindings;if(!s)return{};var o="bindingId"in s?s.bindingId:null,u=t[o];if(!u){var a=[],f={},l={};for(var c=0,h;h=e[c];c++){var p=s[h],d=p&&p.getter;if(d){f[h]=d,a.push(h);if(p.events){var v=String(p.events).trim().split(/\s+|\s*,\s*/);for(var m=0,g;g=v[m];m++)l[g]?l[g].push(h):l[g]=[h]}}}u={names:a,sync:T(a,f),handler:N(l,f)},o&&(t[o]=u)}i&&u.sync.call(i,r.context);if(!r.bindingInterface)return;return u.handler&&r.bindingInterface.attach(r.context,u.handler,i),u.handler}}var e=/\s+/,t=r.DOMTokenList&&l&&l.documentElement.classList instanceof r.DOMTokenList,i=function(){try{return l instanceof c}catch(e){}}()||!1,o=i?function(e,t,n,r){var i=!r&&n&&n instanceof c?n:e;return i!==t&&(i.nodeType===11&&!i.startMarker&&(i.startMarker=l.createTextNode(""),i.endMarker=l.createTextNode(""),i.insertBefore(i.startMarker,i.firstChild),i.appendChild(i.endMarker)),t.nodeType===11&&t.startMarker&&(t=s(t)),t.parentNode.replaceChild(i,t)),i}:function(e,t,n,r){var i=!r&&n&&typeof n=="object"?n:e;if(i!==t)try{t.parentNode.replaceChild(i,t)}catch(s){i=e,t!==i&&t.parentNode.replaceChild(i,t)}return i},u=function(e,t,n,r){var i=o(e,t,n,r);return i===e&&typeof n=="string"&&(e.innerHTML=n),i},a=o,f=function(e,t,n,r){var i=o(e,t,n,r);return i===e&&(e.nodeValue=String(n)),i},m=t?function(e,t,r,i){var s=r?r:"";return s!=t&&(t&&e.classList.remove(t),s&&(e.classList.add(s),i&&(e.classList.add(s+"-anim"),n.nextTick(function(){e.classList.remove(s+"-anim")})))),s}:function(t,r,i,s){var o=i?i:"";if(o!=r){var u=t.className,a=typeof u!="string",f;a&&(u=u.baseVal),f=u.split(e),r&&n.array.remove(f,r),o&&(f.push(o),s&&(n.array.add(f,o+"-anim"),n.nextTick(function(){var r=(a?t.className.baseVal:t.className).split(e);n.array.remove(r,o+"-anim"),a?t.className.baseVal=r.join(" "):t.className=r.join(" ")}))),a?t.className.baseVal=f.join(" "):t.className=f.join(" ")}return o},g=x?function(e,t,n,r){return n!==r&&(e.style[h(t)]=r),r}:function(e,t,n,r){if(n!==r)try{e.style[h(t)]=r}catch(i){}return r},y=function(e,t,n,r){return n!==r&&(r?e.setAttribute(t,r):e.removeAttribute(t)),r},L={bind_textNode:f,bind_node:o,bind_element:u,bind_comment:a,bind_attr:y,bind_attrClass:m,bind_attrStyle:g,resolve:w,l10nToken:d};return function(e,t){var r=v(e,!0,this.source.url,e.source_,!S),i=r.createL10nSync,s,o,u={},a=[],f=[],l=0,c={cloneNode:function(){if(l==1)return E(e);c=E(e);if(i){o=r.createL10nSync(c,u,y,S);for(var t=0,n;n=a[t];t++)o(n.path,u[n.path])}return c.cloneNode(!0)}},h=function(){return c.cloneNode(!0)};if(i){var m=function(e){for(var t=0,n;n=a[t];t++)e(n.path,u[n.path])},g=function(e){var r=p(this.token);r?n.array.add(f,this):n.array.remove(f,this),u[this.path]=r?undefined:e==null?"{"+this.path+"}":e,o&&o(this.path,u[this.path]);for(var i in t)t[i].tmpl.set(this.path,r?this.token:e)};a=r.l10nKeys.map(function(e){var t=d(e),n={path:e,token:t,handler:g};return t.attach(g,n),p(t)?f.push(n):u[e]=t.value==null?"{"+e+"}":t.value,n})}return s=r.createInstanceFactory(this.templateId,h,L,u,f,C(r.keys),S),{createInstance:function(e,n,r,i,o){var u=l++,a={context:e,action:n,rebuild:r,handler:null,bindings:i,bindingInterface:o,attaches:null,compute:null,tmpl:null};return s(u,a,u?null:m),t[u]=a,a.tmpl},destroyInstance:function(e){var n=e.templateId_,r=t[n];if(r){r.handler&&r.bindingInterface.detach(r.context,r.handler,r.tmpl.set);if(r.compute){for(var i=0;i<r.compute.length;i++)r.compute[i].destroy();r.compute=null}for(var s in r.attaches)w.call(r,s,null);delete t[n]}},destroy:function(e){for(var n=0,i;i=a[n];n++)i.token.detach(i.handler,i);for(var s in t){var f=t[s];e&&f.rebuild&&f.rebuild.call(f.context);if(!e||s in t){f.handler&&f.bindingInterface.detach(f.context,f.handler,f.tmpl.set);for(var s in f.attaches)w.call(s,null)}}r=null,c=null,u=null,a=null,o=null,t=null}}}}(),A=b.subclass({className:f+".Template",__extend__:function(e){return e instanceof A?e:e instanceof g?new O(e):new A(e)},builder:L}),O=y.subclass({className:f+".TemplateSwitcher",templateClass:A});t.exports={Template:A,TemplateSwitcher:O}},"1k.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./r.js"),c=n.require("./l.js"),h=n.require("./5.js");t.exports=f.Node.subclass({template:n.template.get("#i"),satellite:{addButton:{instance:c.Button.subclass({caption:"Add",click:function(){var e={id:0,employee_id:this.owner.owner.data.id};this.owner.owner.data.compensatory_leaves.push(e),this.owner.owner.update({compensatory_leaves:this.owner.owner.data.compensatory_leaves}),this.owner.dataSource.setAndDestroyRemoved(this.owner.owner.data.compensatory_leaves.map(function(e){return new h.Object({data:e})}))}})}},binding:{addButton:"satellite:"},childClass:f.Node.subclass({template:n.template.get("#j"),binding:{id:"data.id"},init:function(){f.Node.prototype.init.call(this),this.setChildNodes([{value:this.data.date,name:"date"},{value:this.data.description,name:"description"},{value:this.data.value,name:"value"}])},childFactory:function(e){var t=this;return e.action={keyup:function(n){var r={};r[e.name]=n.sender.value,t.update(r)}},new f.Node({template:'<td class="input-container"></td>',childNodes:[new l.Text(e)]})}})})},"9.js":function(e,t,n,r,i,s,o,u,a){function E(e,t){e.bindingId=w++;for(var r in t){var i=null,s=t[r];B&&s instanceof B||n.resource.isResource(s)?i={events:"satelliteChanged",getter:function(e,t){var n=typeof t=="function"?t:null,r=function(i){r=!1;if(n){t=n();if(t instanceof B==0)return;n=null}i.setSatellite(e,t)};return function(t){return r&&r(t),n||(t.satellite[e]?t.satellite[e].element:null)}}(r,s)}:s&&(typeof s=="string"?s=S.process(r,s):s.bindingBridge&&(s=n.fn.$const(s)),typeof s!="object"?i={getter:typeof s=="function"?s:n.getter(s)}:Array.isArray(s)?i={events:s[0],getter:n.getter(s[1])}:i={events:s.events,getter:n.getter(s.getter)}),e[r]=i}}function A(){return L.pop()||l.createDocumentFragment()}function O(e){var t=e.nodes;if(t)for(var n=t.length-1,r;r=t[n];n--)r.parentNode.insertBefore(r,r.nextSibling)}var f=this.path,l=r.document,c=n.Class,h=n.require("./4.js").create,p=n.require("./a.js").Template,d=n.require("./d.js").MARKER,v=n.require("./e.js").TemplateSwitcher,m=n.require("./j.js"),g=m.Node,y=m.PartitionNode,b=m.GroupingNode,w=1,S=function(){var e={},t=/^([a-z_][a-z0-9_]*):(.*)/i;return{add:function(t,n){e[t]||(e[t]=n)},process:function(n,r){var i,s=r.match(t);return s&&(i=e[s[1]],r=s[2]||n),i?i(r):r}}}();S.add("data",function(e){return{events:"update",getter:"data."+e}}),S.add("satellite",function(e){return{events:"satelliteChanged",getter:function(t){return t.satellite[e]?t.satellite[e].element:null}}});var x=c.customExtendProperty({active:{events:"activeChanged",getter:function(e){return e.active}},state:{events:"stateChanged",getter:function(e){return String(e.state)}},childNodesState:{events:"childNodesStateChanged",getter:function(e){return String(e.childNodesState)}},childCount:{events:"childNodesModified",getter:function(e){return e.childNodes?e.childNodes.length:0}},hasChildren:{events:"childNodesModified",getter:function(e){return!!e.firstChild}},empty:{events:"childNodesModified",getter:function(e){return!e.firstChild}}},E),T={attach:function(e,t,n){e.addHandler(t,n)},detach:function(e,t,n){e.removeHandler(t,n)}},N=c.extensibleProperty({select:function(e){if(this.isDisabled())return;if(this.selectedRA_)return;this.contextSelection&&this.contextSelection.multiple?this.select(e.ctrlKey||e.metaKey):this.select()}}),C={"*":function(e){var t=this.templateSwitcher_;t&&t.ruleEvents&&t.ruleEvents[e.type]&&this.setTemplate(t.resolve(this))}},k=new p("<div/>"),L=[],M,_=function(e){return{template:k,emit_templateChanged:h("templateChanged"),templateSwitcher_:null,binding:x,action:N,tmpl:null,element:null,childNodesElement:null,init:function(){this.element=this.childNodesElement=A(),e.init.call(this)},postInit:function(){e.postInit.call(this);var t=this.template;if(t){var n=this.childNodesElement;this.template=null,this.setTemplate(t),L.push(n),this.container&&(this.container.appendChild(this.element),this.container=null)}},templateSync:function(){var e=this.element,t=this.template.createInstance(this,this.templateAction,this.templateSync,this.binding,T),n;t.childNodesHere&&(t.childNodesElement=t.childNodesHere.parentNode,t.childNodesElement.insertPoint=t.childNodesHere),this.tmpl=t,this.element=t.element,this.childNodesElement=t.childNodesElement||t.element,n=this.childNodesElement.nodeType!=1,n&&(this.childNodesElement=l.createDocumentFragment());if(this.grouping){this.grouping.syncDomRefs();var r=this;while(r.grouping)r=r.grouping;var i=r;for(var s=i.lastChild;s;s=s.previousSibling)s instanceof P?i.insertBefore(s,s.nextSibling):O(s);O(i.nullGroup)}else for(var o=this.lastChild;o;o=o.previousSibling)this.insertBefore(o,o.nextSibling);this instanceof P&&O(this);if(e&&e!==this.element&&e.nodeType!=11){var u=e&&e.parentNode;u&&(this.owner&&this.owner.tmpl&&this.owner.tmpl.set(e,this.element),this.element.parentNode!==u&&u.replaceChild(this.element,e))}this.emit_templateChanged()},setTemplate:function(e){var t=this.templateSwitcher_,n;e instanceof v&&(n=e,e=n.resolve(this)),e instanceof p==0&&(e=null);if(!e)return;n&&(this.templateSwitcher_=n,t||this.addHandler(C,this)),t&&t.resolve(this)!==e&&(this.templateSwitcher_=null,this.removeHandler(C,this));var r=this.tmpl,i=this.template;i!==e&&(this.template=e,this.templateSync(),i&&i.clearInstance(r))},updateBind:function(e){var t=this.binding[e],n=t&&t.getter;n&&this.tmpl&&this.tmpl.set(e,n(this))},templateAction:function(e,t){var n=this.action[e];n&&n.call(this,t)},focus:function(e){var t=this.tmpl?this.tmpl.focus||this.element:null;t&&(M&&(M=n.clearImmediate(M)),M=n.setImmediate(function(){try{t.focus(),e&&t.select()}catch(n){}}))},blur:function(){var e=this.tmpl?this.tmpl.focus||this.element:null;if(e)try{e.blur()}catch(t){}},destroy:function(){var t=this.template,n=this.element;this.templateSwitcher_&&(this.templateSwitcher_=null,this.removeHandler(C,this)),t.clearInstance(this.tmpl),e.destroy.call(this),this.tmpl=null,this.element=null,this.childNodesElement=null;var r=n&&n.parentNode;r&&r.nodeType==1&&r.removeChild(n)}}},D=function(e){return{insertBefore:function(t,n){t=e.insertBefore.call(this,t,n);var r=t.groupNode||this,i=r.childNodesElement||this.childNodesElement,s=t.nextSibling,o=s&&s.element.parentNode==i?s.element:null,u=t.element,a=o||i.insertPoint||null;return(u.parentNode!==i||u.nextSibling!==a)&&i.insertBefore(u,a),t},removeChild:function(t){e.removeChild.call(this,t);var n=t.element,r=n.parentNode;return r&&r.removeChild(n),t},clear:function(t){if(t){var n=this.firstChild;while(n){var r=n.element,i=r.parentNode;i&&i.removeChild(r),n=n.nextSibling}}e.clear.call(this,t)},setChildNodes:function(t,n){var r=l.createDocumentFragment(),i=this.grouping||this,s=i.childNodesElement;i.childNodesElement=r,e.setChildNodes.call(this,t,n),s.insertBefore(r,s.insertPoint||null),i.childNodesElement=s}}},P=c(y,_,{className:f+".PartitionNode",binding:{title:"data:"}}),H=c(b,D,{className:f+".GroupingNode",childClass:P,groupingClass:c.SELF,element:null,childNodesElement:null,emit_ownerChanged:function(e){this.syncDomRefs(),b.prototype.emit_ownerChanged.call(this,e)},init:function(){this.element=this.childNodesElement=l.createDocumentFragment(),b.prototype.init.call(this)},syncDomRefs:function(){var e=this,t=this.owner,n=null;t&&(n=t.tmpl&&t.tmpl.groupsElement||t.childNodesElement);do e.element=e.childNodesElement=n;while(e=e.grouping)},destroy:function(){b.prototype.destroy.call(this),this.element=null,this.childNodesElement=null}}),B=c(g,_,D,{className:f+".Node",binding:{selected:{events:"select unselect",getter:function(e){return e.selected}},unselected:{events:"select unselect",getter:function(e){return!e.selected}},disabled:{events:"disable enable",getter:function(e){return e.isDisabled()}},enabled:{events:"disable enable",getter:function(e){return!e.isDisabled()}},tabindex:{events:"enable disable",getter:function(e){return e.isDisabled()?-1:e.tabindex||0}}},childClass:c.SELF,childFactory:function(e){return new this.childClass(e)},groupingClass:H}),j=B.subclass({className:f+".ShadowNodeList",emit_ownerChanged:function(e){B.prototype.emit_ownerChanged.call(this,e),this.setDataSource(this.owner&&this.owner.getChildNodesDataset())},getChildNodesElement:function(e){return e.childNodesElement},listen:{owner:{templateChanged:function(){this.childNodes.forEach(function(e){this.appendChild(e.element)},this.getChildNodesElement(this.owner)||this.owner.element)}}},childClass:{className:f+".ShadowNode",getElement:function(e){return e.element},templateSync:function(){B.prototype.templateSync.call(this);var e=this.getElement(this.delegate);e&&(e[d]=this.delegate.element[d],this.element=e)},listen:{delegate:{templateChanged:function(){var e=this.element,t=e.parentNode,n=this.getElement(this.delegate);n&&(n[d]=this.delegate.element[d]),this.element=n||this.tmpl.element,t&&t.replaceChild(this.element,e)}}}}});t.exports={BINDING_PRESET:S,Node:B,PartitionNode:P,GroupingNode:H,ShadowNodeList:j,ShadowNode:j.prototype.childClass}},"x.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./k.js"),c=n.require("./l.js"),h=n.require("./6.js"),p=n.require("./4.js"),d=n.require("./w.js"),v=n.require("./10.js"),m=n.require("./11.js");t.exports=f.Node.subclass({container:l.get("toolbox"),template:n.template.get("#3"),satellite:{calendar:{delegate:function(e){return e.delegate},instance:m,existsIf:function(e){return e.data.isCalendarShown}},teamsList:{instance:v,delegate:function(e){return e.delegate}}},binding:{calendar:"satellite:calendar",date:function(e){return e.data.month+" "+e.data.year},isCalendarShown:"data:",buttonPrevMonth:new c.Button({caption:"<<",template:n.template.get("#4"),click:function(){var e=d().year(parseInt(this.owner.data.year)).month(this.owner.data.month);e.subtract(1,"month"),this.owner.emit_monthChange(e)}}),buttonNextMonth:new c.Button({caption:">>",template:n.template.get("#4"),click:function(){var e=d().year(parseInt(this.owner.data.year)).month(this.owner.data.month);e.add(1,"month"),this.owner.emit_monthChange(e)}}),buttonPublicHolidays:new c.Button({caption:"Public holidays",click:function(){this.owner.action.navigateToPublicHolidays(this.owner.data)}}),buttonAdmin:new c.Button({caption:"Admin area",click:function(){this.owner.action.navigateToAdmin(this.owner.data)}}),buttonReports:new c.Button({caption:"Reports",click:function(){h.navigate("reports")}}),teamsList:"satellite:teamsList"},action:{navigateToAdmin:function(){h.navigate("admin")},navigateToTeam:function(e){h.navigate("team/"+e.team+"/"+e.month+"/"+e.year+"/"+e.mode)},navigateToPublicHolidays:function(e){h.navigate("public-holidays/"+e.month+"/"+e.year)},showCalendar:function(){this.update({isCalendarShown:!0})},hideCalendar:function(){this.update({isCalendarShown:!1})}},emit_teamChange:p.create("teamChange","team"),emit_monthChange:p.create("monthChange","date"),handler:{teamChange:function(e,t){this.data.team=t,this.action.navigateToTeam(this.data)},monthChange:function(e,t){var n=d(t);this.data.month=n.format("MMMM"),this.data.year=n.format("YYYY"),location.hash.match(/public-holidays/)?this.action.navigateToPublicHolidays(this.data):this.action.navigateToTeam(this.data),this.updateBind("date"),this.update({isCalendarShown:!1})},update:function(){this.updateBind("date")}}})},"1l.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./l.js"),c=n.require("./r.js"),h=n.require("./5.js");t.exports=f.Node.subclass({template:n.template.get("#k"),satellite:{addButton:{instance:l.Button.subclass({caption:"Add",click:function(){var e={id:0,employee_id:this.owner.owner.data.id};this.owner.owner.data.maternity_leaves.push(e),this.owner.owner.update({maternity_leaves:this.owner.owner.data.maternity_leaves}),this.owner.dataSource.setAndDestroyRemoved(this.owner.owner.data.maternity_leaves.map(function(e){return new h.Object({data:e})}))}})}},binding:{addButton:"satellite:"},childClass:f.Node.subclass({template:n.template.get("#l"),binding:{id:"data.id"},init:function(){f.Node.prototype.init.call(this),this.setChildNodes([{value:this.data.date_start,name:"date_start"},{value:this.data.date_end,name:"date_end"}])},childFactory:function(e){var t=this;return e.action={keyup:function(n){var r={};r[e.name]=n.sender.value,t.update(r)}},new f.Node({template:'<td class="input-container"></td>',childNodes:[new c.Text(e)]})}})})},"8.js":function(e,t,n,r,i,s,o,u,a){function B(e,t){var n={},r;e&&e.length&&(r=n.inserted=e),t&&t.length&&(r=n.deleted=t);if(r)return n}function j(e,t){return function n(t){return t?t.__extend__?t:(typeof t!="string"&&!Array.isArray(t)&&(t=null),c(T(t,e),{__extend__:n})):null}(t)}function F(e,t,n,r){return new O(c({keyGetter:t,itemClass:n,create:function(e,t){var n=O.prototype.create.call(this,e,t);return n.ruleValue=e,n.setDataset(new r({ruleValue:e})),n}},e))}function G(e,t){if(!e.length)return 0;var n=t.value,r=t.object.basisObjectId,i,s,o,u,a=0,f=e.length-1;do{o=a+f>>1,u=e[o],i=u.value;if(n<i)f=o-1;else if(n>i)a=o+1;else{s=u.object.basisObjectId;if(r<s)f=o-1;else{if(!(r>s))return o;a=o+1}}}while(a<=f);return o+(i==n?s<r:i<n)}function Z(e,t){return+(e.value>t.value)||-(e.value<t.value)||e.object.basisObjectId-t.object.basisObjectId}function at(e,t,n){var r=e.sourceMap_[t.basisObjectId];if(r&&r.visited!==n){for(var i=r;i=i.ref;)if(i.object===e.source)return!0;r.visited=n;for(var i=r;i=i.ref;)if(at(e,i.object,n||{}))return!0}}function ft(e,t,n){var r=e.sourceMap_,i=e.members_,s=E(t),o=[];for(var u=0;u<s.length;u++){var a=s[u],f=a.basisObjectId;f||(n=a.ref,a=a.object,f=a.basisObjectId);var l=r[f];if(l)l.ref={object:n,ref:l.ref};else{l=r[f]={source:a,ref:{object:n,ref:null},visited:null,value:null};if(a instanceof A){var c=e.rule(a)||null;if(c instanceof A||c instanceof M)l.value=c,s.push({object:c,ref:a});i[f]=l,o.push(a),e.ruleEvents&&a.addHandler(e.ruleEvents,e)}else{a.addHandler(ut,e);for(var h=0,p=a.getItems();h<p.length;h++)s.push({object:p[h],ref:a})}}}return o}function lt(e,t,n){var r=e.sourceMap_,i=e.members_,s=E(t),o=[];for(var u=0;u<s.length;u++){var a=s[u],f=a.basisObjectId;f||(n=a.ref,a=a.object,f=a.basisObjectId);var l=r[f],c=l.value;for(var h=l,p=l;h=h.ref;){if(h.object===n){p.ref=h.ref;break}p=h}if(!l.ref){if(a instanceof A)delete i[f],o.push(a),e.ruleEvents&&a.removeHandler(e.ruleEvents,e),c&&s.push({object:c,ref:a});else{a.removeHandler(ut,e);for(var d=0,v=a.getItems();d<v.length;d++)s.push({object:v[d],ref:a})}delete r[f]}else c&&!at(e,a)&&(l.value=null,s.push({object:c,ref:a}))}return o}var f=this.path,l=n.Class,c=n.object.extend,h=n.object.values,p=n.object.slice,d=n.array.add,v=n.array.remove,m=n.getter,g=n.fn.$self,y=n.fn.$true,b=n.fn.$false,w=n.fn.$undef,E=n.array.from,S=n.require("./4.js"),x=S.create,T=S.createHandler,N=S.Emitter,C=n.require("./5.js"),k=C.SUBSCRIPTION,L=C.Value,A=C.Object,O=C.KeyObjectMap,M=C.ReadOnlyDataset,_=C.Dataset,D=C.DatasetWrapper,P=C.resolveDataset,H=_.setAccumulateState;k.add("SOURCE",{sourceChanged:function(e,t){t&&k.unlink("source",e,t),e.source&&k.link("source",e,e.source)},sourcesChanged:function(e,t){var n;if(n=t.inserted)for(var r=0,i;i=n[r];r++)k.link("source",e,n[r]);if(n=t.deleted)for(var r=0,i;i=n[r];r++)k.unlink("source",e,n[r])}},function(e,t){var n=t.sources||(t.source?[t.source]:[]);for(var r=0,i;i=n[r++];)e("source",t,i)}),k.addProperty("minuend"),k.addProperty("subtrahend");var I={itemsChanged:function(e,t){var n=this.members_,r={},i,s;if(t.inserted)for(var o=0;i=t.inserted[o];o++)s=i.basisObjectId,n[s]?n[s].count++:n[s]={count:1,object:i},r[s]=n[s];if(t.deleted)for(var o=0;i=t.deleted[o];o++)s=i.basisObjectId,r[s]=n[s],n[s].count--;this.applyRule(r)}},q=l(M,{className:f+".Merge",active:n.PROXY,subscribeTo:k.SOURCE,emit_sourcesChanged:x("sourcesChanged","delta"),sources:null,sourceValues_:null,sourcesMap_:null,sourceDelta_:null,rule:function(e){return e>0},emit_ruleChanged:x("ruleChanged","oldRule"),listen:{source:I,sourceValue:{destroy:function(e){this.removeSource(e)}}},init:function(){M.prototype.init.call(this);var e=this.sources;this.sources=[],this.sourcesMap_={},this.sourceValues_=[],e&&this.setSources(e)},setRule:function(e){e=m(e||q.UNION);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(e){var t=this.members_,n=this.rule,r=this.sources.length,i=[],s=[],o,u,a;e||(e=t);for(var f in e)o=t[f],u=r&&o.count&&n(o.count,r),u!=f in this.items_&&(u?i.push(o.object):s.push(o.object)),o.count==0&&delete t[f];return(a=B(i,s))&&this.emit_itemsChanged(a),a},addDataset_:function(e){this.sources.push(e),this.listen.source&&e.addHandler(this.listen.source,this);var t=this.members_;for(var n in e.items_)t[n]?t[n].count++:t[n]={count:1,object:e.items_[n]};return!0},removeDataset_:function(e){v(this.sources,e),this.listen.source&&e.removeHandler(this.listen.source,this);var t=this.members_;for(var n in e.items_)t[n].count--},updateDataset_:function(e){var t=this.owner,n=t.sourcesMap_,r=P(this,t.updateDataset_,e,"adapter",t),i,s,o;if(this.dataset===r)return;if(r){var u=(n[r.basisObjectId]||0)+1;n[r.basisObjectId]=u,u==1&&(t.addDataset_(r),i=[r])}if(this.dataset){var u=(n[this.dataset.basisObjectId]||0)-1;n[this.dataset.basisObjectId]=u,u==0&&(t.removeDataset_(this.dataset),s=[this.dataset])}this.dataset=r,t.applyRule();if(o=B(i,s)){var a=t.sourceDelta_;a?(o.inserted&&o.inserted.forEach(function(e){v(this.deleted,e)||d(this.inserted,e)},a),o.deleted&&o.deleted.forEach(function(e){v(this.inserted,e)||d(this.deleted,e)},a)):t.emit_sourcesChanged(o)}return o},getSourceValues:function(){return this.sourceValues_.map(function(e){return e.source})},addSource:function(e){if(!e||typeof e!="object"&&typeof e!="function")return;if(this.hasSource(e))return;var t={owner:this,source:e,adapter:null,dataset:null};this.sourceValues_.push(t),this.updateDataset_.call(t,e),this.listen.sourceValue&&e instanceof N&&e.addHandler(this.listen.sourceValue,this)},removeSource:function(e){for(var t=0,n;n=this.sourceValues_[t];t++)if(n.source===e){this.listen.sourceValue&&e instanceof N&&e.removeHandler(this.listen.sourceValue,this),this.updateDataset_.call(n,null),this.sourceValues_.splice(t,1);return}},hasSource:function(e){for(var t=0,n;n=this.sourceValues_[t];t++)if(n.source===e)return!0;return!1},setSources:function(e){var t=this.sourceValues_.map(function(e){return e.source}),n=[],r=[],i;e||(e=[]),this.sourceDelta_={inserted:n,deleted:r};for(var s=0;s<e.length;s++){var o=e[s];v(t,o)||this.addSource(o)}return t.forEach(this.removeSource,this),this.sourceDelta_=null,(i=B(n,r))&&this.emit_sourcesChanged(i),i},destroy:function(){this.setSources(),M.prototype.destroy.call(this),this.sourceValues_=null,this.sourcesMap_=null,this.sourceDelta_=null,this.sources=null}});q.UNION=q.prototype.rule,q.INTERSECTION=function(e,t){return e==t},q.DIFFERENCE=function(e){return e==1},q.MORE_THAN_ONE_INCLUDE=function(e,t){return t==1||e>1},q.AT_LEAST_ONE_EXCLUDE=function(e,t){return t==1||e<t};var R=function(e){return!this.has(e)},U={itemsChanged:function(e,t){if(!this.subtrahend)return;var n=B(t.inserted&&t.inserted.filter(R,this.subtrahend),t.deleted&&t.deleted.filter(this.has,this));n&&this.emit_itemsChanged(n)},destroy:function(){this.minuendRA_||this.setMinuend(null)}},z={itemsChanged:function(e,t){if(!this.minuend)return;var n=B(t.deleted&&t.deleted.filter(this.minuend.has,this.minuend),t.inserted&&t.inserted.filter(this.has,this));n&&this.emit_itemsChanged(n)},destroy:function(){this.subtrahendRA_||this.setSubtrahend(null)}},W=l(M,{className:f+".Subtract",active:n.PROXY,subscribeTo:k.MINUEND+k.SUBTRAHEND,minuend:null,minuendRA_:null,emit_minuendChanged:x("minuendChanged","oldMinuend"),subtrahend:null,subtrahendRA_:null,emit_subtrahendChanged:x("subtrahendChanged","oldSubtrahend"),listen:{minuend:U,subtrahend:z},init:function(){M.prototype.init.call(this);var e=this.minuend,t=this.subtrahend;this.minuend=null,this.subtrahend=null,(e||t)&&this.setOperands(e,t)},setOperands:function(e,t){var n,r=!1;e=P(this,this.setMinuend,e,"minuendRA_"),t=P(this,this.setSubtrahend,t,"subtrahendRA_");var i=this.minuend,s=this.subtrahend;if(i!==e){r=!0,this.minuend=e;var o=this.listen.minuend;o&&(i&&i.removeHandler(o,this),e&&e.addHandler(o,this)),this.emit_minuendChanged(i)}if(s!==t){r=!0,this.subtrahend=t;var o=this.listen.subtrahend;o&&(s&&s.removeHandler(o,this),t&&t.addHandler(o,this)),this.emit_subtrahendChanged(s)}if(!r)return!1;if(!e||!t)this.itemCount&&this.emit_itemsChanged(n={deleted:this.getItems()});else{var u=[],a=[];for(var f in this.items_)(!e.items_[f]||t.items_[f])&&u.push(this.items_[f]);for(var f in e.items_)!this.items_[f]&&!t.items_[f]&&a.push(e.items_[f]);(n=B(a,u))&&this.emit_itemsChanged(n)}return n},setMinuend:function(e){return this.setOperands(e,this.subtrahendRA_?this.subtrahendRA_.source:this.subtrahend)},setSubtrahend:function(e){return this.setOperands(this.minuendRA_?this.minuendRA_.source:this.minuend,e)},destroy:function(){this.setOperands(),M.prototype.destroy.call(this)}}),X=l(M,{className:f+".SourceDataset",active:n.PROXY,subscribeTo:k.SOURCE,source:null,emit_sourceChanged:x("sourceChanged","oldSource"),sourceRA_:null,sourceMap_:null,listen:{source:{destroy:function(){this.sourceRA_||this.setSource()}}},init:function(){var e=this.source;this.source=null,this.sourceMap_={},M.prototype.init.call(this),e&&this.setSource(e)},setSource:function(e){e=P(this,this.setSource,e,"sourceRA_");if(this.source!==e){var t=this.source,n=this.listen.source,r;n&&(r=n.itemsChanged,t&&t.removeHandler(n,this),e&&e.addHandler(n,this)),this.source=e,this.emit_sourceChanged(t),r&&(_.setAccumulateState(!0),t&&r.call(this,t,{deleted:t.getItems()}),e&&r.call(this,e,{inserted:e.getItems()}),_.setAccumulateState(!1))}},destroy:function(){this.setSource(),M.prototype.destroy.call(this),this.sourceMap_=null}}),V=function(e){var t=this.map?this.map(e):e;if(t instanceof A==0||this.filter(t))t=null;var n=this.sourceMap_[e.basisObjectId],r=n.member;if(r!==t){var i=this.members_,s,o,u;n.member=t;if(r){var a=r.basisObjectId;this.removeMemberRef&&this.removeMemberRef(r,e),--i[a]==0&&(delete i[a],u=[r])}if(t){var f=t.basisObjectId;this.addMemberRef&&this.addMemberRef(t,e),i[f]?i[f]++:(i[f]=1,o=[t])}(s=B(o,u))&&this.emit_itemsChanged(s)}},$={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.members_,i=[],s=[],o,u,a,f=this.ruleEvents;H(!0);if(t.inserted)for(var l=0;o=t.inserted[l];l++){a=this.map?this.map(o):o;if(a instanceof A==0||this.filter(a))a=null;f&&o.addHandler(f,this),n[o.basisObjectId]={sourceObject:o,member:a};if(a){var c=a.basisObjectId;r[c]?r[c]++:(r[c]=1,i.push(a)),this.addMemberRef&&this.addMemberRef(a,o)}}if(t.deleted)for(var l=0;o=t.deleted[l];l++){u=o.basisObjectId,a=n[u].member,f&&o.removeHandler(f,this),delete n[u];if(a){var c=a.basisObjectId;--r[c]==0&&(delete r[c],s.push(a)),this.removeMemberRef&&this.removeMemberRef(a,o)}}H(!1),(t=B(i,s))&&this.emit_itemsChanged(t)}},J=l(X,{className:f+".MapFilter",map:g,filter:b,rule:m(y),emit_ruleChanged:x("ruleChanged","oldRule"),ruleEvents:j(V,"update"),addMemberRef:null,removeMemberRef:null,listen:{source:$},setMap:function(e){typeof e!="function"&&(e=g);if(this.map!==e)return this.map=e,this.applyRule()},setFilter:function(e){typeof e!="function"&&(e=b);if(this.filter!==e)return this.filter=e,this.applyRule()},setRule:function(e){e=m(e||y);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e=this.sourceMap_,t=this.members_,n,r,i,s,o,u,a=[],f=[],l;for(var c in e){u=e[c],o=u.sourceObject,n=u.member,r=this.map?this.map(o):o;if(r instanceof A==0||this.filter(r))r=null;n!=r&&(u.member=r,n&&(i=n.basisObjectId,this.removeMemberRef&&this.removeMemberRef(n,o),t[i]--),r&&(s=r.basisObjectId,this.addMemberRef&&this.addMemberRef(r,o),s in t?t[s]++:(t[s]=1,a.push(r))))}for(i in this.items_)t[i]==0&&(delete t[i],f.push(this.items_[i]));return(l=B(a,f))&&this.emit_itemsChanged(l),l}}),K=l(J,{className:f+".Filter",filter:function(e){return!this.rule(e)}}),Q=l(J,{className:f+".Split",subsetClass:M,subsetWrapperClass:D,keyMap:null,map:function(e){return this.keyMap.resolve(e)},rule:m(w),setRule:function(e){e=m(e||w);if(this.rule!==e){var t=this.rule;return this.rule=e,this.keyMap.keyGetter=e,this.emit_ruleChanged(t),this.applyRule()}},addMemberRef:function(e,t){e.dataset.emit_itemsChanged({inserted:[t]})},removeMemberRef:function(e,t){e.dataset.emit_itemsChanged({deleted:[t]})},init:function(){if(!this.keyMap||this.keyMap instanceof O==0)this.keyMap=F(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass);J.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){J.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}}),Y=function(e){var t=this.sourceMap_[e.basisObjectId],n=this.rule(e),r=this.index_;if(n!==t.value){var i=G(r,t),s=r[i-1],o=r[i+1];t.value=n;if(s&&(s.value>n||s.value==n&&s.object.basisObjectId>t.object.basisObjectId)||o&&(o.value<n||o.value==n&&o.object.basisObjectId<t.object.basisObjectId))r.splice(i,1),r.splice(G(r,t),0,t),this.applyRule()}},et={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.index_,i=this.ruleEvents,s=!1,o=!1,u,a=t.inserted,f=t.deleted;if(f){f.length>r.length-f.length&&(s=!0,o=f.length!=r.length,r.length=0);for(var l=0,c;c=f[l];l++)s||(u=n[c.basisObjectId],r.splice(G(r,u),1)),delete n[c.basisObjectId],i&&c.removeHandler(i,this);if(o)for(var h in n)u=n[h],r.splice(G(r,u),0,u)}if(a){o=!r.length;for(var l=0,c;c=a[l];l++)u={object:c,value:this.rule(c)},n[c.basisObjectId]=u,o?r.push(u):r.splice(G(r,u),0,u),i&&c.addHandler(i,this);o&&r.sort(Z)}this.applyRule()}},tt=l(X,{className:f+".Slice",rule:m(y),emit_ruleChanged:x("ruleChanged","oldRule","oldOrderDesc"),ruleEvents:j(Y,"update"),index_:null,left_:null,right_:null,orderDesc:!1,offset:0,limit:10,listen:{source:et},emit_rangeChanged:x("rangeChanged","oldOffset","oldLimit"),init:function(){this.index_=[],X.prototype.init.call(this)},setRange:function(e,t){var n=this.offset,r=this.limit,i=!1;if(n!=e||r!=t)this.offset=e,this.limit=t,i=this.applyRule(),this.emit_rangeChanged(n,r);return i},setOffset:function(e){return this.setRange(e,this.limit)},setLimit:function(e){return this.setRange(this.offset,e)},setRule:function(e,t){e=m(e||y),t=!!t;if(this.rule!=e||this.orderDesc!=t){var n=this.rule,r=this.orderDesc;if(this.rule!=e){var i=this.index_;for(var s=0;s<i.length;s++)i[s].value=e(i[s].object);i.sort(Z),this.rule=e}return this.orderDesc=t,this.rule=e,this.emit_ruleChanged(n,r),this.applyRule()}},applyRule:function(){var e=this.offset,t=e+this.limit;this.orderDesc&&(e=this.index_.length-t,t=e+this.limit);var n=p(this.members_),r=this.index_.slice(Math.max(0,e),Math.max(0,t)),i=[],s;for(var o=0,u;u=r[o];o++){var a=u.object.basisObjectId;n[a]?delete n[a]:(i.push(u.object),this.members_[a]=u.object)}for(var a in n)delete this.members_[a];if(this.left_)for(var f in this.left_){var u=this.index_[this.orderDesc?t+Number(f)-1:e-Number(f)];this.left_[f].set(u?u.object:null)}if(this.right_)for(var f in this.right_){var u=this.index_[this.orderDesc?e-Number(f):t+Number(f)-1];this.right_[f].set(u?u.object:null)}return(s=B(i,h(n)))&&this.emit_itemsChanged(s),s},left:function(e){e=parseInt(e,10)||0,this.left_||(this.left_={});var t=this.left_[e];if(!t){var n=this.offset,r=n+this.limit;this.orderDesc&&(n=this.index_.length-r,r=n+this.limit);var i=this.index_[this.orderDesc?r+e-1:n-e];t=this.left_[e]=new L({value:i?i.object:null})}return t},right:function(e){e=parseInt(e,10)||0,this.right_||(this.right_={});var t=this.right_[e];if(!t){var n=this.offset,r=n+this.limit;this.orderDesc&&(n=this.index_.length-r,r=n+this.limit);var i=this.index_[this.orderDesc?n-e:r+e-1];t=this.right_[e]=new L({value:i?i.object:null})}return t},destroy:function(){X.prototype.destroy.call(this);if(this.left_){for(var e in this.left_)this.left_[e].destroy();this.left_=null}if(this.right_){for(var e in this.right_)this.right_[e].destroy();this.right_=null}this.index_=null}}),nt=function(e){var t=this.sourceMap_,n=this.members_,r=e.basisObjectId,i=t[r].list,s=t[r].list={},o=this.rule(e),u,a=[],f=[],l;if(Array.isArray(o))for(var c=0;c<o.length;c++)l=this.keyMap.get(o[c],!0),l&&!l.has(e)&&(h=l.basisObjectId,s[h]=l,i[h]||(l.dataset.emit_itemsChanged({inserted:[e]}),n[h]?n[h]++:(a.push(l),n[h]=1)));for(var h in i)if(!s[h]){var l=i[h];l.dataset.emit_itemsChanged({deleted:[e]}),--n[h]||(delete n[h],f.push(l))}(u=B(a,f))&&this.emit_itemsChanged(u)},rt={itemsChanged:function(e,t){var n=this.sourceMap_,r=this.members_,i=this.ruleEvents,s,o,u,a=[],f=[];H(!0);if(s=t.inserted)for(var l=0,c;c=s[l];l++){var h=this.rule(c),p={object:c,list:{}};n[c.basisObjectId]=p;if(Array.isArray(h))for(var d=0,v={};d<h.length;d++)o=this.keyMap.get(h[d],!0),o&&!v[o.basisObjectId]&&(u=o.basisObjectId,v[u]=!0,p.list[u]=o,o.dataset.emit_itemsChanged({inserted:[c]}),r[u]?r[u]++:(a.push(o),r[u]=1));i&&c.addHandler(i,this)}if(s=t.deleted)for(var l=0,c;c=s[l];l++){var m=c.basisObjectId,h=n[m].list;delete n[m];for(var u in h)o=h[u],o.dataset.emit_itemsChanged({deleted:[c]}),--r[u]||(delete r[u],f.push(o));i&&c.removeHandler(i,this)}H(!1),(t=B(a,f))&&this.emit_itemsChanged(t)}},it=l(X,{className:f+".Cloud",subsetClass:M,subsetWrapperClass:D,rule:m(w),ruleEvents:j(nt,"update"),keyMap:null,map:g,listen:{source:rt},init:function(){if(!this.keyMap||this.keyMap instanceof O==0)this.keyMap=F(this.keyMap,this.rule,this.subsetWrapperClass,this.subsetClass);X.prototype.init.call(this)},getSubset:function(e,t){return this.keyMap.get(e,t)},destroy:function(){X.prototype.destroy.call(this),this.keyMap.destroy(),this.keyMap=null}}),st=function(e){var t=this.sourceMap_[e.basisObjectId],n=this.rule(e)||null,r=t.value,i,s,o;if(n===r)return;if(n instanceof A||n instanceof M)i=ft(this,n,e);r&&(s=lt(this,r,e)),t.value=n,(o=B(i,s))&&this.emit_itemsChanged(o)},ot=function(e,t){var n=t.inserted,r=t.deleted,t;n&&(n=ft(this,n,e)),r&&(r=lt(this,r,e)),(t=B(n,r))&&this.emit_itemsChanged(t)},ut={itemsChanged:ot,destroy:function(e){var t=this.sourceMap_;for(var n=t[e.basisObjectId];n=n.ref;)t[n.object.basisObjectId].value=null;delete t[e.basisObjectId]}},ct=X.subclass({className:f+".Extract",rule:m(w),emit_ruleChanged:x("ruleChanged","oldRule"),ruleEvents:j(st,"update"),listen:{source:{itemsChanged:ot}},setRule:function(e){e=m(e||w);if(this.rule!==e){var t=this.rule;return this.rule=e,this.emit_ruleChanged(t),this.applyRule()}},applyRule:function(){var e={},t={},n;for(var r in this.sourceMap_){var i=this.sourceMap_[r],s=i.source;if(s instanceof A){var o=this.rule(s)||null,u=i.value;if(o===u)continue;if(o instanceof A||o instanceof M){var a=ft(this,o,s);for(var f=0;f<a.length;f++){var l=a[f],c=l.basisObjectId;t[c]?delete t[c]:e[c]=l}}if(u){var p=lt(this,u,s);for(var f=0;f<p.length;f++){var l=p[f],c=l.basisObjectId;e[c]?delete e[c]:t[c]=l}}i.value=o}}return(n=B(h(e),h(t)))&&this.emit_itemsChanged(n),n}});t.exports={getDelta:B,createRuleEvents:j,Merge:q,Subtract:W,SourceDataset:X,MapFilter:J,Filter:K,Split:Q,Extract:ct,Slice:tt,Cloud:it}},"7.js":function(e,t,n,r,i,s,o,u,a){function E(e){return w[e]||[e]}function x(e){return e instanceof S?e.event_:e||r.event}function T(e){return typeof e=="string"?l.getElementById(e):e}function N(e){var t=e.target||e.srcElement||l;return t.nodeType==3?t.parentNode:t}function C(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function k(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function L(e,t){t=T(t),t?J(t,e,L):(k(e),C(e))}function A(e){return e.keyCode||e.which||0}function O(e){return e.charCode||e.keyCode||0}function M(e,t){return typeof e.which=="number"?e.which==t.VALUE:!!(e.button&t.BIT)}function _(e){return e.changedTouches?e.changedTouches[0].pageX:"pageX"in e?e.pageX:"clientX"in e?e.clientX+(l.compatMode=="CSS1Compat"?l.documentElement.scrollLeft:l.body.scrollLeft):0}function D(e){return e.changedTouches?e.changedTouches[0].pageY:"pageY"in e?e.pageY:"clientY"in e?e.clientY+(l.compatMode=="CSS1Compat"?l.documentElement.scrollTop:l.body.scrollTop):0}function P(e){var t=0;return"deltaY"in e?t=-e.deltaY:"wheelDelta"in e?t=e.wheelDelta:e.type=="DOMMouseScroll"&&(t=-e.detail),t&&t/Math.abs(t)}function R(e){F&&e!==I&&(I=e,n.codeFrame.start())}function U(e){F&&e!==q&&(q=e,n.codeFrame.finish())}function z(e){var t=h(H[e.type]),n=B[e.type],r=new S(e);R(e);if(n)n.handler.call(n.thisObject,r);else if(t)for(var i=t.length;i-->0;){var s=t[i];s.handler.call(s.thisObject,r)}U(e)}function W(e,t,r){B[e]&&X(e),t||(t=n.fn.$undef),V(e,t,r),B[e]={handler:t,thisObject:r}}function X(e){var t=B[e];t&&($(e,t.handler,t.thisObject),delete B[e])}function V(e,t,n){var r=H[e];if(r){for(var i=0,s;s=r[i];i++)if(s.handler===t&&s.thisObject===n)return}else j?J(l,e,c):l.addEventListener(e,z,!0),r=H[e]=[];r.push({handler:t,thisObject:n})}function $(e,t,n){var r=H[e];if(r)for(var i=0,s;s=r[i];i++)if(s.handler===t&&s.thisObject===n){r.splice(i,1),r.length||(delete H[e],j?Q(l,e,c):l.removeEventListener(e,z,!0));return}}function J(e,t,n,i){e=T(e);if(!e)throw"basis.event.addHandler: can't attach event listener to undefined";if(typeof n!="function")throw"basis.event.addHandler: handler is not a function";var s=e===r?p:e[d];s||(s=e[d]={});var o=s[t],u={handler:n,thisObject:i};if(!o)o=s[t]=[u],o.fireEvent=function(e){e=x(e);if(j&&e&&H[t]&&typeof e.returnValue=="undefined"){z(e);if(e.cancelBubble===!0)return;typeof e.returnValue=="undefined"&&(e.returnValue=!0)}R(e);for(var n=0,r=new S(e),i;i=o[n++];)i.handler.call(i.thisObject,r);U(e)},v?e.addEventListener(t,o.fireEvent,!1):e.attachEvent("on"+t,o.fireEvent);else{for(var a=0,f;f=o[a];a++)if(f.handler===n&&f.thisObject===i)return;o.push(u)}}function K(e,t,n){e=T(e);for(var r in t)J(e,r,t[r],n)}function Q(e,t,n,i){e=T(e);var s=e===r?p:e[d];if(s){var o=s[t];if(o)for(var u=0,a;a=o[u];u++)if(a.handler===n&&a.thisObject===i){o.splice(u,1),o.length||G(e,t);return}}}function G(e,t){e=T(e);var n=e===r?p:e[d];if(n)if(typeof t!="string")for(t in n)G(e,t);else{var i=n[t];i&&(e.removeEventListener?e.removeEventListener(t,i.fireEvent,!1):e.detachEvent("on"+t,i.fireEvent),delete n[t])}}function Y(e,t,n){e=T(e);var i=e===r?p:e[d];if(i&&i[t])try{F=!1,i[t].fireEvent(n)}finally{F=!0}}function Z(e,t){n.teardown(e,t)}function tt(e,t){t||(t="div");var n=t+"-"+e;if(et[n])return et[n];var r=!1,i=!1;if(!v){var s="on"+e,o=l.createElement("div"),u=o.appendChild(l.createElement(t));o[s]=function(){i=!0};try{u.fireEvent(s),r=!0}catch(a){}}return et[n]={supported:r,bubble:i}}function nt(e){return function(t,n){return e(x(t),n)}}var f=this.path,l=r.document,c=n.fn.$null,h=n.array.from,p={},d="basisEvents_"+n.genUID(),v=!!l.addEventListener,m={BACKSPACE:8,TAB:9,CTRL_ENTER:10,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},g={VALUE:1,BIT:1},y={VALUE:2,BIT:4},b={VALUE:3,BIT:2},w={mousewheel:["wheel","mousewheel","DOMMouseScroll"]},S=n.Class(null,{className:f+".Event",KEY:m,init:function(e){e=x(e);for(var t in e)typeof e[t]!="function"&&t in this==0&&(this[t]=e[t]);var r=N(e);n.object.extend(this,{event_:e,sender:r,target:r,key:A(e),charCode:O(e),mouseLeft:M(e,g),mouseMiddle:M(e,y),mouseRight:M(e,b),mouseX:_(e),mouseY:D(e),wheelDelta:P(e)})},stopBubble:function(){C(this.event_)},stopPropagation:function(){C(this.event_)},preventDefault:function(){k(this.event_)},die:function(){this.stopBubble(),this.preventDefault()}}),H={},B={},j=!v,F=!0,I,q,et={};t.exports={W3CSUPPORT:v,browserEvents:E,getEventInfo:tt,KEY:m,MOUSE_LEFT:g,MOUSE_RIGHT:b,MOUSE_MIDDLE:y,Event:S,sender:nt(N),cancelBubble:nt(C),cancelDefault:nt(k),kill:nt(L),key:nt(A),charCode:nt(O),mouseButton:nt(M),mouseX:nt(_),mouseY:nt(D),wheelDelta:nt(P),addGlobalHandler:V,removeGlobalHandler:$,captureEvent:W,releaseEvent:X,addHandler:J,addHandlers:K,removeHandler:Q,clearHandlers:G,fireEvent:Y,onUnload:Z,wrap:x}},"6.js":function(e,t,n,r,i,s,o,u,a){function x(e){function i(e){return t.substr(e).match(/^\w+/)}function s(e,o){var u="",a;for(var f=e;f<t.length;f++){var l=t.charAt(f);switch(l){case o:return{result:u,offset:f};case"\\":u+="\\"+t.charAt(++f);break;case"|":u+=o!=")"?"\\|":"|";break;case"(":(a=s(f+1,")"))?(f=a.offset,u+="(?:"+a.result+")?"):u+="\\(";break;case":":(a=i(f+1))?(f+=a[0].length,u+="([^/]+)",r.push(a[0])):u+=":";break;case"*":(a=i(f+1))?(f+=a[0].length,u+="(.*?)",r.push(a[0])):u+="\\*";break;default:u+=n.string.forRegExp(l)}}return o?null:u}var t=String(e||""),r=[],o=new RegExp("^"+s(0)+"$","i");return o.params=r,o}function T(){d?h.addHandler(r,"hashchange",L):E=setInterval(L,v)}function N(){d?h.removeHandler(r,"hashchange",L):clearInterval(E)}function C(){b||(T(),b=!0,L())}function k(){b&&(N(),b=!1)}function L(){var e=l.hash.substr(1)||"";if(e!=w){var t=[],n=[];w=e;for(var r in g){var i=g[r],s=e.match(i.regexp);s?(y[r]||t.push(i),s=m(s,1),y[r]=s):y[r]&&(n.push(i),delete y[r],i.token.set(null))}for(var o=0,i;i=n[o];o++){var u=m(i.callbacks);for(var a=0,f;f=u[a];a++)f.callback.leave&&f.callback.leave.call(f.context)}for(var o=0,i;i=t[o];o++){var u=m(i.callbacks);for(var a=0,f;f=u[a];a++)f.callback.enter&&f.callback.enter.call(f.context)}for(var r in y){var i=g[r],c=y[r],u=m(i.callbacks);for(var o=0,f;f=u[o];o++)f.callback.match&&f.callback.match.apply(f.context,c);i.token.set(c)}}}function A(e,t){var n=e instanceof S?e:g[e];if(!n&&t){var r=Object.prototype.toString.call(e)=="[object RegExp]"?e:x(e);n=g[e]={id:e,callbacks:[],token:new S(r.params),regexp:r};if(typeof w=="string"){var i=w.match(n.regexp);i&&(i=m(i,1),y[e]=i,n.token.set(i))}}return n}function O(e,t,n){var r=A(e,!0),i;return i={cb_:t,context:n,callback:typeof t!="function"?t||{}:{match:t}},r.callbacks.push(i),r.id in y&&(i.callback.enter&&i.callback.enter.call(n),i.callback.match&&i.callback.match.apply(n,y[e])),r.token}function M(e,t,n){var r=A(e);if(r)for(var i=0,s;s=r.callbacks[i];i++)if(s.cb_===t&&s.context===n){var o=r.token;r.callbacks.splice(i,1),r.callbacks.length||(!o.handler||!o.handler.handler)&&!o.matched.handler&&(delete g[r.id],delete y[r.id]);break}}function _(e,t){t?l.replace(l.pathname+"#"+e):l.hash=e,b&&L()}var f=this.path,l=r.location,c=r.document,h=n.require("./7.js"),p=c.documentMode,d="onhashchange"in r&&(p===undefined||p>7),v=50,m=n.array.from,g={},y={},b=!1,w,E,S=n.Token.subclass({className:f+".Route",matched:null,params_:null,names_:null,init:function(e){n.Token.prototype.init.call(this,null),this.matched=this.as(Boolean),this.names_=Array.isArray(e)?e:[],this.params_={}},param:function(e){var t=typeof e=="number"?e:this.names_.indexOf(e);return t in this.params_==0&&(this.params_[t]=this.as(function(e){return e&&e[t]})),this.params_[t]},set:function(e){if(e){e=n.object.slice(e);for(var t in e)t in this.names_&&(e[this.names_[t]]=e[t])}n.Token.prototype.set.call(this,e)}});C(),t.exports={debug:!1,start:C,stop:k,checkUrl:L,navigate:_,add:O,remove:M,route:function(e){return A(e,!0).token}}},"1m.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./l.js"),c=n.require("./1.js"),h=n.require("./1h.js"),p=n.require("./1n.js"),d=n.require("./1o.js");t.exports=f.Node.subclass({name:"UserForm",template:n.template.get("#n"),satellite:{submitButton:{instance:l.Button.subclass({caption:"Save",click:function(){this.owner.submit()}})}},binding:{submitButton:"satellite:"},childFactory:function(e){return e.type=="checkbox"?new p(e):e.type=="password"?new d(e):new h(e)},childNodes:[{title:"Email",name:"email"},{title:"Name",name:"name"},{title:"Surname",name:"surname"},{title:"Is super",name:"is_super",type:"checkbox"},{title:"Is enabled",name:"is_enabled",type:"checkbox"},{title:"Password (Fill this field if you want to reset password for user)",name:"new_password",type:"password"}],submit:function(){var e=this;c.request({url:"/user/update",method:"POST",contentType:"application/json",body:JSON.stringify(e.data),handler:{success:function(){e.owner.delegate.setAndDestroyRemoved(),alert("User successfully updated")},failure:function(){alert("Update of user is failed")}}})}})},"1n.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./r.js");t.exports=l.Checkbox.subclass({autoDelegate:!0,handler:{update:function(){var e=this.delegate.data;e&&this.setValue(e[this.name])}},action:{change:function(e){if(this.delegate){var t={};t[this.name]=e.sender.checked,this.update(t)}}}})},"1o.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./r.js");t.exports=l.Password.subclass({autoDelegate:!0,action:{keyup:function(e){if(this.delegate){var t={};t[this.name]=e.sender.value,this.delegate.update(t)}}}})},"5.js":function(e,t,n,r,i,s,o,u,a){function O(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function M(e){var t=A[e];if(!t){var n=[],r={},i=1;t=A[e]={actions:n,handler:r};while(e){if(e&1){var s=C[i];n.push(s.action);for(var o in s.handler)r[o]=r[o]?O(r[o],s.handler[o]):s.handler[o]}i<<=1,e>>=1}}return t}function _(e,t){var n=M(t);for(var r=0,i;i=n.actions[r];r++)i(L.link,e);e.addHandler(n.handler)}function D(e,t){var n=M(t);for(var r=0,i;i=n.actions[r++];)i(L.unlink,e);e.removeHandler(n.handler)}function Q(e){return e.factory=S,e.deferred=G,e.compute=Y,e.pipe=et,e.as=Z,e}function G(){var e=this;return Q(function(t){return t=e(t),t?t.deferred():t})}function Y(e,t){var n=this;return Q(function(r){var i=n(r);return i?i.compute(e,t)(r):i})}function Z(e){var t=this;return Q(function(n){return n=t(n),n?n.as(e):n})}function et(e,t){var n=this;return Q(function(r){return r=n(r),r?r.pipe(e,t):r})}function nt(e,t){while(t&&t!==e&&t!==t.delegate)t=t.delegate;return t===e}function rt(e,t,n){var r=e.delegate;r&&(e.root=r.root,e.target=r.target,e.data=r.data,e.state=r.state);if(e.root!==t){var i=e.listen.root;i&&(t&&t!==e&&t.removeHandler(i,e),e.root&&e.root!==e&&e.root.addHandler(i,e)),e.emit_rootChanged(t)}if(e.target!==n){var s=e.listen.target;s&&(n&&n!==e&&n.removeHandler(s,e),e.target&&e.target!==e&&e.target.addHandler(s,e)),e.emit_targetChanged(n)}var o=e.delegates_;while(o)o.delegate&&rt(o.delegate,t,n),o=o.next}function at(e,t){var n={},r;e&&e.length&&(r=n.inserted=e),t&&t.length&&(r=n.deleted=t);if(r)return n}function ft(e,t){if(!e||!e.itemCount){if(t&&t.itemCount)return{inserted:t.getItems()}}else{if(!!t&&!!t.itemCount){var n=[],r=[];for(var i in e.items_){var s=e.items_[i];s.basisObjectId in t.items_==0&&r.push(s)}for(var i in t.items_){var s=t.items_[i];s.basisObjectId in e.items_==0&&n.push(s)}return at(n,r)}if(e.itemCount)return{deleted:e.getItems()}}}function pt(){this.fn.call(this.context,this.source)}function wt(e,t,n,r,i){var s=e[r]||null,o=null;t!==pt&&typeof n=="function"&&(n=n.call(i||e,i||e));if(n){var u=o=s&&s.source===n?s:null;n instanceof lt?(o=u||new dt(e,t,n,bt),n=n.dataset):n.bindingBridge&&(o=u||new vt(e,t,n,mt),n=wt(o,pt,n.value,"next"))}n instanceof ct==0&&(n=null);if(r&&s!==o){var a=s;while(a){var u=a;u.detach(),a=u.next,u.next=null}o&&o.attach(gt),e[r]=o}return n}function Et(e){return function t(n,r,i,s,o){var u=n[s]||null,a=null;r!==pt&&typeof i=="function"&&(i=i.call(o||n,o||n)),i&&i.bindingBridge&&(!u||u.source!==i?a=new vt(n,r,i,mt):a=u,i=t(a,pt,i.bindingBridge.get(i),"next")),i instanceof e==0&&(i=null);if(s&&u!==a){var f=u;while(f){var l=f;l.detach(),f=l.next,l.next=null}a&&a.attach(gt),n[s]=a}return i}}function xt(e,t,r,i,s){var o=e[i]||null,u=null;r&&t!==pt&&n.fn.isFactory(r)&&(r=r.call(s||e,s||e)),r&&r.bindingBridge&&(!o||o.source!==r?u=new vt(e,t,r,mt):u=o,r=xt(u,pt,r.bindingBridge.get(r),"next"));if(i&&o!==u){var a=o;while(a){var f=a;f.detach(),a=f.next,f.next=null}u&&u.attach(yt),e[i]=u}return r}function Tt(e){return Array.isArray(e)?e.map(function(e){return{data:e}}):{data:e}}function Nt(e){if(!e||e.constructor!==Object)e={value:e};return new it({data:e})}function Ct(e,t){var n=t?Nt:Tt;return Array.isArray(e)?e.map(n):n(e)}var f=this.path,l=n.Class,c=Array.prototype.slice,h=Object.prototype.hasOwnProperty,p=n.object.values,d=n.fn.$self,v=n.require("./4.js"),m=v.Emitter,g=v.create,y=v.createHandler,b=v.events,w={},E=[],S=n.FACTORY,x=n.PROXY,T={},N={priority:[],values:{},add:function(e,t){var n=e,r=e.toLowerCase();N[n]=r,T[r]=n,this.values[r]=n,t?t=this.priority.indexOf(t):t=-1,t==-1?this.priority.push(r):this.priority.splice(t,0,r)},getList:function(){return p(T)},factory:function(e,t){return U.stateFactory(e,t)},from:function(e){return U.state(e)}};N.add("READY"),N.add("DEPRECATED"),N.add("UNDEFINED"),N.add("ERROR"),N.add("PROCESSING");var C={},k=1,L={NONE:0,ALL:0,link:function(e,t,n){var r=e+t.basisObjectId,i=n.subscribers_;i||(i=n.subscribers_={});if(!i[r]){i[r]=t;var s=n.subscriberCount+=1;s==1&&n.emit_subscribersChanged(1)}},unlink:function(e,t,n){var r=e+t.basisObjectId,i=n.subscribers_;if(i&&i[r]){delete i[r];var s=n.subscriberCount-=1;s==0&&(n.emit_subscribersChanged(-1),n.subscribers_=null)}},add:function(e,t,n){C[k]={handler:t,action:n},L[e]=k,L.ALL|=k,k<<=1},addProperty:function(e,t){var n={};n[t||e+"Changed"]=function(t,n){n instanceof P&&L.unlink(e,t,n),t[e]instanceof P&&L.link(e,t,t[e])},this.add(e.toUpperCase(),n,function(t,n){n[e]&&t(e,n,n[e])})}},A={};L.addProperty("delegate"),L.addProperty("target"),L.addProperty("dataset"),L.addProperty("value","change");var P=l(m,{className:f+".AbstractData",state:N.UNDEFINED,stateRA_:null,emit_stateChanged:g("stateChanged","oldState"),active:!1,activeRA_:null,emit_activeChanged:g("activeChanged"),subscribeTo:L.NONE,subscriberCount:0,subscribers_:null,emit_subscribersChanged:g("subscribersChanged","delta"),syncEvents:l.oneFunctionProperty(function(){this.isSyncRequired()&&this.syncAction()},{stateChanged:!0,subscribersChanged:!0}),syncAction:null,init:function(){m.prototype.init.call(this),this.active&&(this.active===x&&(this.active=U.from(this,"subscribersChanged","subscriberCount")),this.active=!!xt(this,this.setActive,this.active,"activeRA_"),this.active&&this.addHandler(M(this.subscribeTo).handler));if(this.state!=N.UNDEFINED){var e=this.state;typeof this.state!="string"&&(e=xt(this,this.setState,e,"stateRA_")),e&&!h.call(T,e)&&(e=!1),this.state=e||N.UNDEFINED}var t=this.syncAction;t&&(this.syncAction=null,this.setSyncAction(t))},setState:function(e,t){e=xt(this,this.setState,e,"stateRA_")||N.UNDEFINED;var n=String(e);if(!h.call(T,n))return!1;this.stateRA_&&t===undefined&&(t=e.data);if(this.state!=n||this.state.data!=t){var r=this.state;return this.state=Object(n),this.state.data=t,this.emit_stateChanged(r),!0}return!1},deprecate:function(){this.state!=N.PROCESSING&&this.setState(N.DEPRECATED)},setActive:function(e){return e===x&&(e=U.from(this,"subscribersChanged","subscriberCount")),e=!!xt(this,this.setActive,e,"activeRA_"),this.active!=e?(this.active=e,this.emit_activeChanged(),e?_(this,this.subscribeTo):D(this,this.subscribeTo),!0):!1},setSubscription:function(e){var t=this.subscribeTo,n=e&L.ALL,r=t^n;if(r){this.subscribeTo=n;if(this.active){var i=M(t),s=M(n);this.removeHandler(i.handler),this.addHandler(s.handler);var o=1;while(r){if(r&1){var u=C[o];t&o?u.action(L.unlink,this):u.action(L.link,this)}o<<=1,r>>=1}}return!0}return!1},isSyncRequired:function(){return this.subscriberCount>0&&(this.state==N.UNDEFINED||this.state==N.DEPRECATED)},setSyncAction:function(e){var t=this.syncAction;typeof e!="function"&&(e=null),this.syncAction=e,e?(t||this.addHandler(this.syncEvents),this.isSyncRequired()&&this.syncAction()):t&&this.removeHandler(this.syncEvents)},destroy:function(){m.prototype.destroy.call(this);if(this.active){var e=M(this.subscribeTo);for(var t=0,n;n=e.actions[t];t++)n(L.unlink,this)}this.activeRA_&&xt(this,!1,!1,"activeRA_"),this.stateRA_&&xt(this,!1,!1,"stateRA_"),this.state=N.UNDEFINED}}),H=n.getter.ID,B={destroy:function(e){this.value.unlink(e,this.fn)}},j={destroy:function(){this.set(null)}},F={},I={},q=function(e){U.prototype.set.call(this,e)},R=function(e,t){t instanceof m?t.removeHandler(this.pipeHandler,this):t=null,e instanceof m?e.addHandler(this.pipeHandler,this):e=null,e!==t&&U.prototype.set.call(this,e)},U=l(P,{className:f+".Value",subscribeTo:L.VALUE,emit_change:g("change","oldValue")&&function(e){b.change.call(this,e);var t=this;while(t=t.links_)t.fn.call(t.context,this.value,e)},value:null,initValue:null,proxy:null,locked:0,lockedValue_:null,links_:null,deferred_:null,pipes_:null,setNullOnEmitterDestroy:!0,bindingBridge:{attach:function(e,t,n,r){e.link(n,t,!0,r)},detach:function(e,t,n){e.unlink(n,t)},get:function(e){return e.value}},init:function(){P.prototype.init.call(this),this.proxy&&(this.value=this.proxy(this.value)),this.setNullOnEmitterDestroy&&this.value instanceof m&&this.value.addHandler(j,this),this.initValue=this.value},set:function(e){var t=this.value,n=this.proxy?this.proxy(e):e,r=n!==t;return r&&(this.setNullOnEmitterDestroy&&(t instanceof m&&t.removeHandler(j,this),n instanceof m&&n.addHandler(j,this)),this.value=n,this.locked||this.emit_change(t)),r},reset:function(){this.set(this.initValue)},isLocked:function(){return this.locked>0},lock:function(){this.locked++,this.locked==1&&(this.lockedValue_=this.value)},unlock:function(){if(this.locked){this.locked--;if(!this.locked){var e=this.lockedValue_;this.lockedValue_=null,this.value!==e&&this.emit_change(e)}}},compute:function(e,t){t||(t=e,e=null),t||(t=d);var n=this,r=y(e,function(e){U.prototype.set.call(this,t(e,n.value))}),i=t[H]||String(t),s=r.events.concat(i,this.basisObjectId).join("_"),o=F[s];if(!o){var u={};r.destroy=function(e){delete u[e.basisObjectId],this.destroy()},this.addHandler({change:function(){for(var e in u){var n=u[e];U.prototype.set.call(n.value,t(n.object,this.value))}},destroy:function(){for(var e in u){var t=u[e];t.object.removeHandler(r,t.value),t.value.destroy()}u=null,n=null}}),o=F[s]=Q(function(e){var i=e.basisObjectId,s=u[i],o=t(e,n.value);if(!s){var a=new z({value:o});e.addHandler(r,a),s=u[i]={value:a,object:e}}else U.prototype.set.call(s.value,o);return s.value})}return o},pipe:function(e,t){var r=y(e,K),i=t[H]||String(t),s=r.events.join("_")+"_"+i,o=this.pipes_,u;return o?u=o[s]:o=this.pipes_={},u||(u=new $({source:this,pipeId:s,pipeHandler:r}),u.proxy=n.getter(t),this.value instanceof m&&(u.value=u.proxy(this.value),this.value.addHandler(r,u)),o[s]=u,this.link(u,R,!0,u.destroy)),u},as:function(e){if(!e||e===d)return this;if(this.links_){var t=this,n=e[H]||String(e);while(t=t.links_){var r=t.context;if(r instanceof z&&r.proxy&&(r.proxy[H]||String(r.proxy))==n)return r}}var i=new z({proxy:e,value:this.value});return this.link(i,q,!0,i.destroy),i},deferred:function(){return this.deferred_||(this.deferred_=new V({source:this,value:this.value})),this.deferred_},link:function(e,t,n,r){if(typeof t!="function"){var i=String(t);t=I[i],t||(t=I[i]=function(e){this[i]=e})}return this.links_={value:this,context:e,fn:t,destroy:r||null,links_:this.links_},e instanceof m&&e.addHandler(B,this.links_),n||t.call(e,this.value),e},unlink:function(e,t){var r=this,i;while(i=r,r=r.links_)r.context===e&&(!t||r.fn===t)&&(r.fn=n.fn.$undef,i.links_=r.links_,r.context instanceof m&&r.context.removeHandler(B,r))},destroy:function(){P.prototype.destroy.call(this),this.setNullOnEmitterDestroy&&this.value instanceof m&&this.value.removeHandler(j,this);var e=this.links_;this.links_=null;while(e)e.context instanceof m&&e.context.removeHandler(B,e),e.destroy&&e.destroy.call(e.context),e=e.links_;this.proxy=null,this.initValue=null,this.value=null,this.lockedValue_=null,this.deferred_=null,this.pipes_=null}}),z=l(U,{className:f+".ReadOnlyValue",set:n.fn.$false}),W={change:function(e){this.isLocked()||(this.lock(),X.add(this)),U.prototype.set.call(this,e.value)},destroy:function(){this.destroy()}},X=n.asap.schedule(function(e){e.unlock()}),V=l(z,{className:f+".DeferredValue",setNullOnEmitterDestroy:!1,source:null,init:function(){U.prototype.init.call(this),this.source.addHandler(W,this)},deferred:function(){return this},destroy:function(){X.remove(this),this.source=null,U.prototype.destroy.call(this)}}),$=l(z,{className:f+".PipeValue",source:null,pipeId:null,pipeHandler:null,destroy:function(){var e=this.source,t=e.value;t instanceof m&&t.removeHandler(this.pipeHandler,this),e.pipes_[this.pipeId]=null,this.source=null,this.pipeHandler=null,U.prototype.destroy.call(this)}}),J={},K=function(e){U.prototype.set.call(this,e)};U.from=function(e,t,r){var i;if(!e)return null;if(e instanceof m){r||(r=t,t=null),r||(r=d);var s=y(t,K),o=r[H]||String(r),u=s.events.concat(o,e.basisObjectId).join("_");i=J[u],i||(i=J[u]=new z({proxy:n.getter(r),value:e,handler:{destroy:function(){J[u]=null,e.removeHandler(s,this)}}}),s.destroy=function(){J[u]=null,this.destroy()},e.addHandler(s,i))}if(!i){var u=e.basisObjectId,a=e.bindingBridge;u&&a&&(i=J[u],i||(i=J[u]=new z({value:a.get(e),handler:{destroy:function(){J[u]=null,a.detach(e,U.prototype.set,i)}}}),a.attach(e,U.prototype.set,i,i.destroy)))}if(!i)throw"Bad object type";return i},U.factory=function(e,t){return Q(function(n){return U.from(n,e,t)})},U.state=function(e){return e instanceof P?U.from(e,"stateChanged","state"):N.UNDEFINED},U.stateFactory=function(e,t){return U.factory(e,t).pipe("stateChanged","state").as(function(e){return e||N.UNDEFINED})};var tt={},it=l(P,{className:f+".Object",subscribeTo:L.DELEGATE+L.TARGET,data:null,emit_update:g("update","delta")&&function(e){var t=this.delegates_;b.update.call(this,e);while(t)t.delegate&&t.delegate.emit_update(e),t=t.next},emit_stateChanged:function(e){var t=this.delegates_;P.prototype.emit_stateChanged.call(this,e);while(t)t.delegate&&(t.delegate.state=this.state,t.delegate.emit_stateChanged(e)),t=t.next},delegate:null,delegateRA_:null,delegates_:null,emit_delegateChanged:g("delegateChanged","oldDelegate"),target:null,emit_targetChanged:g("targetChanged","oldTarget"),root:null,emit_rootChanged:g("rootChanged","oldRoot"),init:function(){this.root=this,P.prototype.init.call(this);var e=this.delegate,t=this.data;e?(this.delegate=null,this.target=null,this.data=tt,this.setDelegate(e),this.data===tt&&(this.data=t||{})):(t||(this.data={}),this.target!==null&&(this.target=this))},setDelegate:function(e){e=St(this,this.setDelegate,e,"delegateRA_");if(e&&e instanceof it){if(e.delegate&&nt(this,e))return!1}else e=null;if(this.delegate!==e){var t=this.state,n=this.data,r=this.delegate,i=this.target,s=this.root,o=this.listen.delegate,u=!1,a;if(r){o&&r.removeHandler(o,this);var f=r.delegates_,l=r;while(f){if(f.delegate===this){f.delegate=null,l===r?r.delegates_=f.next:l.next=f.next;break}l=f,f=f.next}}if(e){this.delegate=e,o&&e.addHandler(o,this),e.delegates_={delegate:this,next:e.delegates_};if(this.data!==tt){a={};for(var c in e.data)c in n==0&&(u=!0,a[c]=undefined);for(var c in n)n[c]!==e.data[c]&&(u=!0,a[c]=n[c])}}else{this.delegate=null,this.target=null,this.root=this,this.data={};for(var c in n)this.data[c]=n[c]}return rt(this,s,i),u&&this.emit_update(a),a&&t!==this.state&&(String(t)!=this.state||t.data!==this.state.data)&&this.emit_stateChanged(t),this.emit_delegateChanged(r),!0}return!1},setState:function(e,t){return this.delegate?this.root.setState(e,t):P.prototype.setState.call(this,e,t)},update:function(e){if(this.delegate)return this.root.update(e);if(e){var t={},n=!1;for(var r in e)this.data[r]!==e[r]&&(n=!0,t[r]=this.data[r],this.data[r]=e[r]);if(n)return this.emit_update(t),t}return!1},destroy:function(){P.prototype.destroy.call(this);var e=this.delegates_;this.delegates_=null;while(e)e.delegate.setDelegate(),e=e.next;this.delegate&&this.setDelegate(),this.delegateRA_&&St(this,!1,!1,"delegateRA_"),this.data=w,this.root=null,this.target=null}}),st=l(it,{className:f+".Slot"}),ot={destroy:function(){delete this.map[this.id]}},ut=l(P,{className:f+".KeyObjectMap",itemClass:it,keyGetter:n.getter(d),autoDestroyMembers:!0,map_:null,extendConstructor_:!0,init:function(){this.map_={},P.prototype.init.call(this)},resolve:function(e){return this.get(this.keyGetter(e),e)},create:function(e){var t;return e instanceof it?t={delegate:e}:t={data:{id:e,title:e}},new this.itemClass(t)},get:function(e,t){var n=e instanceof it?e.basisObjectId:e,r=this.map_[n];!r&&t&&(r=this.map_[n]={map:this.map_,id:n,item:this.create(e,t)},r.item.addHandler(ot,r));if(r)return r.item},destroy:function(){P.prototype.destroy.call(this);var e=this.map_;this.map_=null;for(var t in e){var n=e[t];this.autoDestroyMembers?n.item.destroy():n.item.removeHandler(ot,n)}}}),lt=l(it,{className:f+".DatasetWrapper",active:n.PROXY,subscribeTo:it.prototype.subscribeTo+L.DATASET,listen:{dataset:{itemsChanged:function(e,t){this.itemCount=e.itemCount,this.emit_itemsChanged(t)},destroy:function(){this.setDataset()}}},dataset:null,datasetRA_:null,emit_datasetChanged:g("datasetChanged","oldDataset"),emit_itemsChanged:g("itemsChanged","delta"),init:function(){it.prototype.init.call(this);var e=this.dataset;e&&(this.dataset=null,this.setDataset(e))},setDataset:function(e){e=wt(this,this.setDataset,e,"datasetRA_");if(this.dataset!==e){var t=this.listen.dataset,n=this.dataset,r;t&&(n&&n.removeHandler(t,this),e&&e.addHandler(t,this)),this.itemCount=e?e.itemCount:0,this.dataset=e,(r=ft(n,e))&&this.emit_itemsChanged(r),this.emit_datasetChanged(n)}},has:function(e){return this.dataset?this.dataset.has(e):null},getItems:function(){return this.dataset?this.dataset.getItems():[]},getValues:function(e){return this.dataset?this.dataset.getValues(e):[]},pick:function(){return this.dataset?this.dataset.pick():null},top:function(e){return this.dataset?this.dataset.top(e):[]},forEach:function(e){if(this.dataset)return this.dataset.forEach(e)},destroy:function(){(this.dataset||this.datasetRA_)&&this.setDataset(),it.prototype.destroy.call(this)}}),ct=l(P,{className:f+".ReadOnlyDataset",itemCount:0,items_:null,members_:null,cache_:null,emit_itemsChanged:g("itemsChanged","delta")&&function(e){var t,n=0,r=0,i;if(t=e.inserted)while(i=t[n])this.items_[i.basisObjectId]=i,n++;if(t=e.deleted)while(i=t[r])delete this.items_[i.basisObjectId],r++;this.itemCount+=n-r,this.cache_=n==this.itemCount?e.inserted:null,b.itemsChanged.call(this,e)},init:function(){P.prototype.init.call(this),this.members_={},this.items_={}},has:function(e){return!!e&&!!this.items_[e.basisObjectId]},getItems:function(){return this.cache_||(this.cache_=p(this.items_)),this.cache_},getValues:function(e){return this.getItems().map(n.getter(e||d))},pick:function(){for(var e in this.items_)return this.items_[e];return null},top:function(e){var t=[];if(e)for(var n in this.items_)if(t.push(this.items_[n])>=e)break;return t},forEach:function(e){var t=this.getItems();for(var n=0;n<t.length;n++)e(t[n])},destroy:function(){P.prototype.destroy.call(this),this.cache_=E,this.itemCount=0,this.members_=null,this.items_=null}}),ht=l(ct,{className:f+".Dataset",listen:{item:{destroy:function(e){this.remove([e])}}},init:function(){ct.prototype.init.call(this);var e=this.items;e&&(this.items=null,this.set(e))},add:function(e){var t=this.members_,n=this.listen.item,r=[],i;e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var o=e[s];if(o instanceof it){var u=o.basisObjectId;t[u]||(t[u]=o,n&&o.addHandler(n,this),r.push(o))}}return r.length&&this.emit_itemsChanged(i={inserted:r}),i},remove:function(e){var t=this.members_,n=this.listen.item,r=[],i;e&&!Array.isArray(e)&&(e=[e]);for(var s=0;s<e.length;s++){var o=e[s];if(o instanceof it){var u=o.basisObjectId;t[u]&&(n&&o.removeHandler(n,this),delete t[u],r.push(o))}}return r.length&&this.emit_itemsChanged(i={deleted:r}),i},set:function(e){if(!this.itemCount)return this.add(e);if(!e||!e.length)return this.clear();var t=this.members_,n=this.listen.item,r={},i=[],s=[],o,u,a;for(var f=0;f<e.length;f++)o=e[f],o instanceof it&&(u=o.basisObjectId,r[u]=o,t[u]||(t[u]=o,n&&o.addHandler(n,this),s.push(o)));for(var u in t)r[u]||(o=t[u],n&&o.removeHandler(n,this),delete t[u],i.push(o));return(a=at(s,i))&&this.emit_itemsChanged(a),a},sync:function(e){return this.setAndDestroyRemoved(e)},setAndDestroyRemoved:function(e){var t=this.set(e)||{},n=t.deleted;ht.setAccumulateState(!0);if(n)for(var r=0,i;i=n[r];r++)i.destroy();return ht.setAccumulateState(!1),t.inserted},clear:function(){var e=this.getItems(),t=this.listen.item,n;if(e.length){if(t)for(var r=0;r<e.length;r++)e[r].removeHandler(t,this);this.emit_itemsChanged(n={deleted:e}),this.members_={}}return n},destroy:function(){this.clear(),ct.prototype.destroy.call(this)}}),dt=function(e,t,n,r){this.context=e,this.fn=t,this.source=n,this.handler=r};dt.prototype={context:null,fn:null,source:null,handler:null,next:null,attach:function(){this.source.addHandler(this.handler,this)},detach:function(){this.source.removeHandler(this.handler,this)}};var vt=function(){dt.apply(this,arguments)};vt.prototype=new dt,vt.prototype.attach=function(e){this.source.bindingBridge.attach(this.source,this.handler,this,e)},vt.prototype.detach=function(){this.source.bindingBridge.detach(this.source,this.handler,this)};var mt=function(){this.fn.call(this.context,this.source)},gt=function(){this.fn.call(this.context,null)},yt=function(){this.fn.call(this.context,xt(w,null,this.source.bindingBridge.get(this.source)))},bt={datasetChanged:mt,destroy:gt},St=Et(it);ht.setAccumulateState=function(){function o(e){var t=e.dataset;s.call(t,e)}function u(){var e=t;t={};for(var n in e){var r=e[n];r&&o(r)}}function a(e){var n=this,r=n.basisObjectId,i=e.inserted,u=e.deleted,a=t[r];if(i&&u||a&&a.mixed){a&&(t[r]=null,o(a)),s.call(n,e);return}if(a){var f=i?"inserted":"deleted",l=a[f];if(!l){var h=i?"deleted":"inserted",p=a[h],d={},v=i||u,m=[],g=0;for(var y=0;y<p.length;y++)d[p[y].basisObjectId]=y;for(var y=0;y<v.length;y++){var b=v[y].basisObjectId;b in d==0?m.push(v[y]):(g||(p=c.call(p)),g++,p[d[b]]=null)}g&&(g<p.length?p=p.filter(Boolean):p=null,a[h]=p),m.length?(a[f]=m,p&&(a.mixed=!0)):(m=null,p||(t[r]=null))}else l.push.apply(l,i||u);return}t[r]={inserted:i,deleted:u,dataset:n,mixed:!1}}function f(){i=null,r&&(r=0,l())}function l(){e.emit_itemsChanged=s,u()}var e=ct.prototype,t={},r=0,i,s;return function(t){t?(r==0&&(s=e.emit_itemsChanged,e.emit_itemsChanged=a,i||(i=n.setImmediate(f))),r++):(r-=r>0,r==0&&l())}}(),t.exports={STATE:N,SUBSCRIPTION:L,AbstractData:P,Value:U,ReadOnlyValue:z,DeferredValue:V,PipeValue:$,Object:it,Slot:st,KeyObjectMap:ut,ReadOnlyDataset:ct,Dataset:ht,DatasetWrapper:lt,isConnected:nt,getDatasetDelta:ft,ResolveAdapter:dt,createResolveFunction:Et,resolveDataset:wt,resolveObject:St,resolveValue:xt,wrapData:Tt,wrapObject:Nt,wrap:Ct}},"4.js":function(e,t,n,r,i,s,o,u,a){function d(e){var t=h[e];return t||(t=function(){var t=this,n,r;while(t=t.handler){r=t.callbacks[e];if(typeof r=="function"){if(!n){n=[this];for(var i=0;i<arguments.length;i++)n.push(arguments[i])}r.apply(t.context||this,n)}r=t.callbacks["*"];if(typeof r=="function"){if(!n){n=[this];for(var i=0;i<arguments.length;i++)n.push(arguments[i])}r.call(t.context||this,{sender:this,type:e,args:n})}}},h[e]=t),t}function v(e,t){var n={events:[]};if(e){e=String(e).trim().split(/\s+|\s*,\s*/).sort(),n={events:e};for(var r=0,i;i=e[r];r++)i!="destroy"&&(n[i]=t)}return n}var f=this.path,l=n.Class,c={},h={},p=function(){},m=l(null,{className:f+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:d("destroy"),listen:l.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(e,t){t=t||this,this.handler={callbacks:e,context:t,handler:this.handler}},removeHandler:function(e,t){var n=this,r;t=t||this;while(r=n,n=n.handler)if(n.callbacks===e&&n.context===t){n.callbacks=c,r.handler=n.handler;return}},destroy:function(){this.destroy=p,this.emit_destroy(),this.handler=null}});t.exports={create:d,createHandler:v,events:h,Emitter:m}},"1p.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./1.js"),c=n.require("./w.js"),h=n.require("./16.js"),p=n.require("./1q.js");t.exports=h.subclass({name:"reportsPage",title:"Reports",init:function(){f.Node.prototype.init.call(this),this.setChildNodes([new p({delegate:this.delegate})]);var e=this;this.router.add("reports",{match:function(){e.select()}})}})},"1q.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./5.js");t.exports=f.Node.subclass({name:"Statistic",template:n.template.get("#p"),childClass:f.Node.subclass({template:'<tr><td>{team_code}</td><td>{name} {surname}</td><td class="aright">{otguls}</td></tr>',binding:{name:"data:",surname:"data:",team_code:"data:",otguls:"data:"}}),init:function(){f.Node.prototype.init.call(this);var e=new l.Dataset({items:l.wrap(this.data.employees,!0)}),t=e.getItems().map(function(e){var t=0;for(var n in e.data.days)e.data.days.hasOwnProperty(n)&&(e.data.days[n]==1&&t--,e.data.days[n]==8&&t++);for(n=0;n<e.data.compensatory_leaves.length;n++)t+=e.data.compensatory_leaves[n].value;return e.data.otguls=t,e});this.setChildNodes(t)}})},"3.js":function(e,t,n,r,i,s,o,u,a){function g(e){var t=p(e);return function(){t.apply(w,arguments),this.service&&t.apply(this.service,arguments),t.apply(this,arguments)}}function y(e){var t=p(e);return function(){var r=[this].concat(l(arguments));this.transport?this.transport["emit_"+e].apply(this.transport,r):t.apply(w,r),t.apply(this,arguments)}}var f=this.path,l=n.array.from,c=n.object.slice,h=n.require("./4.js"),p=h.create,d=h.Emitter,v=n.require("./5.js").Object,m=n.require("./5.js").STATE,b=[],w=new d({abort:function(){var e=l(b);for(var t=0;t<e.length;t++)e[t].abort();return e},handler:{start:function(e){n.array.add(b,e.transport)},complete:function(e){n.array.remove(b,e.transport)}}}),E=v.subclass({className:f+".AbstractRequest",requestData:null,transport:null,stateOnAbort:m.UNDEFINED,emit_start:y("start"),emit_timeout:y("timeout"),emit_abort:y("abort"),emit_success:y("success"),emit_failure:y("failure"),emit_complete:y("complete"),abort:n.fn.$undef,doRequest:n.fn.$undef,destroy:function(){v.prototype.destroy.call(this),this.requestData=null}}),S={start:function(e,t){n.array.add(this.inprogressRequests,t)},complete:function(e,t){n.array.remove(this.inprogressRequests,t)}},x={complete:function(){var e=this.requestQueue.shift();e&&n.nextTick(function(){e.doRequest()})}},T=d.subclass({className:f+".AbstractTransport",requestClass:E,stopped:!1,poolLimit:null,poolHashGetter:null,requests:null,requestQueue:null,inprogressRequests:null,stoppedRequests:null,emit_start:g("start"),emit_timeout:g("timeout"),emit_abort:g("abort"),emit_success:g("success"),emit_failure:g("failure"),emit_complete:g("complete"),init:function(){this.requests={},this.requestQueue=[],this.inprogressRequests=[],d.prototype.init.call(this),this.addHandler(S,this),this.poolLimit&&this.addHandler(x,this)},getRequestByHash:function(e){function t(e){for(var t in e.requests){var n=e.requests[t];if(n.isIdle()&&e.requestQueue.indexOf(n)==-1)return delete e.requests[t],n}}var n=this.poolHashGetter?this.poolHashGetter(e):e.origin?e.origin.basisObjectId:"default",r=this.requests[n];return r||(r=t(this)||new this.requestClass({transport:this}),this.requests[n]=r),r},prepare:n.fn.$true,prepareRequestData:n.fn.$self,request:function(e){if(!this.prepare())return;var t=this.prepareRequestData(c(e)),n=this.getRequestByHash(t);return n.requestData&&n.abort(),n.requestData=t,!this.poolLimit||this.inprogressRequests.length<this.poolLimit?n.doRequest():(this.requestQueue.push(n),n.setState(m.PROCESSING)),n},abort:function(){for(var e;e=this.requestQueue.pop();)e.setState(m.ERROR);for(var e;e=this.inprogressRequests.pop();)e.abort()},stop:function(){this.stopped||(this.stoppedRequests=this.inprogressRequests.concat(this.requestQueue),this.abort(),this.stopped=!0)},resume:function(){if(this.stopped){for(var e;e=this.stoppedRequests.pop();)this.request(e.requestData);this.stopped=!1}},destroy:function(){for(var e in this.requests)this.requests[e].destroy();this.requests=null,this.inprogressRequests=null,this.requestQueue=null,this.stoppedRequests=null,d.prototype.destroy.call(this)}});t.exports={createTransportEvent:g,createRequestEvent:y,transportDispatcher:w,AbstractRequest:E,AbstractTransport:T}},"1r.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./1.js"),c=n.require("./16.js"),h=n.require("./1s.js");t.exports=c.subclass({name:"profilePage",title:"Profile",init:function(){f.Node.prototype.init.call(this);var e=this;e.setChildNodes([new h({data:e.data.user})]),this.router.add("profile",{match:function(){e.select()}})}})},"1s.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./9.js"),l=n.require("./q.js"),c=n.require("./l.js"),h=n.require("./r.js"),p=n.require("./1.js"),d=n.require("./1h.js"),v=n.require("./1o.js");t.exports=l.FormContent.subclass({name:"ProfileForm",template:n.template.get("#q"),satellite:{submitButton:{instance:c.Button.subclass({caption:"Save",click:function(){this.owner.submit()}})}},binding:{submitButton:"satellite:"},childFactory:function(e){return this.data.hasOwnProperty(e.name)&&(e.value=this.data[e.name]),e.type=="password"?new v(e):e.type=="label"?new h.Label(e):new d(e)},childNodes:[{title:"email",name:"email",type:"label"},{title:"Name",name:"name"},{title:"Surname",name:"surname"},{title:"Old password (leave next three fields blank if you do not want to change the password)",name:"old_password",type:"password"},{title:"New password",name:"new_password",type:"password"},{title:"Repeat new password",name:"new_password2",type:"password"}],onSubmit:function(e){if(e.new_password!=e.new_password2){alert("Password repeated incorrectly");return}p.request({url:"/profile/update",method:"POST",contentType:"application/json",body:JSON.stringify(e),handler:{success:function(){alert("Profile successfully updated"),e.new_password&&(alert("Password was changed. You have to relogin"),document.location="/logout")},failure:function(){alert("Update of profile is failed")}}})}})},"2.js":function(e,t,n,r,i,s,o,u,a){function S(e){var t=1e6,n=String(e).split(".");for(var r=0,i=0;r<4&&r<n.length;r++,t/=100)i+=n[r]*t;return i}function x(e){var t=e.toLowerCase();if(t in h)return h[t];var n=t.match(/^([a-z]+)(([\d\.]+)([+-=]?))?$/i);if(n){h[t]=!1;var r=n[1].toLowerCase(),i=S(n[3]),s=n[4]||"=",o=c[r];if(o)return h[t]=!i||s=="="&&o==i||s=="+"&&o>=i||s=="-"&&o<i}return!1}var f=r.navigator&&r.navigator.userAgent||"",l=r.opera,c={},h={},p="unknown",d="unknown",v={MSIE:["Internet Explorer","msie","ie"],Gecko:["Gecko","gecko"],Safari:["Safari","safari"],"iPhone OS":["iPhone","iphone"],AdobeAir:["AdobeAir","air"],AppleWebKit:["WebKit"],Chrome:["Chrome","chrome"],FireFox:["FireFox","firefox","ff"],Iceweasel:["FireFox","firefox","ff"],Shiretoko:["FireFox","firefox","ff"],Opera:["Opera","opera"]};for(var m in v){var g=m;if(m=="MSIE"&&l)continue;if(m=="Safari"&&/chrome/i.test(f))continue;if(m=="AppleWebKit"&&/iphone/i.test(f))continue;m=="MSIE"&&/Trident\/\d+/i.test(f)&&/rv:\d+/i.test(f)&&(g="rv");if(f.match(new RegExp(g+".(\\d+(\\.\\d+)*)","i"))){var y=v[m],b=l&&typeof l.version=="function"?l.version():RegExp.$1,w=S(b);p=y[0]+w,d=y[0]+" "+b;for(var E=0;E<y.length;E++)c[y[E].toLowerCase()]=w}}t.exports={prettyName:d,is:x,test:function(){return n.array(arguments).some(x)}}},"1t.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./o.js");t.exports=new f.EntityType({name:"TeamEntity",fields:{path:String,team_code:String,code:String,id:f.IntId,name:String,shifts:Object}})},"1u.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./o.js");t.exports=new f.EntityType({name:"EmployeeEntity",fields:{path:String,team_code:String,id:f.IntId,name:String,surname:String,work_start:String,work_end:String,days:Object,maternity_leaves:Object,compensatory_leaves:Object,team_id:String,position:String,shifts:Object}})},"1v.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./o.js");t.exports=new f.EntityType({name:"UserEntity",fields:{path:String,team_code:String,id:f.IntId,email:String,name:String,surname:String,team_id:String,is_super:Boolean,is_enabled:Boolean,new_password:String}})},"1.js":function(e,t,n,r,i,s,o,u,a){function D(e,t){var r={};if(L.test(t.method)){if(!c||t.body instanceof c==0)r["Content-Type"]=t.contentType+(t.encoding?";charset="+t.encoding:"")}else g.test("ie")&&(r["If-Modified-Since"]="Thu, 01 Jan 1970 00:00:00 GMT");return r=n.object.merge(r,t.headers),m(t.headers,function(e,t){e.trim().toLowerCase()=="content-type"?r["Content-Type"]=t:r[e]=t}),m(r,function(t,n){n!=null&&typeof n!="function"?e.setRequestHeader(t,n):delete r[t]}),r}function P(e,t){if(t.responseType&&t.asynchronous&&"responseType"in e)try{e.responseType=t.responseType}catch(n){}}function H(e){try{return n.json.parse(e)}catch(t){}}function B(e){var t=this.xhr,r,i,s;this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_);if(!t)return;typeof e!="number"&&(e=t.readyState);if(e==this.prevReadyState_)return;this.prevReadyState_=e,this.emit_readyStateChanged(e),e==N?(this.clearTimeout(),t.onreadystatechange=n.fn.$undef,s=t.status==0,!s&&!t.responseType&&(s=typeof t.responseText=="unknown"||!t.responseText&&!t.getAllResponseHeaders()),s?(this.emit_abort(),r=this.stateOnAbort):(this.processResponse(),this.isSuccessful()?(r=C.READY,this.emit_success(this.getResponseData())):(r=C.ERROR,i=this.getResponseError(),!i&&this.data.error&&(i=this.data.error),this.emit_failure(i))),this.emit_complete(this)):r=C.PROCESSING,this.setState(r,i)}var f=this.path,l=r.encodeURIComponent,c=r.FormData,h=r.XMLHttpRequest,p=n.object.extend,d=n.object.slice,v=n.object.merge,m=n.object.iterate,g=n.require("./2.js"),y=n.require("./3.js"),b=y.createTransportEvent,w=y.createRequestEvent,E=y.AbstractRequest,S=y.AbstractTransport,x=0,T=1,N=4,C=n.require("./5.js").STATE,k="HEAD GET POST PUT PATCH DELETE TRACE LINK UNLINK CONNECT".split(" "),L=/^(POST|PUT|PATCH|LINK|UNLINK)$/i,A=new RegExp("^("+k.join("|")+")\\s+","i"),O=/^application\/json/i,M="native",_=function(){if("XMLHttpRequest"in r)return function(){return new h};var e=r.ActiveXObject;if(e){var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var n=0;M=t[n];n++)try{if(new e(M))return function(){return new e(M)}}catch(i){}}throw new Error(M="XMLHttpRequest is not supported!")}(),j=E.subclass({className:f+".Request",requestStartTime:0,timeout:3e4,timer_:null,sendDelay:null,sendDelayTimer_:null,lastRequestUrl_:null,debug:!1,emit_readyStateChanged:w("readyStateChanged"),init:function(){E.prototype.init.call(this),this.xhr=_()},isIdle:function(){return this.xhr.readyState==N||this.xhr.readyState==x},isSuccessful:function(){var e=this.xhr.status;return e>=200&&e<300||e==304},processResponse:function(){this.update({contentType:this.xhr.getResponseHeader("content-type"),status:this.xhr.status})},getResponseData:function(){var e=this.xhr;if(!e.responseType)if(this.responseType=="json"||O.test(this.data.contentType))return H(e.responseText,this.lastRequestUrl_);return"response"in e?e.response:e.responseText},processErrorResponse:function(){return this.getResponseError()},getResponseError:function(){var e=this.xhr,t=this.responseType?e.response||e.statusText||"Error":e.responseText;return{code:"SERVER_ERROR",msg:t,response:this.getResponseData()}},prepare:n.fn.$true,prepareRequestData:function(e){var t=[],n=e.url;e=d(e);for(var r in e.params){var i=e.params[r];if(i==null||i.toString()==null)continue;t.push(l(r)+"="+l(i.toString()))}return t=t.join("&"),!e.body&&L.test(e.method)&&(e.body=t||"",t=""),e.routerParams&&(n=n.replace(/:([a-z\_\-][a-z0-9\_\-]+)/gi,function(t,n){return n in e.routerParams?e.routerParams[n]:t})),t&&(n+=(n.indexOf("?")==-1?"?":"&")+t),e.requestUrl=n,e},doRequest:function(){this.send(this.prepareRequestData(this.requestData))},send:function(e){this.update({contentType:"",status:""}),g.test("gecko1.8.1-")&&e.asynchronous&&(this.xhr=_()),this.emit_start();var t=this.xhr;this.prevReadyState_=-1,t.onreadystatechange=B.bind(this),e.asynchronous||B.call(this,x),t.open(e.method,e.requestUrl,e.asynchronous),this.lastRequestUrl_=e.requestUrl,P(t,e),this.responseType=e.responseType||"";var n=D(t,e);this.setTimeout(this.timeout);var r=null;if(L.test(e.method)){r=e.body,typeof r=="function"&&(r=r.call(e.bodyContext)),O.test(n["Content-Type"])&&typeof r!="string"&&(r=JSON.stringify(r));if(g.test("ie9-"))if(typeof r=="object"&&typeof r.documentElement!="undefined"&&typeof r.xml=="string")r=r.xml;else if(typeof r=="string")r=r.replace(/\r/g,"");else if(r==null||r=="")r="[No data]"}return this.sendDelay?(this.sendDelayTimer_&&(this.sendDelayTimer_=clearTimeout(this.sendDelayTimer_)),this.sendDelayTimer_=setTimeout(function(){this.sendDelayTimer_=null,this.xhr===t&&t.readyState==T&&t.send(r)}.bind(this),this.sendDelay)):t.send(r),!0},repeat:function(){this.requestData&&(this.abort(),this.doRequest())},abort:function(){this.isIdle()||(this.clearTimeout(),this.xhr.abort(),this.xhr.readyState!=N&&this.xhr.readyState!=x&&B.call(this,N))},setTimeout:function(e){if(!this.xhr.asynchronous)return;"ontimeout"in this.xhr?(this.xhr.timeout=e,this.xhr.ontimeout=this.timeoutAbort.bind(this)):this.timer_=setTimeout(this.timeoutAbort.bind(this),e)},clearTimeout:function(){this.timer_&&(this.timer_=clearTimeout(this.timer_))},timeoutAbort:function(){this.update({error:{code:"TIMEOUT_ERROR",message:"Timeout error"}}),this.emit_timeout(this),this.abort()},destroy:function(){this.abort(),this.xhr=null,E.prototype.destroy.call(this)}}),F=S.subclass({className:f+".Transport",requestClass:j,emit_readyStateChanged:b("readyStateChanged"),asynchronous:!0,method:"GET",contentType:"application/x-www-form-urlencoded",encoding:null,requestHeaders:n.Class.extensibleProperty(),responseType:"",params:null,routerParams:null,url:"",body:null,bodyContext:null,init:function(){S.prototype.init.call(this),"postBody"in this&&(this.body==null&&(this.body=this.postBody),this.postBody=null),this.params=d(this.params),this.routerParams=d(this.routerParams)},setParam:function(e,t){this.params[e]=t},setParams:function(e){this.clearParams();for(var t in e)this.setParam(t,e[t])},removeParam:function(e){delete this.params[e]},clearParams:function(){for(var e in this.params)delete this.params[e]},prepareRequestData:function(e){if(!e.url&&!this.url)throw new Error("URL is not defined");p(e,{headers:v(this.requestHeaders,e.headers),params:v(this.params,e.params),routerParams:v(this.routerParams,e.routerParams)}),"postBody"in e&&(this.body==null&&(e.body=e.postBody),e.postBody=null),n.object.complete(e,{asynchronous:this.asynchronous,url:this.url,method:this.method,contentType:this.contentType,encoding:this.encoding,body:this.body,bodyContext:this.bodyContext,responseType:this.responseType});var t=e.url.match(A);return t&&(e.method=t[1],e.url=e.url.substr(t[0].length)),e}});t.exports={Request:j,Transport:F,request:function(e,t,r){typeof e=="string"&&(e={url:e,asynchronous:!!t||!!r});var i=new F(e);i.addHandler({success:t&&function(e,n,r){t(r)},failure:r&&function(e,t,n){r(n)},complete:function(){n.nextTick(function(){i.destroy()})}});var s=i.request();if(!s.requestData.asynchronous)return s.getResponseData()}}},"0.js":function(e,t,n,r,i,s,o,u,a){var f=n.require("./w.js"),l=n.require("./1.js"),c=n.require("./6.js"),h=n.require("./5.js"),p=n.require("./8.js"),d=n.require("./x.js"),v=n.require("./12.js"),m=n.require("./14.js"),g=n.require("./15.js"),y=n.require("./18.js"),b=n.require("./1e.js"),w=n.require("./1p.js"),E=n.require("./1r.js"),S,x="/model",T=new h.Object({data:{month:f().format("MMMM"),year:f().format("YYYY"),mode:"days",team:"",teams:[],publicHolidays:{},dayTypes:{},employeesByTeams:undefined,employeesAndUsersByTeams:undefined,user:{}},setAndDestroyRemoved:function(e){var t=this;l.request({url:x,method:"GET",handler:{success:function(r,i,s){s.Team=n.require("./1t.js"),s.Employee=n.require("./1u.js"),s.User=n.require("./1v.js"),s.Team.all.setAndDestroyRemoved(s.teams),s.Employee.all.setAndDestroyRemoved(s.employees),s.User.all.setAndDestroyRemoved(s.users||[]),s.employeesByTeams=new p.Split({source:new p.Merge({sources:[s.Team.all,s.Employee.all]}),rule:function(e){return e.data.path}}),s.employeesAndUsersByTeams=new p.Split({source:new p.Merge({sources:[s.Team.all,s.Employee.all,s.User.all]}),rule:function(e){return e.data.path}}),t.update(s),!(e&&e.constructor&&e.call&&e.apply)||e()}}})}});new d({delegate:T}),new v({authCallback:function(e){T.update({user:e}),T.setAndDestroyRemoved(function(){c.start(),S=new m({delegate:T,router:c,childNodes:[g,y,b,w,E]})})}})}};(function n(r,i,s){function m(e){function t(e){return Math.round(e).toString(36)}var n=t(10+25*Math.random());e||(e=16);while(n.length<e)n+=t(new Date*Math.random());return n.substr(0,e)}function y(e,t){for(var n in t)e[n]=t[n];return e}function b(e,t){for(var n in t)n in e==0&&(e[n]=t[n]);return e}function w(e){var t=[];for(var n in e)t.push(n);return t}function E(e){var t=[];for(var n in e)t.push(e[n]);return t}function S(e,t){var n={};if(!t)return y(n,e);for(var r=0,i;i=t[r++];)i in e&&(n[i]=e[i]);return n}function x(e,t){var n={};if(!t)return y(n,e);for(var r=0,i;i=t[r++];)i in e&&(n[i]=e[i],delete e[i]);return n}function T(){var e={};for(var t=0;t<arguments.length;t++)y(e,arguments[t]);return e}function N(e,t,n){var r=[];for(var i in e)r.push(t.call(n,i,e[i]));return r}function C(e){return e==undefined}function k(e){return e!=undefined}function L(e){return e==null||e==undefined}function A(e){return e!=null&&e!=undefined}function O(e){return e===this}function M(e){return e!==this}function _(e){return e}function D(e){return function(){return e}}function P(){return!1}function H(){return!0}function B(){return null}function j(){}function q(e){return function(t){var n={};return n[e]=t,n}}function R(e,t){var n=0,r,i;return r=function(){return n++||(r.inited=!0,r.data=i=e.apply(t||this,arguments)),i}}function U(e,t,n){var r=0,i,s;return i=function(){return r++||(i.inited=!0,i.data=s=e.call(n||this)),t.apply(s,arguments),s}}function z(e,t){var n=0;return function(){if(!(n++))return e.apply(t||this,arguments)}}function W(e){typeof e!="function"&&(e=F(e));var t=function(t){return e(t)};return t.factory=d,t}function X(e){return typeof e=="function"&&e.factory===d}function V(e,t){var n="basisjsCallback"+m();return u[n]=t?e:function(){try{delete u[n]}catch(t){u[n]=undefined}e.apply(this,arguments)},n}function tt(){var e=s;if(!e)if(a)Z=c.basisjsFilename;else{var t=f.scripts;for(var n=0,r;r=t[n];n++){var i=r.hasAttribute("basis-config")?r.getAttribute("basis-config"):r.getAttribute("data-basis-config");r.removeAttribute("basis-config"),r.removeAttribute("data-basis-config");if(i!==null){Z=Y.normalize(r.src);try{e=Function("return{"+i+"}")()}catch(o){}break}}}return nt(e)}function nt(e){e=S(e),b(e,{implicitExt:a?!0:"warn"});var t=[],n=T(e.path,e.modules,{basis:Z});e.modules={};if(e.autoload){var r=String(e.autoload).match(/^((?:[^\/]*\/)*)([a-z$_][a-z0-9$_]*)((?:\.[a-z$_][a-z0-9$_]*)*)$/i);r&&(n[r[2]]={autoload:!0,filename:r[1]+r[2]+(r[3]||".js")}),delete e.autoload}for(var i in n){var s=n[i];typeof s=="string"&&(s={filename:s.replace(/\/$/,"/"+i+".js")});var o=s.filename,u=s.path;o&&!u&&(o=Y.resolve(o),u=o.substr(0,o.length-Y.extname(o).length),o="../"+Y.basename(o)),u=Y.resolve(u),!o&&u&&(o=Y.basename(u),u=Y.dirname(u)),Y.extname(o)||(o+=".js"),o=Y.resolve(u,o),e.modules[i]={path:u,filename:o},s.autoload&&(e.autoload=t,t.push(i))}return e}function ht(e){var t=lt[e.url];if(t)for(var n=0;n<t.length;n++)t[n](e.get(),e.url)}function gt(e,t,n){try{return new Function(t,'"use strict";\n'+n)}catch(r){$.error("Compilation error at "+e+("line"in r?":"+(r.line-1):"")+": "+r)}}function Tt(e){if(e in wt==0){var t=e.split("."),n=t.shift(),r=pt(n+":"+t.join("/")+".js").replace(/\/\.js$/,".js");wt[e]=r,Et[r]=e}return wt[e]}function Nt(e){var t=bt[e];return t||(t=bt[e]=new xt(e),t.namespaces_={},t.namespaces_[e]=t,et.noConflict||(u[e]=t)),t}function Ct(e){if(p.call(bt,e))return bt[e];e=e.split(".");var t=Nt(e[0]),n=t;for(var r=1;r<e.length;r++){var i=e[r],s=e.slice(0,r+1).join(".");if(!p.call(t.namespaces_,s)){var o=new xt(s);et.implicitExt&&(n[i]=o),t.namespaces_[s]=o}n=t.namespaces_[s]}return bt[e.join(".")]=n,n}function Lt(e,t){!/[^a-z0-9_\.]/i.test(e)&&Y.extname(e)!=".js"?e=Tt(e):e=pt(e,null,"basis.patch('{url}')"),lt[e]?lt[e].push(t):lt[e]=[t];var n=mt.get(e);n&&n.isResolved()&&t(n.get(),n.url)}function At(e,t){if(e!=null){var n=e.length;if(typeof n=="undefined"||h.call(e)=="[object Function]")return[e];t||(t=0);if(n-t>0){for(var r=[],i=0,s=t;s<n;)r[i++]=e[s++];return r}}return[]}function Ot(e,t,n){var r=[],i=typeof t=="function";for(var s=0;s<e;s++)r[s]=i?t.call(n,s,r):t;return r}var o="1.4.0",u=Function("return this")(),a=u!==r?u:!1,f=u.document,l=u.location,c=u.process,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty;u=r;var d={},v={},g=function(){return function(){}}(),F=function(){function u(t){var i=this,o,a,c;if(typeof t=="function"||typeof t=="string"){o=f(t,i[n]),c=e+o[n];if(p.call(i,c))return i[c];typeof o[r]=="function"&&(o=o[r]),a=function(e){return o(i(e))}}else{var h=t;if(!h)return I;a=function(e){return h[i(e)]}}return a[n]=s++,a[r]=t,a.__extend__=l,a.as=u,c&&(i[c]=a),a}function a(e){return new Function("object","return object != null ? object."+e+" : object")}function f(e,t){var i=e,f;if(e&&typeof e=="string"){if(p.call(o,e))return o[e];i=o[e]=a(e)}return typeof i!="function"?I:i.__extend__===l?i:p.call(i,t)?i[t]:(f=i[t]=i!==e?i:function(e){return i(e)},f[n]=s++,f[r]=e,f.__extend__=l,f.as=u,f)}function l(e,n){var r=e&&e!==I?f(e,t):I;return n||n===""?(typeof n=="string"&&(n=Bt.formatter(n)),r.as(n)):r}var e="basisGetterId"+m()+"_",t=e+"root",n=e,r=e+"base",i=e+"parent",s=1,o={};return l.ID=n,l.SOURCE=r,l.PARENT=i,l}(),I=function(){var e=function(){};return e[F.ID]=F.ID+"nullGetter",e.__extend__=F,e.as=function(){return e},e}(),$=function(){var e=u.console,t={log:j,info:j,warn:j,error:j};return e&&N(t,function(n){t[n]="bind"in Function.prototype&&typeof e[n]=="function"?Function.prototype.bind.call(e[n],e):function(){Function.prototype.apply.call(e[n],e,arguments)}}),t}(),J=u.setImmediate||u.msSetImmediate,K=u.clearImmediate||u.msSetImmediate;J&&(J=J.bind(u)),K&&(K=K.bind(u)),J||function(){var e=function(){var e={},n=0;return J=function(r){if(typeof r!="function")return;return e[++n]={fn:r,args:At(arguments,1)},t(n),n},K=function(t){delete e[t]},function(t){var n=e[t];n&&(delete e[t],n.fn.apply(undefined,n.args)),Q.process()}}(),t=function(t){setTimeout(function(){e(t)},0)};if(a&&a.process&&typeof c.nextTick=="function")t=function(t){c.nextTick(function(){e(t)})};else{var n=u.postMessage&&!u.importScripts;if(n){var r=u.onmessage;u.onmessage=function(){n=!1},u.postMessage("","*"),u.onmessage=r}if(n){var i={},s=function(t){if(t&&t.source==u){var n=t.data;if(p.call(i,n)){var r=i[n];delete i[n],e(r)}}};u.addEventListener?u.addEventListener("message",s,!0):u.attachEvent("onmessage",s),t=function(e){var t=m(32);i[t]=e,u.postMessage(t,"*")}}else if(u.MessageChannel){var o=new u.MessageChannel;o.port1.onmessage=function(t){e(t.data)},t=function(e){o.port2.postMessage(e)}}else{var l=function(){return f.createElement("script")};if(f&&"onreadystatechange"in l()){var h=t;t=function d(n){typeof Ut!="undefined"&&(t=h,Ut.head.ready(function(){t=function(t){var n=l();n.onreadystatechange=function(){n.onreadystatechange=null,Ut.remove(n),n=null,e(t)},Ut.head.add(n)}})),t===d?h(n):t(n)}}}}}();var Q=function(){function r(){try{t=!0;var r;while(r=e.shift())r.fn.call(r.context)}finally{t=!1,e.length&&(n=J(i))}}function i(){n&&(n=K(n)),e.length&&r()}var e=[],t=!1,n,s=function(t,r){return e.push({fn:t,context:r}),n||(n=J(i)),!0};return s.process=function(){t||i()},s.schedule=function(e){function r(){var i=J(r);n=!1;for(var s in t){var o=t[s];delete t[s],e(o)}K(i),n||(t={})}var t={},n=!1;return{add:function(e){t[e.basisObjectId]=e,n||(n=Xt.asap(r))},remove:function(e){delete t[e.basisObjectId]}}},s}(),G=function(){var e=0,t={id:e,start:function(){t.id=e++},finish:function(){Q.process(),t.id="unknown"}};return t}(),Y=function(){var e=/^([^\/]+:|\/)/,t=/^[a-zA-Z0-9\-]+:\/?/,n=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,r=/[\?#].*$/,i,s,o;if(a){var u=(c.basisjsBaseURI||require("path").resolve(".")).replace(/\\/g,"/");i=u.replace(/^[^\/]*/,""),s=u.replace(/\/.*/,"")}else i=l.pathname.replace(/[^\/]+$/,""),s=l.protocol+"//"+l.host;return o={baseURI:i,origin:s,normalize:function(e){e=(e||"").replace(t,"/").replace(n,"/").replace(r,"");var i=[],s=e.split("/");for(var o=0;o<s.length;o++)s[o]==".."?(i.length>1||i[0])&&i.pop():(s[o]||!o)&&s[o]!="."&&i.push(s[o]);return i.join("/")||(e[0]==="/"?"/":"")},dirname:function(e){var t=o.normalize(e);return t.replace(/\/([^\/]*)$|^[^\/]+$/,"")||(t[0]=="/"?"/":".")},extname:function(e){var t=o.normalize(e).match(/[^\/](\.[^\/\.]*)$/);return t?t[1]:""},basename:function(e,t){var n=o.normalize(e).match(/[^\\\/]*$/);return n=n?n[0]:"",t==o.extname(n)&&(n=n.substring(0,n.length-t.length)),n},resolve:function(){var t=At(arguments).reverse(),n=[],r=!1;for(var s=0;!r&&s<t.length;s++)typeof t[s]=="string"&&(n.unshift(t[s]),r=e.test(t[s]));return r||n.unshift(i=="/"?"":i),o.normalize(n.join("/"))},relative:function(e,t){typeof t!="string"&&(t=e,e=i),e=o.normalize(e),t=o.normalize(t);if(e[0]=="/"&&t[0]!="/")return e;if(t[0]=="/"&&e[0]!="/")return t;var n=e.replace(/^\/$/,"").split(/\//),r=t.replace(/^\/$/,"").split(/\//),s=[],u=0;while(r[u]==n[u]&&typeof n[u]=="string")u++;for(var a=n.length-u;a>0;a--)s.push("..");return s.concat(r.slice(u).filter(Boolean)).join("/")}},o}(),Z=i||"",et=s||{implicitExt:!0,modules:{},autoload:["./0.js"]},rt=function(){function r(e){return typeof e=="function"&&!!e.basisClassId_}function i(e){var t=this;while(t&&t!==e)t=t.superClass_;return t===e}function o(s){var f=t++;typeof s!="function"&&(s=a);var l=function(){};l.prototype=s.prototype;var c=new l,h={basisClassId_:f,superClass_:s,extendConstructor_:!!s.extendConstructor_,isSubclassOf:i,subclass:function(){return o.apply(null,[v].concat(At(arguments)))},extend:u,__extend__:function(e){return e&&e!==n&&(typeof e=="object"||typeof e=="function"&&!r(e))?a.create.call(null,v,e):e},prototype:c};for(var p=1,d;d=arguments[p];p++)h.extend(d);var v=h.extendConstructor_?function(t){this.basisObjectId=e.id++;var n;for(var r in t)n=this[r],this[r]=n&&n.__extend__?n.__extend__(t[r]):t[r];this.init(),this.postInit()}:function(){this.basisObjectId=e.id++,this.init.apply(this,arguments),this.postInit()};c.constructor=v;for(var m in c)c[m]===n&&(c[m]=v);return y(v,h),v}function u(e){var t=this.prototype;typeof e=="function"&&!r(e)&&(e=e(this.superClass_.prototype,S(t))),e.prototype&&(e=e.prototype);for(var n in e){var i=e[n],o=t[n];n=="className"||n=="extendConstructor_"?this[n]=i:o&&o.__extend__?t[n]=o.__extend__(i):t[n]=i}return s&&e[n="toString"]!==h&&(t[n]=e[n]),this}var e={id:1},t=1,n={},s=function(){for(var e in{toString:1})return!1;return!0}(),a=y(o,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var e in this)p.call(this,e)&&(this[e]=null);this.destroy=j}}}),f=function(e,t){return{__extend__:function(e){if(!e)return e;if(e&&e.__extend__)return e;var n=function(){};n.prototype=this;var r=new n;return t(r,e),r}}.__extend__(e||{})},l=function(e){return f(e,y,"extensibleProperty")},c=function(e){return f(e,function(e,t){for(var n in t)if(p.call(t,n)){var r=e[n],i=t[n];i?e[n]=r&&r.__extend__?r.__extend__(i):l(i):e[n]=null}},"nestedExtendProperty")},d=function(e,t){var n=function(t){var r={__extend__:n};if(t){if(t.__extend__)return t;for(var i in t)p.call(t,i)&&t[i]&&(r[i]=e)}return r};return n(t||{})};return y(a,{SELF:n,create:o,isClass:r,customExtendProperty:f,extensibleProperty:l,nestedExtendProperty:c,oneFunctionProperty:d})}(),it=rt(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(e,t,n,r){e.attach(t,n,r)},detach:function(e,t,n){e.detach(t,n)},get:function(e){return e.get()}},init:function(e){this.value=e},get:function(){return this.value},set:function(e){this.value!==e&&(this.value=e,this.apply())},attach:function(e,t,n){this.handler={fn:e,context:t,destroy:n||null,handler:this.handler}},detach:function(e,t){var n=this,r;while(r=n,n=n.handler)if(n.fn===e&&n.context===t){n.fn=j,n.destroy=n.destroy&&j,r.handler=n.handler;return}},apply:function(){var e=this.get(),t=this;while(t=t.handler)t.fn.call(t.context,e)},deferred:function(){var e=this.deferredToken;return e||(e=this.deferredToken=new ot(this.get()),this.attach(e.set,e)),e},as:function(e){var t=new it,n=function(t){this.set(e.call(this,t))};return typeof e!="function"&&(e=F(e)),n.call(t,this.get()),this.attach(n,t,t.destroy),t.attach(j,this,function(){this.detach(n,t)}),t},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null),this.attach=j,this.detach=j;var e=this;while(e=e.handler)e.destroy&&e.destroy.call(e.context);this.handler=null,this.value=null}}),st=Q.schedule(function(e){e.apply()}),ot=it.subclass({className:"basis.DeferredToken",set:function(e){this.value!==e&&(this.value=e,st.add(this))},deferred:function(){return this}}),ut={},at={},ft={},lt={},ct=1;(function(){var e=typeof t!="undefined"?t:null;if(e)for(var n in e)ft[Y.resolve(n)]=e[n]})();var pt=function(e,t){var n=e.match(/^([a-zA-Z0-9\_\-]+):/);if(n){var r=n[1];r in St==0&&(St[r]=Y.baseURI+r+"/"),e=St[r]+Y.normalize("./"+e.substr(n[0].length))}else e=Y.resolve(t,e);return e},dt=function(e,t){if(t||!p.call(ft,e)){var n="";if(!a){var r=new u.XMLHttpRequest;r.open("GET",e,!1),r.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString()),r.setRequestHeader("X-Basis-Resource",1),r.send(""),r.status>=200&&r.status<400&&(n=r.responseText)}else try{n=c.basisjsReadFile?c.basisjsReadFile(e):require("fs").readFileSync(e,"utf-8")}catch(i){}ft[e]=n}return ft[e]},vt=function(e,t){var n=Y.extname(e),r=mt.extensions[n],i=arguments.length>1,s=!1,o=!1,u;i&&(e+="#virtual");var a=function(){if(s)return t;var n=i?t:dt(e);return r?o||(o=!0,t=r(n,e)):t=n,s=!0,ht(a),a.apply(),t};return y(a,y(new it,{url:e,type:n,virtual:i,fetch:function(){return a()},toString:function(){return"[basis.resource "+e+"]"},isResolved:function(){return s},update:function(n){if(!s||i||n!=ft[e])i||(ft[e]=n),r?(!o&&i&&(t=n),o&&!r.permanent&&(t=r(n,e,t),ht(a),a.apply())):(t=n,s=!0,ht(a),a.apply())},reload:function(){if(i)return;var t=ft[e],n=dt(e,!0);n!=t&&(s=!1,a.update(n))},get:function(n){return i&&n?r?u:t:n?dt(e):a()},ready:function(e,t){if(s){e.call(t,a());if(r&&r.permanent)return}return a.attach(e,t),a}})),ut[e]=a,at[e]=a,a},mt=function(e,t){var n=t?t+"\0"+e:e,r=at[n];if(!r){var i=pt(e,t,"basis.resource('{url}')");r=ut[i]||vt(i),at[n]=r}return r};y(mt,{resolveURI:pt,isResource:function(e){return e?ut[e.url]===e:!1},isResolved:function(e){var t=mt.get(e);return t?t.isResolved():!1},exists:function(e){return p.call(ut,pt(e,null,"basis.resource.exists('{url}')"))},get:function(e){return e=pt(e,null,"basis.resource.get('{url}')"),mt.exists(e)?mt(e):null},getFiles:function(e){return e?w(ft):w(ut).filter(function(e){return!ut[e].virtual})},virtual:function(e,t,n){return vt((n?n+":":Y.normalize(Y.baseURI=="/"?"":Y.baseURI)+"/")+"virtual-resource"+ct++ +"."+e,t)},extensions:{".js":y(function(t,n){var r=Et[n];if(!r){var i=!0,s=(Y.dirname(n)+"/"+Y.basename(n,Y.extname(n))).replace(/^\/\//,"/");for(var o in St){var u=St[o]+o+"/";if(s.substr(0,u.length)==u){i=!1,s=s.substr(St[o].length);break}}r=s.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,"."),i&&(r="implicit."+r)}var o=Ct(r);return o.inited||(o.inited=!0,o.exports=yt({path:o.path,exports:o.exports},n,t).exports,o.exports&&o.exports.constructor===Object&&et.implicitExt&&b(o,o.exports)),o.exports},{permanent:!0}),".css":function(t,n,r){return r||(r=new Wt(n)),r.updateCssText(t),r},".json":function(t){if(typeof t=="object")return t;var n;try{t=String(t),n=Xt.json.parse(t)}catch(r){}return n||null}}});var yt=function(e,t,n){var r=Y.dirname(t),i=n;return e.exports||(e.exports={}),typeof i!="function"&&(i=gt(t,["exports","module","basis","global","__filename","__dirname","resource","require","asset"],n)),typeof i=="function"&&i.call(e.exports,e.exports,e,Xt,u,t,r,function(e){return mt(e,r)},function(e){return kt(e,r)},function(e){return pt(e,r,"asset('{url}')")}),e},bt={},wt={},Et={},St={};N(et.modules,function(e,t){St[e]=t.path+"/",wt[e]=t.filename,Et[t.filename]=e}),function(t){var t=typeof e!="undefined"?e:null;if(t)for(var n in t){var r=Y.resolve(n),i=t[n];Et[r]=i,wt[i]=r}}();var xt=rt(null,{className:"basis.Namespace",init:function(e){this.name=e,this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(e){return y(this.exports,e),b(this,e)}}),kt=function(e,t){return!/[^a-z0-9_\.]/i.test(e)&&Y.extname(e)!=".js"?e=Tt(e):/[\?#]/.test(e)||(e=pt(e,t,"basis.require('{url}')")),mt(e).fetch()};b(Function.prototype,{bind:function(e){var t=this,n=At(arguments,1);return n.length?function(){return t.apply(e,n.concat.apply(n,arguments))}:function(){return t.apply(e,arguments)}}}),b(Array,{isArray:function(e){return h.call(e)==="[object Array]"}}),b(Array.prototype,{indexOf:function(e,t){t=parseInt(t,10)||0;if(t<0)return-1;for(;t<this.length;t++)if(this[t]===e)return t;return-1},lastIndexOf:function(e,t){var n=this.length;t=parseInt(t,10),isNaN(t)||t>=n?t=n-1:t=(t+n)%n;for(;t>=0;t--)if(this[t]===e)return t;return-1},forEach:function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)},every:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0},some:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1},filter:function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)r in this&&e.call(t,this[r],r,this)&&n.push(this[r]);return n},map:function(e,t){var n=[];for(var r=0,i=this.length;r<i;r++)r in this&&(n[r]=e.call(t,this[r],r,this));return n},reduce:function(e,t){var n=this.length,r=arguments.length;if(n==0&&r==1)throw new TypeError;var i,s=0;r>1&&(i=t,s=1);for(var o=0;o<n;o++)o in this&&(s++?i=e.call(null,i,this[o],o,this):i=this[o]);return i}});var Mt={from:At,create:Ot,flatten:function(e){return e.concat.apply([],e)},repeat:function(e,t){return Mt.flatten(Ot(parseInt(t,10)||0,e))},search:function(e,t,n,r){e.lastSearchIndex=-1,n=F(n||_);for(var i=parseInt(r,10)||0,s=e.length;i<s;i++)if(n(e[i])===t)return e[e.lastSearchIndex=i]},lastSearch:function(e,t,n,r){e.lastSearchIndex=-1,n=F(n||_);var i=e.length,s=isNaN(r)||r==null?i:parseInt(r,10);for(var o=s>i?i:s;o-->0;)if(n(e[o])===t)return e[e.lastSearchIndex=o]},add:function(e,t){return e.indexOf(t)==-1&&!!e.push(t)},remove:function(e,t){var n=e.indexOf(t);return n!=-1&&!!e.splice(n,1)},has:function(e,t){return e.indexOf(t)!=-1},sortAsObject:function(){return Mt.sort.apply(this,arguments)},sort:function(e,t,n,r){return t=F(t),r=r?-1:1,e.map(function(e,n){return{i:n,v:t(e)}}).sort(n||function(e,t){return r*(e.v>t.v||-(e.v<t.v)||(e.i>t.i?1:-1))}).map(function(e){return this[e.i]},e)}};if(![1,2].splice(1).length){var _t=Array.prototype.splice;Array.prototype.splice=function(){var e=At(arguments);return e.length<2&&(e[1]=this.length),_t.apply(this,e)}}var Dt=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,Pt=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi,Ht={};b(String,{toLowerCase:function(e){return String(e).toLowerCase()},toUpperCase:function(e){return String(e).toUpperCase()},trim:function(e){return String(e).trim()},trimLeft:function(e){return String(e).trimLeft()},trimRight:function(e){return String(e).trimRight()}}),b(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var Bt={toObject:function(e,t){try{return(new Function("return 0,"+e))()}catch(n){if(t)throw n}},repeat:function(e,t){return(new Array(parseInt(t,10)+1||0)).join(e)},qw:function(e){var t=e.trim();return t?t.split(/\s+/):[]},forRegExp:function(e){return e.replace(Dt,"\\$1")},format:function(e,t){var n=At(arguments,1);return typeof t=="object"&&y(n,t),e.replace(Pt,function(e,t,r,i,s){var o=t in n?n[t]:s?"":e;return r&&!isNaN(o)?(o=Number(o),r=="."?o.toFixed(i):It.lead(o,i)):o})},formatter:function(e){e=String(e);if(p.call(Ht,e))return Ht[e];var t=function(t){return Bt.format(e,t)};return Ht[e]=t,t},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},dasherize:function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},isEmpty:function(e){return e==null||String(e)==""},isNotEmpty:function(e){return e!=null&&String(e)!=""}};if("|||".split(/\|/).length+"|||".split(/(\|)/).length!=11){var jt=String.prototype.split;String.prototype.split=function(e,t){if(!e||e instanceof RegExp==0||e.source=="")return jt.call(this,e,t);var n=[],r=0,i;e.global||(e=new RegExp(e.source,/\/([mi]*)$/.exec(e)[1]+"g"));while(i=e.exec(this))i[0]=this.substring(r,i.index),n.push.apply(n,i),r=e.lastIndex;return n.push(this.substr(r)),n}}if("12".substr(-1)!="2"){var Ft=String.prototype.substr;String.prototype.substr=function(e,t){return Ft.call(this,e<0?Math.max(0,this.length+e):e,t)}}var It={fit:function(e,t,n){return!isNaN(t)&&e<t?Number(t):!isNaN(n)&&e>n?Number(n):e},lead:function(e,t,n){return String(e).replace(/\d+/,function(e){return(t-=e.length-1)>1?(new Array(t)).join(n||0)+e:e})},group:function(e,t,n){return String(e).replace(/\d+/,function(e){return e.replace(/\d/g,function(r,i){return!i+(e.length-i)%(t||3)?r:(n||" ")+r})})},format:function(e,t,n,r,i,s){var o=e.toFixed(t);if(n||s)o=o.replace(/(\d+)(\.?)/,function(e,t,r){return(n?Xt.number.group(Number(t),3,n):t)+(r?s||r:"")});return r&&(o=o.replace(/^-?/,"$&"+(r||""))),o+(i||"")}};b(Date,{now:function(){return Number(new Date)}});var qt=function(){function r(){var e;n&&(n=K(n)),t.length>1&&(n=J(r));while(e=t.shift())e[0].call(e[1]);n=K(n),Q.process()}function i(){e++||r()}function s(){try{f.documentElement.doScroll("left"),i()}catch(e){setTimeout(s,1)}}var e=!f||f.readyState=="complete",t=[],n;if(!e)if(f.addEventListener)f.addEventListener("DOMContentLoaded",i,!1),u.addEventListener("load",i,!1);else{f.attachEvent("onreadystatechange",i),u.attachEvent("onload",i);try{!u.frameElement&&f.documentElement.doScroll&&s()}catch(o){}}return function(i,s){!t.length&&e&&!n&&(n=J(r)),t.push([i,s])}}(),Rt=function(){return"addEventListener"in u?function(e,t){u.addEventListener("unload",function(n){e.call(t||null,n||u.event)},!1)}:"attachEvent"in u?function(e,t){u.attachEvent("onunload",function(n){e.call(t||null,n||u.event)})}:j}(),Ut=function(){function r(e){if(f&&!t[e]){t[e]=f[e]||f.getElementsByTagName(e)[0];if(t[e]){var r=n[e];delete n[e];for(var i=0,s;s=r[i];i++)s[0].call(s[1],t[e])}}return t[e]}function i(){var e=this[0],t=this[1],s=this[2];o(t);var u=r(e);if(u){s===!0&&(s=u.firstChild);if(!s||s.parentNode!==u)s=null;u.insertBefore(t,s)}else n[e].push([i,[e,t,s]])}function s(e,r,i){n[e]?n[e].push([r,i]):r.call(i,t[e])}function o(e){for(var t in n){var r=Mt.search(n[t],e,function(e){return e[1]&&e[1][1]});r&&Mt.remove(n[t],r)}e&&e.parentNode&&e.parentNode.nodeType==1&&e.parentNode.removeChild(e)}function u(){e&&r("head")&&r("body")&&(e=clearInterval(e))}var e,t={},n={head:[],body:[]};return f&&(!r("head")||!r("body"))&&(e=setInterval(u,5),qt(u)),{head:{ready:function(e,t){s("head",e,t)},add:function(e,t){i.call(["head",e,t])}},body:{ready:function(e,t){s("body",e,t)},add:function(e,t){i.call(["body",e,t])}},remove:o}}(),zt=function(){function t(){n.globalDestroy=!0,n.add=j,n.remove=j;var t;while(t=e.pop())if(typeof t.destroy=="function")try{t.destroy()}catch(r){}else for(var i in t)t[i]=null;e=[]}var e=[];if(Rt===j)return{add:j,remove:j};Rt(t);var n={add:function(t){t!=null&&e.push(t)},remove:function(t){Mt.remove(e,t)}};return n}(),Wt=function(){function n(e){t.setAttribute("href",e),Ut.head.add(t,!0)}function r(){t.setAttribute("href",l.href),Ut.remove(t)}function i(){n(this.baseURI),this.element||(this.element=f.createElement("style"),e||this.element.appendChild(f.createTextNode(""))),Ut.head.add(this.element),this.syncCssText(),r()}var e=function(){try{return!f.createElement("style").appendChild(f.createTextNode(""))}catch(e){return!0}}(),t=f&&f.createElement("base");return rt(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:undefined,element:null,init:function(e){this.url=e,this.baseURI=Y.dirname(e)+"/"},updateCssText:function(e){this.cssText!=e&&(this.cssText=e,this.inUse&&this.element&&(n(this.baseURI),this.syncCssText(),r()))},syncCssText:e?function(){this.element.styleSheet.cssText=this.cssText}:function(){var e=this.cssText;this.element.firstChild.nodeValue=e},startUse:function(){this.inUse||Ut.head.ready(i,this),this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&Ut.remove(this.element))},destroy:function(){this.element&&Ut.remove(this.element),this.element=null,this.cssText=null}})}(),Xt=Ct("basis").extend({version:o,NODE_ENV:a,config:et,createSandbox:function(e){return n(u,Z,b({noConflict:!0},e))},dev:(new xt("basis.dev")).extend($).extend({warnPropertyAccess:g}),resolveNSFilename:Tt,patch:Lt,namespace:Ct,require:kt,resource:mt,asset:function(e){return pt(e,null,"basis.asset('{url}')")},setImmediate:J,clearImmediate:K,nextTick:function(){J.apply(null,arguments)},asap:Q,FACTORY:d,PROXY:v,Class:rt,Token:it,DeferredToken:ot,codeFrame:G,ready:qt,teardown:Rt,cleaner:zt,genUID:m,getter:F,console:$,path:Y,doc:Ut,object:{extend:y,complete:b,keys:w,values:E,slice:S,splice:x,merge:T,iterate:N},fn:{$undefined:C,$defined:k,$isNull:L,$isNotNull:A,$isSame:O,$isNotSame:M,$self:_,$const:D,$false:P,$true:H,$null:B,$undef:j,getter:F,nullGetter:I,wrapper:q,factory:W,isFactory:X,lazyInit:R,lazyInitAndRun:U,runOnce:z,publicCallback:V},array:y(At,Mt),string:Bt,number:It,bool:{invert:function(e){return!e}},json:{parse:typeof JSON!="undefined"?JSON.parse:function(e){return Bt.toObject(e,!0)}}});return et.autoload&&!a&&et.autoload.forEach(function(e){kt(e)}),a&&exports&&(exports.basis=Xt),Xt})(this)}).call(this)